/*! For license information please see main.26b2dd6b.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var r=n(853),s=n(43),a=n(950);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(o(e)!==e)throw Error(i(188))}function u(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=u(e)))return t;e=e.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),y=Symbol.for("react.consumer"),w=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var E=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var M=Symbol.iterator;function I(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var _=Symbol.for("react.client.reference");function L(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===_?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case b:return"Fragment";case v:return"Profiler";case g:return"StrictMode";case N:return"Suspense";case k:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case f:return"Portal";case w:return(e.displayName||"Context")+".Provider";case y:return(e._context.displayName||"Context")+".Consumer";case j:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case S:return null!==(t=e.displayName||null)?t:L(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return L(e(t))}catch(n){}}return null}var T=Array.isArray,P=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},O=[],R=-1;function F(e){return{current:e}}function $(e){0>R||(e.current=O[R],O[R]=null,R--)}function B(e,t){R++,O[R]=e.current,e.current=t}var H=F(null),U=F(null),q=F(null),W=F(null);function K(e,t){switch(B(q,t),B(U,e),B(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?su(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=au(t=su(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(H),B(H,e)}function Y(){$(H),$(U),$(q)}function X(e){null!==e.memoizedState&&B(W,e);var t=H.current,n=au(t,e.type);t!==n&&(B(U,e),B(H,n))}function V(e){U.current===e&&($(H),$(U)),W.current===e&&($(W),Xu._currentValue=z)}var Q=Object.prototype.hasOwnProperty,G=r.unstable_scheduleCallback,J=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,se=r.unstable_UserBlockingPriority,ae=r.unstable_NormalPriority,ie=r.unstable_LowPriority,le=r.unstable_IdlePriority,oe=r.log,ce=r.unstable_setDisableYieldValue,de=null,ue=null;function he(e){if("function"===typeof oe&&ce(e),ue&&"function"===typeof ue.setStrictMode)try{ue.setStrictMode(de,e)}catch(t){}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(me(e)/fe|0)|0},me=Math.log,fe=Math.LN2;var be=256,ge=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xe(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var l=134217727&r;return 0!==l?0!==(r=l&~a)?s=ve(r):0!==(i&=l)?s=ve(i):n||0!==(n=l&~e)&&(s=ve(n)):0!==(l=r&~a)?s=ve(l):0!==i?s=ve(i):n||0!==(n=r&~e)&&(s=ve(n)),0===s?0:0!==t&&t!==s&&0===(t&a)&&((a=s&-s)>=(n=t&-t)||32===a&&0!==(4194048&n))?t:s}function ye(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function je(){var e=be;return 0===(4194048&(be<<=1))&&(be=256),e}function Ne(){var e=ge;return 0===(62914560&(ge<<=1))&&(ge=4194304),e}function ke(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Se(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ae(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-pe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ce(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-pe(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function Ee(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Me(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ie(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var _e=Math.random().toString(36).slice(2),Le="__reactFiber$"+_e,Te="__reactProps$"+_e,Pe="__reactContainer$"+_e,De="__reactEvents$"+_e,ze="__reactListeners$"+_e,Oe="__reactHandles$"+_e,Re="__reactResources$"+_e,Fe="__reactMarker$"+_e;function $e(e){delete e[Le],delete e[Te],delete e[De],delete e[ze],delete e[Oe]}function Be(e){var t=e[Le];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pe]||n[Le]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=xu(e);null!==e;){if(n=e[Le])return n;e=xu(e)}return t}n=(e=n).parentNode}return null}function He(e){if(e=e[Le]||e[Pe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ue(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(i(33))}function qe(e){var t=e[Re];return t||(t=e[Re]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[Fe]=!0}var Ke=new Set,Ye={};function Xe(e,t){Ve(e,t),Ve(e+"Capture",t)}function Ve(e,t){for(Ye[e]=t,e=0;e<t.length;e++)Ke.add(t[e])}var Qe,Ge,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(s=t,Q.call(et,s)||!Q.call(Ze,s)&&(Je.test(s)?et[s]=!0:(Ze[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function st(e){if(void 0===Qe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Qe=t&&t[1]||"",Ge=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Qe+e+Ge}var at=!1;function it(e,t){if(!e||at)return"";at=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var r=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(a){r=a}e.call(n.prototype)}}else{try{throw Error()}catch(i){r=i}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(l){if(l&&r&&"string"===typeof l.stack)return[l.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),i=a[0],l=a[1];if(i&&l){var o=i.split("\n"),c=l.split("\n");for(s=r=0;r<o.length&&!o[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===o.length||s===c.length)for(r=o.length-1,s=c.length-1;1<=r&&0<=s&&o[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(o[r]!==c[s]){if(1!==r||1!==s)do{if(r--,0>--s||o[r]!==c[s]){var d="\n"+o[r].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=r&&0<=s);break}}}finally{at=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?st(n):""}function lt(e){switch(e.tag){case 26:case 27:case 5:return st(e.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return it(e.type,!1);case 11:return it(e.type.render,!1);case 1:return it(e.type,!0);case 31:return st("Activity");default:return""}}function ot(e){try{var t="";do{t+=lt(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ut(e){e._valueTracker||(e._valueTracker=function(e){var t=dt(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=dt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var mt=/[\n"\\]/g;function ft(e){return e.replace(mt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function bt(e,t,n,r,s,a,i,l){e.name="",null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?vt(e,i,ct(t)):null!=n?vt(e,i,ct(n)):null!=r&&e.removeAttribute("value"),null==s&&null!=a&&(e.defaultChecked=!!a),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=l&&"function"!==typeof l&&"symbol"!==typeof l&&"boolean"!==typeof l?e.name=""+ct(l):e.removeAttribute("name")}function gt(e,t,n,r,s,a,i,l){if(null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.type=a),null!=t||null!=n){if(!("submit"!==a&&"reset"!==a||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:s)&&"symbol"!==typeof r&&!!r,e.checked=l?e.checked:!!r,e.defaultChecked=!!r,null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.name=i)}function vt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function xt(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function yt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(i(92));if(T(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function jt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Nt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Nt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function St(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(i(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&kt(e,s,r)}else for(var a in t)t.hasOwnProperty(a)&&kt(e,a,t[a])}function At(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Et=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mt(e){return Et.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var It=null;function _t(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Lt=null,Tt=null;function Pt(e){var t=He(e);if(t&&(e=t.stateNode)){var n=e[Te]||null;e:switch(e=t.stateNode,t.type){case"input":if(bt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ft(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[Te]||null;if(!s)throw Error(i(90));bt(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":yt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&xt(e,!!n.multiple,t,!1)}}}var Dt=!1;function zt(e,t,n){if(Dt)return e(t,n);Dt=!0;try{return e(t)}finally{if(Dt=!1,(null!==Lt||null!==Tt)&&(Bc(),Lt&&(t=Lt,e=Tt,Tt=Lt=null,Pt(t),e)))for(t=0;t<e.length;t++)Pt(e[t])}}function Ot(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Te]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Rt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ft=!1;if(Rt)try{var $t={};Object.defineProperty($t,"passive",{get:function(){Ft=!0}}),window.addEventListener("test",$t,$t),window.removeEventListener("test",$t,$t)}catch(Th){Ft=!1}var Bt=null,Ht=null,Ut=null;function qt(){if(Ut)return Ut;var e,t,n=Ht,r=n.length,s="value"in Bt?Bt.value:Bt.textContent,a=s.length;for(e=0;e<r&&n[e]===s[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===s[a-t];t++);return Ut=s.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Yt(){return!1}function Xt(e){function t(t,n,r,s,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Kt:Yt,this.isPropagationStopped=Yt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Vt,Qt,Gt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Xt(Jt),en=h({},Jt,{view:0,detail:0}),tn=Xt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gt&&(Gt&&"mousemove"===e.type?(Vt=e.screenX-Gt.screenX,Qt=e.screenY-Gt.screenY):Qt=Vt=0,Gt=e),Vt)},movementY:function(e){return"movementY"in e?e.movementY:Qt}}),rn=Xt(nn),sn=Xt(h({},nn,{dataTransfer:0})),an=Xt(h({},en,{relatedTarget:0})),ln=Xt(h({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),on=Xt(h({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Xt(h({},Jt,{data:0})),dn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},un={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function mn(){return pn}var fn=Xt(h({},en,{key:function(e){if(e.key){var t=dn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?un[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mn,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),bn=Xt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gn=Xt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mn})),vn=Xt(h({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),xn=Xt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),yn=Xt(h({},Jt,{newState:0,oldState:0})),wn=[9,13,27,32],jn=Rt&&"CompositionEvent"in window,Nn=null;Rt&&"documentMode"in document&&(Nn=document.documentMode);var kn=Rt&&"TextEvent"in window&&!Nn,Sn=Rt&&(!jn||Nn&&8<Nn&&11>=Nn),An=String.fromCharCode(32),Cn=!1;function En(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var In=!1;var _n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!_n[e.type]:"textarea"===t}function Tn(e,t,n,r){Lt?Tt?Tt.push(r):Tt=[r]:Lt=r,0<(t=qd(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Pn=null,Dn=null;function zn(e){zd(e,0)}function On(e){if(ht(Ue(e)))return e}function Rn(e,t){if("change"===e)return t}var Fn=!1;if(Rt){var $n;if(Rt){var Bn="oninput"in document;if(!Bn){var Hn=document.createElement("div");Hn.setAttribute("oninput","return;"),Bn="function"===typeof Hn.oninput}$n=Bn}else $n=!1;Fn=$n&&(!document.documentMode||9<document.documentMode)}function Un(){Pn&&(Pn.detachEvent("onpropertychange",qn),Dn=Pn=null)}function qn(e){if("value"===e.propertyName&&On(Dn)){var t=[];Tn(t,Dn,e,_t(e)),zt(zn,t)}}function Wn(e,t,n){"focusin"===e?(Un(),Dn=n,(Pn=t).attachEvent("onpropertychange",qn)):"focusout"===e&&Un()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return On(Dn)}function Yn(e,t){if("click"===e)return On(t)}function Xn(e,t){if("input"===e||"change"===e)return On(t)}var Vn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Qn(e,t){if(Vn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Q.call(t,s)||!Vn(e[s],t[s]))return!1}return!0}function Gn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=Gn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Gn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Rt&&"documentMode"in document&&11>=document.documentMode,rr=null,sr=null,ar=null,ir=!1;function lr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ir||null==rr||rr!==pt(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ar&&Qn(ar,r)||(ar=r,0<(r=qd(sr,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function or(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:or("Animation","AnimationEnd"),animationiteration:or("Animation","AnimationIteration"),animationstart:or("Animation","AnimationStart"),transitionrun:or("Transition","TransitionRun"),transitionstart:or("Transition","TransitionStart"),transitioncancel:or("Transition","TransitionCancel"),transitionend:or("Transition","TransitionEnd")},dr={},ur={};function hr(e){if(dr[e])return dr[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in ur)return dr[e]=n[t];return e}Rt&&(ur=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var pr=hr("animationend"),mr=hr("animationiteration"),fr=hr("animationstart"),br=hr("transitionrun"),gr=hr("transitionstart"),vr=hr("transitioncancel"),xr=hr("transitionend"),yr=new Map,wr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){yr.set(e,t),Xe(t,[e])}wr.push("scrollEnd");var Nr=new WeakMap;function kr(e,t){if("object"===typeof e&&null!==e){var n=Nr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ot(t)},Nr.set(e,t),t)}return{value:e,source:t,stack:ot(t)}}var Sr=[],Ar=0,Cr=0;function Er(){for(var e=Ar,t=Cr=Ar=0;t<e;){var n=Sr[t];Sr[t++]=null;var r=Sr[t];Sr[t++]=null;var s=Sr[t];Sr[t++]=null;var a=Sr[t];if(Sr[t++]=null,null!==r&&null!==s){var i=r.pending;null===i?s.next=s:(s.next=i.next,i.next=s),r.pending=s}0!==a&&Lr(n,s,a)}}function Mr(e,t,n,r){Sr[Ar++]=e,Sr[Ar++]=t,Sr[Ar++]=n,Sr[Ar++]=r,Cr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ir(e,t,n,r){return Mr(e,t,n,r),Tr(e)}function _r(e,t){return Mr(e,null,null,t),Tr(e)}function Lr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(s=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,s&&null!==t&&(s=31-pe(n),null===(r=(e=a.hiddenUpdates)[s])?e[s]=[t]:r.push(t),t.lane=536870912|n),a):null}function Tr(e){if(50<Lc)throw Lc=0,Tc=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Pr={};function Dr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(e,t,n,r){return new Dr(e,t,n,r)}function Or(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rr(e,t){var n=e.alternate;return null===n?((n=zr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Fr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function $r(e,t,n,r,s,a){var l=0;if(r=e,"function"===typeof e)Or(e)&&(l=1);else if("string"===typeof e)l=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=zr(31,n,t,s)).elementType=C,e.lanes=a,e;case b:return Br(n.children,s,a,t);case g:l=8,s|=24;break;case v:return(e=zr(12,n,t,2|s)).elementType=v,e.lanes=a,e;case N:return(e=zr(13,n,t,s)).elementType=N,e.lanes=a,e;case k:return(e=zr(19,n,t,s)).elementType=k,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:case w:l=10;break e;case y:l=9;break e;case j:l=11;break e;case S:l=14;break e;case A:l=16,r=null;break e}l=29,n=Error(i(130,null===e?"null":typeof e,"")),r=null}return(t=zr(l,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Br(e,t,n,r){return(e=zr(7,e,r,t)).lanes=n,e}function Hr(e,t,n){return(e=zr(6,e,null,t)).lanes=n,e}function Ur(e,t,n){return(t=zr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qr=[],Wr=0,Kr=null,Yr=0,Xr=[],Vr=0,Qr=null,Gr=1,Jr="";function Zr(e,t){qr[Wr++]=Yr,qr[Wr++]=Kr,Kr=e,Yr=t}function es(e,t,n){Xr[Vr++]=Gr,Xr[Vr++]=Jr,Xr[Vr++]=Qr,Qr=e;var r=Gr;e=Jr;var s=32-pe(r)-1;r&=~(1<<s),n+=1;var a=32-pe(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Gr=1<<32-pe(t)+s|n<<s|r,Jr=a+e}else Gr=1<<a|n<<s|r,Jr=e}function ts(e){null!==e.return&&(Zr(e,1),es(e,1,0))}function ns(e){for(;e===Kr;)Kr=qr[--Wr],qr[Wr]=null,Yr=qr[--Wr],qr[Wr]=null;for(;e===Qr;)Qr=Xr[--Vr],Xr[Vr]=null,Jr=Xr[--Vr],Xr[Vr]=null,Gr=Xr[--Vr],Xr[Vr]=null}var rs=null,ss=null,as=!1,is=null,ls=!1,os=Error(i(519));function cs(e){throw fs(kr(Error(i(418,"")),e)),os}function ds(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Le]=e,t[Te]=r,n){case"dialog":Od("cancel",t),Od("close",t);break;case"iframe":case"object":case"embed":Od("load",t);break;case"video":case"audio":for(n=0;n<Pd.length;n++)Od(Pd[n],t);break;case"source":Od("error",t);break;case"img":case"image":case"link":Od("error",t),Od("load",t);break;case"details":Od("toggle",t);break;case"input":Od("invalid",t),gt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ut(t);break;case"select":Od("invalid",t);break;case"textarea":Od("invalid",t),wt(t,r.value,r.defaultValue,r.children),ut(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Qd(t.textContent,n)?(null!=r.popover&&(Od("beforetoggle",t),Od("toggle",t)),null!=r.onScroll&&Od("scroll",t),null!=r.onScrollEnd&&Od("scrollend",t),null!=r.onClick&&(t.onclick=Gd),t=!0):t=!1,t||cs(e)}function us(e){for(rs=e.return;rs;)switch(rs.tag){case 5:case 13:return void(ls=!1);case 27:case 3:return void(ls=!0);default:rs=rs.return}}function hs(e){if(e!==rs)return!1;if(!as)return us(e),as=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||iu(e.type,e.memoizedProps)),t=!t),t&&ss&&cs(e),us(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ss=gu(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ss=null}}else 27===n?(n=ss,pu(e.type)?(e=vu,vu=null,ss=e):ss=n):ss=rs?gu(e.stateNode.nextSibling):null;return!0}function ps(){ss=rs=null,as=!1}function ms(){var e=is;return null!==e&&(null===xc?xc=e:xc.push.apply(xc,e),is=null),e}function fs(e){null===is?is=[e]:is.push(e)}var bs=F(null),gs=null,vs=null;function xs(e,t,n){B(bs,t._currentValue),t._currentValue=n}function ys(e){e._currentValue=bs.current,$(bs)}function ws(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function js(e,t,n,r){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var a=s.dependencies;if(null!==a){var l=s.child;a=a.firstContext;e:for(;null!==a;){var o=a;a=s;for(var c=0;c<t.length;c++)if(o.context===t[c]){a.lanes|=n,null!==(o=a.alternate)&&(o.lanes|=n),ws(a.return,n,e),r||(l=null);break e}a=o.next}}else if(18===s.tag){if(null===(l=s.return))throw Error(i(341));l.lanes|=n,null!==(a=l.alternate)&&(a.lanes|=n),ws(l,n,e),l=null}else l=s.child;if(null!==l)l.return=s;else for(l=s;null!==l;){if(l===e){l=null;break}if(null!==(s=l.sibling)){s.return=l.return,l=s;break}l=l.return}s=l}}function Ns(e,t,n,r){e=null;for(var s=t,a=!1;null!==s;){if(!a)if(0!==(524288&s.flags))a=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var l=s.alternate;if(null===l)throw Error(i(387));if(null!==(l=l.memoizedProps)){var o=s.type;Vn(s.pendingProps.value,l.value)||(null!==e?e.push(o):e=[o])}}else if(s===W.current){if(null===(l=s.alternate))throw Error(i(387));l.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(Xu):e=[Xu])}s=s.return}null!==e&&js(t,e,n,r),t.flags|=262144}function ks(e){for(e=e.firstContext;null!==e;){if(!Vn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ss(e){gs=e,vs=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function As(e){return Es(gs,e)}function Cs(e,t){return null===gs&&Ss(e),Es(e,t)}function Es(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vs){if(null===e)throw Error(i(308));vs=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vs=vs.next=t;return n}var Ms="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Is=r.unstable_scheduleCallback,_s=r.unstable_NormalPriority,Ls={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ts(){return{controller:new Ms,data:new Map,refCount:0}}function Ps(e){e.refCount--,0===e.refCount&&Is(_s,function(){e.controller.abort()})}var Ds=null,zs=0,Os=0,Rs=null;function Fs(){if(0===--zs&&null!==Ds){null!==Rs&&(Rs.status="fulfilled");var e=Ds;Ds=null,Os=0,Rs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var $s=P.S;P.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ds){var n=Ds=[];zs=0,Os=Md(),Rs={status:"pending",value:void 0,then:function(e){n.push(e)}}}zs++,t.then(Fs,Fs)}(0,t),null!==$s&&$s(e,t)};var Bs=F(null);function Hs(){var e=Bs.current;return null!==e?e:rc.pooledCache}function Us(e,t){B(Bs,null===t?Bs.current:t.pool)}function qs(){var e=Hs();return null===e?null:{parent:Ls._currentValue,pool:e}}var Ws=Error(i(460)),Ks=Error(i(474)),Ys=Error(i(542)),Xs={then:function(){}};function Vs(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Qs(){}function Gs(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Qs,Qs),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ea(e=t.reason),e;default:if("string"===typeof t.status)t.then(Qs,Qs);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ea(e=t.reason),e}throw Js=t,Ws}}var Js=null;function Zs(){if(null===Js)throw Error(i(459));var e=Js;return Js=null,e}function ea(e){if(e===Ws||e===Ys)throw Error(i(483))}var ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function sa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function aa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Tr(e),Lr(e,null,n),t}return Mr(e,r,t,n),Tr(e)}function ia(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}function la(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?s=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?s=a=t:a=a.next=t}else s=a=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var oa=!1;function ca(){if(oa){if(null!==Rs)throw Rs}}function da(e,t,n,r){oa=!1;var s=e.updateQueue;ta=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(null!==l){s.shared.pending=null;var o=l,c=o.next;o.next=null,null===i?a=c:i.next=c,i=o;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(null!==a){var u=s.baseState;for(i=0,d=c=o=null,l=a;;){var p=-536870913&l.lane,m=p!==l.lane;if(m?(ac&p)===p:(r&p)===p){0!==p&&p===Os&&(oa=!0),null!==d&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var f=e,b=l;p=t;var g=n;switch(b.tag){case 1:if("function"===typeof(f=b.payload)){u=f.call(g,u,p);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(p="function"===typeof(f=b.payload)?f.call(g,u,p):f)||void 0===p)break e;u=h({},u,p);break e;case 2:ta=!0}}null!==(p=l.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=s.callbacks)?s.callbacks=[p]:m.push(p))}else m={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=m,o=u):d=d.next=m,i|=p;if(null===(l=l.next)){if(null===(l=s.shared.pending))break;l=(m=l).next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}null===d&&(o=u),s.baseState=o,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null===a&&(s.shared.lanes=0),pc|=i,e.lanes=i,e.memoizedState=u}}function ua(e,t){if("function"!==typeof e)throw Error(i(191,e));e.call(t)}function ha(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ua(n[e],t)}var pa=F(null),ma=F(0);function fa(e,t){B(ma,e=uc),B(pa,t),uc=e|t.baseLanes}function ba(){B(ma,uc),B(pa,pa.current)}function ga(){uc=ma.current,$(pa),$(ma)}var va=0,xa=null,ya=null,wa=null,ja=!1,Na=!1,ka=!1,Sa=0,Aa=0,Ca=null,Ea=0;function Ma(){throw Error(i(321))}function Ia(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Vn(e[n],t[n]))return!1;return!0}function _a(e,t,n,r,s,a){return va=a,xa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=null===e||null===e.memoizedState?Wi:Ki,ka=!1,a=n(r,s),ka=!1,Na&&(a=Ta(t,n,r,s)),La(e),a}function La(e){P.H=qi;var t=null!==ya&&null!==ya.next;if(va=0,wa=ya=xa=null,ja=!1,Aa=0,Ca=null,t)throw Error(i(300));null===e||Al||null!==(e=e.dependencies)&&ks(e)&&(Al=!0)}function Ta(e,t,n,r){xa=e;var s=0;do{if(Na&&(Ca=null),Aa=0,Na=!1,25<=s)throw Error(i(301));if(s+=1,wa=ya=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}P.H=Yi,a=t(n,r)}while(Na);return a}function Pa(){var e=P.H,t=e.useState()[0];return t="function"===typeof t.then?$a(t):t,e=e.useState()[0],(null!==ya?ya.memoizedState:null)!==e&&(xa.flags|=1024),t}function Da(){var e=0!==Sa;return Sa=0,e}function za(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Oa(e){if(ja){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ja=!1}va=0,wa=ya=xa=null,Na=!1,Aa=Sa=0,Ca=null}function Ra(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===wa?xa.memoizedState=wa=e:wa=wa.next=e,wa}function Fa(){if(null===ya){var e=xa.alternate;e=null!==e?e.memoizedState:null}else e=ya.next;var t=null===wa?xa.memoizedState:wa.next;if(null!==t)wa=t,ya=e;else{if(null===e){if(null===xa.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(ya=e).memoizedState,baseState:ya.baseState,baseQueue:ya.baseQueue,queue:ya.queue,next:null},null===wa?xa.memoizedState=wa=e:wa=wa.next=e}return wa}function $a(e){var t=Aa;return Aa+=1,null===Ca&&(Ca=[]),e=Gs(Ca,e,t),t=xa,null===(null===wa?t.memoizedState:wa.next)&&(t=t.alternate,P.H=null===t||null===t.memoizedState?Wi:Ki),e}function Ba(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return $a(e);if(e.$$typeof===w)return As(e)}throw Error(i(438,String(e)))}function Ha(e){var t=null,n=xa.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=xa.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},xa.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=E;return t.index++,n}function Ua(e,t){return"function"===typeof t?t(e):t}function qa(e){return Wa(Fa(),ya,e)}function Wa(e,t,n){var r=e.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=n;var s=e.baseQueue,a=r.pending;if(null!==a){if(null!==s){var l=s.next;s.next=a.next,a.next=l}t.baseQueue=s=a,r.pending=null}if(a=e.baseState,null===s)e.memoizedState=a;else{var o=l=null,c=null,d=t=s.next,u=!1;do{var h=-536870913&d.lane;if(h!==d.lane?(ac&h)===h:(va&h)===h){var p=d.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===Os&&(u=!0);else{if((va&p)===p){d=d.next,p===Os&&(u=!0);continue}h={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=h,l=a):c=c.next=h,xa.lanes|=p,pc|=p}h=d.action,ka&&n(a,h),a=d.hasEagerState?d.eagerState:n(a,h)}else p={lane:h,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=p,l=a):c=c.next=p,xa.lanes|=h,pc|=h;d=d.next}while(null!==d&&d!==t);if(null===c?l=a:c.next=o,!Vn(a,e.memoizedState)&&(Al=!0,u&&null!==(n=Rs)))throw n;e.memoizedState=a,e.baseState=l,e.baseQueue=c,r.lastRenderedState=a}return null===s&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ka(e){var t=Fa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var l=s=s.next;do{a=e(a,l.action),l=l.next}while(l!==s);Vn(a,t.memoizedState)||(Al=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ya(e,t,n){var r=xa,s=Fa(),a=as;if(a){if(void 0===n)throw Error(i(407));n=n()}else n=t();var l=!Vn((ya||s).memoizedState,n);if(l&&(s.memoizedState=n,Al=!0),s=s.queue,bi(2048,8,Qa.bind(null,r,s,e),[e]),s.getSnapshot!==t||l||null!==wa&&1&wa.memoizedState.tag){if(r.flags|=2048,pi(9,{destroy:void 0,resource:void 0},Va.bind(null,r,s,n,t),null),null===rc)throw Error(i(349));a||0!==(124&va)||Xa(r,t,n)}return n}function Xa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=xa.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},xa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Va(e,t,n,r){t.value=n,t.getSnapshot=r,Ga(t)&&Ja(e)}function Qa(e,t,n){return n(function(){Ga(t)&&Ja(e)})}function Ga(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vn(e,n)}catch(r){return!0}}function Ja(e){var t=_r(e,2);null!==t&&zc(t,e,2)}function Za(e){var t=Ra();if("function"===typeof e){var n=e;if(e=n(),ka){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:e},t}function ei(e,t,n,r){return e.baseState=n,Wa(e,ya,"function"===typeof r?r:Ua)}function ti(e,t,n,r,s){if(Bi(e))throw Error(i(485));if(null!==(e=t.action)){var a={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==P.T?n(!0):a.isTransition=!1,r(a),null===(n=t.pending)?(a.next=t.pending=a,ni(t,a)):(a.next=n.next,t.pending=n.next=a)}}function ni(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var a=P.T,i={};P.T=i;try{var l=n(s,r),o=P.S;null!==o&&o(i,l),ri(e,t,l)}catch(c){ai(e,t,c)}finally{P.T=a}}else try{ri(e,t,a=n(s,r))}catch(d){ai(e,t,d)}}function ri(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){si(e,t,n)},function(n){return ai(e,t,n)}):si(e,t,n)}function si(e,t,n){t.status="fulfilled",t.value=n,ii(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ni(e,n)))}function ai(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,ii(t),t=t.next}while(t!==r)}e.action=null}function ii(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function li(e,t){return t}function oi(e,t){if(as){var n=rc.formState;if(null!==n){e:{var r=xa;if(as){if(ss){t:{for(var s=ss,a=ls;8!==s.nodeType;){if(!a){s=null;break t}if(null===(s=gu(s.nextSibling))){s=null;break t}}s="F!"===(a=s.data)||"F"===a?s:null}if(s){ss=gu(s.nextSibling),r="F!"===s.data;break e}}cs(r)}r=!1}r&&(t=n[0])}}return(n=Ra()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:t},n.queue=r,n=Ri.bind(null,xa,r),r.dispatch=n,r=Za(!1),a=$i.bind(null,xa,!1,r.queue),s={state:t,dispatch:null,action:e,pending:null},(r=Ra()).queue=s,n=ti.bind(null,xa,s,a,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function ci(e){return di(Fa(),ya,e)}function di(e,t,n){if(t=Wa(e,t,li)[0],e=qa(Ua)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=$a(t)}catch(i){if(i===Ws)throw Ys;throw i}else r=t;var s=(t=Fa()).queue,a=s.dispatch;return n!==t.memoizedState&&(xa.flags|=2048,pi(9,{destroy:void 0,resource:void 0},ui.bind(null,s,n),null)),[r,a,e]}function ui(e,t){e.action=t}function hi(e){var t=Fa(),n=ya;if(null!==n)return di(t,n,e);Fa(),t=t.memoizedState;var r=(n=Fa()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function pi(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=xa.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},xa.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function mi(){return Fa().memoizedState}function fi(e,t,n,r){var s=Ra();r=void 0===r?null:r,xa.flags|=e,s.memoizedState=pi(1|t,{destroy:void 0,resource:void 0},n,r)}function bi(e,t,n,r){var s=Fa();r=void 0===r?null:r;var a=s.memoizedState.inst;null!==ya&&null!==r&&Ia(r,ya.memoizedState.deps)?s.memoizedState=pi(t,a,n,r):(xa.flags|=e,s.memoizedState=pi(1|t,a,n,r))}function gi(e,t){fi(8390656,8,e,t)}function vi(e,t){bi(2048,8,e,t)}function xi(e,t){return bi(4,2,e,t)}function yi(e,t){return bi(4,4,e,t)}function wi(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function ji(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,bi(4,4,wi.bind(null,t,e),n)}function Ni(){}function ki(e,t){var n=Fa();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ia(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Si(e,t){var n=Fa();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ia(t,r[1]))return r[0];if(r=e(),ka){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function Ai(e,t,n){return void 0===n||0!==(1073741824&va)?e.memoizedState=t:(e.memoizedState=n,e=Dc(),xa.lanes|=e,pc|=e,n)}function Ci(e,t,n,r){return Vn(n,t)?n:null!==pa.current?(e=Ai(e,n,r),Vn(e,t)||(Al=!0),e):0===(42&va)?(Al=!0,e.memoizedState=n):(e=Dc(),xa.lanes|=e,pc|=e,t)}function Ei(e,t,n,r,s){var a=D.p;D.p=0!==a&&8>a?a:8;var i=P.T,l={};P.T=l,$i(e,!1,t,n);try{var o=s(),c=P.S;if(null!==c&&c(l,o),null!==o&&"object"===typeof o&&"function"===typeof o.then)Fi(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(o,r),Pc());else Fi(e,t,r,Pc())}catch(d){Fi(e,t,{then:function(){},status:"rejected",reason:d},Pc())}finally{D.p=a,P.T=i}}function Mi(){}function Ii(e,t,n,r){if(5!==e.tag)throw Error(i(476));var s=_i(e).queue;Ei(e,s,t,z,null===n?Mi:function(){return Li(e),n(r)})}function _i(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:z},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Li(e){Fi(e,_i(e).next.queue,{},Pc())}function Ti(){return As(Xu)}function Pi(){return Fa().memoizedState}function Di(){return Fa().memoizedState}function zi(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Pc(),r=aa(t,e=sa(n),n);return null!==r&&(zc(r,t,n),ia(r,t,n)),t={cache:Ts()},void(e.payload=t)}t=t.return}}function Oi(e,t,n){var r=Pc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Bi(e)?Hi(t,n):null!==(n=Ir(e,t,n,r))&&(zc(n,e,r),Ui(n,t,r))}function Ri(e,t,n){Fi(e,t,n,Pc())}function Fi(e,t,n,r){var s={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bi(e))Hi(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=a(i,n);if(s.hasEagerState=!0,s.eagerState=l,Vn(l,i))return Mr(e,t,s,0),null===rc&&Er(),!1}catch(o){}if(null!==(n=Ir(e,t,s,r)))return zc(n,e,r),Ui(n,t,r),!0}return!1}function $i(e,t,n,r){if(r={lane:2,revertLane:Md(),action:r,hasEagerState:!1,eagerState:null,next:null},Bi(e)){if(t)throw Error(i(479))}else null!==(t=Ir(e,n,r,2))&&zc(t,e,2)}function Bi(e){var t=e.alternate;return e===xa||null!==t&&t===xa}function Hi(e,t){Na=ja=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ui(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}var qi={readContext:As,use:Ba,useCallback:Ma,useContext:Ma,useEffect:Ma,useImperativeHandle:Ma,useLayoutEffect:Ma,useInsertionEffect:Ma,useMemo:Ma,useReducer:Ma,useRef:Ma,useState:Ma,useDebugValue:Ma,useDeferredValue:Ma,useTransition:Ma,useSyncExternalStore:Ma,useId:Ma,useHostTransitionStatus:Ma,useFormState:Ma,useActionState:Ma,useOptimistic:Ma,useMemoCache:Ma,useCacheRefresh:Ma},Wi={readContext:As,use:Ba,useCallback:function(e,t){return Ra().memoizedState=[e,void 0===t?null:t],e},useContext:As,useEffect:gi,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,fi(4194308,4,wi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return fi(4194308,4,e,t)},useInsertionEffect:function(e,t){fi(4,2,e,t)},useMemo:function(e,t){var n=Ra();t=void 0===t?null:t;var r=e();if(ka){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Ra();if(void 0!==n){var s=n(t);if(ka){he(!0);try{n(t)}finally{he(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=Oi.bind(null,xa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ra().memoizedState=e},useState:function(e){var t=(e=Za(e)).queue,n=Ri.bind(null,xa,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ni,useDeferredValue:function(e,t){return Ai(Ra(),e,t)},useTransition:function(){var e=Za(!1);return e=Ei.bind(null,xa,e.queue,!0,!1),Ra().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=xa,s=Ra();if(as){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===rc)throw Error(i(349));0!==(124&ac)||Xa(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,gi(Qa.bind(null,r,a,e),[e]),r.flags|=2048,pi(9,{destroy:void 0,resource:void 0},Va.bind(null,r,a,n,t),null),n},useId:function(){var e=Ra(),t=rc.identifierPrefix;if(as){var n=Jr;t="\xab"+t+"R"+(n=(Gr&~(1<<32-pe(Gr)-1)).toString(32)+n),0<(n=Sa++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ea++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Ti,useFormState:oi,useActionState:oi,useOptimistic:function(e){var t=Ra();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=$i.bind(null,xa,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ha,useCacheRefresh:function(){return Ra().memoizedState=zi.bind(null,xa)}},Ki={readContext:As,use:Ba,useCallback:ki,useContext:As,useEffect:vi,useImperativeHandle:ji,useInsertionEffect:xi,useLayoutEffect:yi,useMemo:Si,useReducer:qa,useRef:mi,useState:function(){return qa(Ua)},useDebugValue:Ni,useDeferredValue:function(e,t){return Ci(Fa(),ya.memoizedState,e,t)},useTransition:function(){var e=qa(Ua)[0],t=Fa().memoizedState;return["boolean"===typeof e?e:$a(e),t]},useSyncExternalStore:Ya,useId:Pi,useHostTransitionStatus:Ti,useFormState:ci,useActionState:ci,useOptimistic:function(e,t){return ei(Fa(),0,e,t)},useMemoCache:Ha,useCacheRefresh:Di},Yi={readContext:As,use:Ba,useCallback:ki,useContext:As,useEffect:vi,useImperativeHandle:ji,useInsertionEffect:xi,useLayoutEffect:yi,useMemo:Si,useReducer:Ka,useRef:mi,useState:function(){return Ka(Ua)},useDebugValue:Ni,useDeferredValue:function(e,t){var n=Fa();return null===ya?Ai(n,e,t):Ci(n,ya.memoizedState,e,t)},useTransition:function(){var e=Ka(Ua)[0],t=Fa().memoizedState;return["boolean"===typeof e?e:$a(e),t]},useSyncExternalStore:Ya,useId:Pi,useHostTransitionStatus:Ti,useFormState:hi,useActionState:hi,useOptimistic:function(e,t){var n=Fa();return null!==ya?ei(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ha,useCacheRefresh:Di},Xi=null,Vi=0;function Qi(e){var t=Vi;return Vi+=1,null===Xi&&(Xi=[]),Gs(Xi,e,t)}function Gi(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Ji(e,t){if(t.$$typeof===p)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zi(e){return(0,e._init)(e._payload)}function el(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Rr(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function o(e,t,n,r){return null===t||6!==t.tag?((t=Hr(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===b?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===A&&Zi(a)===t.type)?(Gi(t=s(t,n.props),n),t.return=e,t):(Gi(t=$r(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ur(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,r,a){return null===t||7!==t.tag?((t=Br(n,e.mode,r,a)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Hr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return Gi(n=$r(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case f:return(t=Ur(t,e.mode,n)).return=e,t;case A:return h(e,t=(0,t._init)(t._payload),n)}if(T(t)||I(t))return(t=Br(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Qi(t),n);if(t.$$typeof===w)return h(e,Cs(e,t),n);Ji(e,t)}return null}function p(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:o(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===s?c(e,t,n,r):null;case f:return n.key===s?d(e,t,n,r):null;case A:return p(e,t,n=(s=n._init)(n._payload),r)}if(T(n)||I(n))return null!==s?null:u(e,t,n,r,null);if("function"===typeof n.then)return p(e,t,Qi(n),r);if(n.$$typeof===w)return p(e,t,Cs(e,n),r);Ji(e,n)}return null}function g(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return o(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case f:return d(t,e=e.get(null===r.key?n:r.key)||null,r,s);case A:return g(e,t,n,r=(0,r._init)(r._payload),s)}if(T(r)||I(r))return u(t,e=e.get(n)||null,r,s,null);if("function"===typeof r.then)return g(e,t,n,Qi(r),s);if(r.$$typeof===w)return g(e,t,n,Cs(t,r),s);Ji(t,r)}return null}function v(o,c,d,u){if("object"===typeof d&&null!==d&&d.type===b&&null===d.key&&(d=d.props.children),"object"===typeof d&&null!==d){switch(d.$$typeof){case m:e:{for(var x=d.key;null!==c;){if(c.key===x){if((x=d.type)===b){if(7===c.tag){n(o,c.sibling),(u=s(c,d.props.children)).return=o,o=u;break e}}else if(c.elementType===x||"object"===typeof x&&null!==x&&x.$$typeof===A&&Zi(x)===c.type){n(o,c.sibling),Gi(u=s(c,d.props),d),u.return=o,o=u;break e}n(o,c);break}t(o,c),c=c.sibling}d.type===b?((u=Br(d.props.children,o.mode,u,d.key)).return=o,o=u):(Gi(u=$r(d.type,d.key,d.props,null,o.mode,u),d),u.return=o,o=u)}return l(o);case f:e:{for(x=d.key;null!==c;){if(c.key===x){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){n(o,c.sibling),(u=s(c,d.children||[])).return=o,o=u;break e}n(o,c);break}t(o,c),c=c.sibling}(u=Ur(d,o.mode,u)).return=o,o=u}return l(o);case A:return v(o,c,d=(x=d._init)(d._payload),u)}if(T(d))return function(s,i,l,o){for(var c=null,d=null,u=i,m=i=0,f=null;null!==u&&m<l.length;m++){u.index>m?(f=u,u=null):f=u.sibling;var b=p(s,u,l[m],o);if(null===b){null===u&&(u=f);break}e&&u&&null===b.alternate&&t(s,u),i=a(b,i,m),null===d?c=b:d.sibling=b,d=b,u=f}if(m===l.length)return n(s,u),as&&Zr(s,m),c;if(null===u){for(;m<l.length;m++)null!==(u=h(s,l[m],o))&&(i=a(u,i,m),null===d?c=u:d.sibling=u,d=u);return as&&Zr(s,m),c}for(u=r(u);m<l.length;m++)null!==(f=g(u,s,m,l[m],o))&&(e&&null!==f.alternate&&u.delete(null===f.key?m:f.key),i=a(f,i,m),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach(function(e){return t(s,e)}),as&&Zr(s,m),c}(o,c,d,u);if(I(d)){if("function"!==typeof(x=I(d)))throw Error(i(150));return function(s,l,o,c){if(null==o)throw Error(i(151));for(var d=null,u=null,m=l,f=l=0,b=null,v=o.next();null!==m&&!v.done;f++,v=o.next()){m.index>f?(b=m,m=null):b=m.sibling;var x=p(s,m,v.value,c);if(null===x){null===m&&(m=b);break}e&&m&&null===x.alternate&&t(s,m),l=a(x,l,f),null===u?d=x:u.sibling=x,u=x,m=b}if(v.done)return n(s,m),as&&Zr(s,f),d;if(null===m){for(;!v.done;f++,v=o.next())null!==(v=h(s,v.value,c))&&(l=a(v,l,f),null===u?d=v:u.sibling=v,u=v);return as&&Zr(s,f),d}for(m=r(m);!v.done;f++,v=o.next())null!==(v=g(m,s,f,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?f:v.key),l=a(v,l,f),null===u?d=v:u.sibling=v,u=v);return e&&m.forEach(function(e){return t(s,e)}),as&&Zr(s,f),d}(o,c,d=x.call(d),u)}if("function"===typeof d.then)return v(o,c,Qi(d),u);if(d.$$typeof===w)return v(o,c,Cs(o,d),u);Ji(o,d)}return"string"===typeof d&&""!==d||"number"===typeof d||"bigint"===typeof d?(d=""+d,null!==c&&6===c.tag?(n(o,c.sibling),(u=s(c,d)).return=o,o=u):(n(o,c),(u=Hr(d,o.mode,u)).return=o,o=u),l(o)):n(o,c)}return function(e,t,n,r){try{Vi=0;var s=v(e,t,n,r);return Xi=null,s}catch(i){if(i===Ws||i===Ys)throw i;var a=zr(29,i,null,e.mode);return a.lanes=r,a.return=e,a}}}var tl=el(!0),nl=el(!1),rl=F(null),sl=null;function al(e){var t=e.alternate;B(cl,1&cl.current),B(rl,e),null===sl&&(null===t||null!==pa.current||null!==t.memoizedState)&&(sl=e)}function il(e){if(22===e.tag){if(B(cl,cl.current),B(rl,e),null===sl){var t=e.alternate;null!==t&&null!==t.memoizedState&&(sl=e)}}else ll()}function ll(){B(cl,cl.current),B(rl,rl.current)}function ol(e){$(rl),sl===e&&(sl=null),$(cl)}var cl=F(0);function dl(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||bu(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ul(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var hl={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Pc(),s=sa(r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=aa(e,s,r))&&(zc(t,e,r),ia(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Pc(),s=sa(r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=aa(e,s,r))&&(zc(t,e,r),ia(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pc(),r=sa(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=aa(e,r,n))&&(zc(t,e,n),ia(t,e,n))}};function pl(e,t,n,r,s,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!Qn(n,r)||!Qn(s,a))}function ml(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&hl.enqueueReplaceState(t,t.state,null)}function fl(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=h({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}var bl="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function gl(e){bl(e)}function vl(e){console.error(e)}function xl(e){bl(e)}function yl(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function wl(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function jl(e,t,n){return(n=sa(n)).tag=3,n.payload={element:null},n.callback=function(){yl(e,t)},n}function Nl(e){return(e=sa(e)).tag=3,e}function kl(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var a=r.value;e.payload=function(){return s(a)},e.callback=function(){wl(t,n,r)}}var i=n.stateNode;null!==i&&"function"===typeof i.componentDidCatch&&(e.callback=function(){wl(t,n,r),"function"!==typeof s&&(null===kc?kc=new Set([this]):kc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Sl=Error(i(461)),Al=!1;function Cl(e,t,n,r){t.child=null===e?nl(t,null,n,r):tl(t,e.child,n,r)}function El(e,t,n,r,s){n=n.render;var a=t.ref;if("ref"in r){var i={};for(var l in r)"ref"!==l&&(i[l]=r[l])}else i=r;return Ss(t),r=_a(e,t,n,i,a,s),l=Da(),null===e||Al?(as&&l&&ts(t),t.flags|=1,Cl(e,t,r,s),t.child):(za(e,t,s),Xl(e,t,s))}function Ml(e,t,n,r,s){if(null===e){var a=n.type;return"function"!==typeof a||Or(a)||void 0!==a.defaultProps||null!==n.compare?((e=$r(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Il(e,t,a,r,s))}if(a=e.child,!Vl(e,s)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:Qn)(i,r)&&e.ref===t.ref)return Xl(e,t,s)}return t.flags|=1,(e=Rr(a,r)).ref=t.ref,e.return=t,t.child=e}function Il(e,t,n,r,s){if(null!==e){var a=e.memoizedProps;if(Qn(a,r)&&e.ref===t.ref){if(Al=!1,t.pendingProps=r=a,!Vl(e,s))return t.lanes=e.lanes,Xl(e,t,s);0!==(131072&e.flags)&&(Al=!0)}}return Pl(e,t,n,r,s)}function _l(e,t,n){var r=t.pendingProps,s=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==a?a.baseLanes|n:n,null!==e){for(s=t.child=e.child,a=0;null!==s;)a=a|s.lanes|s.childLanes,s=s.sibling;t.childLanes=a&~r}else t.childLanes=0,t.child=null;return Ll(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ll(e,t,null!==a?a.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Us(0,null!==a?a.cachePool:null),null!==a?fa(t,a):ba(),il(t)}else null!==a?(Us(0,a.cachePool),fa(t,a),ll(),t.memoizedState=null):(null!==e&&Us(0,null),ba(),ll());return Cl(e,t,s,n),t.child}function Ll(e,t,n,r){var s=Hs();return s=null===s?null:{parent:Ls._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Us(0,null),ba(),il(t),null!==e&&Ns(e,t,r,!0),null}function Tl(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(i(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Pl(e,t,n,r,s){return Ss(t),n=_a(e,t,n,r,void 0,s),r=Da(),null===e||Al?(as&&r&&ts(t),t.flags|=1,Cl(e,t,n,s),t.child):(za(e,t,s),Xl(e,t,s))}function Dl(e,t,n,r,s,a){return Ss(t),t.updateQueue=null,n=Ta(t,r,n,s),La(e),r=Da(),null===e||Al?(as&&r&&ts(t),t.flags|=1,Cl(e,t,n,a),t.child):(za(e,t,a),Xl(e,t,a))}function zl(e,t,n,r,s){if(Ss(t),null===t.stateNode){var a=Pr,i=n.contextType;"object"===typeof i&&null!==i&&(a=As(i)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=hl,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},na(t),i=n.contextType,a.context="object"===typeof i&&null!==i?As(i):Pr,a.state=t.memoizedState,"function"===typeof(i=n.getDerivedStateFromProps)&&(ul(t,n,i,r),a.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(i=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),i!==a.state&&hl.enqueueReplaceState(a,a.state,null),da(t,r,a,s),ca(),a.state=t.memoizedState),"function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var l=t.memoizedProps,o=fl(n,l);a.props=o;var c=a.context,d=n.contextType;i=Pr,"object"===typeof d&&null!==d&&(i=As(d));var u=n.getDerivedStateFromProps;d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate,l=t.pendingProps!==l,d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(l||c!==i)&&ml(t,a,r,i),ta=!1;var h=t.memoizedState;a.state=h,da(t,r,a,s),ca(),c=t.memoizedState,l||h!==c||ta?("function"===typeof u&&(ul(t,n,u,r),c=t.memoizedState),(o=ta||pl(t,n,o,r,h,c,i))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=i,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,ra(e,t),d=fl(n,i=t.memoizedProps),a.props=d,u=t.pendingProps,h=a.context,c=n.contextType,o=Pr,"object"===typeof c&&null!==c&&(o=As(c)),(c="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(i!==u||h!==o)&&ml(t,a,r,o),ta=!1,h=t.memoizedState,a.state=h,da(t,r,a,s),ca();var p=t.memoizedState;i!==u||h!==p||ta||null!==e&&null!==e.dependencies&&ks(e.dependencies)?("function"===typeof l&&(ul(t,n,l,r),p=t.memoizedState),(d=ta||pl(t,n,d,r,h,p,o)||null!==e&&null!==e.dependencies&&ks(e.dependencies))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,o),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,o)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=o,r=d):("function"!==typeof a.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Tl(e,t),r=0!==(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=tl(t,e.child,null,s),t.child=tl(t,null,n,s)):Cl(e,t,n,s),t.memoizedState=a.state,e=t.child):e=Xl(e,t,s),e}function Ol(e,t,n,r){return ps(),t.flags|=256,Cl(e,t,n,r),t.child}var Rl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fl(e){return{baseLanes:e,cachePool:qs()}}function $l(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=bc),e}function Bl(e,t,n){var r,s=t.pendingProps,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&cl.current)),r&&(a=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(as){if(a?al(t):ll(),as){var o,c=ss;if(o=c){e:{for(o=c,c=ls;8!==o.nodeType;){if(!c){c=null;break e}if(null===(o=gu(o.nextSibling))){c=null;break e}}c=o}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Qr?{id:Gr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},(o=zr(18,null,null,0)).stateNode=c,o.return=t,t.child=o,rs=t,ss=null,o=!0):o=!1}o||cs(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return bu(c)?t.lanes=32:t.lanes=536870912,null;ol(t)}return c=s.children,s=s.fallback,a?(ll(),c=Ul({mode:"hidden",children:c},a=t.mode),s=Br(s,a,n,null),c.return=t,s.return=t,c.sibling=s,t.child=c,(a=t.child).memoizedState=Fl(n),a.childLanes=$l(e,r,n),t.memoizedState=Rl,s):(al(t),Hl(t,c))}if(null!==(o=e.memoizedState)&&null!==(c=o.dehydrated)){if(l)256&t.flags?(al(t),t.flags&=-257,t=ql(e,t,n)):null!==t.memoizedState?(ll(),t.child=e.child,t.flags|=128,t=null):(ll(),a=s.fallback,c=t.mode,s=Ul({mode:"visible",children:s.children},c),(a=Br(a,c,n,null)).flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,tl(t,e.child,null,n),(s=t.child).memoizedState=Fl(n),s.childLanes=$l(e,r,n),t.memoizedState=Rl,t=a);else if(al(t),bu(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var d=r.dgst;r=d,(s=Error(i(419))).stack="",s.digest=r,fs({value:s,source:null,stack:null}),t=ql(e,t,n)}else if(Al||Ns(e,t,n,!1),r=0!==(n&e.childLanes),Al||r){if(null!==(r=rc)&&(0!==(s=0!==((s=0!==(42&(s=n&-n))?1:Ee(s))&(r.suspendedLanes|n))?0:s)&&s!==o.retryLane))throw o.retryLane=s,_r(e,s),zc(r,e,s),Sl;"$?"===c.data||Yc(),t=ql(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=o.treeContext,ss=gu(c.nextSibling),rs=t,as=!0,is=null,ls=!1,null!==e&&(Xr[Vr++]=Gr,Xr[Vr++]=Jr,Xr[Vr++]=Qr,Gr=e.id,Jr=e.overflow,Qr=t),(t=Hl(t,s.children)).flags|=4096);return t}return a?(ll(),a=s.fallback,c=t.mode,d=(o=e.child).sibling,(s=Rr(o,{mode:"hidden",children:s.children})).subtreeFlags=65011712&o.subtreeFlags,null!==d?a=Rr(d,a):(a=Br(a,c,n,null)).flags|=2,a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,null===(c=e.child.memoizedState)?c=Fl(n):(null!==(o=c.cachePool)?(d=Ls._currentValue,o=o.parent!==d?{parent:d,pool:d}:o):o=qs(),c={baseLanes:c.baseLanes|n,cachePool:o}),a.memoizedState=c,a.childLanes=$l(e,r,n),t.memoizedState=Rl,s):(al(t),e=(n=e.child).sibling,(n=Rr(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Hl(e,t){return(t=Ul({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ul(e,t){return(e=zr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function ql(e,t,n){return tl(t,e.child,null,n),(e=Hl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ws(e.return,t,n)}function Kl(e,t,n,r,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Yl(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(Cl(e,t,r.children,n),0!==(2&(r=cl.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wl(e,n,t);else if(19===e.tag)Wl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(B(cl,r),s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===dl(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Kl(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===dl(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Kl(t,!0,n,null,a);break;case"together":Kl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ns(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Rr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!ks(e))}function Ql(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Al=!0;else{if(!Vl(e,n)&&0===(128&t.flags))return Al=!1,function(e,t,n){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),xs(0,Ls,e.memoizedState.cache),ps();break;case 27:case 5:X(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:xs(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(al(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Bl(e,t,n):(al(t),null!==(e=Xl(e,t,n))?e.sibling:null);al(t);break;case 19:var s=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ns(e,t,n,!1),r=0!==(n&t.childLanes)),s){if(r)return Yl(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),B(cl,cl.current),r)break;return null;case 22:case 23:return t.lanes=0,_l(e,t,n);case 24:xs(0,Ls,e.memoizedState.cache)}return Xl(e,t,n)}(e,t,n);Al=0!==(131072&e.flags)}else Al=!1,as&&0!==(1048576&t.flags)&&es(t,Yr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,s=r._init;if(r=s(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((s=r.$$typeof)===j){t.tag=11,t=El(null,t,r,e,n);break e}if(s===S){t.tag=14,t=Ml(null,t,r,e,n);break e}}throw t=L(r)||r,Error(i(306,t,""))}Or(r)?(e=fl(r,e),t.tag=1,t=zl(null,t,r,e,n)):(t.tag=0,t=Pl(null,t,r,e,n))}return t;case 0:return Pl(e,t,t.type,t.pendingProps,n);case 1:return zl(e,t,r=t.type,s=fl(r,t.pendingProps),n);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(i(387));r=t.pendingProps;var a=t.memoizedState;s=a.element,ra(e,t),da(t,r,null,n);var l=t.memoizedState;if(r=l.cache,xs(0,Ls,r),r!==a.cache&&js(t,[Ls],n,!0),ca(),r=l.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:l.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ol(e,t,r,n);break e}if(r!==s){fs(s=kr(Error(i(424)),t)),t=Ol(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ss=gu(e.firstChild),rs=t,as=!0,is=null,ls=!0,n=nl(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===s){t=Xl(e,t,n);break e}Cl(e,t,r,n)}t=t.child}return t;case 26:return Tl(e,t),null===e?(n=Eu(t.type,null,t.pendingProps,null))?t.memoizedState=n:as||(n=t.type,e=t.pendingProps,(r=ru(q.current).createElement(n))[Le]=t,r[Te]=e,eu(r,n,e),We(r),t.stateNode=r):t.memoizedState=Eu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return X(t),null===e&&as&&(r=t.stateNode=yu(t.type,t.pendingProps,q.current),rs=t,ls=!0,s=ss,pu(t.type)?(vu=s,ss=gu(r.firstChild)):ss=s),Cl(e,t,t.pendingProps.children,n),Tl(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&as&&((s=r=ss)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Fe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===a)return e}if(null===(e=gu(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,ls))?(t.stateNode=r,rs=t,ss=gu(r.firstChild),ls=!1,s=!0):s=!1),s||cs(t)),X(t),s=t.type,a=t.pendingProps,l=null!==e?e.memoizedProps:null,r=a.children,iu(s,a)?r=null:null!==l&&iu(s,l)&&(t.flags|=32),null!==t.memoizedState&&(s=_a(e,t,Pa,null,null,n),Xu._currentValue=s),Tl(e,t),Cl(e,t,r,n),t.child;case 6:return null===e&&as&&((e=n=ss)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=gu(e.nextSibling)))return null}return e}(n,t.pendingProps,ls))?(t.stateNode=n,rs=t,ss=null,e=!0):e=!1),e||cs(t)),null;case 13:return Bl(e,t,n);case 4:return K(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=tl(t,null,r,n):Cl(e,t,r,n),t.child;case 11:return El(e,t,t.type,t.pendingProps,n);case 7:return Cl(e,t,t.pendingProps,n),t.child;case 8:case 12:return Cl(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,xs(0,t.type,r.value),Cl(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,Ss(t),r=r(s=As(s)),t.flags|=1,Cl(e,t,r,n),t.child;case 14:return Ml(e,t,t.type,t.pendingProps,n);case 15:return Il(e,t,t.type,t.pendingProps,n);case 19:return Yl(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Ul(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Rr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return _l(e,t,n);case 24:return Ss(t),r=As(Ls),null===e?(null===(s=Hs())&&(s=rc,a=Ts(),s.pooledCache=a,a.refCount++,null!==a&&(s.pooledCacheLanes|=n),s=a),t.memoizedState={parent:r,cache:s},na(t),xs(0,Ls,s)):(0!==(e.lanes&n)&&(ra(e,t),da(t,null,null,n),ca()),s=e.memoizedState,a=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),xs(0,Ls,r)):(r=a.cache,xs(0,Ls,r),r!==s.cache&&js(t,[Ls],n,!0))),Cl(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Gl(e){e.flags|=4}function Jl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Bu(t)){if(null!==(t=rl.current)&&((4194048&ac)===ac?null!==sl:(62914560&ac)!==ac&&0===(536870912&ac)||t!==sl))throw Js=Xs,Ks;e.flags|=8192}}function Zl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ne():536870912,e.lanes|=t,gc|=t)}function eo(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function to(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=65011712&s.subtreeFlags,r|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function no(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return to(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ys(Ls),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hs(t)?Gl(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ms())),to(t),null;case 26:return n=t.memoizedState,null===e?(Gl(t),null!==n?(to(t),Jl(t,n)):(to(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Gl(t),to(t),Jl(t,n)):(to(t),t.flags&=-16777217):(e.memoizedProps!==r&&Gl(t),to(t),t.flags&=-16777217),null;case 27:V(t),n=q.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Gl(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return to(t),null}e=H.current,hs(t)?ds(t):(e=yu(s,r,n),t.stateNode=e,Gl(t))}return to(t),null;case 5:if(V(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Gl(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return to(t),null}if(e=H.current,hs(t))ds(t);else{switch(s=ru(q.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?s.createElement(n,{is:r.is}):s.createElement(n)}}e[Le]=t,e[Te]=r;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(eu(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Gl(t)}}return to(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Gl(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(e=q.current,hs(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(s=rs))switch(s.tag){case 27:case 5:r=s.memoizedProps}e[Le]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Qd(e.nodeValue,n)))||cs(t)}else(e=ru(e).createTextNode(r))[Le]=t,t.stateNode=e}return to(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(i(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(i(317));s[Le]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;to(t),s=!1}else s=ms(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(ol(t),t):(ol(t),null)}if(ol(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){s=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(s=r.alternate.memoizedState.cachePool.pool);var a=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(a=r.memoizedState.cachePool.pool),a!==s&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Zl(t,t.updateQueue),to(t),null;case 4:return Y(),null===e&&$d(t.stateNode.containerInfo),to(t),null;case 10:return ys(t.type),to(t),null;case 19:if($(cl),null===(s=t.memoizedState))return to(t),null;if(r=0!==(128&t.flags),null===(a=s.rendering))if(r)eo(s,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=dl(e))){for(t.flags|=128,eo(s,!1),e=a.updateQueue,t.updateQueue=e,Zl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Fr(n,e),n=n.sibling;return B(cl,1&cl.current|2),t.child}e=e.sibling}null!==s.tail&&te()>jc&&(t.flags|=128,r=!0,eo(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=dl(a))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Zl(t,e),eo(s,!0),null===s.tail&&"hidden"===s.tailMode&&!a.alternate&&!as)return to(t),null}else 2*te()-s.renderingStartTime>jc&&536870912!==n&&(t.flags|=128,r=!0,eo(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=s.last)?e.sibling=a:t.child=a,s.last=a)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=te(),t.sibling=null,e=cl.current,B(cl,r?1&e|2:1&e),t):(to(t),null);case 22:case 23:return ol(t),ga(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(to(t),6&t.subtreeFlags&&(t.flags|=8192)):to(t),null!==(n=t.updateQueue)&&Zl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&$(Bs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ys(Ls),to(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}function ro(e,t){switch(ns(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ys(Ls),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return V(t),null;case 13:if(ol(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return $(cl),null;case 4:return Y(),null;case 10:return ys(t.type),null;case 22:case 23:return ol(t),ga(),null!==e&&$(Bs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ys(Ls),null;default:return null}}function so(e,t){switch(ns(t),t.tag){case 3:ys(Ls),Y();break;case 26:case 27:case 5:V(t);break;case 4:Y();break;case 13:ol(t);break;case 19:$(cl);break;case 10:ys(t.type);break;case 22:case 23:ol(t),ga(),null!==e&&$(Bs);break;case 24:ys(Ls)}}function ao(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var a=n.create,i=n.inst;r=a(),i.destroy=r}n=n.next}while(n!==s)}}catch(l){dd(t,t.return,l)}}function io(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var a=s.next;r=a;do{if((r.tag&e)===e){var i=r.inst,l=i.destroy;if(void 0!==l){i.destroy=void 0,s=t;var o=n,c=l;try{c()}catch(d){dd(s,o,d)}}}r=r.next}while(r!==a)}}catch(d){dd(t,t.return,d)}}function lo(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ha(t,n)}catch(r){dd(e,e.return,r)}}}function oo(e,t,n){n.props=fl(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){dd(e,t,r)}}function co(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(s){dd(e,t,s)}}function uo(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(s){dd(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(a){dd(e,t,a)}else n.current=null}function ho(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){dd(e,e.return,s)}}function po(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,a=null,l=null,o=null,c=null,d=null,u=null;for(m in n){var h=n[m];if(n.hasOwnProperty(m)&&null!=h)switch(m){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(m)||Jd(e,t,m,null,r,h)}}for(var p in r){var m=r[p];if(h=n[p],r.hasOwnProperty(p)&&(null!=m||null!=h))switch(p){case"type":a=m;break;case"name":s=m;break;case"checked":d=m;break;case"defaultChecked":u=m;break;case"value":l=m;break;case"defaultValue":o=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(i(137,t));break;default:m!==h&&Jd(e,t,p,m,r,h)}}return void bt(e,l,o,c,d,u,a,s);case"select":for(a in m=l=o=p=null,n)if(c=n[a],n.hasOwnProperty(a)&&null!=c)switch(a){case"value":break;case"multiple":m=c;default:r.hasOwnProperty(a)||Jd(e,t,a,null,r,c)}for(s in r)if(a=r[s],c=n[s],r.hasOwnProperty(s)&&(null!=a||null!=c))switch(s){case"value":p=a;break;case"defaultValue":o=a;break;case"multiple":l=a;default:a!==c&&Jd(e,t,s,a,r,c)}return t=o,n=l,r=m,void(null!=p?xt(e,!!n,p,!1):!!r!==!!n&&(null!=t?xt(e,!!n,t,!0):xt(e,!!n,n?[]:"",!1)));case"textarea":for(o in m=p=null,n)if(s=n[o],n.hasOwnProperty(o)&&null!=s&&!r.hasOwnProperty(o))switch(o){case"value":case"children":break;default:Jd(e,t,o,null,r,s)}for(l in r)if(s=r[l],a=n[l],r.hasOwnProperty(l)&&(null!=s||null!=a))switch(l){case"value":p=s;break;case"defaultValue":m=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(i(91));break;default:s!==a&&Jd(e,t,l,s,r,a)}return void yt(e,p,m);case"option":for(var f in n)if(p=n[f],n.hasOwnProperty(f)&&null!=p&&!r.hasOwnProperty(f))if("selected"===f)e.selected=!1;else Jd(e,t,f,null,r,p);for(c in r)if(p=r[c],m=n[c],r.hasOwnProperty(c)&&p!==m&&(null!=p||null!=m))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else Jd(e,t,c,p,r,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var b in n)p=n[b],n.hasOwnProperty(b)&&null!=p&&!r.hasOwnProperty(b)&&Jd(e,t,b,null,r,p);for(d in r)if(p=r[d],m=n[d],r.hasOwnProperty(d)&&p!==m&&(null!=p||null!=m))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(i(137,t));break;default:Jd(e,t,d,p,r,m)}return;default:if(At(t)){for(var g in n)p=n[g],n.hasOwnProperty(g)&&void 0!==p&&!r.hasOwnProperty(g)&&Zd(e,t,g,void 0,r,p);for(u in r)p=r[u],m=n[u],!r.hasOwnProperty(u)||p===m||void 0===p&&void 0===m||Zd(e,t,u,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&null!=p&&!r.hasOwnProperty(v)&&Jd(e,t,v,null,r,p);for(h in r)p=r[h],m=n[h],!r.hasOwnProperty(h)||p===m||null==p&&null==m||Jd(e,t,h,p,r,m)}(r,e.type,n,t),r[Te]=t}catch(s){dd(e,e.return,s)}}function mo(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pu(e.type)||4===e.tag}function fo(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||mo(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pu(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function bo(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Gd));else if(4!==r&&(27===r&&pu(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(bo(e,t,n),e=e.sibling;null!==e;)bo(e,t,n),e=e.sibling}function go(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&pu(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(go(e,t,n),e=e.sibling;null!==e;)go(e,t,n),e=e.sibling}function vo(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);eu(t,r,n),t[Le]=e,t[Te]=n}catch(a){dd(e,e.return,a)}}var xo=!1,yo=!1,wo=!1,jo="function"===typeof WeakSet?WeakSet:Set,No=null;function ko(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Oo(e,n),4&r&&ao(5,n);break;case 1:if(Oo(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(i){dd(n,n.return,i)}else{var s=fl(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){dd(n,n.return,l)}}64&r&&lo(n),512&r&&co(n,n.return);break;case 3:if(Oo(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{ha(e,t)}catch(i){dd(n,n.return,i)}}break;case 27:null===t&&4&r&&vo(n);case 26:case 5:Oo(e,n),null===t&&4&r&&ho(n),512&r&&co(n,n.return);break;case 12:Oo(e,n);break;case 13:Oo(e,n),4&r&&Io(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=md.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||xo)){t=null!==t&&null!==t.memoizedState||yo,s=xo;var a=yo;xo=r,(yo=t)&&!a?Fo(e,n,0!==(8772&n.subtreeFlags)):Oo(e,n),xo=s,yo=a}break;case 30:break;default:Oo(e,n)}}function So(e){var t=e.alternate;null!==t&&(e.alternate=null,So(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&$e(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ao=null,Co=!1;function Eo(e,t,n){for(n=n.child;null!==n;)Mo(e,t,n),n=n.sibling}function Mo(e,t,n){if(ue&&"function"===typeof ue.onCommitFiberUnmount)try{ue.onCommitFiberUnmount(de,n)}catch(a){}switch(n.tag){case 26:yo||uo(n,t),Eo(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:yo||uo(n,t);var r=Ao,s=Co;pu(n.type)&&(Ao=n.stateNode,Co=!1),Eo(e,t,n),wu(n.stateNode),Ao=r,Co=s;break;case 5:yo||uo(n,t);case 6:if(r=Ao,s=Co,Ao=null,Eo(e,t,n),Co=s,null!==(Ao=r))if(Co)try{(9===Ao.nodeType?Ao.body:"HTML"===Ao.nodeName?Ao.ownerDocument.body:Ao).removeChild(n.stateNode)}catch(i){dd(n,t,i)}else try{Ao.removeChild(n.stateNode)}catch(i){dd(n,t,i)}break;case 18:null!==Ao&&(Co?(mu(9===(e=Ao).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ch(e)):mu(Ao,n.stateNode));break;case 4:r=Ao,s=Co,Ao=n.stateNode.containerInfo,Co=!0,Eo(e,t,n),Ao=r,Co=s;break;case 0:case 11:case 14:case 15:yo||io(2,n,t),yo||io(4,n,t),Eo(e,t,n);break;case 1:yo||(uo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&oo(n,t,r)),Eo(e,t,n);break;case 21:Eo(e,t,n);break;case 22:yo=(r=yo)||null!==n.memoizedState,Eo(e,t,n),yo=r;break;default:Eo(e,t,n)}}function Io(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ch(e)}catch(n){dd(t,t.return,n)}}function _o(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new jo),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new jo),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){var r=fd.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Lo(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r],a=e,l=t,o=l;e:for(;null!==o;){switch(o.tag){case 27:if(pu(o.type)){Ao=o.stateNode,Co=!1;break e}break;case 5:Ao=o.stateNode,Co=!1;break e;case 3:case 4:Ao=o.stateNode.containerInfo,Co=!0;break e}o=o.return}if(null===Ao)throw Error(i(160));Mo(a,l,s),Ao=null,Co=!1,null!==(a=s.alternate)&&(a.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Po(t,e),t=t.sibling}var To=null;function Po(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Lo(t,e),Do(e),4&r&&(io(3,e,e.return),ao(3,e),io(5,e,e.return));break;case 1:Lo(t,e),Do(e),512&r&&(yo||null===n||uo(n,n.return)),64&r&&xo&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var s=To;if(Lo(t,e),Do(e),512&r&&(yo||null===n||uo(n,n.return)),4&r){var a=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":(!(a=s.getElementsByTagName("title")[0])||a[Fe]||a[Le]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=s.createElement(r),s.head.insertBefore(a,s.querySelector("head > title"))),eu(a,r,n),a[Le]=e,We(a),r=a;break e;case"link":var l=Fu("link","href",s).get(r+(n.href||""));if(l)for(var o=0;o<l.length;o++)if((a=l[o]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){l.splice(o,1);break t}eu(a=s.createElement(r),r,n),s.head.appendChild(a);break;case"meta":if(l=Fu("meta","content",s).get(r+(n.content||"")))for(o=0;o<l.length;o++)if((a=l[o]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){l.splice(o,1);break t}eu(a=s.createElement(r),r,n),s.head.appendChild(a);break;default:throw Error(i(468,r))}a[Le]=e,We(a),r=a}e.stateNode=r}else $u(s,e.type,e.stateNode);else e.stateNode=Pu(s,r,e.memoizedProps);else a!==r?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===r?$u(s,e.type,e.stateNode):Pu(s,r,e.memoizedProps)):null===r&&null!==e.stateNode&&po(e,e.memoizedProps,n.memoizedProps)}break;case 27:Lo(t,e),Do(e),512&r&&(yo||null===n||uo(n,n.return)),null!==n&&4&r&&po(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Lo(t,e),Do(e),512&r&&(yo||null===n||uo(n,n.return)),32&e.flags){s=e.stateNode;try{jt(s,"")}catch(m){dd(e,e.return,m)}}4&r&&null!=e.stateNode&&po(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&r&&(wo=!0);break;case 6:if(Lo(t,e),Do(e),4&r){if(null===e.stateNode)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){dd(e,e.return,m)}}break;case 3:if(Ru=null,s=To,To=ku(t.containerInfo),Lo(t,e),To=s,Do(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ch(t.containerInfo)}catch(m){dd(e,e.return,m)}wo&&(wo=!1,zo(e));break;case 4:r=To,To=ku(e.stateNode.containerInfo),Lo(t,e),Do(e),To=r;break;case 12:default:Lo(t,e),Do(e);break;case 13:Lo(t,e),Do(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(wc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,_o(e,r)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,d=xo,u=yo;if(xo=d||s,yo=u||c,Lo(t,e),yo=u,xo=d,Do(e),8192&r)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||xo||yo||Ro(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(a=c.stateNode,s)"function"===typeof(l=a.style).setProperty?l.setProperty("display","none","important"):l.display="none";else{o=c.stateNode;var h=c.memoizedProps.style,p=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;o.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(m){dd(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(m){dd(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,_o(e,n))));break;case 19:Lo(t,e),Do(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,_o(e,r)));case 30:case 21:}}function Do(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(mo(r)){n=r;break}r=r.return}if(null==n)throw Error(i(160));switch(n.tag){case 27:var s=n.stateNode;go(e,fo(e),s);break;case 5:var a=n.stateNode;32&n.flags&&(jt(a,""),n.flags&=-33),go(e,fo(e),a);break;case 3:case 4:var l=n.stateNode.containerInfo;bo(e,fo(e),l);break;default:throw Error(i(161))}}catch(o){dd(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function zo(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;zo(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Oo(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)ko(e,t.alternate,t),t=t.sibling}function Ro(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:io(4,t,t.return),Ro(t);break;case 1:uo(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&oo(t,t.return,n),Ro(t);break;case 27:wu(t.stateNode);case 26:case 5:uo(t,t.return),Ro(t);break;case 22:null===t.memoizedState&&Ro(t);break;default:Ro(t)}e=e.sibling}}function Fo(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,a=t,i=a.flags;switch(a.tag){case 0:case 11:case 15:Fo(s,a,n),ao(4,a);break;case 1:if(Fo(s,a,n),"function"===typeof(s=(r=a).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){dd(r,r.return,c)}if(null!==(s=(r=a).updateQueue)){var l=r.stateNode;try{var o=s.shared.hiddenCallbacks;if(null!==o)for(s.shared.hiddenCallbacks=null,s=0;s<o.length;s++)ua(o[s],l)}catch(c){dd(r,r.return,c)}}n&&64&i&&lo(a),co(a,a.return);break;case 27:vo(a);case 26:case 5:Fo(s,a,n),n&&null===r&&4&i&&ho(a),co(a,a.return);break;case 12:Fo(s,a,n);break;case 13:Fo(s,a,n),n&&4&i&&Io(s,a);break;case 22:null===a.memoizedState&&Fo(s,a,n),co(a,a.return);break;case 30:break;default:Fo(s,a,n)}t=t.sibling}}function $o(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ps(n))}function Bo(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ps(e))}function Ho(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Uo(e,t,n,r),t=t.sibling}function Uo(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Ho(e,t,n,r),2048&s&&ao(9,t);break;case 1:case 13:default:Ho(e,t,n,r);break;case 3:Ho(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ps(e)));break;case 12:if(2048&s){Ho(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,i=a.id,l=a.onPostCommit;"function"===typeof l&&l(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(o){dd(t,t.return,o)}}else Ho(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,i=t.alternate,null!==t.memoizedState?2&a._visibility?Ho(e,t,n,r):Wo(e,t):2&a._visibility?Ho(e,t,n,r):(a._visibility|=2,qo(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&s&&$o(i,t);break;case 24:Ho(e,t,n,r),2048&s&&Bo(t.alternate,t)}}function qo(e,t,n,r,s){for(s=s&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var a=e,i=t,l=n,o=r,c=i.flags;switch(i.tag){case 0:case 11:case 15:qo(a,i,l,o,s),ao(8,i);break;case 23:break;case 22:var d=i.stateNode;null!==i.memoizedState?2&d._visibility?qo(a,i,l,o,s):Wo(a,i):(d._visibility|=2,qo(a,i,l,o,s)),s&&2048&c&&$o(i.alternate,i);break;case 24:qo(a,i,l,o,s),s&&2048&c&&Bo(i.alternate,i);break;default:qo(a,i,l,o,s)}t=t.sibling}}function Wo(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:Wo(n,r),2048&s&&$o(r.alternate,r);break;case 24:Wo(n,r),2048&s&&Bo(r.alternate,r);break;default:Wo(n,r)}t=t.sibling}}var Ko=8192;function Yo(e){if(e.subtreeFlags&Ko)for(e=e.child;null!==e;)Xo(e),e=e.sibling}function Xo(e){switch(e.tag){case 26:Yo(e),e.flags&Ko&&null!==e.memoizedState&&function(e,t,n){if(null===Hu)throw Error(i(475));var r=Hu;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var s=Mu(n.href),a=e.querySelector(Iu(s));if(a)return null!==(e=a._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=qu.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=a,void We(a);a=e.ownerDocument||e,n=_u(n),(s=ju.get(s))&&zu(n,s),We(a=a.createElement("link"));var l=a;l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),eu(a,"link",n),t.instance=a}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=qu.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(To,e.memoizedState,e.memoizedProps);break;case 5:default:Yo(e);break;case 3:case 4:var t=To;To=ku(e.stateNode.containerInfo),Yo(e),To=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Ko,Ko=16777216,Yo(e),Ko=t):Yo(e))}}function Vo(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Qo(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];No=r,Zo(r,e)}Vo(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Go(e),e=e.sibling}function Go(e){switch(e.tag){case 0:case 11:case 15:Qo(e),2048&e.flags&&io(9,e,e.return);break;case 3:case 12:default:Qo(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jo(e)):Qo(e)}}function Jo(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];No=r,Zo(r,e)}Vo(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:io(8,t,t.return),Jo(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Jo(t));break;default:Jo(t)}e=e.sibling}}function Zo(e,t){for(;null!==No;){var n=No;switch(n.tag){case 0:case 11:case 15:io(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ps(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,No=r;else e:for(n=e;null!==No;){var s=(r=No).sibling,a=r.return;if(So(r),r===n){No=null;break e}if(null!==s){s.return=a,No=s;break e}No=a}}}var ec={getCacheForType:function(e){var t=As(Ls),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,sc=null,ac=0,ic=0,lc=null,oc=!1,cc=!1,dc=!1,uc=0,hc=0,pc=0,mc=0,fc=0,bc=0,gc=0,vc=null,xc=null,yc=!1,wc=0,jc=1/0,Nc=null,kc=null,Sc=0,Ac=null,Cc=null,Ec=0,Mc=0,Ic=null,_c=null,Lc=0,Tc=null;function Pc(){if(0!==(2&nc)&&0!==ac)return ac&-ac;if(null!==P.T){return 0!==Os?Os:Md()}return Ie()}function Dc(){0===bc&&(bc=0===(536870912&ac)||as?je():536870912);var e=rl.current;return null!==e&&(e.flags|=32),bc}function zc(e,t,n){(e!==rc||2!==ic&&9!==ic)&&null===e.cancelPendingCommit||(Uc(e,0),$c(e,ac,bc,!1)),Se(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(mc|=n),4===hc&&$c(e,ac,bc,!1)),jd(e))}function Oc(e,t,n){if(0!==(6&nc))throw Error(i(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||ye(e,t),s=r?function(e,t){var n=nc;nc|=2;var r=Wc(),s=Kc();rc!==e||ac!==t?(Nc=null,jc=te()+500,Uc(e,t)):cc=ye(e,t);e:for(;;)try{if(0!==ic&&null!==sc){t=sc;var a=lc;t:switch(ic){case 1:ic=0,lc=null,Zc(e,t,a,1);break;case 2:case 9:if(Vs(a)){ic=0,lc=null,Jc(t);break}t=function(){2!==ic&&9!==ic||rc!==e||(ic=7),jd(e)},a.then(t,t);break e;case 3:ic=7;break e;case 4:ic=5;break e;case 7:Vs(a)?(ic=0,lc=null,Jc(t)):(ic=0,lc=null,Zc(e,t,a,7));break;case 5:var l=null;switch(sc.tag){case 26:l=sc.memoizedState;case 5:case 27:var o=sc;if(!l||Bu(l)){ic=0,lc=null;var c=o.sibling;if(null!==c)sc=c;else{var d=o.return;null!==d?(sc=d,ed(d)):sc=null}break t}}ic=0,lc=null,Zc(e,t,a,5);break;case 6:ic=0,lc=null,Zc(e,t,a,6);break;case 8:Hc(),hc=6;break e;default:throw Error(i(462))}}Qc();break}catch(u){qc(e,u)}return vs=gs=null,P.H=r,P.A=s,nc=n,null!==sc?0:(rc=null,ac=0,Er(),hc)}(e,t):Xc(e,t,!0),a=r;;){if(0===s){cc&&!r&&$c(e,t,0,!1);break}if(n=e.current.alternate,!a||Fc(n)){if(2===s){if(a=t,e.errorRecoveryDisabledLanes&a)var l=0;else l=0!==(l=-536870913&e.pendingLanes)?l:536870912&l?536870912:0;if(0!==l){t=l;e:{var o=e;s=vc;var c=o.current.memoizedState.isDehydrated;if(c&&(Uc(o,l).flags|=256),2!==(l=Xc(o,l,!1))){if(dc&&!c){o.errorRecoveryDisabledLanes|=a,mc|=a,s=4;break e}a=xc,xc=s,null!==a&&(null===xc?xc=a:xc.push.apply(xc,a))}s=l}if(a=!1,2!==s)continue}}if(1===s){Uc(e,0),$c(e,t,0,!0);break}e:{switch(r=e,a=s){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:$c(r,t,bc,!oc);break e;case 2:xc=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&t)===t&&10<(s=wc+300-te())){if($c(r,t,bc,!oc),0!==xe(r,0,!0))break e;r.timeoutHandle=ou(Rc.bind(null,r,n,xc,Nc,yc,t,bc,mc,gc,oc,a,2,-0,0),s)}else Rc(r,n,xc,Nc,yc,t,bc,mc,gc,oc,a,0,-0,0)}break}s=Xc(e,t,!1),a=!1}jd(e)}function Rc(e,t,n,r,s,a,l,o,c,d,u,h,p,m){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Hu={stylesheets:null,count:0,unsuspend:Uu},Xo(t),null!==(h=function(){if(null===Hu)throw Error(i(475));var e=Hu;return e.stylesheets&&0===e.count&&Ku(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Ku(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nd.bind(null,e,t,a,n,r,s,l,o,c,u,1,p,m)),void $c(e,a,l,!d);nd(e,t,a,n,r,s,l,o,c)}function Fc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!Vn(a(),s))return!1}catch(i){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $c(e,t,n,r){t&=~fc,t&=~mc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var a=31-pe(s),i=1<<a;r[a]=-1,s&=~i}0!==n&&Ae(e,n,t)}function Bc(){return 0!==(6&nc)||(Nd(0,!1),!1)}function Hc(){if(null!==sc){if(0===ic)var e=sc.return;else vs=gs=null,Oa(e=sc),Xi=null,Vi=0,e=sc;for(;null!==e;)so(e.alternate,e),e=e.return;sc=null}}function Uc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cu(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Hc(),rc=e,sc=n=Rr(e.current,null),ac=t,ic=0,lc=null,oc=!1,cc=ye(e,t),dc=!1,gc=bc=fc=mc=pc=hc=0,xc=vc=null,yc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-pe(r),a=1<<s;t|=e[s],r&=~a}return uc=t,Er(),n}function qc(e,t){xa=null,P.H=qi,t===Ws||t===Ys?(t=Zs(),ic=3):t===Ks?(t=Zs(),ic=4):ic=t===Sl?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,lc=t,null===sc&&(hc=1,yl(e,kr(t,e.current)))}function Wc(){var e=P.H;return P.H=qi,null===e?qi:e}function Kc(){var e=P.A;return P.A=ec,e}function Yc(){hc=4,oc||(4194048&ac)!==ac&&null!==rl.current||(cc=!0),0===(134217727&pc)&&0===(134217727&mc)||null===rc||$c(rc,ac,bc,!1)}function Xc(e,t,n){var r=nc;nc|=2;var s=Wc(),a=Kc();rc===e&&ac===t||(Nc=null,Uc(e,t)),t=!1;var i=hc;e:for(;;)try{if(0!==ic&&null!==sc){var l=sc,o=lc;switch(ic){case 8:Hc(),i=6;break e;case 3:case 2:case 9:case 6:null===rl.current&&(t=!0);var c=ic;if(ic=0,lc=null,Zc(e,l,o,c),n&&cc){i=0;break e}break;default:c=ic,ic=0,lc=null,Zc(e,l,o,c)}}Vc(),i=hc;break}catch(d){qc(e,d)}return t&&e.shellSuspendCounter++,vs=gs=null,nc=r,P.H=s,P.A=a,null===sc&&(rc=null,ac=0,Er()),i}function Vc(){for(;null!==sc;)Gc(sc)}function Qc(){for(;null!==sc&&!Z();)Gc(sc)}function Gc(e){var t=Ql(e.alternate,e,uc);e.memoizedProps=e.pendingProps,null===t?ed(e):sc=t}function Jc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Dl(n,t,t.pendingProps,t.type,void 0,ac);break;case 11:t=Dl(n,t,t.pendingProps,t.type.render,t.ref,ac);break;case 5:Oa(t);default:so(n,t),t=Ql(n,t=sc=Fr(t,uc),uc)}e.memoizedProps=e.pendingProps,null===t?ed(e):sc=t}function Zc(e,t,n,r){vs=gs=null,Oa(t),Xi=null,Vi=0;var s=t.return;try{if(function(e,t,n,r,s){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ns(t,n,s,!0),null!==(n=rl.current)){switch(n.tag){case 13:return null===sl?Yc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===Xs?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),ud(e,r,s)),!1;case 22:return n.flags|=65536,r===Xs?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),ud(e,r,s)),!1}throw Error(i(435,n.tag))}return ud(e,r,s),Yc(),!1}if(as)return null!==(t=rl.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==os&&fs(kr(e=Error(i(422),{cause:r}),n))):(r!==os&&fs(kr(t=Error(i(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,r=kr(r,n),la(e,s=jl(e.stateNode,r,s)),4!==hc&&(hc=2)),!1;var a=Error(i(520),{cause:r});if(a=kr(a,n),null===vc?vc=[a]:vc.push(a),4!==hc&&(hc=2),null===t)return!0;r=kr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,la(n,e=jl(n.stateNode,r,e)),!1;case 1:if(t=n.type,a=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==a&&"function"===typeof a.componentDidCatch&&(null===kc||!kc.has(a))))return n.flags|=65536,s&=-s,n.lanes|=s,kl(s=Nl(s),e,n,r),la(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,ac))return hc=1,yl(e,kr(n,e.current)),void(sc=null)}catch(a){if(null!==s)throw sc=s,a;return hc=1,yl(e,kr(n,e.current)),void(sc=null)}32768&t.flags?(as||1===r?e=!0:cc||0!==(536870912&ac)?e=!1:(oc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=rl.current)&&13===r.tag&&(r.flags|=16384))),td(t,e)):ed(t)}function ed(e){var t=e;do{if(0!==(32768&t.flags))return void td(t,oc);e=t.return;var n=no(t.alternate,t,uc);if(null!==n)return void(sc=n);if(null!==(t=t.sibling))return void(sc=t);sc=t=e}while(null!==t);0===hc&&(hc=5)}function td(e,t){do{var n=ro(e.alternate,e);if(null!==n)return n.flags&=32767,void(sc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(sc=e);sc=e=n}while(null!==e);hc=6,sc=null}function nd(e,t,n,r,s,a,l,o,c){e.cancelPendingCommit=null;do{ld()}while(0!==Sc);if(0!==(6&nc))throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,s,a){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,o=e.expirationTimes,c=e.hiddenUpdates;for(n=i&~n;0<n;){var d=31-pe(n),u=1<<d;l[d]=0,o[d]=-1;var h=c[d];if(null!==h)for(c[d]=null,d=0;d<h.length;d++){var p=h[d];null!==p&&(p.lane&=-536870913)}n&=~u}0!==r&&Ae(e,r,0),0!==a&&0===s&&0!==e.tag&&(e.suspendedLanes|=a&~(i&~t))}(e,n,a|=Cr,l,o,c),e===rc&&(sc=rc=null,ac=0),Cc=t,Ac=e,Ec=n,Mc=a,Ic=s,_c=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,G(ae,function(){return od(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=P.T,P.T=null,s=D.p,D.p=2,l=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,tu=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(b){n=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==s&&3!==h.nodeType||(o=l+s),h!==a||0!==r&&3!==h.nodeType||(c=l+r),3===h.nodeType&&(l+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++d===s&&(o=l),p===a&&++u===r&&(c=l),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===o||-1===c?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nu={focusedElem:e,selectionRange:n},nh=!1,No=t;null!==No;)if(e=(t=No).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,No=e;else for(;null!==No;){switch(a=(t=No).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==a){e=void 0,n=t,s=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var f=fl(n.type,s,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(f,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(g){dd(n,n.return,g)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))fu(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fu(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(i(163))}if(null!==(e=t.sibling)){e.return=t.return,No=e;break}No=t.return}}(e,t)}finally{nc=l,D.p=s,P.T=r}}Sc=1,rd(),sd(),ad()}}function rd(){if(1===Sc){Sc=0;var e=Ac,t=Cc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=P.T,P.T=null;var r=D.p;D.p=2;var s=nc;nc|=4;try{Po(t,e);var a=nu,i=er(e.containerInfo),l=a.focusedElem,o=a.selectionRange;if(i!==l&&l&&l.ownerDocument&&Zn(l.ownerDocument.documentElement,l)){if(null!==o&&tr(l)){var c=o.start,d=o.end;if(void 0===d&&(d=c),"selectionStart"in l)l.selectionStart=c,l.selectionEnd=Math.min(d,l.value.length);else{var u=l.ownerDocument||document,h=u&&u.defaultView||window;if(h.getSelection){var p=h.getSelection(),m=l.textContent.length,f=Math.min(o.start,m),b=void 0===o.end?f:Math.min(o.end,m);!p.extend&&f>b&&(i=b,b=f,f=i);var g=Jn(l,f),v=Jn(l,b);if(g&&v&&(1!==p.rangeCount||p.anchorNode!==g.node||p.anchorOffset!==g.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var x=u.createRange();x.setStart(g.node,g.offset),p.removeAllRanges(),f>b?(p.addRange(x),p.extend(v.node,v.offset)):(x.setEnd(v.node,v.offset),p.addRange(x))}}}}for(u=[],p=l;p=p.parentNode;)1===p.nodeType&&u.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof l.focus&&l.focus(),l=0;l<u.length;l++){var y=u[l];y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}nh=!!tu,nu=tu=null}finally{nc=s,D.p=r,P.T=n}}e.current=t,Sc=2}}function sd(){if(2===Sc){Sc=0;var e=Ac,t=Cc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=P.T,P.T=null;var r=D.p;D.p=2;var s=nc;nc|=4;try{ko(e,t.alternate,t)}finally{nc=s,D.p=r,P.T=n}}Sc=3}}function ad(){if(4===Sc||3===Sc){Sc=0,ee();var e=Ac,t=Cc,n=Ec,r=_c;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Sc=5:(Sc=0,Cc=Ac=null,id(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(kc=null),Me(n),t=t.stateNode,ue&&"function"===typeof ue.onCommitFiberRoot)try{ue.onCommitFiberRoot(de,t,void 0,128===(128&t.current.flags))}catch(o){}if(null!==r){t=P.T,s=D.p,D.p=2,P.T=null;try{for(var a=e.onRecoverableError,i=0;i<r.length;i++){var l=r[i];a(l.value,{componentStack:l.stack})}}finally{P.T=t,D.p=s}}0!==(3&Ec)&&ld(),jd(e),s=e.pendingLanes,0!==(4194090&n)&&0!==(42&s)?e===Tc?Lc++:(Lc=0,Tc=e):Lc=0,Nd(0,!1)}}function id(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ps(t)))}function ld(e){return rd(),sd(),ad(),od()}function od(){if(5!==Sc)return!1;var e=Ac,t=Mc;Mc=0;var n=Me(Ec),r=P.T,s=D.p;try{D.p=32>n?32:n,P.T=null,n=Ic,Ic=null;var a=Ac,l=Ec;if(Sc=0,Cc=Ac=null,Ec=0,0!==(6&nc))throw Error(i(331));var o=nc;if(nc|=4,Go(a.current),Uo(a,a.current,l,n),nc=o,Nd(0,!1),ue&&"function"===typeof ue.onPostCommitFiberRoot)try{ue.onPostCommitFiberRoot(de,a)}catch(c){}return!0}finally{D.p=s,P.T=r,id(e,t)}}function cd(e,t,n){t=kr(n,t),null!==(e=aa(e,t=jl(e.stateNode,t,2),2))&&(Se(e,2),jd(e))}function dd(e,t,n){if(3===e.tag)cd(e,e,n);else for(;null!==t;){if(3===t.tag){cd(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===kc||!kc.has(r))){e=kr(n,e),null!==(r=aa(t,n=Nl(2),2))&&(kl(n,r,t,e),Se(r,2),jd(r));break}}t=t.return}}function ud(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(dc=!0,s.add(n),e=hd.bind(null,e,t,n),t.then(e,e))}function hd(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(ac&n)===n&&(4===hc||3===hc&&(62914560&ac)===ac&&300>te()-wc?0===(2&nc)&&Uc(e,0):fc|=n,gc===ac&&(gc=0)),jd(e)}function pd(e,t){0===t&&(t=Ne()),null!==(e=_r(e,t))&&(Se(e,t),jd(e))}function md(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pd(e,n)}function fd(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==r&&r.delete(t),pd(e,n)}var bd=null,gd=null,vd=!1,xd=!1,yd=!1,wd=0;function jd(e){e!==gd&&null===e.next&&(null===gd?bd=gd=e:gd=gd.next=e),xd=!0,vd||(vd=!0,uu(function(){0!==(6&nc)?G(re,kd):Sd()}))}function Nd(e,t){if(!yd&&xd){yd=!0;do{for(var n=!1,r=bd;null!==r;){if(!t)if(0!==e){var s=r.pendingLanes;if(0===s)var a=0;else{var i=r.suspendedLanes,l=r.pingedLanes;a=(1<<31-pe(42|e)+1)-1,a=201326741&(a&=s&~(i&~l))?201326741&a|1:a?2|a:0}0!==a&&(n=!0,Ed(r,a))}else a=ac,0===(3&(a=xe(r,r===rc?a:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||ye(r,a)||(n=!0,Ed(r,a));r=r.next}}while(n);yd=!1}}function kd(){Sd()}function Sd(){xd=vd=!1;var e=0;0!==wd&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==lu&&(lu=e,!0);return lu=null,!1}()&&(e=wd),wd=0);for(var t=te(),n=null,r=bd;null!==r;){var s=r.next,a=Ad(r,t);0===a?(r.next=null,null===n?bd=s:n.next=s,null===s&&(gd=n)):(n=r,(0!==e||0!==(3&a))&&(xd=!0)),r=s}Nd(e,!1)}function Ad(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var i=31-pe(a),l=1<<i,o=s[i];-1===o?0!==(l&n)&&0===(l&r)||(s[i]=we(l,t)):o<=t&&(e.expiredLanes|=l),a&=~l}if(n=ac,n=xe(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===ic||9===ic)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||ye(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&J(r),Me(n)){case 2:case 8:n=se;break;case 32:default:n=ae;break;case 268435456:n=le}return r=Cd.bind(null,e),n=G(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function Cd(e,t){if(0!==Sc&&5!==Sc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ld()&&e.callbackNode!==n)return null;var r=ac;return 0===(r=xe(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Oc(e,r,t),Ad(e,te()),null!=e.callbackNode&&e.callbackNode===n?Cd.bind(null,e):null)}function Ed(e,t){if(ld())return null;Oc(e,t,!0)}function Md(){return 0===wd&&(wd=je()),wd}function Id(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Mt(""+e)}function _d(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ld=0;Ld<wr.length;Ld++){var Td=wr[Ld];jr(Td.toLowerCase(),"on"+(Td[0].toUpperCase()+Td.slice(1)))}jr(pr,"onAnimationEnd"),jr(mr,"onAnimationIteration"),jr(fr,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(br,"onTransitionRun"),jr(gr,"onTransitionStart"),jr(vr,"onTransitionCancel"),jr(xr,"onTransitionEnd"),Ve("onMouseEnter",["mouseout","mouseover"]),Ve("onMouseLeave",["mouseout","mouseover"]),Ve("onPointerEnter",["pointerout","pointerover"]),Ve("onPointerLeave",["pointerout","pointerover"]),Xe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pd));function zd(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==a&&s.isPropagationStopped())break e;a=l,s.currentTarget=c;try{a(s)}catch(d){bl(d)}s.currentTarget=null,a=o}else for(i=0;i<r.length;i++){if(o=(l=r[i]).instance,c=l.currentTarget,l=l.listener,o!==a&&s.isPropagationStopped())break e;a=l,s.currentTarget=c;try{a(s)}catch(d){bl(d)}s.currentTarget=null,a=o}}}}function Od(e,t){var n=t[De];void 0===n&&(n=t[De]=new Set);var r=e+"__bubble";n.has(r)||(Bd(t,e,2,!1),n.add(r))}function Rd(e,t,n){var r=0;t&&(r|=4),Bd(n,e,r,t)}var Fd="_reactListening"+Math.random().toString(36).slice(2);function $d(e){if(!e[Fd]){e[Fd]=!0,Ke.forEach(function(t){"selectionchange"!==t&&(Dd.has(t)||Rd(t,!1,e),Rd(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fd]||(t[Fd]=!0,Rd("selectionchange",!1,t))}}function Bd(e,t,n,r){switch(ch(t)){case 2:var s=rh;break;case 8:s=sh;break;default:s=ah}n=s.bind(null,t,n,e),s=void 0,!Ft||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Hd(e,t,n,r,s){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var l=r.stateNode.containerInfo;if(l===s)break;if(4===i)for(i=r.return;null!==i;){var c=i.tag;if((3===c||4===c)&&i.stateNode.containerInfo===s)return;i=i.return}for(;null!==l;){if(null===(i=Be(l)))return;if(5===(c=i.tag)||6===c||26===c||27===c){r=a=i;continue e}l=l.parentNode}}r=r.return}zt(function(){var r=a,s=_t(n),i=[];e:{var l=yr.get(e);if(void 0!==l){var c=Zt,d=e;switch(e){case"keypress":if(0===Wt(n))break e;case"keydown":case"keyup":c=fn;break;case"focusin":d="focus",c=an;break;case"focusout":d="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=gn;break;case pr:case mr:case fr:c=ln;break;case xr:c=vn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=xn;break;case"copy":case"cut":case"paste":c=on;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=bn;break;case"toggle":case"beforetoggle":c=yn}var u=0!==(4&t),h=!u&&("scroll"===e||"scrollend"===e),p=u?null!==l?l+"Capture":null:l;u=[];for(var m,f=r;null!==f;){var b=f;if(m=b.stateNode,5!==(b=b.tag)&&26!==b&&27!==b||null===m||null===p||null!=(b=Ot(f,p))&&u.push(Ud(f,b,m)),h)break;f=f.return}0<u.length&&(l=new c(l,d,null,n,s),i.push({event:l,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===It||!(d=n.relatedTarget||n.fromElement)||!Be(d)&&!d[Pe])&&(c||l)&&(l=s.window===s?s:(l=s.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=r,null!==(d=(d=n.relatedTarget||n.toElement)?Be(d):null)&&(h=o(d),u=d.tag,d!==h||5!==u&&27!==u&&6!==u)&&(d=null)):(c=null,d=r),c!==d)){if(u=rn,b="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=bn,b="onPointerLeave",p="onPointerEnter",f="pointer"),h=null==c?l:Ue(c),m=null==d?l:Ue(d),(l=new u(b,f+"leave",c,n,s)).target=h,l.relatedTarget=m,b=null,Be(s)===r&&((u=new u(p,f+"enter",d,n,s)).target=m,u.relatedTarget=h,b=u),h=b,c&&d)e:{for(p=d,f=0,m=u=c;m;m=Wd(m))f++;for(m=0,b=p;b;b=Wd(b))m++;for(;0<f-m;)u=Wd(u),f--;for(;0<m-f;)p=Wd(p),m--;for(;f--;){if(u===p||null!==p&&u===p.alternate)break e;u=Wd(u),p=Wd(p)}u=null}else u=null;null!==c&&Kd(i,l,c,u,!1),null!==d&&null!==h&&Kd(i,h,d,u,!0)}if("select"===(c=(l=r?Ue(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var g=Rn;else if(Ln(l))if(Fn)g=Xn;else{g=Kn;var v=Wn}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?r&&At(r.elementType)&&(g=Rn):g=Yn;switch(g&&(g=g(e,r))?Tn(i,g,n,s):(v&&v(e,l,r),"focusout"===e&&r&&"number"===l.type&&null!=r.memoizedProps.value&&vt(l,"number",l.value)),v=r?Ue(r):window,e){case"focusin":(Ln(v)||"true"===v.contentEditable)&&(rr=v,sr=r,ar=null);break;case"focusout":ar=sr=rr=null;break;case"mousedown":ir=!0;break;case"contextmenu":case"mouseup":case"dragend":ir=!1,lr(i,n,s);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":lr(i,n,s)}var x;if(jn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else In?En(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Sn&&"ko"!==n.locale&&(In||"onCompositionStart"!==y?"onCompositionEnd"===y&&In&&(x=qt()):(Ht="value"in(Bt=s)?Bt.value:Bt.textContent,In=!0)),0<(v=qd(r,y)).length&&(y=new cn(y,e,null,n,s),i.push({event:y,listeners:v}),x?y.data=x:null!==(x=Mn(n))&&(y.data=x))),(x=kn?function(e,t){switch(e){case"compositionend":return Mn(t);case"keypress":return 32!==t.which?null:(Cn=!0,An);case"textInput":return(e=t.data)===An&&Cn?null:e;default:return null}}(e,n):function(e,t){if(In)return"compositionend"===e||!jn&&En(e,t)?(e=qt(),Ut=Ht=Bt=null,In=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(y=qd(r,"onBeforeInput")).length&&(v=new cn("onBeforeInput","beforeinput",null,n,s),i.push({event:v,listeners:y}),v.data=x)),function(e,t,n,r,s){if("submit"===t&&n&&n.stateNode===s){var a=Id((s[Te]||null).action),i=r.submitter;i&&null!==(t=(t=i[Te]||null)?Id(t.formAction):i.getAttribute("formAction"))&&(a=t,i=null);var l=new Zt("action","action",null,r,s);e.push({event:l,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==wd){var e=i?_d(s,i):new FormData(s);Ii(n,{pending:!0,data:e,method:s.method,action:a},null,e)}}else"function"===typeof a&&(l.preventDefault(),e=i?_d(s,i):new FormData(s),Ii(n,{pending:!0,data:e,method:s.method,action:a},a,e))},currentTarget:s}]})}}(i,e,r,n,s)}zd(i,t)})}function Ud(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qd(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,a=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===a||(null!=(s=Ot(e,n))&&r.unshift(Ud(e,s,a)),null!=(s=Ot(e,t))&&r.push(Ud(e,s,a))),3===e.tag)return r;e=e.return}return[]}function Wd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Kd(e,t,n,r,s){for(var a=t._reactName,i=[];null!==n&&n!==r;){var l=n,o=l.alternate,c=l.stateNode;if(l=l.tag,null!==o&&o===r)break;5!==l&&26!==l&&27!==l||null===c||(o=c,s?null!=(c=Ot(n,a))&&i.unshift(Ud(n,c,o)):s||null!=(c=Ot(n,a))&&i.push(Ud(n,c,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Yd=/\r\n?/g,Xd=/\u0000|\uFFFD/g;function Vd(e){return("string"===typeof e?e:""+e).replace(Yd,"\n").replace(Xd,"")}function Qd(e,t){return t=Vd(t),Vd(e)===t}function Gd(){}function Jd(e,t,n,r,s,a){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||jt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&jt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":St(e,r,a);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Mt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof a&&("formAction"===n?("input"!==t&&Jd(e,t,"name",s.name,s,null),Jd(e,t,"formEncType",s.formEncType,s,null),Jd(e,t,"formMethod",s.formMethod,s,null),Jd(e,t,"formTarget",s.formTarget,s,null)):(Jd(e,t,"encType",s.encType,s,null),Jd(e,t,"method",s.method,s,null),Jd(e,t,"target",s.target,s,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Mt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Gd);break;case"onScroll":null!=r&&Od("scroll",e);break;case"onScrollEnd":null!=r&&Od("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(i(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Mt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Od("beforetoggle",e),Od("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Ct.get(n)||n,r)}}function Zd(e,t,n,r,s,a){switch(n){case"style":St(e,r,a);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(i(60));e.innerHTML=n}}break;case"children":"string"===typeof r?jt(e,r):("number"===typeof r||"bigint"===typeof r)&&jt(e,""+r);break;case"onScroll":null!=r&&Od("scroll",e);break;case"onScrollEnd":null!=r&&Od("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Gd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ye.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(a=null!=(a=e[Te]||null)?a[n]:null)&&e.removeEventListener(t,a,s),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s)))}}function eu(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Od("error",e),Od("load",e);var r,s=!1,a=!1;for(r in n)if(n.hasOwnProperty(r)){var l=n[r];if(null!=l)switch(r){case"src":s=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Jd(e,t,r,l,n,null)}}return a&&Jd(e,t,"srcSet",n.srcSet,n,null),void(s&&Jd(e,t,"src",n.src,n,null));case"input":Od("invalid",e);var o=r=l=a=null,c=null,d=null;for(s in n)if(n.hasOwnProperty(s)){var u=n[s];if(null!=u)switch(s){case"name":a=u;break;case"type":l=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":r=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(i(137,t));break;default:Jd(e,t,s,u,n,null)}}return gt(e,r,o,c,d,l,a,!1),void ut(e);case"select":for(a in Od("invalid",e),s=l=r=null,n)if(n.hasOwnProperty(a)&&null!=(o=n[a]))switch(a){case"value":r=o;break;case"defaultValue":l=o;break;case"multiple":s=o;default:Jd(e,t,a,o,n,null)}return t=r,n=l,e.multiple=!!s,void(null!=t?xt(e,!!s,t,!1):null!=n&&xt(e,!!s,n,!0));case"textarea":for(l in Od("invalid",e),r=a=s=null,n)if(n.hasOwnProperty(l)&&null!=(o=n[l]))switch(l){case"value":s=o;break;case"defaultValue":a=o;break;case"children":r=o;break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(i(91));break;default:Jd(e,t,l,o,n,null)}return wt(e,s,a,r),void ut(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else Jd(e,t,c,s,n,null);return;case"dialog":Od("beforetoggle",e),Od("toggle",e),Od("cancel",e),Od("close",e);break;case"iframe":case"object":Od("load",e);break;case"video":case"audio":for(s=0;s<Pd.length;s++)Od(Pd[s],e);break;case"image":Od("error",e),Od("load",e);break;case"details":Od("toggle",e);break;case"embed":case"source":case"link":Od("error",e),Od("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&null!=(s=n[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Jd(e,t,d,s,n,null)}return;default:if(At(t)){for(u in n)n.hasOwnProperty(u)&&(void 0!==(s=n[u])&&Zd(e,t,u,s,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(null!=(s=n[o])&&Jd(e,t,o,s,n,null))}var tu=null,nu=null;function ru(e){return 9===e.nodeType?e:e.ownerDocument}function su(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function au(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function iu(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var lu=null;var ou="function"===typeof setTimeout?setTimeout:void 0,cu="function"===typeof clearTimeout?clearTimeout:void 0,du="function"===typeof Promise?Promise:void 0,uu="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof du?function(e){return du.resolve(null).then(e).catch(hu)}:ou;function hu(e){setTimeout(function(){throw e})}function pu(e){return"head"===e}function mu(e,t){var n=t,r=0,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0<r&&8>r){n=r;var i=e.ownerDocument;if(1&n&&wu(i.documentElement),2&n&&wu(i.body),4&n)for(wu(n=i.head),i=n.firstChild;i;){var l=i.nextSibling,o=i.nodeName;i[Fe]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=l}}if(0===s)return e.removeChild(a),void Ch(t);s--}else"$"===n||"$?"===n||"$!"===n?s++:r=n.charCodeAt(0)-48;else r=0;n=a}while(n);Ch(t)}function fu(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":fu(n),$e(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function bu(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function gu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vu=null;function xu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function yu(e,t,n){switch(t=ru(n),e){case"html":if(!(e=t.documentElement))throw Error(i(452));return e;case"head":if(!(e=t.head))throw Error(i(453));return e;case"body":if(!(e=t.body))throw Error(i(454));return e;default:throw Error(i(451))}}function wu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);$e(e)}var ju=new Map,Nu=new Set;function ku(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Su=D.d;D.d={f:function(){var e=Su.f(),t=Bc();return e||t},r:function(e){var t=He(e);null!==t&&5===t.tag&&"form"===t.type?Li(t):Su.r(e)},D:function(e){Su.D(e),Cu("dns-prefetch",e,null)},C:function(e,t){Su.C(e,t),Cu("preconnect",e,t)},L:function(e,t,n){Su.L(e,t,n);var r=Au;if(r&&e&&t){var s='link[rel="preload"][as="'+ft(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+ft(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+ft(n.imageSizes)+'"]')):s+='[href="'+ft(e)+'"]';var a=s;switch(t){case"style":a=Mu(e);break;case"script":a=Lu(e)}ju.has(a)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),ju.set(a,e),null!==r.querySelector(s)||"style"===t&&r.querySelector(Iu(a))||"script"===t&&r.querySelector(Tu(a))||(eu(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}},m:function(e,t){Su.m(e,t);var n=Au;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+ft(r)+'"][href="'+ft(e)+'"]',a=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Lu(e)}if(!ju.has(a)&&(e=h({rel:"modulepreload",href:e},t),ju.set(a,e),null===n.querySelector(s))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Tu(a)))return}eu(r=n.createElement("link"),"link",e),We(r),n.head.appendChild(r)}}},X:function(e,t){Su.X(e,t);var n=Au;if(n&&e){var r=qe(n).hoistableScripts,s=Lu(e),a=r.get(s);a||((a=n.querySelector(Tu(s)))||(e=h({src:e,async:!0},t),(t=ju.get(s))&&Ou(e,t),We(a=n.createElement("script")),eu(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(s,a))}},S:function(e,t,n){Su.S(e,t,n);var r=Au;if(r&&e){var s=qe(r).hoistableStyles,a=Mu(e);t=t||"default";var i=s.get(a);if(!i){var l={loading:0,preload:null};if(i=r.querySelector(Iu(a)))l.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ju.get(a))&&zu(e,n);var o=i=r.createElement("link");We(o),eu(o,"link",e),o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),o.addEventListener("load",function(){l.loading|=1}),o.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Du(i,t,r)}i={type:"stylesheet",instance:i,count:1,state:l},s.set(a,i)}}},M:function(e,t){Su.M(e,t);var n=Au;if(n&&e){var r=qe(n).hoistableScripts,s=Lu(e),a=r.get(s);a||((a=n.querySelector(Tu(s)))||(e=h({src:e,async:!0,type:"module"},t),(t=ju.get(s))&&Ou(e,t),We(a=n.createElement("script")),eu(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(s,a))}}};var Au="undefined"===typeof document?null:document;function Cu(e,t,n){var r=Au;if(r&&"string"===typeof t&&t){var s=ft(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),Nu.has(s)||(Nu.add(s),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(s)&&(eu(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}}function Eu(e,t,n,r){var s,a,l,o,c=(c=q.current)?ku(c):null;if(!c)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Mu(n.href),(r=(n=qe(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Mu(n.href);var d=qe(c).hoistableStyles,u=d.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=c.querySelector(Iu(e)))&&!d._p&&(u.instance=d,u.state.loading=5),ju.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ju.set(e,n),d||(s=c,a=e,l=n,o=u.state,s.querySelector('link[rel="preload"][as="style"]['+a+"]")?o.loading=1:(a=s.createElement("link"),o.preload=a,a.addEventListener("load",function(){return o.loading|=1}),a.addEventListener("error",function(){return o.loading|=2}),eu(a,"link",l),We(a),s.head.appendChild(a))))),t&&null===r)throw Error(i(528,""));return u}if(t&&null!==r)throw Error(i(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Lu(n),(r=(n=qe(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Mu(e){return'href="'+ft(e)+'"'}function Iu(e){return'link[rel="stylesheet"]['+e+"]"}function _u(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Lu(e){return'[src="'+ft(e)+'"]'}function Tu(e){return"script[async]"+e}function Pu(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+ft(n.href)+'"]');if(r)return t.instance=r,We(r),r;var s=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return We(r=(e.ownerDocument||e).createElement("style")),eu(r,"style",s),Du(r,n.precedence,e),t.instance=r;case"stylesheet":s=Mu(n.href);var a=e.querySelector(Iu(s));if(a)return t.state.loading|=4,t.instance=a,We(a),a;r=_u(n),(s=ju.get(s))&&zu(r,s),We(a=(e.ownerDocument||e).createElement("link"));var l=a;return l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),eu(a,"link",r),t.state.loading|=4,Du(a,n.precedence,e),t.instance=a;case"script":return a=Lu(n.src),(s=e.querySelector(Tu(a)))?(t.instance=s,We(s),s):(r=n,(s=ju.get(a))&&Ou(r=h({},n),s),We(s=(e=e.ownerDocument||e).createElement("script")),eu(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(i(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Du(r,n.precedence,e));return t.instance}function Du(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,a=s,i=0;i<r.length;i++){var l=r[i];if(l.dataset.precedence===t)a=l;else if(a!==s)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function zu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Ou(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ru=null;function Fu(e,t,n){if(null===Ru){var r=new Map,s=Ru=new Map;s.set(n,r)}else(r=(s=Ru).get(n))||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var a=n[s];if(!(a[Fe]||a[Le]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var i=a.getAttribute(t)||"";i=e+i;var l=r.get(i);l?l.push(a):r.set(i,[a])}}return r}function $u(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Bu(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Hu=null;function Uu(){}function qu(){if(this.count--,0===this.count)if(this.stylesheets)Ku(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Wu=null;function Ku(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Wu=new Map,t.forEach(Yu,e),Wu=null,qu.call(e))}function Yu(e,t){if(!(4&t.state.loading)){var n=Wu.get(e);if(n)var r=n.get(null);else{n=new Map,Wu.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<s.length;a++){var i=s[a];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(n.set(i.dataset.precedence,i),r=i)}r&&n.set(null,r)}i=(s=t.instance).getAttribute("data-precedence"),(a=n.get(i)||r)===r&&n.set(null,s),n.set(i,s),this.count++,r=qu.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),a?a.parentNode.insertBefore(s,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var Xu={$$typeof:w,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function Vu(e,t,n,r,s,a,i,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.hiddenUpdates=ke(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=a,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function Qu(e,t,n,r,s,a,i,l,o,c,d,u){return e=new Vu(e,t,n,i,l,o,c,u),t=1,!0===a&&(t|=24),a=zr(3,null,null,t),e.current=a,a.stateNode=e,(t=Ts()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},na(a),e}function Gu(e){return e?e=Pr:Pr}function Ju(e,t,n,r,s,a){s=Gu(s),null===r.context?r.context=s:r.pendingContext=s,(r=sa(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=aa(e,r,t))&&(zc(n,0,t),ia(n,e,t))}function Zu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zu(e,t),(e=e.alternate)&&Zu(e,t)}function th(e){if(13===e.tag){var t=_r(e,67108864);null!==t&&zc(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var s=P.T;P.T=null;var a=D.p;try{D.p=2,ah(e,t,n,r)}finally{D.p=a,P.T=s}}function sh(e,t,n,r){var s=P.T;P.T=null;var a=D.p;try{D.p=8,ah(e,t,n,r)}finally{D.p=a,P.T=s}}function ah(e,t,n,r){if(nh){var s=ih(r);if(null===s)Hd(e,t,r,lh,n),vh(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return uh=xh(uh,e,t,n,r,s),!0;case"dragenter":return hh=xh(hh,e,t,n,r,s),!0;case"mouseover":return ph=xh(ph,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return mh.set(a,xh(mh.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,fh.set(a,xh(fh.get(a)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(vh(e,r),4&t&&-1<gh.indexOf(e)){for(;null!==s;){var a=He(s);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var i=ve(a.pendingLanes);if(0!==i){var l=a;for(l.pendingLanes|=2,l.entangledLanes|=2;i;){var o=1<<31-pe(i);l.entanglements[1]|=o,i&=~o}jd(a),0===(6&nc)&&(jc=te()+500,Nd(0,!1))}}break;case 13:null!==(l=_r(a,2))&&zc(l,0,2),Bc(),eh(a,2)}if(null===(a=ih(r))&&Hd(e,t,r,lh,n),a===s)break;s=a}null!==s&&r.stopPropagation()}else Hd(e,t,r,null,n)}}function ih(e){return oh(e=_t(e))}var lh=null;function oh(e){if(lh=null,null!==(e=Be(e))){var t=o(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return lh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case se:return 8;case ae:case ie:return 32;case le:return 268435456;default:return 32}default:return 32}}var dh=!1,uh=null,hh=null,ph=null,mh=new Map,fh=new Map,bh=[],gh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vh(e,t){switch(e){case"focusin":case"focusout":uh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":ph=null;break;case"pointerover":case"pointerout":mh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fh.delete(t.pointerId)}}function xh(e,t,n,r,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=He(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function yh(e){var t=Be(e.target);if(null!==t){var n=o(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}(e.priority,function(){if(13===n.tag){var e=Pc();e=Ee(e);var t=_r(n,e);null!==t&&zc(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function wh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ih(e.nativeEvent);if(null!==n)return null!==(t=He(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);It=r,n.target.dispatchEvent(r),It=null,t.shift()}return!0}function jh(e,t,n){wh(e)&&n.delete(t)}function Nh(){dh=!1,null!==uh&&wh(uh)&&(uh=null),null!==hh&&wh(hh)&&(hh=null),null!==ph&&wh(ph)&&(ph=null),mh.forEach(jh),fh.forEach(jh)}function kh(e,t){e.blockedOn===t&&(e.blockedOn=null,dh||(dh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Nh)))}var Sh=null;function Ah(e){Sh!==e&&(Sh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Sh===e&&(Sh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if("function"!==typeof r){if(null===oh(r||n))continue;break}var a=He(n);null!==a&&(e.splice(t,3),t-=3,Ii(a,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function Ch(e){function t(t){return kh(t,e)}null!==uh&&kh(uh,e),null!==hh&&kh(hh,e),null!==ph&&kh(ph,e),mh.forEach(t),fh.forEach(t);for(var n=0;n<bh.length;n++){var r=bh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<bh.length&&null===(n=bh[0]).blockedOn;)yh(n),null===n.blockedOn&&bh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var s=n[r],a=n[r+1],i=s[Te]||null;if("function"===typeof a)i||Ah(n);else if(i){var l=null;if(a&&a.hasAttribute("formAction")){if(s=a,i=a[Te]||null)l=i.formAction;else if(null!==oh(s))continue}else l=i.action;"function"===typeof l?n[r+1]=l:(n.splice(r,3),r-=3),Ah(n)}}}function Eh(e){this._internalRoot=e}function Mh(e){this._internalRoot=e}Mh.prototype.render=Eh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Ju(t.current,Pc(),e,t,null,null)},Mh.prototype.unmount=Eh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Ju(e.current,2,null,e,null,null),Bc(),t[Pe]=null}},Mh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ie();e={blockedOn:null,target:e,priority:t};for(var n=0;n<bh.length&&0!==t&&t<bh[n].priority;n++);bh.splice(n,0,e),0===n&&yh(e)}};var Ih=s.version;if("19.1.1"!==Ih)throw Error(i(527,Ih,"19.1.1"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=o(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return d(s),e;if(a===r)return d(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var l=!1,c=s.child;c;){if(c===n){l=!0,n=s,r=a;break}if(c===r){l=!0,r=s,n=a;break}c=c.sibling}if(!l){for(c=a.child;c;){if(c===n){l=!0,n=a,r=s;break}if(c===r){l=!0,r=a,n=s;break}c=c.sibling}if(!l)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?u(e):null)?null:e.stateNode};var _h={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{de=Lh.inject(_h),ue=Lh}catch(Ph){}}t.createRoot=function(e,t){if(!l(e))throw Error(i(299));var n=!1,r="",s=gl,a=vl,o=xl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(o=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Qu(e,1,!1,null,0,n,r,s,a,o,0,null),e[Pe]=t.current,$d(e),new Eh(t)},t.hydrateRoot=function(e,t,n){if(!l(e))throw Error(i(299));var r=!1,s="",a=gl,o=vl,c=xl,d=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(a=n.onUncaughtError),void 0!==n.onCaughtError&&(o=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(d=n.formState)),(t=Qu(e,1,!0,t,0,r,s,a,o,c,0,d)).context=Gu(null),n=t.current,(s=sa(r=Ee(r=Pc()))).callback=null,aa(n,s,r),n=r,t.current.lanes=n,Se(t,n),jd(t),e[Pe]=t.current,$d(e),new Mh(t)},t.version="19.1.1"},21:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/h.31cf1ebbee552e096736.jpg"},43:(e,t,n)=>{"use strict";e.exports=n(288)},79:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOAAAADgCAYAAAAaLWrhAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA52SURBVHhe7Z1rdts4EoXbktPda5pNzG7zL/sa2yI999JF2Zb14AMEQeL7zklEMCcSUaiLKjxIPv0Fq/Iu4nAVnkQcwgpg/ExcCK1p29blg/k4tQ6+Dmmw1R9fx9kfEGYeMPJC9ILTx5v+HNcW2lgkTIvSf55dRpDLgFETEYJ7l9+e7LR7c1hXT39O6kcQZEIw4kRCcF2Ek+iOYlMRbi5N07QSYyMd/nIZQU4Do42gF50E9ybn6xwPPvhqE8Q4HAw1AAtPvPW9PdyntxVCfAwGusGH5t5POjziSNOwAfXhNHV3Y+JUYJQL7DQa37xqTPd3nIIEyKZvsilR8QKMIaKnbvVh/8AmC2Jby8S29wFbVy5AO4Polg3iFGSkt33NQqyy4h+6Q3iloLaodtKmqgp/6A7hlUrfNjUJsZqKqnEbfVS1WL5hvAXuGMe7ZvcCdMiLQ9gge4+Gu40IFt6biCJsFLfhnjvRXfYubdu+quNk18qOcH96OBx2tza7KwHuuaeET/aUlu4iBbXwTqfTSxRh57it99LZbr4n2UtDwDS2Hg03HQG9ZzMOoVK27gOb7D0c9dq2fdegfFdjWJhG7wtbjIabu2BrTx8ID67hjd6byuo2dbEx0YL44BZPW5uM24Qzk3LCGLaUkhZ/gRZfHAKMpnQRFp2CSnveQA0wmdJ9qFgBejuZPja9TAJFcAhfKpIiHdwDaWUO7OWEJNiX5FNFirC4/FiGOvkpt1EESEYjnkUUi6AoAUp7TW1PmIa8SIOtNFhMB1+MAG0YlhkgB16mKKWjL8LhER/kphQRru70iA/WogQRrvrjHvMhPlgL+559MIqrsJrzE/mgFNaMhKv8qJcaEB+UQkRCv4gnO9kFqHr6xSes80FR2Cftm1HMRtYo5C1B7HAZjtN0ffQbE9xZDm0vb2CXudvm/f39Wf991bH+lpC9sj59LZsAY1MsjnAHCc5ic5t0GUKqnfyyfX9HyUm/4d6eR/PfJ9uTubMI8IsDwAUShN+bZ0FYb1nbIwSPGG+Qoz0W/wHEdxNnBKu/fTfap7uW7gR8Y+n2WTwlVC+LAIO+M3KjiiLeAtRdyZdr6a8R8vjuog5wOp1elOLwquegd/LSQYSfSISvz8/P/0QxOYs5hNqQSRchO3jNc5Mzv7p2v9yGMeKCkzKLCCR60KrFp57TSwhe5N3ssoucrrv2vi4VcwifTs4iEdANVvlOl929YFL+V3VGYwHKp5PXP/kXSnz/q1x8jhy7m1HcY53GoPo/2bejmIykQlkqTG8B7yX8JaK4a/zSzNIe7ZATizEOZ5Psi2oWn7fYHY/HxWbKSkTR4EWZTrUz3KlEmCwFVYNU+Tpo9TveyVKV+Izr7LpHsSrU4SardxIVVxz9GnWEVU/Tq+l9G0+V48MUUXB2BKxVfKr2W+3iM7aBbRFFGEkKAVZnfI/5ah7/XGJb2CZRrIYUdZ4VQmuMfjXNdo6l1tnROanorAhoZ4zDakB8t6nRNnM1MFm5NUY/M6e3qwH8YhzJd8LsGM94Ir4HhI28bQ0GMEmA6uSqMnAj5FfcFTAQ28o2i2IVTNXE6B6dFAOGgJ8MY3QElF2rWnZQfU+Ibzy2mW0XxSqYoo1RjqUfqK5XQ3zzwGfuMyoCTlE4QE2M1chgpdbWk7UFvUNu6zQV3qA9NAoOdjDpr6p8vvabilNSmy3HaGWQYWqLfmZMHg+PwYeuMzQCVvVQnjE9GAyjQpsO0swgAcp4VUUDdVwsuiemNpsO1cxDAeqL3oeE0r3QNA3rfgtgm9q2Udw9rq+1E8WbPBRgytvvt8BRxCEkpjbbDtHO3Z5+iIL3iHuvOISE4E8/uRsBZa+qBs6kn8ti29aUhppHGnokwKpShkP6Bx/DBbXZ+JGGbvb2+o+kC5Ac/Oo7N7uj2iZfAJbinpauqrLGXoq9n/mocW+ouRYFcbhAfQ4RPxPY+pOrAqwx/VSPTGeUCZm6urXWW5r6ERJrTD8D7/hBhBmQi3mfZHUpqLlMQ3G4T6p0iJXA1sEPAZKfAyzDNW39EKByVfZCAizANW19SwUqHv91XJsmhvTgZ59+dhkBqzYMQAa+aeybABUieaQ4wIJIY982Z19GQMZ/AMvy7ckA51y09rzcMAbMA7726Ws/ZkEBIB9nAapTYv0PIAPS2vnV1l8FWPv4jxngfFRta2ntPA7sBKgT77VvRpYJqnr26ZrI1lXPtltr1lx33J0BlmAyIlvT2QUIMHh6evoVh7Aw2PqTPgWtfgJGWcGgB6nCPGxj2zqK1dJrrhegPwAgE73megGyA0bIDlU9s3INsPEHvea62RgeRvQBcwPL0zTMdRlrztpj3HOFfpsQpAVf+wmR7yc4yXKQYlyAAC9QikSOtBB+HmgcQuAU1EYh5bqANDQtpJ9XaT0QpMe/QDZhpi4x2PQnsknrFJSe6QIFP15RnRhsepX3Q9u2CPAK6p2wSyKw5XVsFkdAJmKuQMeUDmx5HQmwuy2CyYYrsDc0DbYhez9vc2C2D2A1ntQ58Vageyh94lEdE8F297H2SLMGQqYwDvxqGES/AbA7ZjzYbBhEwOE0rGUNQy7lRXducRsAAhwJqeh98KdxkIICrAgCHMmbiEO4ANuMhxR0Am3bvh6Px3+iCKJpmpfD4fB3FGEgCHAiMtsbDveBOyQNjXnU4AS8FS0OYQx2OBaaPxbbEd80rD3fDcFdyhOR4z27949idbjutkEUYSTWXvdkpijDBNz7e/wTxWpwnYl8s3n3ZmwEOBOPBWuaAXRdGf+m4el0Or0cj0eMmRB1artcrCdbSosy0DduR1oA+enu9kGqTjzTJTGWHgJchoMyi9MeIobr4LrokL2d6dEA8KO3ZkfMQth/NV7a5GSFUyT1z8xyLkfLQnxGtpJt4BP5IPJlxOs+JTu3r83XGEXIABFwJWR23194XDsquv37a4lTkBEi4Er0Dn86nV4lgKyR0b8lWv+2y4hvPbreVw3R8I7A9fFs4/Pzs9ukE0Sq6Gi1xefJGabamomVlWmaplVbf4hO7UzeXwBqEAvjHI3cSHE4ma/foXZ+RnxloLbo1op7AfoDCsDzNJGWnn7//v3fP3/+/Cf+aRLObPxd/k6JkfF+IfSa6/7uUxTIiwThPZVqi8+1NhficBG+trWFacFLpGyqXgG3NQLMiJzdgrPYzrYvhfABL0NsduPA1jg7AQJcBkU4O7MN/dzbeivYJwSTNgtinzg7hZylkbMwEzoT21EOa7vuZp+tlaiPVlVzusqSxUzUqbW9Hc8OonM812MGjhay3+Yi3Vgsxr6ucQpGIvu9KtZ1D/U6O4utGocwEEWEkzqy3YvuFvaZ3gZxCgbS+wwCnICyBU+m/KpVeJfYd3qbxCl4QO875zGfT8iIiPAOdjJ/qsf/uzcgfPiObeLj3kZwHWvsq+9cTrpw1/MVZLRuzyTCu49t80WI1T4t7gHfnpbwzZlIQ79T+xhvLvYnxog/cAT8zDzjswMBfgfhpQG/+s5Xv/qWgvof1GNVvTFbvuIp9o44BTMJc/re06qHONaW7RDFjh8L74fDoco3m/YdDzN5y9HbttZO/pq2fvTylaYLvP02MxENq9tV8zAC1gjiyw82/+CHAK3QGtZylAZ5611HnILMhPk977D7JQtrynWN4pmrzldBGurBMJuKC0Iut/vn014TYJUpKOIrj1rb5KoArdS9paGqTxfVXbfuBBRH3zZ7y8BupZ/mpjPuyQh+IMovEUXYAH4FWjykahfcEuDNFNT/YQ8i1AD/DfFtD7eZ2y6Km8UauiU+82gMuOlFeYX+V3WivPtwo7jtdjAUuquhm8o0W46AunQeLrQTYgy12XR0cgT0f9xiD+RrRnz7wW2pDnWTfnhPfObuP5qtRUFV+vV4PHbP24B9oTHhi8S4qSHFIwE+XAf0F2xFhN5Rgfj2i9t2K7tmrJlH4jMPBWiswTgsFjVMo0E74ts5bmO3dRSLZahmHirUlB4BfXlKTQbVBfaBhhqOMFEqk5QRsOibKUtvCEhPyW1urVgzUbzL4FqUHAWHVhb2xR58clAENP5C1be0qeAft/hDPUTbF3V3vTUyxicHC9Doe4tZW/NsmK6Huxoqxz4gXygmMIzVyOjo4XW2EoSoayDywZkS0lFHv7HrlKOduISKGgQIX9mqX45KQU38wGp5t+w8eIYJ6sE+Yd+I4hpMmo+Y7Mhr9Dhe+zkej6M7DagHjQfbNdaEp4jPbMqZWWyHR2zNRyYL0IrPuSWI1BOGYB/JmYr6aQtz/HKWQ+dMQ+dUEupjK745KwX1D6ueW79jGWAS9v054jOzx4Bj1z3Gogg/u5JQH/YZ+04UFyGF7ydx7KXDPQKEKWzBL5PMgvpCfPt9FJMRu24QH0wi/DL5Dbz29VR+mcy5l+ptUlUU6qR0v0y2DphaKOplXlJ/J9SHfci+FMUkpPTLZAI0KSurAS6Pl4AkpPKlJYJCUgGa4/H479ywr4oy9oNk2JfsU1GchH3avh3FZCzi5HMFaBAgpKRUn0weAU1c6KQKN03DljNIjn3KvhXFsQx6xOAUFhGg0fUeVOHRYV9hnlcXwyJM8S37sH05islZPNKoAqNuD1mqpwEwY1JRjRsXv/1t0S83Y8Qn2xT76EPYB2N8bIzvTiVLtBnT6xABYUlK88XFI6CJitytuFLVJkeFoW7sY/a1KN5isUmXS7II0Kg+h3vhX7k24oMs3PM1+aj3eWbTRbYfMsqp7712OOu1QNVc9TX7pnx0/29U9m38zsV7BqQEAEmxz4X7ddgn45+yskrUeRatiKLTUwQIWfnqc15usE9GsR7U6bTRAU3aNQMwlXA7R766O/83EYcAWcH3AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZvHXX/8HWlz9FWp1BAEAAAAASUVORK5CYII="},115:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/phone.a8264d42f33bd310737b.png"},121:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/startPage_background.16886af280a9a1ccb984.jpg"},133:(e,t,n)=>{var r={"./game/background/calm1.png":701,"./game/background/calm2.png":870,"./game/background/calm3.png":367,"./game/background/calm4.png":224,"./game/background/cloud1.png":215,"./game/background/cloud2.png":804,"./game/background/cloud3.png":253,"./game/background/cloud4.png":746,"./game/background/night1.png":568,"./game/background/night2.png":427,"./game/background/night3.png":322,"./game/background/night4.png":445,"./game/background/phone.png":115,"./game/background/storm1.png":775,"./game/background/sunset1.png":936,"./game/background/sunset2.png":795,"./game/background/sunset3.png":570,"./game/background/sunset4.png":517,"./website/header/header_email.png":973,"./website/header/header_menu.png":240,"./website/header/header_pfp.png":79,"./website/header/header_setting.png":357,"./website/homePage/homepage_background.jpg":255,"./website/loginPage/loginPage_background.jpg":941,"./website/placeholder/empty_pfp.jpg":807,"./website/startPage/h.jpg":21,"./website/startPage/startPage_background.jpg":121};function s(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=a,e.exports=s,s.id=133},215:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/cloud1.808bdbc20af00078015b.png"},224:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/calm4.5f72707c26d0b4bd05e6.png"},240:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHcAAABVCAYAAABzXXu3AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAOxSURBVHhe7d1NbxNHGAfwnZl1NvFuEhIkhJDTljahXEAgFPuAEKiHgtWPkDu3fIJe+AwcuTX9DjlBoQWJg4ETB4QEQiK8Koi8ON7XmWFmM3HixlGlXsI+/H+Ss+vHOfmvZ3bXs2Mz7wBa62duFyqAMXba7fbtC9eGKgs1J3zOXQkqwGSWMO6tCCHmXGkw3CKXEqFWm2nOLud83O73wy0KqYTgBw7TUB1ae1utVnO8DBMdS0+apCsMHUuTlCpjSmnNEC1JGIoJQ7iEIVzCOI63dKFzCeP2bNntAzFcFqrn9oEQ07SSjfB6kOTdmOHoS8pMdH62DLTGxyazore2f44IqiiJk3dhGDXKE6pcxeuBHx6RUqnyVaisLM1em2C/M6Oy6p8tZ6q3Xh8Zn8gziWNwBdn53EZ47sTYWP0HE2xha/sGYnsMZkwEW+nnx96w82gM3YdrSCbh6NR5s8ly1ctNsLj6AQAAAAAAAAAAAAAA+KYMncBbXl7m7XZ77+Lrgyb6DpoU/Hd95zmmo/6/nQx2tva9tA/WbDZPdzqdfe/tQGg21Ku/Xlvlgk25ElSANlShu8cnTzVW4xcbrrwbrgmWmW7FbTYVZkOWUr6q1Wo/2uflbTYmWIFgq48Zvu+fjOPkdfnc/jFpK86xRpcK28HHwrkZ/tvc7+cQLC22g99vPH9pV9ZLIfCVCRTZpkWwRHHTwW4XqEHXEoZwCUO4hGHxNWEmXIVwCVJSF7w+Gk0piYCpyfLsI89lsvHX7X+mXQ0IiHvJh7Aeft+/yL1358HRy79cXHVPoaJMsO+jKJqxa3QHPsG4d+f+kUuXL65wwUJXgoqwx1ip5JvRIJhVWg1ffF0PJnxZqGgrXXvkSnvh2Hz4hn2kqMNg6kyueikWXwMAAAAAAAAAAAAAwFD/ddMyu+LdEJve24H/e+zdkmaDhWMVhbsiCRjoyAVvgf2RLa0ywSY5Z8KV4Sumte4yxt6ax8+u1Nfv0Pbsor9U/JmKGp9GsNVhQo3M5pRdtvnw7ycX5ufn+w1b7rSnF4PlTzeTsgKVprXXbZ1tTnSedrQ5Ybri39V3c/caEGCaeKvVam3/rLlt6bIKZKRpusIQLE0m1RjhEobrWcIQLmEIlzCESxjCJQzhEhXHyQf7VUUDkwdAg4l1dwknrnfpsF0bhWGDX/Cu11wNCNgONmrYNboDQ3KRy03hczuFBBW0G+zgL1/bbX9YtiGbMXuECzbiSvAVsz9pbjr1YxAEP9nvTN+uet4XLlR9S0Xql90AAAAASUVORK5CYII="},253:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/cloud3.959fc909e50565d1f8d9.png"},255:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/homepage_background.1dd85145ef21827fba14.jpg"},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,b={};function g(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||m}function v(){}function x(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||m}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var y=x.prototype=new v;y.constructor=x,f(y,g.prototype),y.isPureReactComponent=!0;var w=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},N=Object.prototype.hasOwnProperty;function k(e,t,r,s,a,i){return r=i.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:i}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(){}function M(e,t,s,a,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var o,c,d=!1;if(null===e)d=!0;else switch(l){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case n:case r:d=!0;break;case h:return M((d=e._init)(e._payload),t,s,a,i)}}if(d)return i=i(e),d=""===a?"."+C(e,0):a,w(i)?(s="",null!=d&&(s=d.replace(A,"$&/")+"/"),M(i,t,s,"",function(e){return e})):null!=i&&(S(i)&&(o=i,c=s+(null==i.key||e&&e.key===i.key?"":(""+i.key).replace(A,"$&/")+"/")+d,i=k(o.type,c,void 0,0,0,o.props)),t.push(i)),1;d=0;var u,m=""===a?".":a+":";if(w(e))for(var f=0;f<e.length;f++)d+=M(a=e[f],t,s,l=m+C(a,f),i);else if("function"===typeof(f=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=p&&u[p]||u["@@iterator"])?u:null))for(e=f.call(e),f=0;!(a=e.next()).done;)d+=M(a=a.value,t,s,l=m+C(a,f++),i);else if("object"===l){if("function"===typeof e.then)return M(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(E,E):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,a,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return d}function I(e,t,n){if(null==e)return e;var r=[],s=0;return M(e,r,"","",function(e){return t.call(n,e,s++)}),r}function _(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function T(){}t.Children={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=s,t.Profiler=i,t.PureComponent=x,t.StrictMode=a,t.Suspense=d,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return j.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=f({},e.props),s=e.key;if(null!=t)for(a in void 0!==t.ref&&void 0,void 0!==t.key&&(s=""+t.key),t)!N.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(r[a]=t[a]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var i=Array(a),l=0;l<a;l++)i[l]=arguments[l+2];r.children=i}return k(e.type,s,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:l,_context:e},e},t.createElement=function(e,t,n){var r,s={},a=null;if(null!=t)for(r in void 0!==t.key&&(a=""+t.key),t)N.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(s[r]=t[r]);var i=arguments.length-2;if(1===i)s.children=n;else if(1<i){for(var l=Array(i),o=0;o<i;o++)l[o]=arguments[o+2];s.children=l}if(e&&e.defaultProps)for(r in i=e.defaultProps)void 0===s[r]&&(s[r]=i[r]);return k(e,a,void 0,0,0,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:_}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=j.T,n={};j.T=n;try{var r=e(),s=j.S;null!==s&&s(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(T,L)}catch(a){L(a)}finally{j.T=t}},t.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},t.use=function(e){return j.H.use(e)},t.useActionState=function(e,t,n){return j.H.useActionState(e,t,n)},t.useCallback=function(e,t){return j.H.useCallback(e,t)},t.useContext=function(e){return j.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return j.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=j.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return j.H.useId()},t.useImperativeHandle=function(e,t,n){return j.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return j.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return j.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return j.H.useMemo(e,t)},t.useOptimistic=function(e,t){return j.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return j.H.useReducer(e,t,n)},t.useRef=function(e){return j.H.useRef(e)},t.useState=function(e){return j.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return j.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return j.H.useTransition()},t.version="19.1.1"},322:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/night3.f535848f172cdbf60856.png"},357:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/header_setting.d4a9c3adbafa889d4d11.png"},367:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/calm3.bace5c075ad383fd1ca7.png"},385:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=385,e.exports=t},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},427:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/night2.e05ae8eaf5f72738bcc4.png"},445:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/night4.9cdf5d7f3866dc7601fd.png"},517:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/sunset4.59bf77e12359cd89e2eb.png"},568:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/night1.9893ad5935c602b7d1e7.png"},570:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/sunset3.862de5d15e1db9761a0d.png"},579:(e,t,n)=>{"use strict";e.exports=n(799)},672:(e,t,n)=>{"use strict";var r=n(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var i={d:{f:a,r:function(){throw Error(s(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},l=Symbol.for("react.portal");var o=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:l,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=o.T,n=i.p;try{if(o.T=null,i.p=2,e)return e()}finally{o.T=t,i.p=n,i.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,i.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&i.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,a="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?i.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:a}):"script"===n&&i.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:a,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&i.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else i.d.m(e)},t.requestFormReset=function(e){i.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return o.H.useFormState(e,t,n)},t.useFormStatus=function(){return o.H.useHostTransitionStatus()},t.version="19.1.1"},701:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/calm1.0ac24d7359a15a7e9eeb.png"},746:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/cloud4.93b8b12f181228761496.png"},775:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/storm1.2946593fe8037b6d749b.png"},795:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/sunset2.75fa6021672bd1093c08.png"},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(e,t,r){var s=null;if(void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),"key"in t)for(var a in r={},t)"key"!==a&&(r[a]=t[a]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=s,t.jsxs=s},804:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/cloud2.b216b6dda49303b6e6ee.png"},807:e=>{"use strict";e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBw8PEBAPEBAPDxEPEBAQExEQDw8QDxMSFRUWFhURFRUYHSggGBolGxYTLTEhJSkrOi46Fx8zODMsNyg5LisBCgoKBQUFDgUFDisZExkrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrK//AABEIAOEA4QMBIgACEQEDEQH/xAAbAAEAAgMBAQAAAAAAAAAAAAAABQYCBAcDAf/EAD0QAAIBAQQGBwYFAwQDAAAAAAABAgMEBREhBhIxQVFxEyJhgZGhsTJCUnLB0SMzQ2KSFOHwc5OywlOC8f/EABQBAQAAAAAAAAAAAAAAAAAAAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDuIAAAAAAAAAAAHharZSpLGpOMObzfJbWB7ggLVpVRjlThOp2vqR88/Ii6+lNol7MacFycn4t4eQFzBQKl92qW2tL/ANVGPojwd413+tW/3Z/cDowOcq8K/wD5q3+7P7ntTvm1R2Vp9+EvVAdABSqOk9pj7XRz5xwfk/oSdm0rpvKpTlDti1NfRgWIGtZLwo1vy6kZdmOEv4vM2QAAAAAAAAAAAAAAAAAAAABgDUt940qCxqSwb2RWc3yX1Ia+NJFHGFDBvY6m2K+Xjz2cyrVKkpNyk3KT2tvFsCavDSarUxVP8KPHbN9+7u8SEnNybcm5N7W2233s+AAAAAAAAAAAACeGaya37yYu/SKvSwUn0seEn1u6X3xIcAdAu296NoyhLCW+Espd3HuN85jFtNNNprNNZNPiWO59JXHCFfNbFUw6y+Zb+fqBawYwmpJNNNNYpp4prijIAAAAAAAAAAAAAYGM5qKbbSSWLbySXFlNv2/XWxp0240tjexz58F2f/BpFfPTN0qb/Ci82vfa38uHiQgAAAAAAAAAAAAAAAAAAAAABKXLfM7O8HjKk3nHev3R7ezeXez141IqcGpRksU0c0JO472lZp4PF05PrR4fuXb6gXwGNOopJSi01JJprY095kAAAAAAAAAK3pVeuqv6eDzkvxGt0X7vfv7OZM3pbVQpSqPNrKK4yexf52nPatRyk5SeMpNtvi2BiAAAAAAAADOjSlOShFOUpPBJFquu44UsJVMKk+3OEeS382BXbLdlernCDw+KXVj4vb3EhT0aqv2qlNctaX0RaABWJ6M1N1SD5qS+5o2q6LRTzcHJcYdZeWfkXUAc8BcryuenWxeGpP4ktvzLeVO12adKThNYNeDXFPegPEAAAAAAAFh0WvXUkqE31ZPqN+7J+7yfrzLccwL5cF49PSTb68OrPte6XevqBJgAAAAAB4W20KlTnUfuRb5vcvHACp6WW7pKvRJ9Wlt7Zvb4LBeJBn2c3JuTeLk22+LebZ8AAAAAAABIXDZelrxTzjDrvu2LxaAn7hu1UYa8l+JNZ/tW6P3/ALEoAAAAAAADSva71Xhq5KazhLg+D7GboA57KLTaawabTT2praj4TOk9l1KqqLZVWL+ZZPyw8yGAAAAAABJaPW7oa8cX1J9SXDPY+5/UjQB08Ghcdr6ahCTeMktWXzRyx78n3m+AAAAgNMbRq0oU1+pLF/LHP1cSfKZpfW1q8Y7oU14ttvy1QIMAAAAAAAAsWiVP82XyR9W/oV0suiUurVXCUX4p/YCeAAAAAAAAAAEPpTTxoxl8NReDTX2KoW3SeWFDnOK9X9CpAAAAAAAAAWbQy0Z1aXFKovSX/UtJQtHK2paafCWMH3p4eeBfQAAAFAv+etaaz/co/wAUl9C/nOb0eNet/rVP+TA1gAAAAAAACY0Xr6tZwf6kcF80c15axDmVKo4SjOLwcWmn2rMDoIPCw2qNanGpHftXCW+J7gAAAAPmPAD6DCDeIr1YwjKcnhGKxbAgNLK/5dLhjN+i/wCxXj2ttpdWpKo/eezgty8DxAAAAAAAAA9rFPVq05fDUg/CSOknL2zqAAAADnN5r8et/rVf+TOjHP79hq2msv34/wAkn9QNAAAAAAAAAAAbt2XhKhJ74PKUexY9ZdpbbPaIVIKUJKUXw3dj7SintZbVUpS1oScXv4NcGt4F4xyYfoQlk0kWyrTw/dDNfxf3JCF9WaX6iXzRmvoBuvNmJqyvmzL9Vd0Zv0Ro2rSSC/Lg5PjLqr7vyAlqtVRTlJqMVtb2FVvi83WerHFU1muMnnm/sa1tt1Ss8ZyxW6KyiuS+prAAAAAAAAAAAB8Z1BHNbLDWqU4/FOEfFpHSgAAAFK0upato1vjhF96xj9EXUrumVnxp06i9yTi+Uv7peIFSAAAAAAAAACWOSzbywW0ACYsOj9WedR9FHg1jN927vJuzXLZ6fua741Ot5bPICnQg5ZRTk+xN+h7xu6u9lGr/AAkvUvMYpLBJJcEsEfQKNK7a6/Rq90JP0NepSlH2oyj80WvU6CHnkBzwF2tN0WeptpqL4w6j8sn3kLbdHJxxdKWuvheCn47H5AQYMpwcW4yTi1tTWDXcYgAAAAAAAASGj9LXtNJcJOX8U2vNIv5U9DLPjOpV+GKgucni/ReJbAAAAGteVl6ajUp/FF4fMs4vxSNkAcwawyeTQJjSixdFWckurVxkvm95eOfeQ4AAAADZu+xSrzUI83LdFcQPlhsU60tWC5t+zFcWy23bddOgsUtae+bWfdwRsWOywowUILBLa97fF9p7AAAAAAAAAAABq2+wU66wms1skspLk/oVK8rtnQlhLOL9ma2Ps7H2F3MK9GNSLhNKUZZNMDn4N69rulZ54bYS9mX0fajRAAAAAb1y2Lp60Ie6utP5VtXfku8C3aO2TorPBP2p/iPnLZ5YEmAAAAAAAaF92D+opSh7y60H+5bu/Z3lAkmm01g1k09qfA6cVTSu69V/1EFk/wAxLc90+/f/AHArYAA+xi20ksW2kktrb2Iu11WBUKaj7zzm+L4ckQmi9j1puq9lPKPzPf3L1LOAAAAAAAAAAAAAAAAB4W2yxrQdOW/Y96e6SKPaKMqc5QksJReD+5fyA0pseKjWW2PVlyfsvxy70BWwAALvozd3Q0taSwnVwk+Kj7sf84kFo1dfTT6Sa/DpvfslLdHkt/cXUAAAAAAAAAYzgpJxaTTTTTzTT3GQAol+3S7PPFYulJ9V8P2Pt9SLOl2ihGpFwmlKMlg0yoWnR+dOvTjnOlOa63BLNxl24J8wJy6LP0VGnHfhrS+aWb/zsNsAAAAAAAAAAAAAAAAAAedpoqpCUHsnFx5Y7z0AHPZRabTyabT5rabl03bO0T1Y5RWc5bor78ESFquapVtU4xWrBtTc2uqlLbzeOORarDY4UIKnBYJbXvb3yb4gZ2ahGnCMILCMVgl/m89QAAAAAAAAAAAABoADwnS4HkbhhOmmBrAzlTaMAAAAAAAAAAAAAGUYNgYnpCk3tyR6QpJdp6AfEsD6AAAAAAAAAAAAAAAAAAAAAxlTTMgB4ujwZg6b4GyANRp8D4bgA0z7gbYA1lTfAyVHiz3AGEaaX9zMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//9k="},853:(e,t,n)=>{"use strict";e.exports=n(896)},870:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/calm2.aaf1a37f0819605aef34.png"},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<a(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,i=s>>>1;r<i;){var l=2*(r+1)-1,o=e[l],c=l+1,d=e[c];if(0>a(o,n))c<s&&0>a(d,o)?(e[r]=d,e[c]=n,r=c):(e[r]=o,e[l]=n,r=l);else{if(!(c<s&&0>a(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,p=3,m=!1,f=!1,b=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function j(e){if(b=!1,w(e),!f)if(null!==r(c))f=!0,k||(k=!0,N());else{var t=r(d);null!==t&&L(j,t.startTime-e)}}var N,k=!1,S=-1,A=5,C=-1;function E(){return!!g||!(t.unstable_now()-C<A)}function M(){if(g=!1,k){var e=t.unstable_now();C=e;var n=!0;try{e:{f=!1,b&&(b=!1,x(S),S=-1),m=!0;var a=p;try{t:{for(w(e),h=r(c);null!==h&&!(h.expirationTime>e&&E());){var i=h.callback;if("function"===typeof i){h.callback=null,p=h.priorityLevel;var l=i(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof l){h.callback=l,w(e),n=!0;break t}h===r(c)&&s(c),w(e)}else s(c);h=r(c)}if(null!==h)n=!0;else{var o=r(d);null!==o&&L(j,o.startTime-e),n=!1}}break e}finally{h=null,p=a,m=!1}n=void 0}}finally{n?N():k=!1}}}if("function"===typeof y)N=function(){y(M)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,_=I.port2;I.port1.onmessage=M,N=function(){_.postMessage(null)}}else N=function(){v(M,0)};function L(e,n){S=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){g=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,s,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>i?(e.sortIndex=a,n(d,e),null===r(c)&&e===r(d)&&(b?(x(S),S=-1):b=!0,L(j,a-i))):(e.sortIndex=l,n(c,e),f||m||(f=!0,k||(k=!0,N()))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},936:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/sunset1.0bf2e433a00dbcf52d13.png"},941:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/loginPage_background.255bbc0d1fc4acf1eb37.jpg"},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},973:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/header_email.47c58522c498374e2222.png"}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".a3c1d153.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="client:";n.l=(r,s,a,i)=>{if(e[r])e[r].push(s);else{var l,o;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+a){l=u;break}}l||(o=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+a),l.src=r),e[r]=[s];var h=(t,n)=>{l.onerror=l.onload=null,clearTimeout(p);var s=e[r];if(delete e[r],l.parentNode&&l.parentNode.removeChild(l),s&&s.forEach(e=>e(n)),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=h.bind(null,l.onerror),l.onload=h.bind(null,l.onload),o&&document.head.appendChild(l)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/DnM/",(()=>{var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var a=new Promise((n,r)=>s=e[t]=[n,r]);r.push(s[2]=a);var i=n.p+n.u(t),l=new Error;n.l(i,r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",l.name="ChunkLoadError",l.type=a,l.request=i,s[1](l)}},"chunk-"+t,t)}};var t=(t,r)=>{var s,a,i=r[0],l=r[1],o=r[2],c=0;if(i.some(t=>0!==e[t])){for(s in l)n.o(l,s)&&(n.m[s]=l[s]);if(o)o(n)}for(t&&t(r);c<i.length;c++)a=i[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkclient=self.webpackChunkclient||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{Decoder:()=>fr,Encoder:()=>pr,PacketType:()=>hr,protocol:()=>ur});var t=n(43),r=n(391),s="popstate";function a(){return h(function(e,t){let{pathname:n="/",search:r="",hash:s=""}=u(e.location.hash.substring(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),c("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:d(t))},function(e,t){l("/"===e.pathname.charAt(0),`relative pathnames are not supported in hash history.push(${JSON.stringify(t)})`)},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function i(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function o(e,t){return{usr:e.state,key:e.key,idx:t}}function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return{pathname:"string"===typeof e?e:e.pathname,search:"",hash:"",..."string"===typeof t?u(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function u(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function h(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:a=document.defaultView,v5Compat:i=!1}=r,l=a.history,d="POP",u=null,h=m();function m(){return(l.state||{idx:null}).idx}function f(){d="POP";let e=m(),t=null==e?null:e-h;h=e,u&&u({action:d,location:g.location,delta:t})}function b(e){return p(e)}null==h&&(h=0,l.replaceState({...l.state,idx:h},""));let g={get action(){return d},get location(){return e(a,l)},listen(e){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(s,f),u=e,()=>{a.removeEventListener(s,f),u=null}},createHref:e=>t(a,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){d="PUSH";let r=c(g.location,e,t);n&&n(r,e),h=m()+1;let s=o(r,h),p=g.createHref(r);try{l.pushState(s,"",p)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;a.location.assign(p)}i&&u&&u({action:d,location:g.location,delta:1})},replace:function(e,t){d="REPLACE";let r=c(g.location,e,t);n&&n(r,e),h=m();let s=o(r,h),a=g.createHref(r);l.replaceState(s,"",a),i&&u&&u({action:d,location:g.location,delta:0})},go:e=>l.go(e)};return g}function p(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),i(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:d(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function m(e,t){return f(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function f(e,t,n,r){let s=I(("string"===typeof t?u(t):t).pathname||"/",n);if(null==s)return null;let a=b(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let i=null;for(let l=0;null==i&&l<a.length;++l){let e=M(s);i=A(a[l],e,r)}return i}function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=(e,s,a)=>{let l={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};l.relativePath.startsWith("/")&&(i(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let o=D([r,l.relativePath]),c=n.concat(l);e.children&&e.children.length>0&&(i(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${o}".`),b(e.children,t,c,o)),(null!=e.path||e.index)&&t.push({path:o,score:S(o,e.index),routesMeta:c})};return e.forEach((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let n of g(e.path))s(e,t,n);else s(e,t)}),t}function g(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return s?[a,""]:[a];let i=g(r.join("/")),l=[];return l.push(...i.map(e=>""===e?a:[a,e].join("/"))),s&&l.push(...i),l.map(t=>e.startsWith("/")&&""===t?"/":t)}var v=/^:[\w-]+$/,x=3,y=2,w=1,j=10,N=-2,k=e=>"*"===e;function S(e,t){let n=e.split("/"),r=n.length;return n.some(k)&&(r+=N),t&&(r+=y),n.filter(e=>!k(e)).reduce((e,t)=>e+(v.test(t)?x:""===t?w:j),r)}function A(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,s={},a="/",i=[];for(let l=0;l<r.length;++l){let e=r[l],o=l===r.length-1,c="/"===a?t:t.slice(a.length)||"/",d=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},c),u=e.route;if(!d&&o&&n&&!r[r.length-1].route.index&&(d=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:D([a,d.pathname]),pathnameBase:z(D([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=D([a,d.pathnameBase]))}return i}function C(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=E(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),l=s.slice(1),o=r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=l[n]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const o=l[n];return e[r]=s&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{});return{params:o,pathname:a,pathnameBase:i,pattern:e}}function E(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];l("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function M(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return l(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function I(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function _(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function L(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function T(e){let t=L(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function P(e,t,n){let r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=u(e):(r={...e},i(!r.pathname||!r.pathname.includes("?"),_("?","pathname","search",r)),i(!r.pathname||!r.pathname.includes("#"),_("#","pathname","hash",r)),i(!r.search||!r.search.includes("#"),_("#","search","hash",r)));let a,l=""===e||""===r.pathname,o=l?"/":r.pathname;if(null==o)a=n;else{let e=t.length-1;if(!s&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}a=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:s=""}="string"===typeof e?u(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:O(r),hash:R(s)}}(r,a),d=o&&"/"!==o&&o.endsWith("/"),h=(l||"."===o)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}var D=e=>e.join("/").replace(/\/\/+/g,"/"),z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),O=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",R=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function F(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var $=["POST","PUT","PATCH","DELETE"],B=(new Set($),["GET",...$]);new Set(B),Symbol("ResetLoaderData");var H=t.createContext(null);H.displayName="DataRouter";var U=t.createContext(null);U.displayName="DataRouterState";var q=t.createContext(!1);var W=t.createContext({isTransitioning:!1});W.displayName="ViewTransition";var K=t.createContext(new Map);K.displayName="Fetchers";var Y=t.createContext(null);Y.displayName="Await";var X=t.createContext(null);X.displayName="Navigation";var V=t.createContext(null);V.displayName="Location";var Q=t.createContext({outlet:null,matches:[],isDataRoute:!1});Q.displayName="Route";var G=t.createContext(null);G.displayName="RouteError";function J(){return null!=t.useContext(V)}function Z(){return i(J(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(V).location}var ee="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function te(e){t.useContext(X).static||t.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=t.useContext(Q);return e?function(){let{router:e}=pe("useNavigate"),n=fe("useNavigate"),r=t.useRef(!1);te(()=>{r.current=!0});let s=t.useCallback(async function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(r.current,ee),r.current&&("number"===typeof t?e.navigate(t):await e.navigate(t,{fromRouteId:n,...s}))},[e,n]);return s}():function(){i(J(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext(H),{basename:n,navigator:r}=t.useContext(X),{matches:s}=t.useContext(Q),{pathname:a}=Z(),o=JSON.stringify(T(s)),c=t.useRef(!1);te(()=>{c.current=!0});let d=t.useCallback(function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(l(c.current,ee),!c.current)return;if("number"===typeof t)return void r.go(t);let i=P(t,JSON.parse(o),a,"path"===s.relative);null==e&&"/"!==n&&(i.pathname="/"===i.pathname?n:D([n,i.pathname])),(s.replace?r.replace:r.push)(i,s.state,s)},[n,r,o,a,e]);return d}()}var re=t.createContext(null);function se(){let{matches:e}=t.useContext(Q),n=e[e.length-1];return n?n.params:{}}function ae(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=t.useContext(Q),{pathname:s}=Z(),a=JSON.stringify(T(r));return t.useMemo(()=>P(e,JSON.parse(a),s,"path"===n),[e,a,s,n])}function ie(e,n,r,s){i(J(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=t.useContext(X),{matches:o}=t.useContext(Q),c=o[o.length-1],d=c?c.params:{},h=c?c.pathname:"/",p=c?c.pathnameBase:"/",f=c&&c.route;{let e=f&&f.path||"";ve(h,!f||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let b,g=Z();if(n){let e="string"===typeof n?u(n):n;i("/"===p||e.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${e.pathname}" was given in the \`location\` prop.`),b=e}else b=g;let v=b.pathname||"/",x=v;if("/"!==p){let e=p.replace(/^\//,"").split("/");x="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=m(e,{pathname:x});l(f||null!=y,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),l(null==y||void 0!==y[y.length-1].route.element||void 0!==y[y.length-1].route.Component||void 0!==y[y.length-1].route.lazy,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=ue(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:D([p,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?p:D([p,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,r,s);return n&&w?t.createElement(V.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},w):w}function le(){let e=be(),n=F(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:i},"ErrorBoundary")," or"," ",t.createElement("code",{style:i},"errorElement")," prop on your route.")),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,l)}var oe=t.createElement(le,null),ce=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(Q.Provider,{value:this.props.routeContext},t.createElement(G.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function de(e){let{routeContext:n,match:r,children:s}=e,a=t.useContext(H);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(Q.Provider,{value:n},s)}function ue(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==n.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let s=e,a=r?.errors;if(null!=a){let e=s.findIndex(e=>e.route.id&&void 0!==a?.[e.route.id]);i(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,e+1))}let l=!1,o=-1;if(r)for(let t=0;t<s.length;t++){let e=s[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=t),e.route.id){let{loaderData:t,errors:n}=r,a=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||a){l=!0,s=o>=0?s.slice(0,o+1):[s[0]];break}}}return s.reduceRight((e,i,c)=>{let d,u=!1,h=null,p=null;r&&(d=a&&i.route.id?a[i.route.id]:void 0,h=i.route.errorElement||oe,l&&(o<0&&0===c?(ve("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,p=null):o===c&&(u=!0,p=i.route.hydrateFallbackElement||null)));let m=n.concat(s.slice(0,c+1)),f=()=>{let n;return n=d?h:u?p:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(de,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===c)?t.createElement(ce,{location:r.location,revalidation:r.revalidation,component:h,error:d,children:f(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):f()},null)}function he(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pe(e){let n=t.useContext(H);return i(n,he(e)),n}function me(e){let n=t.useContext(U);return i(n,he(e)),n}function fe(e){let n=function(e){let n=t.useContext(Q);return i(n,he(e)),n}(e),r=n.matches[n.matches.length-1];return i(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function be(){let e=t.useContext(G),n=me("useRouteError"),r=fe("useRouteError");return void 0!==e?e:n.errors?.[r]}var ge={};function ve(e,t,n){t||ge[e]||(ge[e]=!0,l(!1,n))}var xe={};function ye(e,t){e||xe[t]||(xe[t]=!0,console.warn(t))}t.memo(function(e){let{routes:t,future:n,state:r}=e;return ie(t,void 0,r,n)});function we(e){let{to:n,replace:r,state:s,relative:a}=e;i(J(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=t.useContext(X);l(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=t.useContext(Q),{pathname:d}=Z(),u=ne(),h=P(n,T(c),d,"path"===a),p=JSON.stringify(h);return t.useEffect(()=>{u(JSON.parse(p),{replace:r,state:s,relative:a})},[u,p,a,r,s]),null}function je(e){return function(e){let n=t.useContext(Q).outlet;return n?t.createElement(re.Provider,{value:e},n):n}(e.context)}function Ne(e){i(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ke(e){let{basename:n="/",children:r=null,location:s,navigationType:a="POP",navigator:o,static:c=!1}=e;i(!J(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),h=t.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);"string"===typeof s&&(s=u(s));let{pathname:p="/",search:m="",hash:f="",state:b=null,key:g="default"}=s,v=t.useMemo(()=>{let e=I(p,d);return null==e?null:{location:{pathname:e,search:m,hash:f,state:b,key:g},navigationType:a}},[d,p,m,f,b,g,a]);return l(null!=v,`<Router basename="${d}"> is not able to match the URL "${p}${m}${f}" because it does not start with the basename, so the <Router> won't render anything.`),null==v?null:t.createElement(X.Provider,{value:h},t.createElement(V.Provider,{children:r,value:v}))}function Se(e){let{children:t,location:n}=e;return ie(Ae(t),n)}t.Component;function Ae(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return t.Children.forEach(e,(e,s)=>{if(!t.isValidElement(e))return;let a=[...n,s];if(e.type===t.Fragment)return void r.push.apply(r,Ae(e.props.children,a));i(e.type===Ne,`[${"string"===typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),i(!e.props.index||!e.props.children,"An index route cannot have child routes.");let l={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(l.children=Ae(e.props.children,a)),r.push(l)}),r}var Ce="get",Ee="application/x-www-form-urlencoded";function Me(e){return null!=e&&"string"===typeof e.tagName}var Ie=null;var _e=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Le(e){return null==e||_e.has(e)?e:(l(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ee}"`),null)}function Te(e,t){let n,r,s,a,i;if(Me(l=e)&&"form"===l.tagName.toLowerCase()){let i=e.getAttribute("action");r=i?I(i,t):null,n=e.getAttribute("method")||Ce,s=Le(e.getAttribute("enctype"))||Ee,a=new FormData(e)}else if(function(e){return Me(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Me(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||i.getAttribute("action");if(r=l?I(l,t):null,n=e.getAttribute("formmethod")||i.getAttribute("method")||Ce,s=Le(e.getAttribute("formenctype"))||Le(i.getAttribute("enctype"))||Ee,a=new FormData(i,e),!function(){if(null===Ie)try{new FormData(document.createElement("form"),0),Ie=!1}catch(e){Ie=!0}return Ie}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";a.append(`${e}x`,"0"),a.append(`${e}y`,"0")}else t&&a.append(t,r)}}else{if(Me(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ce,r=null,s=Ee,i=e}var l;return a&&"text/plain"===s&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:a,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Pe(e){return{__html:e}}function De(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function ze(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname=`_root.${n}`:t&&"/"===I(r.pathname,t)?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Oe(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Re(e){return null!=e&&"string"===typeof e.page}function Fe(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function $e(e,t,n,r,s,a){let i=(e,t)=>!n[t]||e.route.id!==n[t].route.id,l=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith("*")&&n[t].params["*"]!==e.params["*"];return"assets"===a?t.filter((e,t)=>i(e,t)||l(e,t)):"data"===a?t.filter((t,a)=>{let o=r.routes[t.route.id];if(!o||!o.hasLoader)return!1;if(i(t,a)||l(t,a))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function Be(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1),[...new Set(r)];var r}function He(e,t){let n=new Set,r=new Set(t);return e.reduce((e,s)=>{if(t&&!Re(s)&&"script"===s.as&&s.href&&r.has(s.href))return e;let a=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(s));return n.has(a)||(n.add(a),e.push({key:a,link:s})),e},[])}function Ue(e,t){return"lazy"===e.mode&&!0===t}function qe(){let e=t.useContext(H);return De(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function We(){let e=t.useContext(U);return De(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ke=t.createContext(void 0);function Ye(){let e=t.useContext(Ke);return De(e,"You must render this element inside a <HydratedRouter> element"),e}function Xe(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Ve(e,t,n){if(n&&!Ze)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}Ke.displayName="FrameworkContext";function Qe(e){let{page:n,...r}=e,{router:s}=qe(),a=t.useMemo(()=>m(s.routes,n,s.basename),[s.routes,n,s.basename]);return a?t.createElement(Je,{page:n,matches:a,...r}):null}function Ge(e){let{manifest:n,routeModules:r}=Ye(),[s,a]=t.useState([]);return t.useEffect(()=>{let t=!1;return async function(e,t,n){return He((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Oe(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Fe).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}(e,n,r).then(e=>{t||a(e)}),()=>{t=!0}},[e,n,r]),s}function Je(e){let{page:n,matches:r,...s}=e,a=Z(),{manifest:i,routeModules:l}=Ye(),{basename:o}=qe(),{loaderData:c,matches:d}=We(),u=t.useMemo(()=>$e(n,r,d,i,a,"data"),[n,r,d,i,a]),h=t.useMemo(()=>$e(n,r,d,i,a,"assets"),[n,r,d,i,a]),p=t.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let e=new Set,t=!1;if(r.forEach(n=>{let r=i.routes[n.route.id];r&&r.hasLoader&&(!u.some(e=>e.route.id===n.route.id)&&n.route.id in c&&l[n.route.id]?.shouldRevalidate||r.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let s=ze(n,o,"data");return t&&e.size>0&&s.searchParams.set("_routes",r.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[s.pathname+s.search]},[o,c,a,i,u,r,n,l]),m=t.useMemo(()=>Be(h,i),[h,i]),f=Ge(h);return t.createElement(t.Fragment,null,p.map(e=>t.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...s})),m.map(e=>t.createElement("link",{key:e,rel:"modulepreload",href:e,...s})),f.map(e=>{let{key:n,link:r}=e;return t.createElement("link",{key:n,nonce:s.nonce,...r})}))}var Ze=!1;function et(e){let{manifest:n,serverHandoffString:r,isSpaMode:s,renderMeta:a,routeDiscovery:i,ssr:l}=Ye(),{router:o,static:c,staticContext:d}=qe(),{matches:u}=We(),h=t.useContext(q),p=Ue(i,l);a&&(a.didRenderScripts=!0);let f=Ve(u,null,s);t.useEffect(()=>{0},[]);let b=t.useMemo(()=>{if(h)return null;let s=d?`window.__reactRouterContext = ${r};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",a=c?`${n.hmr?.runtime?`import ${JSON.stringify(n.hmr.runtime)};`:""}${p?"":`import ${JSON.stringify(n.url)}`};\n${f.map((e,t)=>{let r=`route${t}`,s=n.routes[e.route.id];De(s,`Route ${e.route.id} not found in manifest`);let{clientActionModule:a,clientLoaderModule:i,clientMiddlewareModule:l,hydrateFallbackModule:o,module:c}=s,d=[...a?[{module:a,varName:`${r}_clientAction`}]:[],...i?[{module:i,varName:`${r}_clientLoader`}]:[],...l?[{module:l,varName:`${r}_clientMiddleware`}]:[],...o?[{module:o,varName:`${r}_HydrateFallback`}]:[],{module:c,varName:`${r}_main`}];return 1===d.length?`import * as ${r} from ${JSON.stringify(c)};`:[d.map(e=>`import * as ${e.varName} from "${e.module}";`).join("\n"),`const ${r} = {${d.map(e=>`...${e.varName}`).join(",")}};`].join("\n")}).join("\n")}\n  ${p?`window.__reactRouterManifest = ${JSON.stringify(function(e,t){let{sri:n,...r}=e,s=new Set(t.state.matches.map(e=>e.route.id)),a=t.state.location.pathname.split("/").filter(Boolean),i=["/"];for(a.pop();a.length>0;)i.push(`/${a.join("/")}`),a.pop();i.forEach(e=>{let n=m(t.routes,e,t.basename);n&&n.forEach(e=>s.add(e.route.id))});let l=[...s].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return{...r,routes:l,sri:!!n||void 0}}(n,o),null,2)};`:""}\n  window.__reactRouterRouteModules = {${f.map((e,t)=>`${JSON.stringify(e.route.id)}:route${t}`).join(",")}};\n\nimport(${JSON.stringify(n.entry.module)});`:" ";return t.createElement(t.Fragment,null,t.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Pe(s),type:void 0}),t.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Pe(a),type:"module",async:!0}))},[]),g=Ze||h?[]:(n.entry.imports.concat(Be(f,n,{includeHydrateFallback:!0})),[...new Set(v)]);var v;let x="object"===typeof n.sri?n.sri:{};return ye(!h,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),Ze||h?null:t.createElement(t.Fragment,null,"object"===typeof n.sri?t.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:x})}}):null,p?null:t.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:e.crossOrigin,integrity:x[n.url],suppressHydrationWarning:!0}),t.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:e.crossOrigin,integrity:x[n.entry.module],suppressHydrationWarning:!0}),g.map(n=>t.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:e.crossOrigin,integrity:x[n],suppressHydrationWarning:!0})),b)}function tt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}t.Component;function nt(e){let{error:n,isOutsideRemixApp:r}=e;console.error(n);let s,a=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(F(n))return t.createElement(rt,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),a);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return t.createElement(rt,{title:"Application Error!",isOutsideRemixApp:r},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},s.stack),a)}function rt(e){let{title:n,renderScripts:r,isOutsideRemixApp:s,children:a}=e,{routeModules:i}=Ye();return i.root?.Layout&&!s?a:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,n)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,r?t.createElement(et,null):null)))}var st="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{st&&(window.__reactRouterVersion="7.8.0")}catch(fo){}function at(e){let{basename:n,children:r,window:s}=e,i=t.useRef();null==i.current&&(i.current=a({window:s,v5Compat:!0}));let l=i.current,[o,c]=t.useState({action:l.action,location:l.location}),d=t.useCallback(e=>{t.startTransition(()=>c(e))},[c]);return t.useLayoutEffect(()=>l.listen(d),[l,d]),t.createElement(ke,{basename:n,children:r,location:o.location,navigationType:o.action,navigator:l})}var it=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lt=t.forwardRef(function(e,n){let r,{onClick:s,discover:a="render",prefetch:o="none",relative:c,reloadDocument:u,replace:h,state:p,target:m,to:f,preventScrollReset:b,viewTransition:g,...v}=e,{basename:x}=t.useContext(X),y="string"===typeof f&&it.test(f),w=!1;if("string"===typeof f&&y&&(r=f,st))try{let e=new URL(window.location.href),t=f.startsWith("//")?new URL(e.protocol+f):new URL(f),n=I(t.pathname,x);t.origin===e.origin&&null!=n?f=n+t.search+t.hash:w=!0}catch(fo){l(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(J(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=t.useContext(X),{hash:a,pathname:l,search:o}=ae(e,{relative:n}),c=l;return"/"!==r&&(c="/"===l?r:D([r,l])),s.createHref({pathname:c,search:o,hash:a})}(f,{relative:c}),[N,k,S]=function(e,n){let r=t.useContext(Ke),[s,a]=t.useState(!1),[i,l]=t.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=n,p=t.useRef(null);t.useEffect(()=>{if("render"===e&&l(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{l(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),t.useEffect(()=>{if(s){let e=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(e)}}},[s]);let m=()=>{a(!0)},f=()=>{a(!1),l(!1)};return r?"intent"!==e?[i,p,{}]:[i,p,{onFocus:Xe(o,m),onBlur:Xe(c,f),onMouseEnter:Xe(d,m),onMouseLeave:Xe(u,f),onTouchStart:Xe(h,m)}]:[!1,p,{}]}(o,v),A=function(e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:i,viewTransition:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=ne(),c=Z(),u=ae(e,{relative:i});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:d(c)===d(u);o(e,{replace:n,state:s,preventScrollReset:a,relative:i,viewTransition:l})}},[c,o,u,r,s,n,e,a,i,l])}(f,{replace:h,state:p,target:m,preventScrollReset:b,relative:c,viewTransition:g});let C=t.createElement("a",{...v,...S,href:r||j,onClick:w||u?s:function(e){s&&s(e),e.defaultPrevented||A(e)},ref:tt(n,k),target:m,"data-discover":y||"render"!==a?void 0:"true"});return N&&!y?t.createElement(t.Fragment,null,C,t.createElement(Qe,{page:j})):C});lt.displayName="Link",t.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:l=!1,style:o,to:c,viewTransition:d,children:u,...h}=e,p=ae(c,{relative:h.relative}),m=Z(),f=t.useContext(U),{navigator:b,basename:g}=t.useContext(X),v=null!=f&&function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.useContext(W);i(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=dt("useViewTransitionState"),a=ae(e,{relative:n});if(!r.isTransitioning)return!1;let l=I(r.currentLocation.pathname,s)||r.currentLocation.pathname,o=I(r.nextLocation.pathname,s)||r.nextLocation.pathname;return null!=C(a.pathname,o)||null!=C(a.pathname,l)}(p)&&!0===d,x=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,y=m.pathname,w=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;s||(y=y.toLowerCase(),w=w?w.toLowerCase():null,x=x.toLowerCase()),w&&g&&(w=I(w,g)||w);const j="/"!==x&&x.endsWith("/")?x.length-1:x.length;let N,k=y===x||!l&&y.startsWith(x)&&"/"===y.charAt(j),S=null!=w&&(w===x||!l&&w.startsWith(x)&&"/"===w.charAt(x.length)),A={isActive:k,isPending:S,isTransitioning:v},E=k?r:void 0;N="function"===typeof a?a(A):[a,k?"active":null,S?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let M="function"===typeof o?o(A):o;return t.createElement(lt,{...h,"aria-current":E,className:N,ref:n,style:M,to:c,viewTransition:d},"function"===typeof u?u(A):u)}).displayName="NavLink";var ot=t.forwardRef((e,n)=>{let{discover:r="render",fetcherKey:s,navigate:a,reloadDocument:l,replace:o,state:c,method:u=Ce,action:h,onSubmit:p,relative:m,preventScrollReset:f,viewTransition:b,...g}=e,v=pt(),x=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=t.useContext(X),s=t.useContext(Q);i(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...ae(e||".",{relative:n})},o=Z();if(null==e){l.search=o.search;let e=new URLSearchParams(l.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();l.search=n?`?${n}`:""}}e&&"."!==e||!a.route.index||(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(l.pathname="/"===l.pathname?r:D([r,l.pathname]));return d(l)}(h,{relative:m}),y="get"===u.toLowerCase()?"get":"post",w="string"===typeof h&&it.test(h);return t.createElement("form",{ref:n,method:y,action:x,onSubmit:l?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=t?.getAttribute("formmethod")||u;v(t||e.currentTarget,{fetcherKey:s,method:n,navigate:a,replace:o,state:c,relative:m,preventScrollReset:f,viewTransition:b})},...g,"data-discover":w||"render"!==r?void 0:"true"})});function ct(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dt(e){let n=t.useContext(H);return i(n,ct(e)),n}ot.displayName="Form";var ut=0,ht=()=>`__${String(++ut)}__`;function pt(){let{router:e}=dt("useSubmit"),{basename:n}=t.useContext(X),r=fe("useRouteId");return t.useCallback(async function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:a,method:i,encType:l,formData:o,body:c}=Te(t,n);if(!1===s.navigate){let t=s.fetcherKey||ht();await e.fetch(t,r,s.action||a,{preventScrollReset:s.preventScrollReset,formData:o,body:c,formMethod:s.method||i,formEncType:s.encType||l,flushSync:s.flushSync})}else await e.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:o,body:c,formMethod:s.method||i,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,n,r])}var mt=n(579);function ft(){const e=Z(),[n,r]=(0,t.useState)(e);(0,t.useEffect)(()=>{if(e.pathname!==n.pathname){const t=e.pathname.split("/").slice(3).join("/");r(e),sessionStorage.setItem("lastLocation",t)}},[e,n]);const s=function(){const{sessionID:e}=se(),t=sessionStorage.getItem("session_ID");return t?t!==e?(console.error("Session ID mismatch"),{success:!1,message:"Session ID mismatch"}):(console.log("Session ID matches"),{success:!0,message:"Session ID matches"}):(console.error("Session ID not found in sessionStorage"),{success:!1,message:"Session ID not found"})}();return null!==s&&void 0!==s&&s.success?(0,mt.jsx)(je,{}):(0,mt.jsx)(we,{to:"/login"})}const bt=n(385),gt=function(){return String((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")||"").trim().toLowerCase().replace(/\.[^/.]+$/,"")},vt=bt.keys().reduce((e,t)=>{const n=t.split("/").pop()||"",r=gt(n);return r?(e[r]=bt(t),e):e},{}),xt=Object.keys(vt).sort((e,t)=>e.localeCompare(t));const yt=(0,t.createContext)(),wt={enabled:!0,ambient:.24,shadowEnabled:!0,shadowStrength:.62,shadowSoftness:.55,shadowLength:.9,shadowBlend:.68,sources:[{id:"sun",name:"Sun",type:"directional",enabled:!0,x:0,y:0,intensity:.8,blend:.7,color:"#ffffff"}]},jt={floor:500,wall:1200,obstacle:700},Nt={floor:"stoneFloor",wall:"stoneWall",obstacle:"woodenCrate"},kt={floor:0,wall:150,obstacle:80},St=[{id:"stoneFloor",name:"Stone Floor",terrainType:"floor",floorVisualType:"base",description:"Solid stone tiles with stable footing.",movementCost:1,blocksMovement:!1,effects:[{id:"sureFooting",trigger:"onEnter",description:"Stable movement."}]},{id:"mudFloor",name:"Mud Floor",terrainType:"floor",floorVisualType:"effect",description:"Heavy mud that slows movement.",movementCost:2,blocksMovement:!1,effects:[{id:"slowed",trigger:"onEnter",description:"Movement cost increased."}]},{id:"spikeTrapFloor",name:"Spike Trap",terrainType:"floor",floorVisualType:"effect",description:"Hidden spikes can damage units that move across it.",movementCost:1,blocksMovement:!1,effects:[{id:"pierceDamage",trigger:"onEnter",value:8,description:"Take damage on contact."}]},{id:"stoneWall",name:"Stone Wall",terrainType:"wall",description:"Heavy wall that blocks movement and vision.",movementCost:0,blocksMovement:!0,effects:[{id:"hardCover",trigger:"passive",description:"Provides hard cover."}]},{id:"woodenWall",name:"Wooden Wall",terrainType:"wall",description:"Breakable wooden partition.",movementCost:0,blocksMovement:!0,effects:[{id:"flammable",trigger:"onElementFire",description:"Extra fire damage."}]},{id:"woodenCrate",name:"Wooden Crate",terrainType:"obstacle",description:"Low obstacle with medium durability.",movementCost:0,blocksMovement:!0,effects:[{id:"halfCover",trigger:"passive",description:"Provides partial cover."}]},{id:"pillarObstacle",name:"Stone Pillar",terrainType:"obstacle",description:"Dense obstacle with high durability.",movementCost:0,blocksMovement:!0,effects:[{id:"lineBlock",trigger:"passive",description:"Blocks line of sight."}]}],At=["gray","calm1","calm2","calm3","calm4","cloud1","cloud2","cloud3","cloud4","night1","night2","night3","night4","storm1","sunset1","sunset2","sunset3","sunset4"],Ct=[{id:"char1",name:"Hero",position:{x:25,y:50},size:50,visionDistance:200,rotation:45,visionArc:90,team:"player"},{id:"char2",name:"Ally",position:{x:100,y:100},size:20,visionDistance:150,rotation:180,visionArc:120,team:"player"},{id:"char3",name:"Enemy",position:{x:400,y:300},size:30,visionDistance:100,rotation:270,visionArc:90,team:"enemy"}],Et=[{id:1,type:"rect",terrainType:"floor",floorTypeId:"stoneFloor",elevationHeight:0,zLevel:0,x:100,y:100,z:0,width:120,height:100,color:"#1D4ED8",maxHP:500,hp:500,hitbox:{type:"rect",offsetX:0,offsetY:0,scale:1}},{id:2,type:"rect",terrainType:"wall",floorTypeId:"stoneWall",elevationHeight:150,zLevel:0,x:200,y:150,z:1,width:50,height:40,color:"#EF4444",maxHP:1200,hp:1200,hitbox:{type:"rect",offsetX:0,offsetY:0,scale:1}},{id:3,type:"circle",terrainType:"obstacle",floorTypeId:"woodenCrate",elevationHeight:80,zLevel:1,x:300,y:200,z:0,size:40,color:"#10B981",maxHP:700,hp:700,hitbox:{type:"circle",offsetX:0,offsetY:0,scale:1}}],Mt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Number(e);return Number.isFinite(n)?n:t},It=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.max(1,Mt(e,t))},_t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.max(0,Mt(e,t))},Lt=e=>{const t=String(e||"").trim().toLowerCase();return"circle"===t||"rect"===t||"triangle"===t?t:"circle"},Tt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#3B82F6";const n=String(e||"").trim();return/^#[0-9a-fA-F]{6}$/.test(n)?n:t},Pt=e=>String(e||"").trim().toLowerCase(),Dt=e=>{const t=String(e||"").trim().toLowerCase();return"floor"===t||"wall"===t||"obstacle"===t?t:"obstacle"},zt=e=>Math.max(-20,Math.min(20,Math.round(Mt(e,0)))),Ot=e=>Math.max(.1,Math.min(5,Mt(e,1))),Rt=e=>Math.max(-1,Math.min(1,Mt(e,0))),Ft=e=>"effect"===String(e||"").trim().toLowerCase()?"effect":"base",$t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Rt(null===e||void 0===e?void 0:e.x),n=Rt(null===e||void 0===e?void 0:e.y),r=Math.hypot(t,n);return r<=1||0===r?{x:t,y:n}:{x:t/r,y:n/r}},Bt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=e&&"object"===typeof e&&!Array.isArray(e)?e:{},r=(e=>"point"===String(e||"").trim().toLowerCase()?"point":"directional")(n.type),s=null!==n&&void 0!==n&&n.source&&"object"===typeof n.source&&!Array.isArray(n.source)?n.source:n,a={id:String(n.id||`light_${t+1}`).trim()||`light_${t+1}`,name:String(n.name||("point"===r?`Lamp ${t+1}`:`Light ${t+1}`)).trim()||("point"===r?`Lamp ${t+1}`:`Light ${t+1}`),type:r,enabled:!1!==n.enabled,intensity:Math.max(0,Math.min(2,Mt(n.intensity,.8))),blend:Math.max(0,Math.min(1,Mt(n.blend,.7))),color:Tt(n.color,"#ffffff")};if("point"===r){var i,l,o,c;a.worldX=Mt(null!==(i=n.worldX)&&void 0!==i?i:null===(l=n.position)||void 0===l?void 0:l.x,0),a.worldY=Mt(null!==(o=n.worldY)&&void 0!==o?o:null===(c=n.position)||void 0===c?void 0:c.y,0),a.range=Math.max(10,Math.min(5e3,Mt(n.range,420)))}else{const e=$t({x:null===s||void 0===s?void 0:s.x,y:null===s||void 0===s?void 0:s.y});a.x=e.x,a.y=e.y}return a},Ht=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=null!==e&&void 0!==e&&e.source&&"object"===typeof e.source&&!Array.isArray(e.source)?e.source:e;let n=(Array.isArray(null===e||void 0===e?void 0:e.sources)?e.sources:[]).map((e,t)=>Bt(e,t));return 0===n.length&&(n=[Bt({type:"directional",x:null===t||void 0===t?void 0:t.x,y:null===t||void 0===t?void 0:t.y,intensity:null===e||void 0===e?void 0:e.intensity,blend:null===e||void 0===e?void 0:e.blend},0)]),{enabled:!1!==(null===e||void 0===e?void 0:e.enabled),ambient:Math.max(0,Math.min(.95,Mt(null===e||void 0===e?void 0:e.ambient,wt.ambient))),shadowEnabled:!1!==(null===e||void 0===e?void 0:e.shadowEnabled),shadowStrength:Math.max(0,Math.min(1,Mt(null===e||void 0===e?void 0:e.shadowStrength,wt.shadowStrength))),shadowSoftness:Math.max(0,Math.min(1,Mt(null===e||void 0===e?void 0:e.shadowSoftness,wt.shadowSoftness))),shadowLength:Math.max(0,Math.min(2,Mt(null===e||void 0===e?void 0:e.shadowLength,wt.shadowLength))),shadowBlend:Math.max(0,Math.min(1,Mt(null===e||void 0===e?void 0:e.shadowBlend,wt.shadowBlend))),sources:n}},Ut=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"obstacle";const n=String(e||"").trim();return n||(Nt[t]||Nt.obstacle)},qt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=Array.isArray(e)?e:[],n=new Map;return t.forEach((e,t)=>{const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Dt(e.terrainType),r=String(e.id||`floorType_${t+1}`).trim()||`floorType_${t+1}`;return{id:r,name:String(e.name||r).trim()||r,terrainType:n,floorVisualType:"floor"===n?Ft(e.floorVisualType||e.visualType):"base",description:String(e.description||"").trim(),movementCost:Math.max(0,Mt(e.movementCost,"floor"===n?1:0)),blocksMovement:"boolean"===typeof e.blocksMovement?e.blocksMovement:"floor"!==n,effects:Array.isArray(e.effects)?e.effects:[]}}(e,t);n.has(r.id)||n.set(r.id,r)}),Array.from(n.values())},Wt=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((e,t)=>Math.max(e,Mt(null===t||void 0===t?void 0:t.id,0)),0)},Kt=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"circle",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"obstacle";return null!=(null===t||void 0===t?void 0:t.elevationHeight)?t.elevationHeight:null!=(null===t||void 0===t?void 0:t.height3D)?t.height3D:null!=(null===t||void 0===t?void 0:t.objectHeight)?t.objectHeight:null!=(null===t||void 0===t?void 0:t.shadowHeight)?t.shadowHeight:"rect"!==n&&null!=(null===t||void 0===t?void 0:t.height)?t.height:null!==(e=kt[r])&&void 0!==e?e:kt.obstacle},Yt=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const r=Lt(t.type),s=Dt(t.terrainType),a=Ut(t.floorTypeId,s),i=jt[s]||jt.obstacle,l=null===t.maxHP||"indestructible"===t.maxHP||"infinite"===t.maxHP?null:Math.max(1,Math.round(Mt(t.maxHP,i))),o=null===l?null:Math.max(0,Math.min(l,Math.round(Mt(t.hp,l)))),c=t.hitbox&&"object"===typeof t.hitbox&&!Array.isArray(t.hitbox)?t.hitbox:{},d={id:Mt(t.id,n),type:r,x:Math.round(Mt(t.x,0)),y:Math.round(Mt(t.y,0)),z:Math.round(Mt(t.z,0)),zLevel:zt(t.zLevel),terrainType:s,floorTypeId:a,color:Tt(t.color),mapAssetKey:Pt(t.mapAssetKey||t.mapKey||t.mapImageKey),elevationHeight:Math.round(_t(Kt(t,r,s),0)),maxHP:l,hp:o,hitbox:{type:Lt(c.type||t.hitboxType||r),offsetX:Math.round(Mt(c.offsetX,0)),offsetY:Math.round(Mt(c.offsetY,0)),scale:Ot(null!==(e=c.scale)&&void 0!==e?e:t.hitboxScale)}};return"rect"===r?(d.width=It(t.width,50),d.height=It(t.height,40)):d.size=It(t.size,"triangle"===r?40:30),d},Xt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Lt(e.type),n=Mt(e.x,0),r=Mt(e.y,0);if("rect"===t){const t=It(e.width,50)/2,s=It(e.height,40)/2;return{minX:n-t,maxX:n+t,minY:r-s,maxY:r+s}}const s=It(e.size,"triangle"===t?40:30);return{minX:n-s,maxX:n+s,minY:r-s,maxY:r+s}},Vt=function(){return"wall"===Dt((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).terrainType)},Qt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Vt(e))return!1;const r=Xt(e),s=zt(e.zLevel),a=null==n?null:Mt(n,-1);return(Array.isArray(t)?t:[]).some(e=>{return!!Vt(e)&&(zt(e.zLevel)===s&&((null==a||Mt(e.id,-1)!==a)&&(t=r,n=Xt(e),t.minX<n.maxX&&t.maxX>n.minX&&t.minY<n.maxY&&t.maxY>n.minY)));var t,n})},Gt=function(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={...r,...n};return{...s,id:String(s.id||r.id||""),name:String(s.name||r.name||"Unknown"),position:{x:Mt(null===s||void 0===s||null===(e=s.position)||void 0===e?void 0:e.x,0),y:Mt(null===s||void 0===s||null===(t=s.position)||void 0===t?void 0:t.y,0)},size:It(s.size,30),visionDistance:It(s.visionDistance,150),rotation:Mt(s.rotation,0),visionArc:It(s.visionArc,90),team:String(s.team||r.team||"player")}},Jt=e=>{let{children:n}=e;const[r,s]=(0,t.useState)(null),[a,i]=(0,t.useState)(!0),[l,o]=(0,t.useState)(!1),[c,d]=(0,t.useState)(Ct),[u,h]=(0,t.useState)({x:0,y:0}),p=(0,t.useRef)({x:0,y:0,zoom:1,bgImage:null}),[m,f]=(0,t.useState)(Et),[b,g]=(0,t.useState)("default_map"),[v,x]=(0,t.useState)("gray"),[y,w]=(0,t.useState)(null),[j,N]=(0,t.useState)(0),[k,S]=(0,t.useState)(St),[A,C]=(0,t.useState)(wt),E=(0,t.useRef)(Wt(Et)+1),M=(0,t.useRef)(Et);(0,t.useEffect)(()=>{M.current=m},[m]);const I=(0,t.useCallback)(e=>{const t=Wt(e)+1;E.current=Math.max(E.current,t)},[]),_=(0,t.useCallback)(e=>{const t=Mt(null===e||void 0===e?void 0:e.id,0),n=t>0?t:E.current++,r=Yt(e,n);return Qt(r,M.current)?null:(f(e=>{if(Qt(r,e))return e;const t=[...e,r];return I(t),M.current=t,t}),r)},[I]),L=(0,t.useCallback)((e,t)=>{e&&d(n=>n.map(n=>n.id===e?Gt({...n,...t},n):n))},[]),T=(0,t.useCallback)((e,t,n)=>{L(e,{position:{x:Mt(t,0),y:Mt(n,0)}})},[L]),P=(0,t.useCallback)(e=>{s(e)},[]),D=(0,t.useCallback)(()=>{i(e=>!e)},[]),z=(0,t.useCallback)((e,t)=>{const n=c.find(t=>t.id===e);console.log(`${null===n||void 0===n?void 0:n.name} performs ${t}`)},[c]),O=(0,t.useCallback)(e=>{_(e)},[_]),R=(0,t.useCallback)((e,t)=>{const n=Mt(e,-1);n<0||f(e=>{const r=e.findIndex(e=>Mt(e.id,-1)===n);if(r<0)return e;const s=e[r],a=t&&"object"===typeof t&&!Array.isArray(t)?t:{},i={...s,...a};a.hitbox&&"object"===typeof a.hitbox&&(i.hitbox={...s.hitbox||{},...a.hitbox});const l=Yt(i,s.id),o=new Set(["type","terrainType","x","y","zLevel","size","width","height","hitbox"]);if(Object.keys(a).some(e=>o.has(e))&&Qt(l,e,s.id))return e;const c=[...e];return c[r]=l,M.current=c,c})},[]),F=(0,t.useCallback)(e=>{const t=Mt(e,-1);t<0||f(e=>{const n=e.filter(e=>Mt(e.id,-1)!==t);return M.current=n,n})},[]),$=(0,t.useCallback)(e=>{const t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[];return(Array.isArray(e)?e:[]).forEach(e=>{Qt(e,t)||t.push(e)}),t}((Array.isArray(e)?e:[]).map((e,t)=>Yt(e,t+1)));f(t),M.current=t,I(t)},[I]),B=(0,t.useCallback)(function(){var e,t,n,r,s,a,i,l,o,c;let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const u=Lt(d.type),h=Dt(d.terrainType),p=Ut(d.floorTypeId,h),m=jt[h]||jt.obstacle,f=null!==(e=kt[h])&&void 0!==e?e:kt.obstacle,b=null===d.maxHP||"indestructible"===d.maxHP?null:Math.max(1,Math.round(Mt(d.maxHP,m))),g=null===b?null:Math.max(0,Math.min(b,Math.round(Mt(d.hp,b))));w({type:u,terrainType:h,floorTypeId:p,zLevel:zt(d.zLevel),color:Tt(d.color),mapAssetKey:Pt(d.mapAssetKey||d.mapKey||d.mapImageKey),z:Math.round(Mt(d.z,0)),size:It(d.size,"triangle"===u?40:30),width:It(d.width,50),height:It(d.height,40),elevationHeight:Math.round(_t(null!==(t=null!==(n=null!==(r=null!==(s=d.elevationHeight)&&void 0!==s?s:d.height3D)&&void 0!==r?r:d.objectHeight)&&void 0!==n?n:d.shadowHeight)&&void 0!==t?t:f,f)),maxHP:b,hp:g,hitbox:{type:Lt((null===d||void 0===d||null===(a=d.hitbox)||void 0===a?void 0:a.type)||d.hitboxType||u),offsetX:Math.round(Mt(null===d||void 0===d||null===(i=d.hitbox)||void 0===i?void 0:i.offsetX,0)),offsetY:Math.round(Mt(null===d||void 0===d||null===(l=d.hitbox)||void 0===l?void 0:l.offsetY,0)),scale:Ot(null!==(o=null===d||void 0===d||null===(c=d.hitbox)||void 0===c?void 0:c.scale)&&void 0!==o?o:d.hitboxScale)}})},[]),H=(0,t.useCallback)(()=>{w(null)},[]),U=(0,t.useCallback)(e=>{const t=qt(e);t.length&&S(t)},[]),q=(0,t.useCallback)((e,t)=>{C(n=>{const r=Ht(n),s=[...r.sources],a=s.findIndex(e=>"directional"===e.type);return a>=0?s[a]={...s[a],...$t({x:e,y:t})}:s.unshift(Bt({type:"directional",x:e,y:t},0)),{...r,sources:s}})},[]),W=(0,t.useCallback)(e=>{C(Ht(e))},[]),K=(0,t.useCallback)(e=>{C(t=>{const n=Ht(t),r=Bt(e,n.sources.length);return{...n,sources:[...n.sources,r]}})},[]),Y=(0,t.useCallback)((e,t)=>{C(n=>{const r=Ht(n),s=r.sources.map(n=>n.id===e?Bt({...n,...t},0):n);return{...r,sources:s}})},[]),X=(0,t.useCallback)(e=>{C(t=>{const n=Ht(t);return{...n,sources:n.sources.filter(t=>t.id!==e)}})},[]),V=(0,t.useCallback)(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!y)return null;const r=n&&"object"===typeof n&&!Array.isArray(n)?n:{},s=_({...y,...r,x:Math.round(Mt(e,0)),y:Math.round(Mt(t,0))});return w(null),s},[y,_]),Q=(0,t.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e&&"object"===typeof e){if("string"===typeof e.backgroundKey&&e.backgroundKey.trim()){const t=e.backgroundKey.trim().toLowerCase();At.includes(t)&&x(t)}Array.isArray(e.mapObjects)&&$(e.mapObjects),Number.isFinite(Number(e.currentZLevel))&&N(zt(e.currentZLevel)),Array.isArray(e.floorTypes)&&U(e.floorTypes),e.lighting&&"object"===typeof e.lighting&&W(e.lighting),Array.isArray(e.characters)&&e.characters.length>0&&d(e.characters.map((e,t)=>Gt(e,Ct[t]||{})))}},[$,U,W]),G=(0,t.useCallback)(async()=>{console.log("saveMapToDatabase placeholder",{currentMapId:b,mapObjects:m,backgroundKey:v})},[b,m,v]),J=(0,t.useCallback)(async e=>{console.log("loadMapFromDatabase placeholder",{mapId:e})},[]),Z=(0,t.useCallback)(()=>{N(e=>zt(e+1))},[]),ee=(0,t.useCallback)(()=>{N(e=>zt(e-1))},[]),te=(0,t.useCallback)((e,t)=>{if(null===p||void 0===p||!p.current)return{x:0,y:0};const n=Mt(p.current.zoom,1)||1,r=Mt(p.current.x,0),s=Mt(p.current.y,0);return{x:(Mt(e,0)+r)/n,y:(Mt(t,0)+s)/n}},[p]),ne=(0,t.useCallback)((e,t)=>{if(null===p||void 0===p||!p.current)return{x:0,y:0};const n=Mt(p.current.zoom,1)||1,r=Mt(p.current.x,0),s=Mt(p.current.y,0);return{x:Mt(e,0)*n-r,y:Mt(t,0)*n-s}},[p]),re=(0,t.useMemo)(()=>null!==p&&void 0!==p&&p.current&&u?"number"!==typeof u.x||"number"!==typeof u.y?{x:0,y:0}:te(u.x,u.y):{x:0,y:0},[u,te]),[se,ae]=(0,t.useState)(null),ie=(0,t.useCallback)(function(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ae({type:"point",color:String(n.color||"#ffffff"),intensity:null!==(e=Number(n.intensity))&&void 0!==e?e:.8,blend:null!==(t=Number(n.blend))&&void 0!==t?t:.7,range:Number(n.range)||420})},[]),le=(0,t.useCallback)(()=>{ae(null)},[]),oe=(0,t.useCallback)((e,t)=>{var n;se&&(K({id:`point_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:`Light ${((null===A||void 0===A||null===(n=A.sources)||void 0===n?void 0:n.length)||0)+1}`,type:"point",enabled:!0,worldX:Math.round(e),worldY:Math.round(t),color:se.color,intensity:se.intensity,blend:se.blend,range:se.range}),le())},[se,A,K,le]),ce={selectedChar:r,setSelectedChar:s,fogEnabled:a,setFogEnabled:i,isDM:l,setIsDM:o,characters:c,setCharacters:d,lastMouse:u,setLastMouse:h,camera:p,worldMouseCoords:re,mapObjects:m,setMapObjects:f,currentMapId:b,setCurrentMapId:g,backgroundKey:v,setBackgroundKey:x,backgroundOptions:At,mapImageOptions:xt,floorTypes:k,replaceFloorTypes:U,lighting:A,replaceLighting:W,setLightingDirection:q,addLightSource:K,updateLightSource:Y,removeLightSource:X,mapObjectPlacement:y,currentZLevel:j,setCurrentZLevel:N,stepZLevelUp:Z,stepZLevelDown:ee,updateCharacter:L,moveCharacter:T,selectCharacter:P,toggleFog:D,handleCharacterAction:z,screenToWorld:te,worldToScreen:ne,addMapObject:O,updateMapObject:R,deleteMapObject:F,replaceAllMapObjects:$,armMapObjectPlacement:B,clearMapObjectPlacement:H,placePendingMapObjectAt:V,saveMapToDatabase:G,loadMapFromDatabase:J,loadGameSnapshot:Q,lightPlacement:se,armLightPlacement:ie,clearLightPlacement:le,placeLightAt:oe};return(0,mt.jsx)(yt.Provider,{value:ce,children:n})},Zt=()=>{const e=(0,t.useContext)(yt);if(!e)throw new Error("useGame must be used within a GameProvider");return e},en=Object.create(null);en.open="0",en.close="1",en.ping="2",en.pong="3",en.message="4",en.upgrade="5",en.noop="6";const tn=Object.create(null);Object.keys(en).forEach(e=>{tn[en[e]]=e});const nn={type:"error",data:"parser error"},rn="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),sn="function"===typeof ArrayBuffer,an=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,ln=(e,t,n)=>{let{type:r,data:s}=e;return rn&&s instanceof Blob?t?n(s):on(s,n):sn&&(s instanceof ArrayBuffer||an(s))?t?n(s):on(new Blob([s]),n):n(en[r]+(s||""))},on=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function cn(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let dn;const un="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hn="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let n=0;n<64;n++)hn[un.charCodeAt(n)]=n;const pn="function"===typeof ArrayBuffer,mn=(e,t)=>{if("string"!==typeof e)return{type:"message",data:bn(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:fn(e.substring(1),t)};return tn[n]?e.length>1?{type:tn[n],data:e.substring(1)}:{type:tn[n]}:nn},fn=(e,t)=>{if(pn){const n=(e=>{let t,n,r,s,a,i=.75*e.length,l=e.length,o=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);const c=new ArrayBuffer(i),d=new Uint8Array(c);for(t=0;t<l;t+=4)n=hn[e.charCodeAt(t)],r=hn[e.charCodeAt(t+1)],s=hn[e.charCodeAt(t+2)],a=hn[e.charCodeAt(t+3)],d[o++]=n<<2|r>>4,d[o++]=(15&r)<<4|s>>2,d[o++]=(3&s)<<6|63&a;return c})(e);return bn(n,t)}return{base64:!0,data:e}},bn=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,gn=String.fromCharCode(30);function vn(){return new TransformStream({transform(e,t){!function(e,t){rn&&e.data instanceof Blob?e.data.arrayBuffer().then(cn).then(t):sn&&(e.data instanceof ArrayBuffer||an(e.data))?t(cn(e.data)):ln(e,!1,e=>{dn||(dn=new TextEncoder),t(dn.encode(e))})}(e,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const e=new DataView(s.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{s=new Uint8Array(9);const e=new DataView(s.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&"string"!==typeof e.data&&(s[0]|=128),t.enqueue(s),t.enqueue(n)})}})}let xn;function yn(e){return e.reduce((e,t)=>e+t.length,0)}function wn(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let s=0;s<t;s++)n[s]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function jn(e){if(e)return function(e){for(var t in jn.prototype)e[t]=jn.prototype[t];return e}(e)}jn.prototype.on=jn.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},jn.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},jn.prototype.off=jn.prototype.removeListener=jn.prototype.removeAllListeners=jn.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var s=0;s<r.length;s++)if((n=r[s])===t||n.fn===t){r.splice(s,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},jn.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var s=(n=n.slice(0)).length;r<s;++r)n[r].apply(this,t)}return this},jn.prototype.emitReserved=jn.prototype.emit,jn.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},jn.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Nn="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),kn="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function Sn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{})}const An=kn.setTimeout,Cn=kn.clearTimeout;function En(e,t){t.useNativeTimers?(e.setTimeoutFn=An.bind(kn),e.clearTimeoutFn=Cn.bind(kn)):(e.setTimeoutFn=kn.setTimeout.bind(kn),e.clearTimeoutFn=kn.clearTimeout.bind(kn))}function Mn(e){return"string"===typeof e?function(e){let t=0,n=0;for(let r=0,s=e.length;r<s;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))}function In(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class _n extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class Ln extends jn{constructor(e){super(),this.writable=!1,En(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new _n(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=mn(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class Tn extends Ln{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(gn),r=[];for(let s=0;s<n.length;s++){const e=mn(n[s],t);if(r.push(e),"error"===e.type)break}return r})(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=new Array(n);let s=0;e.forEach((e,a)=>{ln(e,!1,e=>{r[a]=e,++s===n&&t(r.join(gn))})})})(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=In()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let Pn=!1;try{Pn="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(bo){}const Dn=Pn;function zn(){}class On extends Tn{constructor(e){if(super(e),"undefined"!==typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class Rn extends jn{constructor(e,t,n){super(),this.createRequest=e,En(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=Sn(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(fo){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(fo){}try{n.setRequestHeader("Accept","*/*")}catch(fo){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"===typeof n.status?n.status:0)},0))},n.send(this._data)}catch(fo){return void this.setTimeoutFn(()=>{this._onError(fo)},0)}"undefined"!==typeof document&&(this._index=Rn.requestsCount++,Rn.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if("undefined"!==typeof this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=zn,e)try{this._xhr.abort()}catch(fo){}"undefined"!==typeof document&&delete Rn.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(Rn.requestsCount=0,Rn.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",Fn);else if("function"===typeof addEventListener){addEventListener("onpagehide"in kn?"pagehide":"unload",Fn,!1)}function Fn(){for(let e in Rn.requests)Rn.requests.hasOwnProperty(e)&&Rn.requests[e].abort()}const $n=function(){const e=Bn({xdomain:!1});return e&&null!==e.responseType}();function Bn(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||Dn))return new XMLHttpRequest}catch(fo){}if(!t)try{return new(kn[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(fo){}}const Hn="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class Un extends Ln{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=Hn?{}:Sn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(bo){return this.emitReserved("error",bo)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;ln(n,this.supportsBinary,e=>{try{this.doWrite(n,e)}catch(fo){}r&&Nn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){"undefined"!==typeof this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=In()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const qn=kn.WebSocket||kn.MozWebSocket;const Wn={websocket:class extends Un{createSocket(e,t,n){return Hn?new qn(e,t,n):t?new qn(e,t):new qn(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends Ln{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(bo){return this.emitReserved("error",bo)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=function(e,t){xn||(xn=new TextDecoder);const n=[];let r=0,s=-1,a=!1;return new TransformStream({transform(i,l){for(n.push(i);;){if(0===r){if(yn(n)<1)break;const e=wn(n,1);a=128===(128&e[0]),s=127&e[0],r=s<126?3:126===s?1:2}else if(1===r){if(yn(n)<2)break;const e=wn(n,2);s=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(2===r){if(yn(n)<8)break;const e=wn(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),a=t.getUint32(0);if(a>Math.pow(2,21)-1){l.enqueue(nn);break}s=a*Math.pow(2,32)+t.getUint32(4),r=3}else{if(yn(n)<s)break;const e=wn(n,s);l.enqueue(mn(a?e:xn.decode(e),t)),r=0}if(0===s||s>e){l.enqueue(nn);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=vn();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const s=()=>{n.read().then(e=>{let{done:t,value:n}=e;t||(this.onPacket(n),s())}).catch(e=>{})};s();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then(()=>{r&&Nn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends On{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=$n&&!t}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd},this.opts),new Rn(Bn,this.uri(),e)}}},Kn=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Yn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Xn(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let s=Kn.exec(e||""),a={},i=14;for(;i--;)a[Yn[i]]=s[i]||"";return-1!=n&&-1!=r&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,a.path),a.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,r){t&&(n[t]=r)}),n}(0,a.query),a}const Vn="function"===typeof addEventListener&&"function"===typeof removeEventListener,Qn=[];Vn&&addEventListener("offline",()=>{Qn.forEach(e=>e())},!1);class Gn extends jn{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"===typeof e&&(t=e,e=null),e){const n=Xn(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=Xn(t.host).host);En(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let r=0,s=n.length;r<s;r++){let e=n[r].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),Vn&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Qn.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const e=this.opts.rememberUpgrade&&Gn.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",Gn.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const n=this.writeBuffer[t].data;if(n&&(e+=Mn(n)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Nn(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const s={type:e,data:t,options:n};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(Gn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Vn&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=Qn.indexOf(this._offlineEventListener);-1!==e&&Qn.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Gn.protocol=4;class Jn extends Gn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;Gn.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Gn.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function s(){n||(n=!0,c(),t.close(),t=null)}const a=e=>{const n=new Error("probe error: "+e);n.transport=t.name,s(),this.emitReserved("upgradeError",n)};function i(){a("transport closed")}function l(){a("socket closed")}function o(e){t&&e.name!==t.name&&s()}const c=()=>{t.removeListener("open",r),t.removeListener("error",a),t.removeListener("close",i),this.off("close",l),this.off("upgrading",o)};t.once("open",r),t.once("error",a),t.once("close",i),this.once("close",l),this.once("upgrading",o),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class Zn extends Jn{constructor(e){const t="object"===typeof e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t.transports||t.transports&&"string"===typeof t.transports[0])&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map(e=>Wn[e]).filter(e=>!!e)),super(e,t)}}const er="function"===typeof ArrayBuffer,tr=Object.prototype.toString,nr="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===tr.call(Blob),rr="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===tr.call(File);function sr(e){return er&&(e instanceof ArrayBuffer||(e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||nr&&e instanceof Blob||rr&&e instanceof File}function ar(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(ar(e[t]))return!0;return!1}if(sr(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return ar(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&ar(e[n]))return!0;return!1}function ir(e){const t=[],n=e.data,r=e;return r.data=lr(n,t),r.attachments=t.length,{packet:r,buffers:t}}function lr(e,t){if(!e)return e;if(sr(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=lr(e[r],t);return n}if("object"===typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=lr(e[r],t));return n}return e}function or(e,t){return e.data=cr(e.data,t),delete e.attachments,e}function cr(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=cr(e[n],t);else if("object"===typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=cr(e[n],t));return e}const dr=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ur=5;var hr;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(hr||(hr={}));class pr{constructor(e){this.replacer=e}encode(e){return e.type!==hr.EVENT&&e.type!==hr.ACK||!ar(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===hr.EVENT?hr.BINARY_EVENT:hr.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==hr.BINARY_EVENT&&e.type!==hr.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=ir(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}function mr(e){return"[object Object]"===Object.prototype.toString.call(e)}class fr extends jn{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===hr.BINARY_EVENT;n||t.type===hr.BINARY_ACK?(t.type=n?hr.EVENT:hr.ACK,this.reconstructor=new br(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!sr(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===hr[n.type])throw new Error("unknown packet type "+n.type);if(n.type===hr.BINARY_EVENT||n.type===hr.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const s=e.substring(r,t);if(s!=Number(s)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(s)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!fr.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(fo){return!1}}static isPayloadValid(e,t){switch(e){case hr.CONNECT:return mr(t);case hr.DISCONNECT:return void 0===t;case hr.CONNECT_ERROR:return"string"===typeof t||mr(t);case hr.EVENT:case hr.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===dr.indexOf(t[0]));case hr.ACK:case hr.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class br{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=or(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function gr(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const vr=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class xr extends jn{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[gr(e,"open",this.onopen.bind(this)),gr(e,"packet",this.onpacket.bind(this)),gr(e,"error",this.onerror.bind(this)),gr(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){var t,n,r;if(vr.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var s=arguments.length,a=new Array(s>1?s-1:0),i=1;i<s;i++)a[i-1]=arguments[i];if(a.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(a),this;const l={type:hr.EVENT,data:a,options:{}};if(l.options.compress=!1!==this.flags.compress,"function"===typeof a[a.length-1]){const e=this.ids++,t=a.pop();this._registerAckCallback(e,t),l.id=e}const o=null===(n=null===(t=this.io.engine)||void 0===t?void 0:t.transport)||void 0===n?void 0:n.writable,c=this.connected&&!(null===(r=this.io.engine)||void 0===r?void 0:r._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(e,t){var n,r=this;const s=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===s)return void(this.acks[e]=t);const a=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))},s),i=function(){r.io.clearTimeoutFn(a);for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];t.apply(r,n)};i.withError=!0,this.acks[e]=i}emitWithAck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Promise((t,r)=>{const s=(e,n)=>e?r(e):t(n);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){var t=this;let n;"function"===typeof e[e.length-1]&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(function(e){if(r!==t._queue[0])return;if(null!==e)r.tryCount>t._opts.retries&&(t._queue.shift(),n&&n(e));else if(t._queue.shift(),n){for(var s=arguments.length,a=new Array(s>1?s-1:0),i=1;i<s;i++)a[i-1]=arguments[i];n(null,...a)}return r.pending=!1,t._drainQueue()}),this._queue.push(r),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:hr.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case hr.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case hr.EVENT:case hr.BINARY_EVENT:this.onevent(e);break;case hr.ACK:case hr.BINARY_ACK:this.onack(e);break;case hr.DISCONNECT:this.ondisconnect();break;case hr.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];t.packet({type:hr.ACK,id:e,data:s})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:hr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function yr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}yr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},yr.prototype.reset=function(){this.attempts=0},yr.prototype.setMin=function(e){this.ms=e},yr.prototype.setMax=function(e){this.max=e},yr.prototype.setJitter=function(e){this.jitter=e};class wr extends jn{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&"object"===typeof t&&(n=t,t=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,En(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=n.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new yr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this._readyState="closed",this.uri=t;const s=n.parser||e;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Zn(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=gr(t,"open",function(){n.onopen(),e&&e()}),s=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},a=gr(t,"error",s);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn(()=>{r(),s(new Error("timeout")),t.close()},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}return this.subs.push(r),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(gr(e,"ping",this.onping.bind(this)),gr(e,"data",this.ondata.bind(this)),gr(e,"error",this.onerror.bind(this)),gr(e,"close",this.onclose.bind(this)),gr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(fo){this.onclose("parse error",fo)}}ondecoded(e){Nn(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new xr(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const jr={};function Nr(e,t){"object"===typeof e&&(t=e,e=void 0);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=Xn(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,s=n.id,a=n.path,i=jr[s]&&a in jr[s].nsps;let l;return t.forceNew||t["force new connection"]||!1===t.multiplex||i?l=new wr(r,t):(jr[s]||(jr[s]=new wr(r,t)),l=jr[s]),n.query&&!t.query&&(t.query=n.queryKey),l.socket(n.path,t)}Object.assign(Nr,{Manager:wr,Socket:xr,io:Nr,connect:Nr});const kr=Nr("https://dnm-m84a.onrender.com",{transports:["websocket","polling"]}),Sr=t.createContext(kr),Ar=n(133),Cr=Ar.keys().reduce((e,t)=>(e[t.split("/").pop().replace(/\.[^/.]+$/,"").toLowerCase()]=Ar(t),e),{});function Er(e){const t=e.replace(/\.[^/.]+$/,"").toLowerCase();return Cr[t]||null}const Mr=function(){const e=(0,t.useContext)(Sr),n=ne(),[r,s]=(0,t.useState)(""),[a,i]=(0,t.useState)(""),l=(0,t.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return new Promise(r=>{const s=Date.now(),a=()=>{const i=sessionStorage.getItem("session_ID")||(null===e||void 0===e?void 0:e.id)||null;i?r(i):Date.now()-s>=t?r(null):setTimeout(a,n)};a()})},[e]);return(0,t.useEffect)(()=>{let t=!1;return function(){const r=localStorage.getItem("player_ID")||"",s=sessionStorage.getItem("lastLocation")||"";r&&l().then(a=>{!t&&a&&e.emit("login_tokenSave",{playerID:r,sessionID:a},i=>{t||(i.success?(e.emit("playerData_logOn",{playerID:r}),n(s?`/ISK/${a}/${s}`:`/ISK/${a}/home`)):(console.log((null===i||void 0===i?void 0:i.error)||(null===i||void 0===i?void 0:i.message)||"Autologin failed"),localStorage.removeItem("player_ID"),localStorage.removeItem("player_username"),sessionStorage.removeItem("lastLocation")))})})}(),()=>{t=!0}},[e,n,l]),(0,mt.jsxs)("div",{className:"relative min-h-screen w-full",children:[(0,mt.jsx)("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${Er("loginpage_background")})`}}),(0,mt.jsx)("div",{className:"absolute w-1/3 p-16 bg-black/85 h-screen",children:(0,mt.jsxs)("div",{className:"flex flex-col text-white h-full",children:[(0,mt.jsx)("div",{className:"text-2xl",children:"Login"}),(0,mt.jsxs)("div",{className:"flex space-y-6 flex-col pt-8",children:[(0,mt.jsxs)("div",{className:"flex space-y-1 flex-col",children:[(0,mt.jsx)("div",{children:"Username"}),(0,mt.jsx)("div",{children:(0,mt.jsx)("input",{type:"text",placeholder:"Username...",value:r,onChange:e=>s(e.target.value),className:"bg-transparent border-b border-b-white text-white w-full focus:outline-none focus:ring-0"})})]}),(0,mt.jsxs)("div",{className:"flex space-y-1 flex-col",children:[(0,mt.jsx)("div",{children:"Password "}),(0,mt.jsx)("div",{children:(0,mt.jsx)("input",{type:"password",placeholder:"Password...",value:a,onChange:e=>i(e.target.value),className:"bg-transparent border-b border-b-white text-white w-full focus:outline-none focus:ring-0 "})})]}),(0,mt.jsx)("button",{onClick:function(){const t=r.trim();t&&a?e.emit("login",{username:t,password:a},r=>{if(null===r||void 0===r||!r.success){const e=(null===r||void 0===r?void 0:r.error)||(null===r||void 0===r?void 0:r.message)||"Login failed. Please try again.";return console.log(`Login failed: ${e}`),void alert(e)}const s=String(r.userID||r.userId||"").trim();s?(localStorage.setItem("player_ID",s),localStorage.setItem("player_username",t),l().then(t=>{t?e.emit("login_tokenSave",{playerID:s,sessionID:t},r=>{null!==r&&void 0!==r&&r.success?(e.emit("playerData_logOn",{playerID:s}),n(`/ISK/${t}/home`)):alert((null===r||void 0===r?void 0:r.error)||"Unable to save login session.")}):alert("Unable to establish a session. Please try again.")})):alert("Login failed: missing user ID.")}):alert("Please provide both username and password.")},className:"relative bg-blue-500 text-white px-4 py-2 rounded-full w-full",children:"Log In"}),(0,mt.jsx)("div",{className:"text-center",children:(0,mt.jsxs)("p",{children:["Don't have an account? ",(0,mt.jsx)(lt,{to:"/signup",children:"Sign up here"}),"."]})})]}),(0,mt.jsxs)("div",{className:"mt-auto flex flex-row justify-center text-xs space-x-2",children:[(0,mt.jsx)("div",{children:(0,mt.jsx)(lt,{to:"/",children:"Home"})}),(0,mt.jsx)("div",{children:"|"}),(0,mt.jsx)("div",{children:(0,mt.jsx)("a",{href:"https://www.linkedin.com/in/yisong-lin-8605a3357/",target:"_blank",rel:"noopener noreferrer",children:"About"})}),(0,mt.jsx)("div",{children:"|"}),(0,mt.jsx)("div",{children:(0,mt.jsx)("a",{href:"https://github.com/Yisong-Lin-Coding/DnM",target:"_blank",rel:"noopener noreferrer",children:"Github"})})]})]})})]})};const Ir=function(){const e=ne();return(0,mt.jsxs)("div",{className:"relative min-h-screen w-full overflow-hidden",children:[(0,mt.jsx)("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${Er("startpage_background")})`}}),(0,mt.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40"}),(0,mt.jsxs)("div",{className:"relative z-10 grid grid-rows-[25vh_75vh] grid-cols-[1fr_3fr_1fr] items-center justify-center w-full text-center text-white p-5 h-screen",children:[(0,mt.jsx)("h1",{className:"col-span-3 text-3xl font-bold",children:"Welcome to DNM"}),(0,mt.jsxs)("div",{className:"col-start-2 self-start w-[40%] mx-auto h-[55%] flex flex-col justify-between items-center p-5 space-y-4 rounded-lg bg-black/55 text-lg",children:[(0,mt.jsx)("button",{onClick:()=>{e("/login")},children:"Start"}),(0,mt.jsx)("button",{onClick:()=>{e("/settings")},children:"Settings"}),(0,mt.jsx)("button",{onClick:()=>{localStorage.removeItem("player_ID"),localStorage.removeItem("player_username"),sessionStorage.removeItem("session_ID"),sessionStorage.removeItem("adminPermission"),sessionStorage.removeItem("lastLocation"),window.location.assign("https://github.com/Yisong-Lin-Coding/DnM")},children:"Exit"})]})]})]})};const _r=function(){const e=(0,t.useContext)(Sr),n=ne(),r=e=>{const t=sessionStorage.getItem("session_ID");n(t?`/ISK/${t}${e}`:"/login")};return(0,t.useEffect)(()=>{const t=localStorage.getItem("player_ID");t&&e.emit("login_adminPermissionCheck",{playerID:t},e=>{null!==e&&void 0!==e&&e.success?sessionStorage.setItem("adminPermission","true"):sessionStorage.setItem("adminPermission","false")})},[e]),(0,mt.jsx)("div",{className:"relative min-h-screen w-full",children:(0,mt.jsx)("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${Er("homepage_background")})`},children:(0,mt.jsx)("div",{className:"relative z-10 grid grid-rows-[25vh_75vh] grid-cols-[1fr_3fr_1fr] items-center justify-center w-full text-center text-white p-5 h-screen",children:(0,mt.jsxs)("div",{className:"col-start-2 row-start-2 self-start w-[40%] mx-auto h-[55%] flex flex-col justify-between items-center p-8 space-y-4 rounded-lg bg-black/60 text-lg",children:[(0,mt.jsx)("button",{onClick:()=>{r("/lore")},children:"Lore"}),(0,mt.jsx)("button",{onClick:()=>{r("/lobby")},children:"Campaign"}),(0,mt.jsx)("button",{onClick:()=>{r("/character")},children:"Characters"}),(0,mt.jsx)("button",{onClick:()=>{const t=localStorage.getItem("player_ID");t&&e.emit("playerData_logOff",{playerID:t}),localStorage.removeItem("player_ID"),localStorage.removeItem("player_username"),sessionStorage.removeItem("session_ID"),sessionStorage.removeItem("adminPermission"),sessionStorage.removeItem("lastLocation"),n("/login")},children:"Exit"})]})})})})},Lr=()=>{const[e,n]=(0,t.useState)(""),[r,s]=(0,t.useState)(""),a=(0,t.useContext)(Sr),i=ne(),l=(0,t.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return new Promise(n=>{const r=Date.now(),s=()=>{const i=sessionStorage.getItem("session_ID")||(null===a||void 0===a?void 0:a.id)||null;i?n(i):Date.now()-r>=e?n(null):setTimeout(s,t)};s()})},[a]);return(0,mt.jsxs)("div",{className:"relative min-h-screen w-full",children:[(0,mt.jsx)("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${Er("loginpage_background")})`}}),(0,mt.jsx)("div",{className:"absolute w-1/3 p-16 bg-black/85 h-screen top-0 right-0",children:(0,mt.jsxs)("div",{className:"flex flex-col text-white h-full",children:[(0,mt.jsx)("div",{className:"text-2xl",children:"Sign Up"}),(0,mt.jsxs)("div",{className:"flex space-y-6 flex-col pt-8",children:[(0,mt.jsxs)("div",{className:"flex space-y-1 flex-col",children:[(0,mt.jsx)("div",{children:"Username"}),(0,mt.jsx)("div",{children:(0,mt.jsx)("input",{type:"text",placeholder:"Username...",value:e,onChange:e=>n(e.target.value),className:"bg-transparent border-b border-b-white text-white w-full focus:outline-none focus:ring-0"})})]}),(0,mt.jsxs)("div",{className:"flex space-y-1 flex-col",children:[(0,mt.jsx)("div",{children:"Password "}),(0,mt.jsx)("div",{children:(0,mt.jsx)("input",{type:"password",placeholder:"Password...",value:r,onChange:e=>s(e.target.value),className:"bg-transparent border-b border-b-white text-white w-full focus:outline-none focus:ring-0 "})})]}),(0,mt.jsx)("button",{onClick:()=>{const t=e.trim();t&&r?l().then(e=>{e?a.emit("signup",{username:t,password:r,sessionID:e},n=>{if(null===n||void 0===n||!n.success)return console.error("Signup failed:",null===n||void 0===n?void 0:n.error),void alert("Signup failed: "+((null===n||void 0===n?void 0:n.error)||"Unknown error"));const r=String(n.userID||n.userId||"").trim();r?(localStorage.setItem("player_ID",r),localStorage.setItem("player_username",t),a.emit("login_tokenSave",{playerID:r,sessionID:e},t=>{null!==t&&void 0!==t&&t.success?(a.emit("playerData_logOn",{playerID:r}),i(`/ISK/${e}/home`)):alert((null===t||void 0===t?void 0:t.error)||"Unable to save login session.")})):alert("Signup failed: missing user ID.")}):alert("Unable to establish a session. Please refresh and try again.")}):alert("Please provide both username and password.")},className:"relative bg-blue-500 text-white px-4 py-2 rounded-full w-full",children:"Sign Up"}),(0,mt.jsx)("div",{className:"text-center",children:(0,mt.jsxs)("p",{children:["Already have an account? ",(0,mt.jsx)(lt,{to:"/login",children:"Login here"}),"."]})})]}),(0,mt.jsxs)("div",{className:"mt-auto flex flex-row justify-center text-xs space-x-2",children:[(0,mt.jsx)("div",{children:(0,mt.jsx)(lt,{to:"/",children:"Home"})}),(0,mt.jsx)("div",{children:"|"}),(0,mt.jsx)("div",{children:(0,mt.jsx)("a",{href:"https://www.linkedin.com/in/yisong-lin-8605a3357/",target:"_blank",rel:"noopener noreferrer",children:"About"})}),(0,mt.jsx)("div",{children:"|"}),(0,mt.jsx)("div",{children:(0,mt.jsx)("a",{href:"https://github.com/Yisong-Lin-Coding/DnM",target:"_blank",rel:"noopener noreferrer",children:"Github"})})]})]})})]})};function Tr(e){let{layers:t,state:n,prevState:r,frame:s}=e;const a=s&&"object"===typeof s?{...s,state:s.state||n||{},prevState:s.prevState||r||null}:{state:n||{},prevState:r||null};a.cache&&"object"===typeof a.cache||(a.cache={});for(const i of Array.isArray(t)?t:[]){if(!i||"function"!==typeof i.draw)continue;("function"!==typeof i.shouldRedraw||i.shouldRedraw(a.state,a.prevState,a))&&i.draw(i.ctx,i.canvas,a.state,a)}}const Pr={id:"background",shouldRedraw(e,t){const n=null===e||void 0===e?void 0:e.camera,r=null===t||void 0===t?void 0:t.camera;return!n||!r||(e.backgroundKey!==t.backgroundKey||e.bgImage!==t.bgImage||n.x!==r.x||n.y!==r.y||n.zoom!==r.zoom)},draw(e,t,n){const{bgImage:r,camera:s,backgroundKey:a}=n;if(!s||!t||0===t.width||0===t.height)return;if(e.clearRect(0,0,t.width,t.height),!r){const n=String(a||"").trim().toLowerCase();return void(n&&"gray"!==n&&"grey"!==n||(e.fillStyle="#4b5563",e.fillRect(0,0,t.width,t.height)))}const i=t.width/t.height,l=r.width/r.height;let o,c,d,u;i>l?(o=t.width,c=t.width/l,d=0,u=(t.height-c)/2):(c=t.height,o=t.height*l,d=(t.width-o)/2,u=0),e.drawImage(r,d,u,o,c)}},Dr=50,zr={id:"grid",shouldRedraw(e,t){const n=null===e||void 0===e?void 0:e.camera,r=null===t||void 0===t?void 0:t.camera;return!n||!r||(n.x!==r.x||n.y!==r.y||n.zoom!==r.zoom)},draw(e,t,n){const{camera:r}=n;if(!r||!t||0===t.width||0===t.height)return;e.clearRect(0,0,t.width,t.height),e.strokeStyle="#7F807E",e.lineWidth=1;const s=r.x/r.zoom,a=r.y/r.zoom,i=(r.x+t.width)/r.zoom,l=(r.y+t.height)/r.zoom,o=Math.floor(s/Dr)*Dr,c=Math.ceil(i/Dr)*Dr,d=Math.floor(a/Dr)*Dr,u=Math.ceil(l/Dr)*Dr;for(let h=o;h<=c;h+=Dr){const n=h*r.zoom-r.x;e.beginPath(),e.moveTo(n,0),e.lineTo(n,t.height),e.stroke()}for(let h=d;h<=u;h+=Dr){const n=h*r.zoom-r.y;e.beginPath(),e.moveTo(0,n),e.lineTo(t.width,n),e.stroke()}}};const Or=function(){const[e,n]=(0,t.useState)(320),[r,s]=(0,t.useState)(!1),[a,i]=(0,t.useState)(!0),[l,o]=(0,t.useState)(null),c=(0,t.useRef)(!1),d=(0,t.useRef)({x:0,y:0,zoom:1}),u=(0,t.useRef)(!1),[h,p]=(0,t.useState)({x:0,y:0}),[m,f]=(0,t.useState)([]);function b(e){const t=window.devicePixelRatio||1,n=e.getBoundingClientRect();e.width=Math.round(n.width*t),e.height=Math.round(n.height*t);const r=e.getContext("2d");return r.setTransform(t,0,0,t,0,0),r}(0,t.useEffect)(()=>{const e=new Image;e.src=Er("calm1"),console.log("BG IMAGE URL:",Er("calm1")),e.onload=()=>{d.current.bgImage=e}},["calm1"]);const g=function(e){const n=(0,t.useRef)({});return(0,t.useEffect)(()=>{for(const[t,r]of Object.entries(e)){const e=r.current;if(!e)continue;const s=b(e);n.current[t]={canvas:e,ctx:s}}},[]),n.current}({background:j,grid:N,fog:E});(0,t.useEffect)(()=>{const e=()=>{for(const e of Object.values(g.current))b(e.canvas)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const v=(0,t.useRef)(null),[x,y]=(0,t.useState)(null),w=[{id:"char1",name:"Hero",position:{x:25,y:50},sprite:null,size:50,visionRange:200,visiondistance:200,rotation:45,visionarc:90,team:"player"},{id:"char2",name:"Ally",position:{x:100,y:100},sprite:null,size:20,visionRange:150,visiondistance:150,rotation:180,visionarc:120,team:"player"},{id:"char3",name:"Enemy",position:{x:400,y:300},sprite:null,size:30,visionRange:100,visiondistance:100,rotation:270,visionarc:90,team:"enemy"}],j=(0,t.useRef)(null),N=(0,t.useRef)(null),k=(e,t)=>({x:e*d.current.zoom-d.current.x,y:t*d.current.zoom-d.current.y}),S=(e,t)=>({x:(e+d.current.x)/d.current.zoom,y:(t+d.current.y)/d.current.zoom}),A=S(h.x,h.y),C=(e,t)=>{if(!a)return!0;const n=w.filter(e=>"player"===e.team);for(const r of n){const n=e-r.position.x,s=t-r.position.y;if(n*n+s*s<=r.visiondistance*r.visiondistance){let e=Math.atan2(s,n)*(180/Math.PI)-r.rotation;for(;e>180;)e-=360;for(;e<-180;)e+=360;if(Math.abs(e)<=r.visionarc/2)return!0}}return!1};(0,t.useEffect)(()=>{},[x]);const E=(0,t.useRef)(null);function M(){u.current=!1}(0,t.useEffect)(()=>{const e=j.current,t=N.current,n=e.getContext("2d"),r=t.getContext("2d");let s;const a=()=>{Tr({layers:[{...Pr,ctx:n,canvas:e},{...zr,ctx:r,canvas:t}],state:{bgImage:d.current.bgImage,camera:d.current}}),s=requestAnimationFrame(a)};return a(),()=>cancelAnimationFrame(s)},[]),(0,t.useEffect)(()=>{const e=()=>{const e=j.current,t=N.current;e.width=e.clientWidth,e.height=e.clientHeight,t.width=t.clientWidth,t.height=t.clientHeight};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,t.useEffect)(()=>{function e(e){const t={x:e.clientX,y:e.clientY};e.clientX,h.x,e.clientY,h.y;if(p(t),!r)return;const s=window.innerWidth-e.clientX;n(Math.max(200,Math.min(s,800)))}function t(){s(!1)}return window.addEventListener("mousemove",e),window.addEventListener("mouseup",t),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[r]),(0,t.useEffect)(()=>{function e(e){"Space"===e.code&&(e.preventDefault(),c.current=!0)}function t(e){"Space"===e.code&&(c.current=!1,u.current=!1)}return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]);const I=e=>{const t=w.find(e=>e.id===l.charId);console.log(`Action "${e}" on character:`,null===t||void 0===t?void 0:t.name),o(null)};return(0,mt.jsxs)("div",{children:[(0,mt.jsxs)("div",{className:"w-full h-screen relative",onMouseDown:function(e){if(2===e.button)return e.preventDefault(),void(x&&o({x:e.clientX,y:e.clientY,charId:x}));if((1===e.button||0===e.button&&c.current)&&(e.preventDefault(),u.current=!0,h.current={x:e.clientX,y:e.clientY}),0===e.button&&!c.current){o(null);const t=j.current.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,s=S(n,r);let a=null;for(const e of w){if(!C(e.position.x,e.position.y))continue;if((s.x-e.position.x)**2+(s.y-e.position.y)**2<=(e.size/2)**2){a=e.id;break}}y(a)}},onMouseMove:function(e){if(!u.current)return;const t=e.clientX-h.x,n=e.clientY-h.y;d.current.x-=t,d.current.y-=n,p({x:e.clientX,y:e.clientY})},onMouseUp:M,onMouseLeave:M,onWheel:function(e){e.preventDefault(),o(null);const t=e.clientX,n=e.clientY,r=(t+d.current.x)/d.current.zoom,s=(n+d.current.y)/d.current.zoom;e.deltaY<0?d.current.zoom*=1.1:d.current.zoom/=1.1,d.current.zoom=Math.max(.25,Math.min(d.current.zoom,4)),d.current.x=r*d.current.zoom-t,d.current.y=s*d.current.zoom-n},onContextMenu:e=>e.preventDefault(),children:[(0,mt.jsx)("canvas",{ref:j,className:"absolute inset-0 bg-gray-900 w-full h-full"}),(0,mt.jsx)("canvas",{ref:N,className:"absolute inset-0 w-full h-full"}),l&&(0,mt.jsx)("div",{className:"absolute bg-gray-800 border border-gray-600 rounded shadow-lg z-50",style:{left:l.x,top:l.y},onMouseLeave:()=>o(null),onContextMenu:e=>e.preventDefault(),children:(0,mt.jsxs)("div",{className:"py-1",children:[(0,mt.jsxs)("button",{onClick:()=>I("move"),className:"w-full px-4 py-2 text-left text-white hover:bg-gray-700 flex items-center gap-2",children:[(0,mt.jsx)("span",{children:"\ud83d\udeb6"})," Move"]}),(0,mt.jsxs)("button",{onClick:()=>I("attack"),className:"w-full px-4 py-2 text-left text-white hover:bg-gray-700 flex items-center gap-2",children:[(0,mt.jsx)("span",{children:"\u2694\ufe0f"})," Attack"]}),(0,mt.jsxs)("button",{onClick:()=>I("defend"),className:"w-full px-4 py-2 text-left text-white hover:bg-gray-700 flex items-center gap-2",children:[(0,mt.jsx)("span",{children:"\ud83d\udee1\ufe0f"})," Defend"]}),(0,mt.jsxs)("button",{onClick:()=>I("skills"),className:"w-full px-4 py-2 text-left text-white hover:bg-gray-700 flex items-center gap-2",children:[(0,mt.jsx)("span",{children:"\u2728"})," Skills"]}),(0,mt.jsx)("div",{className:"border-t border-gray-600 my-1"}),(0,mt.jsxs)("button",{onClick:()=>I("info"),className:"w-full px-4 py-2 text-left text-white hover:bg-gray-700 flex items-center gap-2",children:[(0,mt.jsx)("span",{children:"\u2139\ufe0f"})," Info"]})]})}),x&&(()=>{const e=w.find(e=>e.id===x);if(!e)return null;const t=k(e.position.x,e.position.y).x<v.width/2;return(0,mt.jsxs)("div",{className:"absolute top-4 bg-gray-800 text-white px-4 py-2 rounded shadow-lg z-50 "+(t?"left-4":"right-4"),style:{maxWidth:"200px"},children:["Selected: ",e.name]})})()]}),(0,mt.jsxs)("div",{className:"grid min-h-screen bg-gray-800 absolute top-0 right-0",style:{gridTemplateColumns:`1fr 6px ${e}px`},children:[(0,mt.jsx)("div",{className:"bg-gray-700 cursor-col-resize hover:bg-gray-500 col-start-2",onMouseDown:()=>s(!0)}),(0,mt.jsxs)("div",{className:"bg-gray-800 p-4 overflow-y-auto",children:[(0,mt.jsx)("h2",{className:"text-white text-xl font-bold mb-4",children:"Side Panel"}),(0,mt.jsxs)("p",{className:"text-gray-300 mb-4",children:["Selected: ",x||"None"]}),(0,mt.jsxs)("div",{className:"space-y-4",children:[(0,mt.jsxs)("button",{onClick:()=>i(!a),className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded",children:[a?"Disable":"Enable"," Fog of War"]}),(0,mt.jsxs)("div",{className:"text-gray-300 text-sm",children:[(0,mt.jsx)("p",{className:"font-semibold mb-2",children:"Controls:"}),(0,mt.jsxs)("ul",{className:"space-y-1",children:[(0,mt.jsx)("li",{children:"\u2022 Left click to select"}),(0,mt.jsx)("li",{children:"\u2022 Right click for actions"}),(0,mt.jsx)("li",{children:"\u2022 Space + drag to pan"}),(0,mt.jsx)("li",{children:"\u2022 Scroll to zoom"}),(0,mt.jsx)("li",{children:"\u2022 Green = Player team"}),(0,mt.jsx)("li",{children:"\u2022 Red = Enemy team"})]})]}),(0,mt.jsxs)("div",{className:"text-gray-300 text-sm",children:[(0,mt.jsx)("p",{className:"font-semibold mb-2",children:"Fog of War:"}),(0,mt.jsx)("p",{children:"Only player characters reveal the map. Enemy units are hidden in fog."})]}),(0,mt.jsxs)("div",{className:"text-gray-300 text-sm",children:["X:",h.x,"Y:",h.y,(0,mt.jsx)("p",{children:"World Cords"}),"X:",A.x,"Y:",A.y]})]})]})]})]})},Rr=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Fr=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()},$r=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var Br={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Hr=(0,t.forwardRef)((e,n)=>{let{color:r="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:l="",children:o,iconNode:c,...d}=e;return(0,t.createElement)("svg",{ref:n,...Br,width:s,height:s,stroke:r,strokeWidth:i?24*Number(a)/Number(s):a,className:Fr("lucide",l),...!o&&!$r(d)&&{"aria-hidden":"true"},...d},[...c.map(e=>{let[n,r]=e;return(0,t.createElement)(n,r)}),...Array.isArray(o)?o:[o]])}),Ur=(e,n)=>{const r=(0,t.forwardRef)((r,s)=>{let{className:a,...i}=r;return(0,t.createElement)(Hr,{ref:s,iconNode:n,className:Fr(`lucide-${l=Rr(e),l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...i});var l});return r.displayName=Rr(e),r},qr=Ur("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Wr=(0,t.createContext)();function Kr(e){let{children:n,defaultTab:r=0,onTabChange:s,className:a=""}=e;const[i,l]=(0,t.useState)(r);return(0,mt.jsx)(Wr.Provider,{value:{activeTab:i,setActiveTab:e=>{l(e),s&&s(e)}},children:(0,mt.jsx)("div",{className:`w-full min-h-0 ${a}`,children:n})})}Kr.Nav=function(e){let{children:t,className:n=""}=e;return(0,mt.jsx)("div",{className:`flex border-b border-website-200 bg-website-default-900 ${n}`,children:t})},Kr.Tab=function(e){let{children:n,label:r="",index:s,disabled:a=!1,completed:i=!1,className:l=""}=e;const{activeTab:o,setActiveTab:c}=(0,t.useContext)(Wr),d=o===s,u="string"===typeof r&&r.trim().length>0,h=d?"text-website-highlights-100 border-website-highlights-500 bg-gradient-to-t from-website-highlights-500/20 to-transparent":"text-website-highlights-100 border-transparent hover:text-website-specials-200 hover:border-website-highlights-300",p=a?"opacity-50 cursor-not-allowed":"cursor-pointer",m=i&&!d?"text-green-600":"";return(0,mt.jsxs)("button",{className:`flex items-center gap-2 px-3 py-2 font-medium text-sm transition-colors duration-200 border-b-2 whitespace-nowrap ${h} ${p} ${m} ${l}`,onClick:()=>!a&&c(s),disabled:a,children:[n,u&&(0,mt.jsx)("span",{className:"text-[11px] tracking-wide uppercase",children:r}),i&&!d&&(0,mt.jsx)(qr,{className:"w-4 h-4 text-green-500"})]})},Kr.Prev=function(e){let{min:n=0,className:r="",disabled:s,children:a}=e;const{activeTab:i,setActiveTab:l}=(0,t.useContext)(Wr),o=null!==s&&void 0!==s?s:i<=n;return(0,mt.jsx)("button",{type:"button","aria-label":"Previous tab",disabled:o,onClick:()=>!o&&l(Math.max(n,i-1)),className:`p-2 rounded-full border border-website-specials-500 bg-website-default-800/80 text-website-default-100 hover:bg-website-default-700 disabled:opacity-50 disabled:cursor-not-allowed ${r}`,children:null!==a&&void 0!==a?a:"<"})},Kr.Next=function(e){let{max:n,className:r="",disabled:s,children:a}=e;const{activeTab:i,setActiveTab:l}=(0,t.useContext)(Wr),o=null!==s&&void 0!==s?s:"number"!==typeof n||i>=n;return(0,mt.jsx)("button",{type:"button","aria-label":"Next tab",disabled:o,onClick:()=>!o&&l(Math.min(n,i+1)),className:`p-2 rounded-full border border-website-specials-500 bg-website-default-800/80 text-website-default-100 hover:bg-website-default-700 disabled:opacity-50 disabled:cursor-not-allowed ${r}`,children:null!==a&&void 0!==a?a:">"})},Kr.Panels=function(e){let{children:t,className:n=""}=e;return(0,mt.jsx)("div",{className:`bg-website-default-900 h-full min-h-0 ${n}`,children:t})},Kr.Panel=function(e){let{children:n,index:r,className:s=""}=e;const{activeTab:a}=(0,t.useContext)(Wr);return a!==r?null:(0,mt.jsx)("div",{className:`p-6 h-full min-h-0 ${s}`,children:n})};const Yr=Ur("backpack",[["path",{d:"M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z",key:"1ol0lm"}],["path",{d:"M8 10h8",key:"c7uz4u"}],["path",{d:"M8 18h8",key:"1no2b1"}],["path",{d:"M8 22v-6a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6",key:"1fr6do"}],["path",{d:"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2",key:"donm21"}]]),Xr=Ur("scroll-text",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]),Vr=Ur("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),Qr=Ur("feather",[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]]),Gr=Ur("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),Jr=Ur("notebook-pen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]]),Zr=Ur("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),es=Ur("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),ts=Ur("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);function ns(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(r=>{if(!e)return void r({success:!1,message:"Socket is not connected"});let s=!1;const a=setTimeout(()=>{s||(s=!0,r({success:!1,message:`No response for event "${t}". Server may be outdated or unavailable.`}))},5e3);e.emit(t,n,e=>{s||(s=!0,clearTimeout(a),r(e||{success:!1,message:"No response from server"}))})})}function rs(e){const t=new Date(e||0).getTime();return Number.isFinite(t)?t:0}function ss(e){const t=rs(e);return t?new Date(t).toLocaleString():"Unknown"}function as(e){return Array.isArray(e)?[...e].sort((e,t)=>{const n=rs((null===e||void 0===e?void 0:e.updatedAt)||(null===e||void 0===e?void 0:e.createdAt));return rs((null===t||void 0===t?void 0:t.updatedAt)||(null===t||void 0===t?void 0:t.createdAt))-n}):[]}function is(e){let{save:t,activeSaveID:n,loading:r,onLoad:s}=e;return(0,mt.jsxs)("div",{className:"p-2 rounded border border-gray-700 bg-gray-800/90 space-y-1",children:[(0,mt.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,mt.jsxs)("div",{className:"min-w-0",children:[(0,mt.jsx)("p",{className:"text-sm font-semibold truncate",children:(null===t||void 0===t?void 0:t.name)||"Untitled Save"}),(0,mt.jsx)("p",{className:"text-[11px] text-gray-400",children:ss((null===t||void 0===t?void 0:t.updatedAt)||(null===t||void 0===t?void 0:t.createdAt))})]}),(0,mt.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[String((null===t||void 0===t?void 0:t._id)||"")===String(n||"")&&(0,mt.jsx)("span",{className:"text-[10px] px-2 py-1 rounded bg-emerald-900/70 text-emerald-200 border border-emerald-600",children:"Active"}),(0,mt.jsx)("button",{type:"button",onClick:()=>s(null===t||void 0===t?void 0:t._id),disabled:r,className:"text-xs px-2 py-1 rounded bg-blue-700 hover:bg-blue-600 disabled:bg-gray-700",children:r?"Loading...":"Load"})]})]}),(null===t||void 0===t?void 0:t.description)&&(0,mt.jsx)("p",{className:"text-xs text-gray-300 break-words",children:t.description})]})}const ls=function(){const e=(0,t.useContext)(Sr),{gameID:n}=se(),r=localStorage.getItem("player_ID"),{isDM:s=!1,characters:a=[],lastMouse:i={x:0,y:0},worldMouseCoords:l={x:0,y:0},camera:o,loadGameSnapshot:c=()=>{},replaceFloorTypes:d=()=>{}}=Zt()||{},[u,h]=(0,t.useState)([]),[p,m]=(0,t.useState)([]),[f,b]=(0,t.useState)(""),[g,v]=(0,t.useState)(!1),[x,y]=(0,t.useState)(""),[w,j]=(0,t.useState)(""),[N,k]=(0,t.useState)(""),[S,A]=(0,t.useState)(5),C=(0,t.useMemo)(()=>{var e,t,n;return{x:Math.round((null===o||void 0===o||null===(e=o.current)||void 0===e?void 0:e.x)||0),y:Math.round((null===o||void 0===o||null===(t=o.current)||void 0===t?void 0:t.y)||0),zoom:Number((null===o||void 0===o||null===(n=o.current)||void 0===n?void 0:n.zoom)||1).toFixed(2)}},[o]),E=(0,t.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=as(null===e||void 0===e?void 0:e.gameSaves),n=Array.isArray(null===e||void 0===e?void 0:e.manualSaves)?as(e.manualSaves):t.filter(e=>!(null!==e&&void 0!==e&&e.isAutoSave)),r=Number(null===e||void 0===e?void 0:e.autoSaveLimit)||5,s=Array.isArray(null===e||void 0===e?void 0:e.autoSaves)?as(e.autoSaves):as(t.filter(e=>null===e||void 0===e?void 0:e.isAutoSave)).slice(0,r);h(n),m(s.slice(0,r)),A(r),b(String((null===e||void 0===e?void 0:e.activeGameSave)||""))},[]),M=(0,t.useCallback)(async()=>{if(!e||!r||!n)return;v(!0),k("");const t=await ns(e,"campaign_listGameSaves",{playerID:r,campaignID:n});v(!1),null!==t&&void 0!==t&&t.success?(E(t),j(`Loaded saves at ${(new Date).toLocaleTimeString()}`)):k((null===t||void 0===t?void 0:t.message)||"Failed to load campaign saves")},[e,r,n,E]),I=(0,t.useCallback)(async t=>{var s,a;const i=String(t||"").trim();if(!i||!e||!r||!n)return;y(i),k("");const l=await ns(e,"campaign_loadGame",{playerID:r,campaignID:n,gameSaveID:i});if(y(""),null===l||void 0===l||!l.success)return void k((null===l||void 0===l?void 0:l.message)||"Failed to load save");Array.isArray(null===l||void 0===l?void 0:l.floorTypes)&&d(l.floorTypes);const o=null!==l&&void 0!==l&&null!==(s=l.engineState)&&void 0!==s&&s.snapshot&&"object"===typeof l.engineState.snapshot?l.engineState.snapshot:null===l||void 0===l?void 0:l.snapshot;o&&"object"===typeof o&&c(o),b(String((null===l||void 0===l?void 0:l.activeGameSave)||i)),j(`Loaded save: ${(null===l||void 0===l||null===(a=l.gameSave)||void 0===a?void 0:a.name)||i}`),await M()},[e,r,n,c,d,M]);return(0,t.useEffect)(()=>{s&&M()},[s,M]),s?(0,mt.jsxs)("div",{className:"h-full min-h-0 overflow-y-auto scrollbar-transparent p-4 text-white space-y-4",children:[(0,mt.jsx)("h3",{className:"text-lg font-bold",children:"Admin Tools"}),(0,mt.jsxs)("div",{className:"text-sm space-y-1 rounded border border-gray-700 bg-gray-900/70 p-3",children:[(0,mt.jsx)("p",{className:"font-semibold",children:"Mouse"}),(0,mt.jsxs)("p",{children:["Screen: X:",Math.round((null===i||void 0===i?void 0:i.x)||0)," Y:",Math.round((null===i||void 0===i?void 0:i.y)||0)]}),(0,mt.jsxs)("p",{children:["World: X:",Math.round((null===l||void 0===l?void 0:l.x)||0)," Y:",Math.round((null===l||void 0===l?void 0:l.y)||0)]})]}),(0,mt.jsxs)("div",{className:"text-sm space-y-1 rounded border border-gray-700 bg-gray-900/70 p-3",children:[(0,mt.jsx)("p",{className:"font-semibold",children:"Camera"}),(0,mt.jsxs)("p",{children:["X: ",C.x]}),(0,mt.jsxs)("p",{children:["Y: ",C.y]}),(0,mt.jsxs)("p",{children:["Zoom: ",C.zoom]})]}),(0,mt.jsxs)("div",{className:"text-sm space-y-2 rounded border border-gray-700 bg-gray-900/70 p-3",children:[(0,mt.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,mt.jsx)("p",{className:"font-semibold",children:"Saves"}),(0,mt.jsx)("button",{type:"button",onClick:M,disabled:g,className:"text-xs px-2 py-1 rounded bg-slate-700 hover:bg-slate-600 disabled:bg-gray-700",children:g?"Refreshing...":"Refresh"})]}),N&&(0,mt.jsx)("div",{className:"text-xs text-red-200 bg-red-900/40 rounded p-2",children:N}),w&&(0,mt.jsx)("div",{className:"text-xs text-emerald-200 bg-emerald-900/30 rounded p-2",children:w}),(0,mt.jsxs)("div",{className:"space-y-1",children:[(0,mt.jsxs)("p",{className:"text-xs uppercase tracking-wide text-gray-400",children:["Manual Saves (",u.length,")"]}),(0,mt.jsx)("div",{className:"max-h-48 overflow-y-auto scrollbar-transparent pr-1 space-y-2",children:u.length>0?u.map(e=>(0,mt.jsx)(is,{save:e,activeSaveID:f,loading:x===String(e._id||""),onLoad:I},e._id)):(0,mt.jsx)("p",{className:"text-xs text-gray-400",children:"No manual saves yet."})})]}),(0,mt.jsxs)("div",{className:"space-y-1",children:[(0,mt.jsxs)("p",{className:"text-xs uppercase tracking-wide text-gray-400",children:["Auto Saves (Last ",S,")"]}),(0,mt.jsx)("div",{className:"max-h-40 overflow-y-auto scrollbar-transparent pr-1 space-y-2",children:p.length>0?p.map(e=>(0,mt.jsx)(is,{save:e,activeSaveID:f,loading:x===String(e._id||""),onLoad:I},e._id)):(0,mt.jsx)("p",{className:"text-xs text-gray-400",children:"No autosaves yet."})})]})]}),(0,mt.jsxs)("div",{className:"text-sm space-y-2 rounded border border-gray-700 bg-gray-900/70 p-3",children:[(0,mt.jsxs)("p",{className:"font-semibold",children:["Characters (",a.length,")"]}),a.length>0?(0,mt.jsx)("div",{className:"max-h-56 overflow-y-auto scrollbar-transparent pr-1 space-y-2",children:a.map(e=>{var t,n;return(0,mt.jsxs)("div",{className:"p-2 bg-gray-700/70 rounded",children:[(0,mt.jsxs)("p",{className:"font-medium",children:[e.name," (",e.team,")"]}),(0,mt.jsxs)("p",{className:"text-xs text-gray-300",children:["ID: ",e.id," | Pos: (",Math.round((null===e||void 0===e||null===(t=e.position)||void 0===t?void 0:t.x)||0),", ",Math.round((null===e||void 0===e||null===(n=e.position)||void 0===n?void 0:n.y)||0),")"]})]},e.id)})}):(0,mt.jsx)("p",{className:"text-gray-400",children:"No characters"})]})]}):(0,mt.jsx)("div",{className:"h-full min-h-0 flex items-center justify-center px-4 text-center text-gray-300",children:(0,mt.jsx)("p",{children:"Admin tools are available to the DM only."})})},os={floor:500,wall:1200,obstacle:700},cs={floor:0,wall:150,obstacle:80},ds=(e,t,n)=>Math.max(t,Math.min(n,e)),us=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Number(e);return Number.isFinite(n)?n:t},hs=92,ps=12,ms=(e,t)=>{const n=ds(us(e,0),-1,1),r=ds(us(t,0),-1,1),s=Math.hypot(n,r);return 0===s||s<=1?{x:n,y:r}:{x:n/s,y:r/s}};const fs=function(){var e,n;const r=(0,t.useContext)(Sr),{gameID:s}=se(),a=localStorage.getItem("player_ID"),{isDM:i,worldMouseCoords:l,mapObjects:o,updateMapObject:c,deleteMapObject:d,replaceAllMapObjects:u,currentMapId:h,backgroundKey:p,setBackgroundKey:m,backgroundOptions:f,mapImageOptions:b,floorTypes:g,lighting:v,replaceLighting:x,addLightSource:y,updateLightSource:w,removeLightSource:j,armLightPlacement:N,mapObjectPlacement:k,armMapObjectPlacement:S,clearMapObjectPlacement:A,placePendingMapObjectAt:C,currentZLevel:E,stepZLevelUp:M,stepZLevelDown:I,characters:_}=Zt(),[L,T]=(0,t.useState)(null),[P,D]=(0,t.useState)({type:"circle",terrainType:"obstacle",floorTypeId:"woodenCrate",zLevel:0,color:"#3B82F6",z:0,size:30,width:50,height:40,mapAssetKey:"",elevationHeight:80,maxHP:700,hp:700,hitboxScale:1}),[z,O]=(0,t.useState)(""),[R,F]=(0,t.useState)(""),[$,B]=(0,t.useState)(!1),[H,U]=(0,t.useState)(""),[q,W]=(0,t.useState)(""),[K,Y]=(0,t.useState)(""),[X,V]=(0,t.useState)(!1),Q=(0,t.useRef)(null),G=(null===k||void 0===k?void 0:k.type)||"",J=(0,t.useMemo)(()=>{var e;return k?`${k.type} / ${k.terrainType||"obstacle"} / L${null!==(e=k.zLevel)&&void 0!==e?e:0} @ (${Math.round((null===l||void 0===l?void 0:l.x)||0)}, ${Math.round((null===l||void 0===l?void 0:l.y)||0)})`:""},[k,l]),Z=(0,t.useMemo)(()=>{const e={floor:[],wall:[],obstacle:[]};return(Array.isArray(g)?g:[]).forEach(t=>{const n=String((null===t||void 0===t?void 0:t.terrainType)||"obstacle").toLowerCase();e[n]&&e[n].push(t)}),e},[g]),ee=(0,t.useMemo)(()=>{const e=String(P.terrainType||"obstacle").toLowerCase(),t=Z[e]||[];return t.length>0?t:Array.isArray(g)?g:[]},[P.terrainType,Z,g]),te=(0,t.useMemo)(()=>(Array.isArray(b)?b:[]).map(e=>String(e||"").trim().toLowerCase()).filter(Boolean),[b]);(0,t.useEffect)(()=>{D(e=>({...e,zLevel:E}))},[E]),(0,t.useEffect)(()=>{D(e=>{const t=String(e.terrainType||"obstacle").toLowerCase(),n=Z[t]||[];if(!n.length)return e;return n.some(t=>t.id===e.floorTypeId)?e:{...e,floorTypeId:n[0].id}})},[Z,P.terrainType]);const ne=(0,t.useMemo)(()=>{const e=v&&"object"===typeof v?v:{};return{enabled:!1!==e.enabled,ambient:ds(us(e.ambient,.24),0,.9),shadowEnabled:!1!==e.shadowEnabled,shadowStrength:ds(us(e.shadowStrength,.62),0,1),shadowSoftness:ds(us(e.shadowSoftness,.55),0,1),shadowLength:ds(us(e.shadowLength,.9),0,2),shadowBlend:ds(us(e.shadowBlend,.68),0,1),sources:Array.isArray(e.sources)?e.sources:[]}},[v]),re=ne.sources;(0,t.useEffect)(()=>{if(!re.length)return void Y("");var e;re.some(e=>e.id===K)||Y(String((null===(e=re[0])||void 0===e?void 0:e.id)||""))},[re,K]);const ae=(0,t.useMemo)(()=>re.find(e=>String((null===e||void 0===e?void 0:e.id)||"")===String(K||""))||null,[re,K]),ie=String((null===ae||void 0===ae?void 0:ae.id)||""),le=String((null===ae||void 0===ae?void 0:ae.type)||"").toLowerCase(),oe=(0,t.useMemo)(()=>ms(us(null===ae||void 0===ae?void 0:ae.x,0),us(null===ae||void 0===ae?void 0:ae.y,0)),[null===ae||void 0===ae?void 0:ae.x,null===ae||void 0===ae?void 0:ae.y]),ce=(0,t.useMemo)(()=>Math.hypot(oe.x,oe.y),[oe]),de=(0,t.useMemo)(()=>34,[]),ue=(0,t.useMemo)(()=>({x:oe.x*de,y:oe.y*de}),[oe,de]),he=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x({...ne,...e,sources:ne.sources})},pe=(0,t.useCallback)(function(){ie&&w(ie,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})},[ie,w]),me=(0,t.useCallback)((e,t)=>{if("directional"!==le)return;if(!Q.current)return;const n=Q.current.getBoundingClientRect(),r=n.left+n.width/2,s=n.top+n.height/2,a=Math.max(1,n.width/2-ps);let i=e-r,l=t-s;const o=Math.hypot(i,l);if(o<=.12*a)return void pe({x:0,y:0});if(o>a&&o>0){const e=a/o;i*=e,l*=e}const c=ms(i/a,l/a);pe(c)},[pe,le]),fe=(0,t.useCallback)(e=>{0===e.button&&(e.preventDefault(),e.stopPropagation(),V(!0),me(e.clientX,e.clientY))},[me]);(0,t.useEffect)(()=>{if(!X)return;const e=e=>{me(e.clientX,e.clientY)},t=()=>V(!1);return window.addEventListener("mousemove",e),window.addEventListener("mouseup",t),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[X,me]),(0,t.useEffect)(()=>{"directional"!==le&&V(!1)},[le]);const be=async(e,t)=>{var n;if(!r||!a||!s)return void W("Missing game session context.");const i=await ns(r,"campaign_gameDamageObject",{playerID:a,campaignID:s,objectID:e,amount:t});null!==i&&void 0!==i&&i.success?(null!==i&&void 0!==i&&null!==(n=i.engineState)&&void 0!==n&&n.snapshot&&u(i.engineState.snapshot.mapObjects||[]),U(`Object #${e} HP updated`),W("")):W((null===i||void 0===i?void 0:i.message)||"Failed to update object HP")};if(!i)return(0,mt.jsx)("div",{className:"h-full flex items-center justify-center bg-gray-900 text-white p-6 text-center",children:(0,mt.jsxs)("div",{className:"space-y-3",children:[(0,mt.jsx)("h2",{className:"text-xl font-bold",children:"Map Editor Locked"}),(0,mt.jsx)("p",{className:"text-sm text-gray-400",children:"Only the DM can edit world objects, move tokens, and change backgrounds."})]})});const ge=[...o].sort((e,t)=>{const n=(Number(null===e||void 0===e?void 0:e.zLevel)||0)-(Number(null===t||void 0===t?void 0:t.zLevel)||0);return 0!==n?n:(Number(null===e||void 0===e?void 0:e.z)||0)-(Number(null===t||void 0===t?void 0:t.z)||0)});return(0,mt.jsx)("div",{className:"h-full min-h-0 bg-gray-900 text-white p-4",children:(0,mt.jsx)("div",{className:"h-full min-h-0 rounded-xl border border-gray-700/80 bg-gray-900/80 p-3",children:(0,mt.jsx)("div",{className:"h-full min-h-0 overflow-y-auto scrollbar-transparent pr-1",children:(0,mt.jsxs)("div",{className:"space-y-4",children:[(0,mt.jsx)("h2",{className:"text-xl font-bold",children:"Map Editor"}),(0,mt.jsxs)("div",{className:"text-sm bg-gray-800 p-3 rounded space-y-1",children:[(0,mt.jsxs)("p",{children:["Map ID: ",h]}),(0,mt.jsxs)("p",{children:["Active Z Level: ",E]}),(0,mt.jsxs)("p",{children:["Cursor: (",Math.round((null===l||void 0===l?void 0:l.x)||0),", ",Math.round((null===l||void 0===l?void 0:l.y)||0),")"]}),(0,mt.jsx)("p",{className:"text-xs text-gray-400",children:"DM placement: click for quick drop, or click-drag to define shape size."}),k&&(0,mt.jsxs)("p",{className:"text-emerald-300",children:["Placement Active: ",J]}),(0,mt.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,mt.jsx)("button",{type:"button",onClick:I,className:"flex-1 bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded text-xs",children:"Level Down"}),(0,mt.jsx)("button",{type:"button",onClick:M,className:"flex-1 bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded text-xs",children:"Level Up"})]})]}),(0,mt.jsxs)("div",{className:"bg-gray-800 p-3 rounded space-y-3",children:[(0,mt.jsx)("p",{className:"font-semibold text-sm",children:"Background"}),(0,mt.jsx)("select",{value:p,onChange:e=>m(e.target.value),className:"w-full bg-gray-700 px-3 py-2 rounded text-sm",children:(f||[]).map(e=>(0,mt.jsx)("option",{value:e,children:e},e))})]}),(0,mt.jsxs)("div",{className:"bg-gray-800 p-3 rounded space-y-3",children:[(0,mt.jsx)("p",{className:"font-semibold text-sm",children:"Map Layer Image"}),(0,mt.jsxs)("select",{value:P.mapAssetKey||"",onChange:e=>D(t=>({...t,mapAssetKey:String(e.target.value||"").trim().toLowerCase()})),className:"w-full bg-gray-700 px-3 py-2 rounded text-sm",children:[(0,mt.jsx)("option",{value:"",children:"No map image"}),te.map(e=>(0,mt.jsx)("option",{value:e,children:e},e))]}),(0,mt.jsx)("p",{className:"text-xs text-gray-400",children:"Place world-anchored map stamps on top of background. They move with camera."}),(0,mt.jsx)("button",{type:"button",onClick:()=>{var e;const t=String(P.mapAssetKey||"").trim().toLowerCase();if(!t)return void W("Select a map image first.");const n=Z.floor||[],r=(null===(e=n[0])||void 0===e?void 0:e.id)||"stoneFloor",s=n.some(e=>e.id===P.floorTypeId)?P.floorTypeId:r,a={...P,type:"rect",terrainType:"floor",floorTypeId:s,mapAssetKey:t,color:"#ffffff",zLevel:E,elevationHeight:Math.max(0,Number(P.elevationHeight)||0),width:Math.max(80,Number(P.width)||600),height:Math.max(80,Number(P.height)||400)};D(a),W(""),S(a),U("Map placement armed. Click to place or drag to size.")},disabled:!P.mapAssetKey,className:"w-full bg-cyan-700 hover:bg-cyan-600 disabled:bg-gray-700 px-3 py-2 rounded text-sm",children:"Arm Map Placement"}),0===te.length&&(0,mt.jsx)("p",{className:"text-xs text-amber-300",children:"Add images to `client/src/images/game/maps` to populate this list."})]}),(0,mt.jsxs)("div",{className:"bg-gray-800 p-3 rounded space-y-3",children:[(0,mt.jsx)("p",{className:"font-semibold text-sm",children:"Lighting"}),(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,mt.jsxs)("label",{className:"flex items-center gap-2",children:[(0,mt.jsx)("input",{type:"checkbox",checked:ne.enabled,onChange:e=>he({enabled:e.target.checked})}),"Lighting Enabled"]}),(0,mt.jsxs)("label",{className:"flex items-center gap-2",children:[(0,mt.jsx)("input",{type:"checkbox",checked:ne.shadowEnabled,onChange:e=>he({shadowEnabled:e.target.checked})}),"Shadows Enabled"]})]}),(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-center",children:[(0,mt.jsx)("label",{className:"text-xs",children:"Ambient"}),(0,mt.jsx)("input",{type:"range",min:"0",max:"0.9",step:"0.01",value:ne.ambient,onChange:e=>he({ambient:ds(Number(e.target.value),0,.9)})}),(0,mt.jsx)("label",{className:"text-xs",children:"Shadow Strength"}),(0,mt.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:ne.shadowStrength,onChange:e=>he({shadowStrength:ds(Number(e.target.value),0,1)})}),(0,mt.jsx)("label",{className:"text-xs",children:"Shadow Softness"}),(0,mt.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:ne.shadowSoftness,onChange:e=>he({shadowSoftness:ds(Number(e.target.value),0,1)})}),(0,mt.jsx)("label",{className:"text-xs",children:"Shadow Length"}),(0,mt.jsx)("input",{type:"range",min:"0",max:"2",step:"0.01",value:ne.shadowLength,onChange:e=>he({shadowLength:ds(Number(e.target.value),0,2)})}),(0,mt.jsx)("label",{className:"text-xs",children:"Shadow Blend"}),(0,mt.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:ne.shadowBlend,onChange:e=>he({shadowBlend:ds(Number(e.target.value),0,1)})})]}),(0,mt.jsxs)("div",{className:"flex gap-2",children:[(0,mt.jsx)("button",{type:"button",onClick:()=>{const e=re.filter(e=>"directional"===String((null===e||void 0===e?void 0:e.type)||"")).length+1;y({id:`dir_${Date.now()}`,name:`Directional ${e}`,type:"directional",enabled:!0,x:0,y:0,intensity:.8,blend:.7,color:"#ffffff"}),U("Directional light source added."),W("")},className:"flex-1 bg-amber-700 hover:bg-amber-600 px-2 py-1 rounded text-xs",children:"Add Directional"}),(0,mt.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{name:"White",color:"#ffffff",intensity:.8,range:420},{name:"Fire",color:"#ff8800",intensity:1,range:350},{name:"Blue",color:"#4488ff",intensity:.9,range:400},{name:"Green",color:"#44ff88",intensity:1.1,range:450}].map(e=>(0,mt.jsxs)("button",{type:"button",onClick:()=>N(e),className:"px-2 py-1 rounded text-xs bg-cyan-700 hover:bg-cyan-600",children:[e.name," Light"]},e.name))})]}),(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-center",children:[(0,mt.jsx)("label",{className:"text-xs",children:"Selected Light"}),(0,mt.jsx)("select",{value:K,onChange:e=>Y(e.target.value),className:"w-full bg-gray-700 px-2 py-1 rounded text-xs",children:0===re.length?(0,mt.jsx)("option",{value:"",children:"No lights"}):re.map(e=>(0,mt.jsxs)("option",{value:e.id,children:[e.name||e.id," (",e.type,")"]},e.id))})]}),ae&&(0,mt.jsxs)("div",{className:"rounded border border-gray-700 bg-gray-900/50 p-2 space-y-2",children:[(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-center",children:[(0,mt.jsx)("label",{className:"text-xs",children:"Name"}),(0,mt.jsx)("input",{type:"text",value:ae.name||"",onChange:e=>pe({name:e.target.value}),className:"w-full bg-gray-700 px-2 py-1 rounded text-xs"}),(0,mt.jsx)("label",{className:"text-xs",children:"Type"}),(0,mt.jsxs)("select",{value:String(ae.type||"directional"),onChange:e=>{const t=e.target.value;pe("directional"===t?{type:"directional",x:0,y:0}:{type:"point",worldX:Math.round(us(null===l||void 0===l?void 0:l.x,0)),worldY:Math.round(us(null===l||void 0===l?void 0:l.y,0)),range:420})},className:"w-full bg-gray-700 px-2 py-1 rounded text-xs",children:[(0,mt.jsx)("option",{value:"directional",children:"directional"}),(0,mt.jsx)("option",{value:"point",children:"point"})]}),(0,mt.jsx)("label",{className:"text-xs",children:"Enabled"}),(0,mt.jsx)("input",{type:"checkbox",checked:!1!==ae.enabled,onChange:e=>pe({enabled:e.target.checked})})]}),(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-center",children:[(0,mt.jsx)("label",{className:"text-xs",children:"Intensity"}),(0,mt.jsx)("input",{type:"range",min:"0",max:"2",step:"0.01",value:ds(us(ae.intensity,.8),0,2),onChange:e=>pe({intensity:ds(Number(e.target.value),0,2)})}),(0,mt.jsx)("label",{className:"text-xs",children:"Blend"}),(0,mt.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:ds(us(ae.blend,.7),0,1),onChange:e=>pe({blend:ds(Number(e.target.value),0,1)})}),(0,mt.jsx)("label",{className:"text-xs",children:"Color"}),(0,mt.jsx)("input",{type:"color",value:String(ae.color||"#ffffff"),onChange:e=>pe({color:e.target.value}),className:"w-full h-8 rounded cursor-pointer"})]}),"directional"===le?(0,mt.jsxs)("div",{className:"space-y-2",children:[(0,mt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,mt.jsxs)("div",{ref:Q,"aria-label":"Directional light wheel",tabIndex:0,onMouseDown:fe,onKeyDown:e=>{const t=.08;let n=oe.x,r=oe.y;"ArrowLeft"===e.key&&(n-=t),"ArrowRight"===e.key&&(n+=t),"ArrowUp"===e.key&&(r-=t),"ArrowDown"===e.key&&(r+=t),"ArrowLeft"!==e.key&&"ArrowRight"!==e.key&&"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),pe(ms(n,r)))},className:"relative rounded-full border border-amber-200/60 bg-gray-950/85 "+(X?"cursor-grabbing":"cursor-grab"),style:{width:hs,height:hs},children:[(0,mt.jsx)("div",{className:"absolute rounded-full border border-gray-600/80",style:{left:ps,top:ps,width:68,height:68}}),(0,mt.jsx)("div",{className:"absolute rounded-full border border-amber-100 bg-amber-300 shadow",style:{width:16,height:16,left:46+ue.x-8,top:46+ue.y-8}})]}),(0,mt.jsxs)("div",{className:"text-[11px] text-gray-300 leading-5",children:[(0,mt.jsxs)("p",{children:["X: ",oe.x.toFixed(2)]}),(0,mt.jsxs)("p",{children:["Y: ",oe.y.toFixed(2)]}),(0,mt.jsxs)("p",{children:["Tilt: ",ce.toFixed(2)]})]})]}),(0,mt.jsx)("p",{className:"text-[10px] text-gray-400",children:"Center is overhead sun. Drag the wheel or use arrow keys."}),(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-center",children:[(0,mt.jsx)("label",{className:"text-xs",children:"Direction X"}),(0,mt.jsx)("input",{type:"range",min:"-1",max:"1",step:"0.01",value:oe.x,onChange:e=>pe(((e,t)=>{const n=ds(us(e,0),-1,1),r=ds(us(t,0),-1,1),s=Math.sqrt(Math.max(0,1-n*n));return{x:n,y:ds(r,-s,s)}})(Number(e.target.value),oe.y))}),(0,mt.jsx)("label",{className:"text-xs",children:"Direction Y"}),(0,mt.jsx)("input",{type:"range",min:"-1",max:"1",step:"0.01",value:oe.y,onChange:e=>pe(((e,t)=>{const n=ds(us(e,0),-1,1),r=ds(us(t,0),-1,1),s=Math.sqrt(Math.max(0,1-n*n));return{x:ds(r,-s,s),y:n}})(Number(e.target.value),oe.x))}),(0,mt.jsx)("button",{type:"button",onClick:()=>pe({x:0,y:0}),className:"col-span-2 bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded text-xs",children:"Set Overhead (0, 0)"})]})]}):(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-center",children:[(0,mt.jsx)("label",{className:"text-xs",children:"World X"}),(0,mt.jsx)("input",{type:"number",value:Math.round(us(ae.worldX,0)),onChange:e=>pe({worldX:Number(e.target.value)}),className:"w-full bg-gray-700 px-2 py-1 rounded text-xs"}),(0,mt.jsx)("label",{className:"text-xs",children:"World Y"}),(0,mt.jsx)("input",{type:"number",value:Math.round(us(ae.worldY,0)),onChange:e=>pe({worldY:Number(e.target.value)}),className:"w-full bg-gray-700 px-2 py-1 rounded text-xs"}),(0,mt.jsx)("label",{className:"text-xs",children:"Range"}),(0,mt.jsx)("input",{type:"range",min:"10",max:"5000",step:"10",value:ds(us(ae.range,420),10,5e3),onChange:e=>pe({range:ds(Number(e.target.value),10,5e3)})}),(0,mt.jsx)("button",{type:"button",onClick:()=>pe({worldX:Math.round(us(null===l||void 0===l?void 0:l.x,0)),worldY:Math.round(us(null===l||void 0===l?void 0:l.y,0))}),className:"col-span-2 bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded text-xs",children:"Move Point Light To Cursor"})]}),(0,mt.jsx)("button",{type:"button",onClick:()=>{null!==ae&&void 0!==ae&&ae.id&&(j(ae.id),U(`Removed light source: ${ae.name||ae.id}`),W(""))},className:"w-full bg-red-700 hover:bg-red-600 px-2 py-1 rounded text-xs",children:"Remove Selected Light"})]})]}),(0,mt.jsxs)("div",{className:"bg-gray-800 p-3 rounded space-y-3",children:[(0,mt.jsx)("p",{className:"font-semibold text-sm",children:"Create Object"}),(0,mt.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["circle","rect","triangle"].map(e=>(0,mt.jsx)("button",{type:"button",onClick:()=>D(t=>({...t,type:e})),className:"px-2 py-2 rounded text-sm "+(P.type===e?"bg-blue-600":"bg-gray-700 hover:bg-gray-600"),children:e},e))}),(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"Terrain Type"}),(0,mt.jsx)("div",{className:"grid grid-cols-3 gap-2 mt-1",children:["floor","wall","obstacle"].map(e=>(0,mt.jsx)("button",{type:"button",onClick:()=>D(t=>{var n,r,s;const a=os[e]||os.obstacle;return{...t,terrainType:e,elevationHeight:null!==(n=cs[e])&&void 0!==n?n:cs.obstacle,maxHP:null!==(r=t.maxHP)&&void 0!==r?r:a,hp:null!==(s=t.hp)&&void 0!==s?s:a}}),className:"px-2 py-2 rounded text-xs "+(P.terrainType===e?"bg-purple-600":"bg-gray-700 hover:bg-gray-600"),children:e},e))})]}),(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-center",children:[(0,mt.jsx)("label",{className:"text-xs",children:"Floor Type"}),(0,mt.jsx)("select",{value:P.floorTypeId,onChange:e=>D(t=>({...t,floorTypeId:e.target.value})),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm",children:ee.map(e=>(0,mt.jsxs)("option",{value:e.id,children:[e.name,"effect"===e.floorVisualType?" (Effect)":""]},e.id))})]}),(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-center",children:[(0,mt.jsx)("label",{className:"text-xs",children:"Map Image"}),(0,mt.jsxs)("select",{value:P.mapAssetKey||"",onChange:e=>D(t=>({...t,mapAssetKey:String(e.target.value||"").trim().toLowerCase()})),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm",children:[(0,mt.jsx)("option",{value:"",children:"None"}),te.map(e=>(0,mt.jsx)("option",{value:e,children:e},e))]})]}),(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-center",children:[(0,mt.jsx)("label",{className:"text-xs",children:"Z-Level"}),(0,mt.jsx)("input",{type:"number",value:P.zLevel,onChange:e=>D(t=>({...t,zLevel:Number(e.target.value)})),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]}),(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-center",children:[(0,mt.jsx)("label",{className:"text-xs",children:"Elevation Height"}),(0,mt.jsx)("input",{type:"number",min:"0",value:P.elevationHeight,onChange:e=>D(t=>({...t,elevationHeight:Number(e.target.value)})),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]}),(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"Max HP"}),(0,mt.jsx)("input",{type:"number",value:null!==(e=P.maxHP)&&void 0!==e?e:"",onChange:e=>D(t=>({...t,maxHP:""===e.target.value?null:Number(e.target.value)})),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]}),(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"HP"}),(0,mt.jsx)("input",{type:"number",value:null!==(n=P.hp)&&void 0!==n?n:"",onChange:e=>D(t=>({...t,hp:""===e.target.value?null:Number(e.target.value)})),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]})]}),(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-center",children:[(0,mt.jsx)("label",{className:"text-xs",children:"Hitbox Scale"}),(0,mt.jsx)("input",{type:"number",step:"0.1",min:"0.1",max:"5",value:P.hitboxScale,onChange:e=>D(t=>({...t,hitboxScale:Number(e.target.value)})),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]}),(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-center",children:[(0,mt.jsx)("label",{className:"text-xs",children:"Color"}),(0,mt.jsx)("input",{type:"color",value:P.color,onChange:e=>D(t=>({...t,color:e.target.value})),className:"w-full h-9 rounded cursor-pointer"})]}),(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-center",children:[(0,mt.jsx)("label",{className:"text-xs",children:"Z-Index"}),(0,mt.jsx)("input",{type:"number",value:P.z,onChange:e=>D(t=>({...t,z:Number(e.target.value)})),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]}),"rect"===P.type?(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"Width"}),(0,mt.jsx)("input",{type:"number",value:P.width,onChange:e=>D(t=>({...t,width:Number(e.target.value)})),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]}),(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"Footprint Height"}),(0,mt.jsx)("input",{type:"number",value:P.height,onChange:e=>D(t=>({...t,height:Number(e.target.value)})),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]})]}):(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"Size"}),(0,mt.jsx)("input",{type:"number",value:P.size,onChange:e=>D(t=>({...t,size:Number(e.target.value)})),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]}),(0,mt.jsxs)("div",{className:"flex gap-2",children:[(0,mt.jsx)("button",{type:"button",onClick:()=>{W(""),S(P),U("Placement armed. Click for default size, or drag on the map to size the shape.")},className:"flex-1 bg-emerald-600 hover:bg-emerald-700 px-3 py-2 rounded text-sm",children:"Arm Placement"}),(0,mt.jsx)("button",{type:"button",onClick:()=>{if(!k)return void W("Arm placement first.");const e=C((null===l||void 0===l?void 0:l.x)||0,(null===l||void 0===l?void 0:l.y)||0,{zLevel:E});e&&(U(`Placed ${e.type} #${e.id}`),W(""),T(e.id))},disabled:!k,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-700 px-3 py-2 rounded text-sm",children:"Place Now"})]}),G&&(0,mt.jsx)("button",{type:"button",onClick:A,className:"w-full bg-red-600 hover:bg-red-700 px-3 py-2 rounded text-sm",children:"Cancel Placement"})]}),(0,mt.jsxs)("div",{className:"bg-gray-800 p-3 rounded space-y-2",children:[(0,mt.jsx)("p",{className:"font-semibold text-sm",children:"Save Campaign Snapshot"}),(0,mt.jsx)("input",{type:"text",value:z,onChange:e=>O(e.target.value),placeholder:"Save name (optional)",className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"}),(0,mt.jsx)("input",{type:"text",value:R,onChange:e=>F(e.target.value),placeholder:"Save description (optional)",className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"}),(0,mt.jsx)("button",{type:"button",onClick:async()=>{var e;if(!r||!a||!s)return void W("Missing game session context.");B(!0),W("");const t=await ns(r,"campaign_saveGame",{playerID:a,campaignID:s,name:z.trim()||`Map Save ${(new Date).toLocaleString()}`,description:R.trim()||"Saved from in-game map editor",snapshot:{mapObjects:o,backgroundKey:p,characters:_,currentZLevel:E,floorTypes:g,lighting:v},metadata:{source:"map_editor",objectCount:o.length},makeActive:!0,isAutoSave:!1});B(!1),null!==t&&void 0!==t&&t.success?(U(`Saved: ${(null===t||void 0===t||null===(e=t.gameSave)||void 0===e?void 0:e.name)||"Campaign save updated"}`),O(""),F("")):W((null===t||void 0===t?void 0:t.message)||"Failed to save map to campaign")},disabled:$,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-700 px-3 py-2 rounded text-sm",children:$?"Saving...":"Save to Campaign"}),(0,mt.jsxs)("div",{className:"flex gap-2",children:[(0,mt.jsx)("button",{type:"button",onClick:()=>{const e=JSON.stringify(o,null,2),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=`map_${h}.json`,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)},className:"flex-1 text-xs bg-purple-600 hover:bg-purple-700 px-2 py-1 rounded",children:"Export JSON"}),(0,mt.jsxs)("label",{className:"flex-1 text-xs bg-purple-600 hover:bg-purple-700 px-2 py-1 rounded cursor-pointer text-center",children:["Import JSON",(0,mt.jsx)("input",{type:"file",accept:".json",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!n)return;const r=new FileReader;r.onload=e=>{try{var t;const n=JSON.parse((null===(t=e.target)||void 0===t?void 0:t.result)||"[]");if(!Array.isArray(n))throw new Error("Map file must contain an array of objects");u(n),U(`Imported ${n.length} objects`),W("")}catch(bo){W(bo.message||"Invalid JSON file")}},r.readAsText(n)},className:"hidden"})]})]})]}),q&&(0,mt.jsx)("div",{className:"text-sm text-red-300 bg-red-900/40 rounded p-2",children:q}),H&&(0,mt.jsx)("div",{className:"text-sm text-emerald-300 bg-emerald-900/30 rounded p-2",children:H}),(0,mt.jsxs)("div",{className:"bg-gray-800 p-3 rounded space-y-2",children:[(0,mt.jsxs)("p",{className:"font-semibold mb-1",children:["Objects (",o.length,")"]}),(0,mt.jsx)("div",{className:"max-h-[42vh] min-h-[220px] overflow-y-auto scrollbar-transparent pr-1 space-y-2",children:ge.map(e=>{var t,n,r,s,a,i,l;return(0,mt.jsxs)("div",{className:"p-3 rounded cursor-pointer "+(L===e.id?"bg-blue-700 ring-2 ring-yellow-300 border border-yellow-200/70":"bg-gray-800 hover:bg-gray-700"),onClick:()=>T(e.id),children:[(0,mt.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsxs)("span",{className:"font-semibold",children:[e.type," #",e.id]}),(0,mt.jsxs)("p",{className:"text-xs text-gray-400",children:["Pos: (",e.x,", ",e.y,") L:",null!==(t=e.zLevel)&&void 0!==t?t:0," Z:",e.z," H:",Math.round(Number(e.elevationHeight)||0)," ",e.terrainType?`| ${e.terrainType}`:""," ",e.floorTypeId?`| ${e.floorTypeId}`:""," ",e.mapAssetKey?`| MAP ${e.mapAssetKey}`:""," ",null!=e.maxHP?`| HP ${null!==(n=e.hp)&&void 0!==n?n:0}/${e.maxHP}`:"| Indestructible"]})]}),(0,mt.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),d(e.id),L===e.id&&T(null)},className:"text-red-400 hover:text-red-300 text-xl",children:"x"})]}),L===e.id&&(0,mt.jsxs)("div",{className:"mt-2 space-y-2 border-t border-gray-700 pt-2",children:[(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"X"}),(0,mt.jsx)("input",{type:"number",value:e.x,onChange:t=>c(e.id,{x:Number(t.target.value)}),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]}),(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"Y"}),(0,mt.jsx)("input",{type:"number",value:e.y,onChange:t=>c(e.id,{y:Number(t.target.value)}),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]})]}),(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"Terrain Type"}),(0,mt.jsxs)("select",{value:e.terrainType||"obstacle",onChange:t=>c(e.id,{terrainType:t.target.value}),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm",children:[(0,mt.jsx)("option",{value:"floor",children:"floor"}),(0,mt.jsx)("option",{value:"wall",children:"wall"}),(0,mt.jsx)("option",{value:"obstacle",children:"obstacle"})]})]}),(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"Floor Type"}),(0,mt.jsx)("select",{value:e.floorTypeId||"",onChange:t=>c(e.id,{floorTypeId:t.target.value}),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm",children:(Z[e.terrainType||"obstacle"]||g).map(e=>(0,mt.jsxs)("option",{value:e.id,children:[e.name,"effect"===e.floorVisualType?" (Effect)":""]},e.id))})]}),(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"Map Image"}),(0,mt.jsxs)("select",{value:String(e.mapAssetKey||"").trim().toLowerCase(),onChange:t=>c(e.id,{mapAssetKey:String(t.target.value||"").trim().toLowerCase()}),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm",children:[(0,mt.jsx)("option",{value:"",children:"None"}),te.map(e=>(0,mt.jsx)("option",{value:e,children:e},e))]})]}),(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"Z-Level"}),(0,mt.jsx)("input",{type:"number",value:null!==(r=e.zLevel)&&void 0!==r?r:0,onChange:t=>c(e.id,{zLevel:Number(t.target.value)}),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]}),(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"Elevation Height"}),(0,mt.jsx)("input",{type:"number",min:"0",value:Math.round(Number(e.elevationHeight)||0),onChange:t=>c(e.id,{elevationHeight:Number(t.target.value)}),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]}),(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"Max HP"}),(0,mt.jsx)("input",{type:"number",value:null!==(s=e.maxHP)&&void 0!==s?s:"",onChange:t=>c(e.id,{maxHP:""===t.target.value?null:Number(t.target.value)}),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]}),(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"HP"}),(0,mt.jsx)("input",{type:"number",value:null!==(a=e.hp)&&void 0!==a?a:"",onChange:t=>c(e.id,{hp:""===t.target.value?null:Number(t.target.value)}),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]})]}),(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,mt.jsx)("button",{type:"button",onClick:()=>be(e.id,10),className:"bg-red-700/70 hover:bg-red-700 text-xs px-2 py-1 rounded",children:"Damage 10"}),(0,mt.jsx)("button",{type:"button",onClick:()=>be(e.id,-10),className:"bg-emerald-700/70 hover:bg-emerald-700 text-xs px-2 py-1 rounded",children:"Heal 10"})]}),(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"Hitbox Scale"}),(0,mt.jsx)("input",{type:"number",min:"0.1",max:"5",step:"0.1",value:null!==(i=null===e||void 0===e||null===(l=e.hitbox)||void 0===l?void 0:l.scale)&&void 0!==i?i:1,onChange:t=>c(e.id,{hitbox:{...e.hitbox||{},scale:Number(t.target.value)}}),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]}),(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"Z-Index"}),(0,mt.jsx)("input",{type:"number",value:e.z,onChange:t=>c(e.id,{z:Number(t.target.value)}),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]}),"rect"===e.type?(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"Width"}),(0,mt.jsx)("input",{type:"number",value:e.width,onChange:t=>c(e.id,{width:Number(t.target.value)}),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]}),(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"Footprint Height"}),(0,mt.jsx)("input",{type:"number",value:e.height,onChange:t=>c(e.id,{height:Number(t.target.value)}),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]})]}):(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"Size"}),(0,mt.jsx)("input",{type:"number",value:e.size,onChange:t=>c(e.id,{size:Number(t.target.value)}),className:"w-full bg-gray-700 px-2 py-1 rounded text-sm"})]}),(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"text-xs",children:"Color"}),(0,mt.jsx)("input",{type:"color",value:e.color,onChange:t=>c(e.id,{color:t.target.value}),className:"w-full h-8 rounded cursor-pointer"})]})]})]},e.id)})})]})]})})})})};function bs(e){let{title:t,subtitle:n,hint:r}=e;return(0,mt.jsx)("div",{className:"h-full min-h-0 overflow-y-auto scrollbar-transparent px-4 py-4",children:(0,mt.jsxs)("div",{className:"rounded-xl border border-slate-700/80 bg-slate-900/80 p-4",children:[(0,mt.jsx)("h3",{className:"text-lg font-semibold text-white",children:t}),(0,mt.jsx)("p",{className:"mt-2 text-sm text-slate-300",children:n}),(0,mt.jsx)("p",{className:"mt-3 text-xs uppercase tracking-wider text-slate-500",children:r})]})})}function gs(){const{isDM:e}=Zt();return(0,mt.jsxs)(Kr,{className:"h-full min-h-0 grid grid-rows-[auto_1fr] border-l border-slate-700 bg-slate-950 text-slate-100",children:[(0,mt.jsxs)(Kr.Nav,{className:"bg-slate-900/95 text-slate-100 flex flex-row overflow-x-auto scrollbar-transparent justify-start items-center gap-1 border-b border-slate-700 px-2 py-1 flex-shrink-0",children:[(0,mt.jsx)(Kr.Tab,{label:"Inventory",index:0,children:(0,mt.jsx)(Yr,{size:16})}),(0,mt.jsx)(Kr.Tab,{label:"Sheet",index:1,children:(0,mt.jsx)(Xr,{size:16})}),(0,mt.jsx)(Kr.Tab,{label:"Spells",index:2,children:(0,mt.jsx)(Vr,{size:16})}),(0,mt.jsx)(Kr.Tab,{label:"Quests",index:3,children:(0,mt.jsx)(Qr,{size:16})}),(0,mt.jsx)(Kr.Tab,{label:"Map",index:4,children:(0,mt.jsx)(Gr,{size:16})}),(0,mt.jsx)(Kr.Tab,{label:"Journal",index:5,children:(0,mt.jsx)(Jr,{size:16})}),(0,mt.jsx)(Kr.Tab,{label:"Party",index:6,children:(0,mt.jsx)(Zr,{size:16})}),(0,mt.jsx)(Kr.Tab,{label:"Settings",index:7,children:(0,mt.jsx)(es,{size:16})}),e&&(0,mt.jsx)(Kr.Tab,{label:"Admin",index:8,children:(0,mt.jsx)(ts,{size:16})}),e&&(0,mt.jsx)(Kr.Tab,{label:"Map Edit",index:9,children:(0,mt.jsx)(Gr,{size:16})})]}),(0,mt.jsxs)(Kr.Panels,{className:"h-full min-h-0 overflow-hidden",children:[(0,mt.jsx)(Kr.Panel,{index:0,className:"!p-0 h-full min-h-0 overflow-y-auto scrollbar-transparent",children:(0,mt.jsx)(bs,{title:"Inventory",subtitle:"Consumables, equipment, and loot from the current run.",hint:"Item management tools will render here"})}),(0,mt.jsx)(Kr.Panel,{index:1,className:"!p-0 h-full min-h-0 overflow-y-auto scrollbar-transparent",children:(0,mt.jsx)(bs,{title:"Character Sheet",subtitle:"Core stats, passive bonuses, and your active build.",hint:"Character details panel"})}),(0,mt.jsx)(Kr.Panel,{index:2,className:"!p-0 h-full min-h-0 overflow-y-auto scrollbar-transparent",children:(0,mt.jsx)(bs,{title:"Spells",subtitle:"Prepared spells, cooldowns, and casting resources.",hint:"Spellbook and actions"})}),(0,mt.jsx)(Kr.Panel,{index:3,className:"!p-0 h-full min-h-0 overflow-y-auto scrollbar-transparent",children:(0,mt.jsx)(bs,{title:"Quests",subtitle:"Objective chains and current campaign progression.",hint:"Quest tracker"})}),(0,mt.jsx)(Kr.Panel,{index:4,className:"!p-0 h-full min-h-0 overflow-y-auto scrollbar-transparent",children:(0,mt.jsx)(bs,{title:"Map",subtitle:"Quick world summary for the active encounter.",hint:"Context-only map data"})}),(0,mt.jsx)(Kr.Panel,{index:5,className:"!p-0 h-full min-h-0 overflow-y-auto scrollbar-transparent",children:(0,mt.jsx)(bs,{title:"Journal",subtitle:"Session notes, lore snippets, and reminders.",hint:"Journal timeline"})}),(0,mt.jsx)(Kr.Panel,{index:6,className:"!p-0 h-full min-h-0 overflow-y-auto scrollbar-transparent",children:(0,mt.jsx)(bs,{title:"Party",subtitle:"Player roster and party role snapshots.",hint:"Party overview"})}),(0,mt.jsx)(Kr.Panel,{index:7,className:"!p-0 h-full min-h-0 overflow-y-auto scrollbar-transparent",children:(0,mt.jsx)(bs,{title:"Settings",subtitle:"Camera, controls, and personal game preferences.",hint:"Session settings"})}),e&&(0,mt.jsx)(Kr.Panel,{index:8,className:"!p-0 h-full min-h-0 overflow-y-auto scrollbar-transparent",children:(0,mt.jsx)(ls,{})}),e&&(0,mt.jsx)(Kr.Panel,{index:9,className:"!p-0 h-full min-h-0 overflow-hidden",children:(0,mt.jsx)(fs,{})})]})]})}const vs=[{name:"background",component:Pr,zIndex:0},{name:"grid",component:zr,zIndex:1}];const xs=function(){const[e,n]=(0,t.useState)(320),[r,s]=(0,t.useState)(!1),[a,i]=(0,t.useState)(!0),[l,o]=(0,t.useState)(null),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)({x:0,y:0}),p=(0,t.useRef)(!1),m=(0,t.useRef)(!1),f=(0,t.useRef)({x:0,y:0,zoom:1,bgImage:null}),b=(0,t.useRef)({}),g="calm1",v=[{id:"char1",name:"Hero",position:{x:25,y:50},size:50,visionDistance:200,rotation:45,visionArc:90,team:"player"},{id:"char2",name:"Ally",position:{x:100,y:100},size:20,visionDistance:150,rotation:180,visionArc:120,team:"player"},{id:"char3",name:"Enemy",position:{x:400,y:300},size:30,visionDistance:100,rotation:270,visionArc:90,team:"enemy"}];(0,t.useEffect)(()=>{const e=new Image;e.src=Er(g),e.onload=()=>{f.current.bgImage=e}},[g]),(0,t.useEffect)(()=>{const e=()=>{Object.values(b.current).forEach(e=>{e&&(e=>{const t=window.devicePixelRatio||1,n=e.getBoundingClientRect();e.width=Math.round(n.width*t),e.height=Math.round(n.height*t);const r=e.getContext("2d");r.setTransform(t,0,0,t,0,0)})(e)})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const x=(e,t)=>({x:(e+f.current.x)/f.current.zoom,y:(t+f.current.y)/f.current.zoom}),y=x(u.x,u.y),w=(e,t)=>{if(!a)return!0;const n=v.filter(e=>"player"===e.team);for(const r of n){const n=e-r.position.x,s=t-r.position.y;if(n*n+s*s<=r.visionDistance*r.visionDistance){let e=180*Math.atan2(s,n)/Math.PI-r.rotation;for(;e>180;)e-=360;for(;e<-180;)e+=360;if(Math.abs(e)<=r.visionArc/2)return!0}}return!1};(0,t.useEffect)(()=>{let e;const t=()=>{Tr({layers:vs.map(e=>{var t;return{...e.component,ctx:null===(t=b.current[e.name])||void 0===t?void 0:t.getContext("2d"),canvas:b.current[e.name]}}),state:{bgImage:f.current.bgImage,camera:f.current}}),e=requestAnimationFrame(t)};return t(),()=>cancelAnimationFrame(e)},[]),(0,t.useEffect)(()=>{const e=e=>{if(r){const t=window.innerWidth-e.clientX;n(Math.max(200,Math.min(t,800)))}},t=()=>{s(!1)};return r&&(window.addEventListener("mousemove",e),window.addEventListener("mouseup",t)),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[r]),(0,t.useEffect)(()=>{const e=e=>{"Space"===e.code&&(e.preventDefault(),p.current=!0)},t=e=>{"Space"===e.code&&(p.current=!1,m.current=!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]);const j=()=>{m.current=!1},N=e=>{const t=v.find(e=>e.id===l.charId);console.log(`Action "${e}" on character:`,null===t||void 0===t?void 0:t.name),o(null)};return(0,mt.jsxs)("div",{children:[(0,mt.jsxs)("div",{className:"w-full h-screen relative",onMouseDown:e=>{if(2===e.button)return e.preventDefault(),void(c&&o({x:e.clientX,y:e.clientY,charId:c}));if(1===e.button||0===e.button&&p.current)return e.preventDefault(),void(m.current=!0);if(0===e.button&&!p.current){o(null);const t=b.current.background.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,s=x(n,r);let a=null;for(const e of v){if(!w(e.position.x,e.position.y))continue;if((s.x-e.position.x)**2+(s.y-e.position.y)**2<=(e.size/2)**2){a=e.id;break}}d(a)}},onMouseMove:e=>{const t=e.clientX-u.x,n=e.clientY-u.y;h({x:e.clientX,y:e.clientY}),m.current&&(f.current.x-=t,f.current.y-=n)},onMouseUp:j,onMouseLeave:j,onWheel:e=>{e.preventDefault(),o(null);const t=(e.clientX+f.current.x)/f.current.zoom,n=(e.clientY+f.current.y)/f.current.zoom;f.current.zoom*=e.deltaY<0?1.1:1/1.1,f.current.zoom=Math.max(.25,Math.min(f.current.zoom,4)),f.current.x=t*f.current.zoom-e.clientX,f.current.y=n*f.current.zoom-e.clientY},onContextMenu:e=>e.preventDefault(),children:[vs.map(e=>(0,mt.jsx)("canvas",{ref:t=>b.current[e.name]=t,className:"absolute inset-0 w-full h-full",style:{zIndex:e.zIndex,backgroundColor:"background"===e.name?"#1f2937":"transparent"}},e.name)),l&&(0,mt.jsx)("div",{className:"absolute bg-gray-800 border border-gray-600 rounded shadow-lg z-50",style:{left:l.x,top:l.y},onMouseLeave:()=>o(null),onContextMenu:e=>e.preventDefault(),children:(0,mt.jsxs)("div",{className:"py-1",children:[["move","attack","defend","skills"].map(e=>(0,mt.jsxs)("button",{onClick:()=>N(e),className:"w-full px-4 py-2 text-left text-white hover:bg-gray-700 flex items-center gap-2",children:[(0,mt.jsxs)("span",{children:["move"===e&&"\ud83d\udeb6","attack"===e&&"\u2694\ufe0f","defend"===e&&"\ud83d\udee1\ufe0f","skills"===e&&"\u2728"]}),e.charAt(0).toUpperCase()+e.slice(1)]},e)),(0,mt.jsx)("div",{className:"border-t border-gray-600 my-1"}),(0,mt.jsxs)("button",{onClick:()=>N("info"),className:"w-full px-4 py-2 text-left text-white hover:bg-gray-700 flex items-center gap-2",children:[(0,mt.jsx)("span",{children:"\u2139\ufe0f"})," Info"]})]})}),(()=>{if(!c)return null;const e=v.find(e=>e.id===c);if(!e)return null;var t,n;const r=(t=e.position.x,n=e.position.y,{x:t*f.current.zoom-f.current.x,y:n*f.current.zoom-f.current.y}).x<window.innerWidth/2;return(0,mt.jsxs)("div",{className:"absolute top-4 bg-gray-800 text-white px-4 py-2 rounded shadow-lg z-50 "+(r?"left-4":"right-4"),style:{maxWidth:"200px"},children:["Selected: ",e.name]})})()]}),(0,mt.jsxs)("div",{className:"grid min-h-screen bg-gray-800 absolute top-0 right-0",style:{gridTemplateColumns:`1fr 6px ${e}px`,zIndex:100},children:[(0,mt.jsx)("div",{className:"bg-gray-700 cursor-col-resize hover:bg-gray-500 col-start-2",onMouseDown:e=>{e.stopPropagation(),s(!0)}}),(0,mt.jsxs)("div",{className:"bg-gray-800 p-4 overflow-y-auto",children:[(0,mt.jsx)("h2",{className:"text-white text-xl font-bold mb-4",children:"Side Panel"}),(0,mt.jsxs)("p",{className:"text-gray-300 mb-4",children:["Selected: ",c||"None"]}),(0,mt.jsxs)("div",{className:"space-y-4",children:[(0,mt.jsxs)("button",{onClick:()=>i(!a),className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded",children:[a?"Disable":"Enable"," Fog of War"]}),(0,mt.jsxs)("div",{className:"text-gray-300 text-sm",children:[(0,mt.jsx)("p",{className:"font-semibold mb-2",children:"Controls:"}),(0,mt.jsxs)("ul",{className:"space-y-1",children:[(0,mt.jsx)("li",{children:"\u2022 Left click to select"}),(0,mt.jsx)("li",{children:"\u2022 Right click for actions"}),(0,mt.jsx)("li",{children:"\u2022 Space + drag to pan"}),(0,mt.jsx)("li",{children:"\u2022 Scroll to zoom"}),(0,mt.jsx)("li",{children:"\u2022 Green = Player team"}),(0,mt.jsx)("li",{children:"\u2022 Red = Enemy team"})]})]}),(0,mt.jsxs)("div",{className:"text-gray-300 text-sm",children:[(0,mt.jsx)("p",{className:"font-semibold mb-2",children:"Fog of War:"}),(0,mt.jsx)("p",{children:"Only player characters reveal the map. Enemy units are hidden in fog."})]}),(0,mt.jsxs)("div",{className:"text-gray-300 text-sm",children:[(0,mt.jsx)("p",{className:"font-semibold mb-2",children:"Mouse Position:"}),(0,mt.jsxs)("p",{children:["Screen: X:",Math.round(u.x)," Y:",Math.round(u.y)]}),(0,mt.jsxs)("p",{children:["World: X:",Math.round(y.x)," Y:",Math.round(y.y)]})]})]})]})]})]})},ys=Ur("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),ws=Ur("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]),js=Ur("github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),Ns=Ur("linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),ks=Ur("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);function Ss(){const e=(0,t.useContext)(Sr),n=ne(),r=sessionStorage.getItem("session_ID"),s=r?`/ISK/${r}/home`:"/",a=Boolean(localStorage.getItem("player_ID"));return(0,mt.jsxs)("div",{className:"relative min-h-screen w-full",children:[(0,mt.jsx)("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${Er("loginpage_background")})`}}),(0,mt.jsx)("div",{className:"relative min-h-screen flex items-center justify-center px-4",children:(0,mt.jsxs)("div",{className:"w-full max-w-xl rounded-2xl border border-website-default-700 bg-website-default-900/90 p-8 text-website-neutral-50 backdrop-blur-md shadow-xl",children:[(0,mt.jsx)("h1",{className:"text-2xl font-semibold",children:"Settings"}),(0,mt.jsx)("p",{className:"mt-2 text-sm text-website-neutral-300",children:"Account and navigation actions are now wired and ready to use."}),(0,mt.jsxs)("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,mt.jsxs)(lt,{to:s,className:"inline-flex items-center justify-center gap-2 rounded-lg border border-website-default-700 bg-website-default-800 px-4 py-3 text-sm hover:bg-website-default-700",children:[(0,mt.jsx)(ys,{className:"size-4"}),"Home"]}),(0,mt.jsxs)(lt,{to:"/login",className:"inline-flex items-center justify-center gap-2 rounded-lg border border-website-default-700 bg-website-default-800 px-4 py-3 text-sm hover:bg-website-default-700",children:[(0,mt.jsx)(ws,{className:"size-4"}),"Login"]}),(0,mt.jsxs)("a",{href:"https://github.com/Yisong-Lin-Coding/DnM",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 rounded-lg border border-website-default-700 bg-website-default-800 px-4 py-3 text-sm hover:bg-website-default-700",children:[(0,mt.jsx)(js,{className:"size-4"}),"GitHub"]}),(0,mt.jsxs)("a",{href:"https://www.linkedin.com/in/yisong-lin-8605a3357/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 rounded-lg border border-website-default-700 bg-website-default-800 px-4 py-3 text-sm hover:bg-website-default-700",children:[(0,mt.jsx)(Ns,{className:"size-4"}),"LinkedIn"]})]}),(0,mt.jsxs)("button",{type:"button",onClick:()=>{const t=localStorage.getItem("player_ID");t&&e.emit("playerData_logOff",{playerID:t}),localStorage.removeItem("player_ID"),localStorage.removeItem("player_username"),sessionStorage.removeItem("session_ID"),sessionStorage.removeItem("adminPermission"),sessionStorage.removeItem("lastLocation"),n("/login")},disabled:!a,className:"mt-6 inline-flex w-full items-center justify-center gap-2 rounded-lg bg-website-specials-500 px-4 py-3 text-sm font-semibold text-white transition-colors hover:bg-website-specials-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,mt.jsx)(ks,{className:"size-4"}),"Sign Out"]})]})})]})}const As=Ur("book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),Cs=Ur("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Es=Ur("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Ms=Ur("scroll",[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]),Is=Ur("sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]),_s=Ur("skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]),Ls=Ur("panels-top-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);function Ts(){const e=(0,t.useContext)(Sr),n=ne(),r=sessionStorage.getItem("session_ID"),s=e=>r?`/ISK/${r}${e}`:"/login",a="group flex items-center gap-3 text-website-neutral-100 hover:text-website-specials-400 transition-all duration-200 transform hover:translate-x-1",i="text-[10px] uppercase tracking-[0.2em] text-website-neutral-400 font-bold flex items-center justify-between";return(0,mt.jsxs)("div",{className:"flex flex-col space-y-10 p-2",children:[(0,mt.jsxs)("section",{children:[(0,mt.jsxs)("h3",{className:i,children:["Lookup",(0,mt.jsx)("span",{className:"h-px flex-1 ml-4 bg-gradient-to-r from-website-specials-500/50 to-transparent"})]}),(0,mt.jsxs)("nav",{className:"flex flex-col space-y-3 mt-4",children:[(0,mt.jsxs)(lt,{to:s("/lore/classes"),className:a,children:[(0,mt.jsx)(Cs,{size:16,className:"text-website-specials-500 opacity-70 group-hover:opacity-100"}),(0,mt.jsx)("span",{children:"Classes"})]}),(0,mt.jsxs)(lt,{to:s("/lore/backgrounds"),className:a,children:[(0,mt.jsx)(Es,{size:16,className:"text-website-specials-500 opacity-70 group-hover:opacity-100"}),(0,mt.jsx)("span",{children:"Backgrounds"})]}),(0,mt.jsxs)(lt,{to:s("/lore/races"),className:a,children:[(0,mt.jsx)(Vr,{size:16,className:"text-website-specials-500 opacity-70 group-hover:opacity-100"}),(0,mt.jsx)("span",{children:"Races"})]}),(0,mt.jsxs)(lt,{to:s("/lore/spells"),className:a,children:[(0,mt.jsx)(Ms,{size:16,className:"text-website-specials-500 opacity-70 group-hover:opacity-100"}),(0,mt.jsx)("span",{children:"Spells"})]}),(0,mt.jsxs)(lt,{to:s("/lore/items"),className:a,children:[(0,mt.jsx)(Is,{size:16,className:"text-website-specials-500 opacity-70 group-hover:opacity-100"}),(0,mt.jsx)("span",{children:"Items"})]}),(0,mt.jsxs)(lt,{to:s("/lore"),className:a,children:[(0,mt.jsx)(As,{size:16,className:"text-website-specials-500 opacity-70 group-hover:opacity-100"}),(0,mt.jsx)("span",{children:"Lore"})]}),(0,mt.jsxs)(lt,{to:s("/lore/enemies"),className:a,children:[(0,mt.jsx)(_s,{size:16,className:"text-website-specials-500 opacity-70 group-hover:opacity-100"}),(0,mt.jsx)("span",{children:"Enemies"})]})]})]}),(0,mt.jsxs)("section",{children:[(0,mt.jsxs)("h3",{className:i,children:["System",(0,mt.jsx)("span",{className:"h-px flex-1 ml-4 bg-gradient-to-r from-website-specials-500/50 to-transparent"})]}),(0,mt.jsxs)("nav",{className:"flex flex-col space-y-3 mt-4",children:[(0,mt.jsxs)(lt,{to:s("/home"),className:a,children:[(0,mt.jsx)(ys,{size:16,className:"text-website-neutral-400 group-hover:text-website-specials-400"}),(0,mt.jsx)("span",{children:"Home"})]}),(0,mt.jsxs)(lt,{to:s("/lobby"),className:a,children:[(0,mt.jsx)(Ls,{size:16,className:"text-website-neutral-400 group-hover:text-website-specials-400"}),(0,mt.jsx)("span",{children:"Lobby"})]}),(0,mt.jsxs)(lt,{to:s("/settings"),className:a,children:[(0,mt.jsx)(Es,{size:16,className:"text-website-neutral-400 group-hover:text-website-specials-400"}),(0,mt.jsx)("span",{children:"Settings"})]}),(0,mt.jsxs)("button",{type:"button",onClick:()=>{const t=localStorage.getItem("player_ID");t&&e.emit("playerData_logOff",{playerID:t}),localStorage.removeItem("player_ID"),localStorage.removeItem("player_username"),sessionStorage.removeItem("session_ID"),sessionStorage.removeItem("adminPermission"),sessionStorage.removeItem("lastLocation"),n("/login")},className:`${a} w-full text-left text-website-specials-600 hover:text-website-specials-400 mt-4 pt-4 border-t border-website-default-800`,children:[(0,mt.jsx)(ks,{size:16}),(0,mt.jsx)("span",{children:"Sign Out"})]})]})]})]})}const Ps=Ur("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]),Ds=Ur("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),zs=Ur("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Os=Ur("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Rs=Ur("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]);function Fs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function $s(e){let{show:t}=e;return t?(0,mt.jsx)("span",{className:"inline-block h-2 w-2 rounded-full bg-website-specials-500 shadow-[0_0_8px_rgba(233,69,96,0.6)]","aria-label":"Unread"}):null}function Bs(e){let{sender:t={name:"Sender Name",email:"sender@example.com",avatarUrl:""},subject:n="Subject summary",snippet:r="Message content preview...",date:s=new Date,unread:a=!1,flagged:i=!1,attachments:l=0,selected:o=!1,loading:c=!1,onClick:d,onToggleSelect:u}=e;if(c)return(0,mt.jsxs)("div",{className:"grid grid-cols-[auto_1fr_auto] items-center gap-3 rounded-xl border border-website-default-800 bg-website-default-900/50 p-3 animate-pulse",children:[(0,mt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,mt.jsx)("div",{className:"h-5 w-5 rounded border border-website-default-700 bg-website-default-800"}),(0,mt.jsx)("div",{className:"h-10 w-10 rounded-full bg-website-default-800"})]}),(0,mt.jsxs)("div",{className:"space-y-2",children:[(0,mt.jsx)("div",{className:"h-4 w-3/5 rounded bg-website-default-800"}),(0,mt.jsx)("div",{className:"h-3 w-4/5 rounded bg-website-default-800/50"})]}),(0,mt.jsx)("div",{className:"h-3 w-12 rounded bg-website-default-800"})]});const h=function(){var e,t;const n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().split(/\s+/);return(((null===(e=n[0])||void 0===e?void 0:e[0])||"")+((null===(t=n[1])||void 0===t?void 0:t[0])||"")).toUpperCase()||"U"}((null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.email)),p=function(e){const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))return"";const n=new Date;return t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()===n.getDate()?t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}):t.toLocaleDateString([],{month:"short",day:"numeric"})}(s);return(0,mt.jsxs)("div",{role:"button",tabIndex:0,onClick:d,className:Fs("group grid grid-cols-[auto_1fr_auto] items-center gap-3 rounded-xl border p-3 transition-all duration-200 focus:outline-none",o?"border-website-specials-500 bg-website-default-800 ring-1 ring-website-specials-500/20":"border-website-default-800 bg-website-default-900 hover:bg-website-default-800 hover:border-website-default-700"),children:[(0,mt.jsxs)("div",{className:"flex items-center gap-3",children:["function"===typeof u&&(0,mt.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),u(!o)},className:Fs("flex h-5 w-5 items-center justify-center rounded border transition-colors",o?"border-website-specials-500 bg-website-specials-500 text-white":"border-website-default-600 bg-transparent hover:border-website-specials-500"),children:o&&(0,mt.jsx)(qr,{size:14,strokeWidth:3})}),(0,mt.jsx)("div",{className:"relative h-10 w-10 shrink-0",children:null!==t&&void 0!==t&&t.avatarUrl?(0,mt.jsx)("img",{src:t.avatarUrl,alt:"avatar",className:"h-10 w-10 rounded-full object-cover border border-website-default-700"}):(0,mt.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-website-highlights-900 text-website-highlights-200 text-xs font-bold border border-website-highlights-700",children:h})})]}),(0,mt.jsxs)("div",{className:"min-w-0",children:[(0,mt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mt.jsx)("span",{className:Fs("truncate text-sm tracking-wide",a?"font-bold text-website-neutral-50":"font-medium text-website-neutral-300"),children:n}),i&&(0,mt.jsx)(Os,{size:14,className:"fill-website-specials-500 text-website-specials-500"})]}),(0,mt.jsxs)("div",{className:"mt-0.5 flex items-center gap-2 text-xs",children:[(0,mt.jsx)("span",{className:a?"text-website-highlights-300":"text-website-neutral-500",children:(null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.email)}),(0,mt.jsx)("span",{className:"text-website-neutral-700",children:"\u2022"}),(0,mt.jsx)("span",{className:"truncate text-website-neutral-500",title:r,children:r})]})]}),(0,mt.jsxs)("div",{className:"flex flex-col items-end justify-between h-full py-0.5",children:[(0,mt.jsx)("span",{className:"text-[10px] font-medium uppercase tracking-tighter text-website-neutral-500",children:p}),(0,mt.jsxs)("div",{className:"flex items-center gap-2",children:[l>0&&(0,mt.jsx)(Rs,{size:12,className:"text-website-neutral-600"}),(0,mt.jsx)($s,{show:a})]})]})]})}function Hs(){const e=(0,t.useContext)(Sr),n=localStorage.getItem("player_ID"),[r,s]=(0,t.useState)([]),[a,i]=(0,t.useState)(!0),[l,o]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),[u,h]=(0,t.useState)(""),[p,m]=(0,t.useState)("all"),[f,b]=(0,t.useState)(""),[g,v]=(0,t.useState)(""),x=(0,t.useCallback)(async function(){let{silent:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e||!n)return i(!1),s([]),o("Missing player session."),!1;t||i(!0);const r=await ns(e,"mail_call",{playerID:n});return i(!1),null!==r&&void 0!==r&&r.success?(s(Array.isArray(r.messages)?r.messages:[]),o(""),window.dispatchEvent(new CustomEvent("mailbox:updated")),!0):(s([]),o((null===r||void 0===r?void 0:r.message)||"Failed to load mailbox"),!1)},[e,n]);(0,t.useEffect)(()=>{x()},[x]);const y=(0,t.useMemo)(()=>r.filter(e=>null===e||void 0===e?void 0:e.unread).length,[r]),w=(0,t.useMemo)(()=>r.filter(e=>"campaign_invite"===(null===e||void 0===e?void 0:e.kind)&&"pending"===(null===e||void 0===e?void 0:e.status)).length,[r]),j=(0,t.useMemo)(()=>{const e=u.trim().toLowerCase();return r.filter(t=>{var n;if("unread"===p&&(null===t||void 0===t||!t.unread))return!1;if("invites"===p&&"campaign_invite"!==(null===t||void 0===t?void 0:t.kind))return!1;if(!e)return!0;const r=String((null===t||void 0===t||null===(n=t.from)||void 0===n?void 0:n.username)||"").toLowerCase(),s=String((null===t||void 0===t?void 0:t.subject)||"").toLowerCase(),a=String((null===t||void 0===t?void 0:t.message)||"").toLowerCase();return r.includes(e)||s.includes(e)||a.includes(e)})},[r,p,u]),N=(0,t.useCallback)(async t=>{if(!t||!n)return;const r=await ns(e,"mail_markRead",{playerID:n,messageID:t});null!==r&&void 0!==r&&r.success&&s(e=>e.map(e=>e._id===t?{...e,unread:!1}:e))},[e,n]),k=(0,t.useCallback)(e=>{null!==e&&void 0!==e&&e._id&&(b(e._id),e.unread&&N(e._id))},[N]),S=(0,t.useCallback)(async(t,r)=>{if(!t||!n)return;v(`${r}:${t}`),o(""),d("");const s=await ns(e,"mail_respondInvite",{playerID:n,messageID:t,action:r});v(""),null!==s&&void 0!==s&&s.success?(d("accept"===r?`Joined ${(null===s||void 0===s?void 0:s.campaignName)||"campaign"}.`:"Invite declined."),await x({silent:!0}),window.dispatchEvent(new CustomEvent("mailbox:updated"))):o((null===s||void 0===s?void 0:s.message)||"Failed to update invite")},[e,n,x]);return(0,mt.jsxs)("div",{className:"flex flex-col h-[500px] w-full font-body bg-website-default-900",children:[(0,mt.jsxs)("div",{className:"p-4 border-b border-website-default-800 space-y-3",children:[(0,mt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mt.jsx)(Ps,{size:18,className:"text-website-specials-400"}),(0,mt.jsx)("h2",{className:"text-sm font-bold uppercase tracking-widest text-website-neutral-50",children:"Messenger"})]}),(0,mt.jsx)("button",{type:"button",onClick:()=>x(),title:"Refresh Inbox",className:"p-2 rounded-full bg-website-default-800 hover:bg-website-default-700 text-website-neutral-100 transition-colors",children:(0,mt.jsx)(Ds,{size:16})})]}),(0,mt.jsxs)("div",{className:"relative",children:[(0,mt.jsx)(zs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-website-neutral-600",size:14}),(0,mt.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"Search messages...",className:"w-full bg-website-default-800 border border-website-default-700 rounded-lg py-1.5 pl-9 pr-3 text-xs text-website-neutral-200 placeholder:text-website-neutral-600 focus:outline-none focus:border-website-highlights-500 transition-colors"})]}),(0,mt.jsxs)("div",{className:"flex gap-4 text-[10px] uppercase font-bold tracking-wider",children:[(0,mt.jsx)("button",{type:"button",onClick:()=>m("all"),className:"all"===p?"text-website-specials-500":"text-website-neutral-500 hover:text-website-neutral-300",children:"All"}),(0,mt.jsxs)("button",{type:"button",onClick:()=>m("unread"),className:"unread"===p?"text-website-specials-500":"text-website-neutral-500 hover:text-website-neutral-300",children:["Unread (",y,")"]}),(0,mt.jsxs)("button",{type:"button",onClick:()=>m("invites"),className:"invites"===p?"text-website-specials-500":"text-website-neutral-500 hover:text-website-neutral-300",children:["Invites (",w,")"]})]})]}),(l||c)&&(0,mt.jsxs)("div",{className:"px-3 pt-2 space-y-2",children:[l&&(0,mt.jsx)("div",{className:"rounded border border-red-500/40 bg-red-500/10 px-2 py-1 text-[11px] text-red-300",children:l}),c&&(0,mt.jsx)("div",{className:"rounded border border-emerald-500/40 bg-emerald-500/10 px-2 py-1 text-[11px] text-emerald-300",children:c})]}),(0,mt.jsxs)("div",{className:"flex-1 overflow-y-auto scrollbar-transparent p-2 space-y-2",children:[a&&(0,mt.jsxs)(mt.Fragment,{children:[(0,mt.jsx)(Bs,{loading:!0}),(0,mt.jsx)(Bs,{loading:!0}),(0,mt.jsx)(Bs,{loading:!0})]}),!a&&j.length>0&&j.map(e=>{var t,n;const r=e._id,s="campaign_invite"===e.kind,a=s&&"pending"===e.status,i=g===`accept:${r}`||g===`decline:${r}`;return(0,mt.jsxs)("div",{className:"space-y-1",children:[(0,mt.jsx)(Bs,{unread:Boolean(e.unread),sender:{name:(null===e||void 0===e||null===(t=e.from)||void 0===t?void 0:t.username)||"System"},subject:(null===e||void 0===e?void 0:e.subject)||"Untitled Message",snippet:(null===e||void 0===e?void 0:e.snippet)||(null===e||void 0===e?void 0:e.message)||"",date:null===e||void 0===e?void 0:e.time,selected:f===r,onClick:()=>k(e)}),f===r&&(0,mt.jsxs)("div",{className:"rounded border border-website-default-700 bg-website-default-800/40 px-2 py-2 text-xs text-website-neutral-200 whitespace-pre-wrap",children:[(null===e||void 0===e?void 0:e.message)||"No message content.",s&&(0,mt.jsxs)("div",{className:"mt-2 text-[11px] text-website-neutral-400",children:["Campaign: ",(null===e||void 0===e||null===(n=e.payload)||void 0===n?void 0:n.campaignName)||"Unknown"]})]}),s&&(0,mt.jsxs)("div",{className:"flex items-center justify-between gap-2 rounded border border-website-default-800 bg-website-default-900/60 px-2 py-2",children:[(0,mt.jsxs)("span",{className:"text-[11px] text-website-neutral-400",children:["Invite status: ",e.status]}),a&&(0,mt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mt.jsx)("button",{type:"button",onClick:()=>S(r,"decline"),disabled:i,className:"rounded border border-red-500/40 bg-red-500/10 px-2 py-1 text-[11px] font-semibold text-red-300 hover:bg-red-500/20 disabled:opacity-60",children:"Decline"}),(0,mt.jsx)("button",{type:"button",onClick:()=>S(r,"accept"),disabled:i,className:"rounded border border-emerald-500/40 bg-emerald-500/10 px-2 py-1 text-[11px] font-semibold text-emerald-300 hover:bg-emerald-500/20 disabled:opacity-60",children:"Accept"})]})]})]},r)}),!a&&0===j.length&&(0,mt.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-website-neutral-600 space-y-2 opacity-60",children:[(0,mt.jsx)(Ps,{size:42,strokeWidth:1}),(0,mt.jsx)("p",{className:"text-xs uppercase tracking-widest",children:"No messages found"})]})]})]})}const Us=Ur("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),qs=Ur("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function Ws(){const e=(0,t.useContext)(Sr),n=ne(),r=sessionStorage.getItem("session_ID"),s="true"===sessionStorage.getItem("adminPermission"),a={name:localStorage.getItem("player_username")||"Adventurer",role:s?"Administrator":"Player",level:s?99:1,avatarUrl:null},i=e=>r?`/ISK/${r}${e}`:"/login",l="flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-all duration-200 hover:bg-website-default-800 group";return(0,mt.jsxs)("div",{className:"flex flex-col w-full font-body",children:[(0,mt.jsxs)("div",{className:"flex items-center gap-4 mb-6 p-1",children:[(0,mt.jsxs)("div",{className:"relative",children:[(0,mt.jsx)("div",{className:"h-12 w-12 rounded-full bg-gradient-to-tr from-website-highlights-600 to-website-specials-500 p-0.5",children:(0,mt.jsx)("div",{className:"flex h-full w-full items-center justify-center rounded-full bg-website-default-900 text-lg font-bold",children:a.avatarUrl?(0,mt.jsx)("img",{src:a.avatarUrl,alt:"avatar",className:"rounded-full"}):a.name.charAt(0).toUpperCase()})}),(0,mt.jsx)("span",{className:"absolute bottom-0 right-0 h-3 w-3 rounded-full bg-website-highlights-500 border-2 border-website-default-900 shadow-[0_0_8px_rgba(15,52,96,0.8)]"})]}),(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("span",{className:"text-sm font-bold text-website-neutral-50 leading-tight",children:a.name}),(0,mt.jsx)("span",{className:"text-[11px] text-website-highlights-400 font-medium uppercase tracking-wider",children:a.role})]})]}),(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-6",children:[(0,mt.jsxs)("div",{className:"flex flex-col items-center p-2 rounded-lg bg-website-default-800/50 border border-website-default-700",children:[(0,mt.jsx)("span",{className:"text-[10px] uppercase text-website-neutral-500",children:"Level"}),(0,mt.jsx)("span",{className:"text-sm font-bold text-website-specials-400",children:a.level})]}),(0,mt.jsxs)("div",{className:"flex flex-col items-center p-2 rounded-lg bg-website-default-800/50 border border-website-default-700",children:[(0,mt.jsx)("span",{className:"text-[10px] uppercase text-website-neutral-500",children:"Reputation"}),(0,mt.jsx)("span",{className:"text-sm font-bold text-website-highlights-400",children:"98"})]})]}),(0,mt.jsxs)("nav",{className:"flex flex-col space-y-1 mb-6",children:[(0,mt.jsxs)(lt,{to:i("/home"),className:l,children:[(0,mt.jsx)(Es,{size:18,className:"text-website-neutral-500 group-hover:text-website-specials-500"}),(0,mt.jsx)("span",{className:"text-website-neutral-200 group-hover:text-website-neutral-50",children:"Public Profile"})]}),(0,mt.jsxs)(lt,{to:i("/lobby"),className:l,children:[(0,mt.jsx)(Us,{size:18,className:"text-website-neutral-500 group-hover:text-website-specials-500"}),(0,mt.jsx)("span",{className:"text-website-neutral-200 group-hover:text-website-neutral-50",children:"Security"})]}),(0,mt.jsxs)(lt,{to:i("/settings"),className:l,children:[(0,mt.jsx)(qs,{size:18,className:"text-website-neutral-500 group-hover:text-website-specials-500"}),(0,mt.jsx)("span",{className:"text-website-neutral-200 group-hover:text-website-neutral-50",children:"Settings"})]})]}),(0,mt.jsxs)("button",{type:"button",onClick:()=>{const t=localStorage.getItem("player_ID");t&&e.emit("playerData_logOff",{playerID:t}),localStorage.removeItem("player_ID"),localStorage.removeItem("player_username"),sessionStorage.removeItem("session_ID"),sessionStorage.removeItem("adminPermission"),sessionStorage.removeItem("lastLocation"),n("/login")},className:"flex items-center justify-center gap-2 w-full py-2.5 rounded-lg bg-website-specials-500 hover:bg-website-specials-600 text-white text-xs font-bold uppercase tracking-widest transition-colors shadow-lg shadow-website-specials-900/20",children:[(0,mt.jsx)(ks,{size:14}),"Sign Out"]}),(0,mt.jsxs)("p",{className:"mt-3 text-[10px] text-website-neutral-500 text-center uppercase tracking-widest flex items-center justify-center gap-1",children:[(0,mt.jsx)(Os,{className:"size-3"}),"Session Active"]})]})}const Ks=Ur("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ys=Ur("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),Xs=Ur("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),Vs=Ur("circle-user-round",[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);function Qs(e){let{className:n="",title:r}=e;const s=(0,t.useContext)(Sr),[a,i]=(0,t.useState)(null),[l,o]=(0,t.useState)(0),c=Z(),d=(0,t.useRef)(null),u="menu"===a,h="mail"===a,p="profile"===a,m=e=>{i(t=>t===e?null:e)},f=(0,t.useCallback)(async()=>{const e=localStorage.getItem("player_ID");if(!s||!e)return void o(0);const t=await ns(s,"mail_call",{playerID:e});null!==t&&void 0!==t&&t.success&&o(Number(null===t||void 0===t?void 0:t.unreadCount)||0)},[s]);(0,t.useEffect)(()=>{function e(e){d.current&&!d.current.contains(e.target)&&i(null)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,t.useEffect)(()=>{function e(e){"Escape"===e.key&&i(null)}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,t.useEffect)(()=>{i(null)},[c.key]),(0,t.useEffect)(()=>{f()},[f,c.key]),(0,t.useEffect)(()=>{h&&f()},[h,f]),(0,t.useEffect)(()=>{const e=()=>{f()};return window.addEventListener("mailbox:updated",e),()=>window.removeEventListener("mailbox:updated",e)},[f]);const b=(0,t.useMemo)(()=>{const e=((null===c||void 0===c?void 0:c.pathname)||"/").split("/").filter(Boolean);if(0===e.length)return"Home";const t=decodeURIComponent(e[e.length-1]);return t.charAt(0).toUpperCase()+t.slice(1)},[null===c||void 0===c?void 0:c.pathname]),g=function(e){return["absolute top-full bg-website-default-900/95 backdrop-blur-md shadow-2xl transition-all duration-300 border-t-2 border-website-specials-500 z-50","left"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"left")?"left-0 border-r border-website-default-700":"right-0 border-l border-website-default-700",e?"opacity-100 translate-y-0 visible":"opacity-0 -translate-y-2 invisible pointer-events-none"].join(" ")},v=e=>"p-4 transition-colors duration-200 hover:bg-website-default-800 flex items-center justify-center "+(e?"text-website-specials-500 bg-website-default-800":"text-website-neutral-100");return(0,mt.jsxs)("header",{ref:d,className:`font-body bg-website-default-900 w-full h-16 text-white flex justify-between items-stretch sticky top-0 border-b border-website-default-700 z-50 ${n}`,children:[(0,mt.jsxs)("div",{className:"relative flex",children:[(0,mt.jsx)("button",{type:"button",className:v(u),onClick:()=>m("menu"),"aria-expanded":u,children:u?(0,mt.jsx)(Ks,{size:24}):(0,mt.jsx)(Ys,{size:24})}),(0,mt.jsx)("div",{className:`${g(u,"left")} w-64 p-2`,children:(0,mt.jsx)(Ts,{})})]}),(0,mt.jsx)("div",{className:"flex items-center justify-center",children:(0,mt.jsx)("h1",{className:"text-lg font-semibold tracking-wide uppercase text-website-neutral-50",children:r||b})}),(0,mt.jsxs)("div",{className:"flex items-stretch",children:[(0,mt.jsxs)("div",{className:"relative flex",children:[(0,mt.jsx)("button",{type:"button",className:v(h),onClick:()=>m("mail"),children:(0,mt.jsxs)("div",{className:"relative",children:[(0,mt.jsx)(Xs,{size:24}),l>0&&(0,mt.jsxs)("span",{className:"absolute -top-2 -right-2 flex h-4 min-w-4 px-1",children:[(0,mt.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-website-specials-400 opacity-75"}),(0,mt.jsx)("span",{className:"relative inline-flex rounded-full h-4 min-w-4 px-1 bg-website-specials-500 text-[10px] items-center justify-center font-bold",children:l>9?"9+":l})]})]})}),(0,mt.jsx)("div",{className:`${g(h,"right")} w-[350px] p-4 max-h-[80vh] overflow-y-auto scrollbar-transparent`,children:(0,mt.jsx)(Hs,{})})]}),(0,mt.jsxs)("div",{className:"relative flex border-l border-website-default-800",children:[(0,mt.jsx)("button",{type:"button",className:v(p),onClick:()=>m("profile"),children:(0,mt.jsx)(Vs,{size:24})}),(0,mt.jsx)("div",{className:`${g(p,"right")} w-64 p-4`,children:(0,mt.jsx)(Ws,{})})]})]})]})}const Gs=Ur("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function Js(e){let{className:t=""}=e;const n="flex items-center gap-2 px-4 py-1 text-website-neutral-100 hover:text-website-specials-500 transition-colors duration-200";return(0,mt.jsx)("footer",{className:`w-full bg-website-default-900 border-t border-website-default-700 font-body py-10 px-4 ${t}`,children:(0,mt.jsxs)("div",{className:"max-w-6xl mx-auto flex flex-col items-center gap-8",children:[(0,mt.jsxs)("nav",{className:"flex flex-wrap justify-center items-center divide-x divide-website-default-700 uppercase tracking-widest text-xs font-semibold",children:[(0,mt.jsxs)(lt,{to:"/",className:n,children:[(0,mt.jsx)(ys,{size:14}),"Home"]}),(0,mt.jsxs)("a",{href:"https://github.com/Yisong-Lin-Coding/DnM",target:"_blank",rel:"noopener noreferrer",className:n,children:[(0,mt.jsx)(Gs,{size:14}),"Help"]}),(0,mt.jsxs)("a",{href:"https://github.com/Yisong-Lin-Coding/DnM",target:"_blank",rel:"noopener noreferrer",className:n,children:[(0,mt.jsx)(js,{size:14}),"Github"]}),(0,mt.jsxs)("a",{href:"https://www.linkedin.com/in/yisong-lin-8605a3357/",target:"_blank",rel:"noopener noreferrer",className:n,children:[(0,mt.jsx)(Ns,{size:14}),"Linkedin"]})]}),(0,mt.jsx)("div",{className:"w-16 h-px bg-website-specials-500/50"}),(0,mt.jsx)("div",{className:"max-w-2xl text-center",children:(0,mt.jsxs)("p",{className:"text-website-neutral-500 text-[11px] leading-relaxed uppercase tracking-tighter opacity-80",children:["All game mechanics and content from the System Reference Document are Open Game Content under the ",(0,mt.jsx)("span",{className:"text-website-neutral-300",children:"Open Game License v1.0a"}),". All other content is Product Identity of ",(0,mt.jsx)("span",{className:"text-website-specials-400",children:"Yisong Lin"}),"\xa9 ",(new Date).getFullYear()," and may not be used without permission."]})})]})})}function Zs(e){let{children:t,className:n=""}=e;return(0,mt.jsx)("div",{className:`grid grid-cols-[1fr_5fr_1fr] grid-rows-[auto_1fr_auto] overflow-x-hidden max-w-screen min-h-screen bg-website-default-900 text-center shadow-lg text-website-default-100  justify-center ${n}`,children:t})}Zs.Header=function(e){let{children:t,className:n="",title:r}=e;return(0,mt.jsx)(Qs,{className:`col-span-3 row-start-1 ${n}`,title:r,children:t})},Zs.Left=function(e){let{children:t,className:n=""}=e;return(0,mt.jsx)("div",{className:`col-start-1 row-start-2 ${n}`,children:t})},Zs.Right=function(e){let{children:t,className:n=""}=e;return(0,mt.jsx)("div",{className:`col-start-3 row-start-2 ${n}`,children:t})},Zs.Center=function(e){let{children:t,className:n=""}=e;return(0,mt.jsx)("div",{className:`col-start-2 row-start-2 ${n}`,children:t})},Zs.Footer=function(e){let{children:t,className:n=""}=e;return(0,mt.jsx)(Js,{className:`col-span-3 row-start-3 w-full  -mx-8 ${n}`,children:t})};const ea={lore:{label:"Lore",icon:As,description:"World notes, setting references, and system context for your campaigns."},classes:{label:"Classes",icon:Cs,description:"Class overviews, progression notes, and playstyle references."},backgrounds:{label:"Backgrounds",icon:Es,description:"Character background guides and story-first templates."},races:{label:"Races",icon:Vr,description:"Race and lineage references, traits, and feature notes."},spells:{label:"Spells",icon:Ms,description:"Spell lookup and magical rules references for play."},items:{label:"Items",icon:Is,description:"Item catalogs, equipment notes, and inventory references."},enemies:{label:"Enemies",icon:_s,description:"Enemy concepts, encounter references, and challenge ideas."}},ta=["lore","classes","backgrounds","races","spells","items","enemies"];function na(){const{topic:e}=se(),t=ea[e]?e:"lore",n=sessionStorage.getItem("session_ID"),r=n?`/ISK/${n}/lore`:"/login",s=ea[t],a=s.icon;return(0,mt.jsxs)(Zs,{className:"bg-website-default-900 text-website-default-100",children:[(0,mt.jsx)(Qs,{className:"col-span-3",title:"Lore Directory"}),(0,mt.jsx)(Zs.Left,{className:"row-span-1 col-start-1"}),(0,mt.jsxs)(Zs.Center,{className:"row-span-1 col-start-2 min-h-screen px-6 py-8",children:[(0,mt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:ta.map(e=>{const n=ea[e],s=n.icon,a=t===e,i="lore"===e?r:`${r}/${e}`;return(0,mt.jsxs)(lt,{to:i,className:"rounded-xl border p-4 text-left transition-colors "+(a?"border-website-specials-500 bg-website-specials-500/10":"border-website-default-700 bg-website-default-800/60 hover:bg-website-default-800"),children:[(0,mt.jsxs)("div",{className:"flex items-center gap-2 text-website-neutral-50 font-semibold",children:[(0,mt.jsx)(s,{className:"size-4"}),n.label]}),(0,mt.jsx)("p",{className:"text-sm text-website-neutral-300 mt-2",children:n.description})]},e)})}),(0,mt.jsxs)("div",{className:"mt-8 rounded-xl border border-website-default-700 bg-website-default-800/60 p-6 text-left",children:[(0,mt.jsxs)("div",{className:"flex items-center gap-2 text-lg font-semibold text-website-neutral-50",children:[(0,mt.jsx)(a,{className:"size-5 text-website-specials-400"}),s.label]}),(0,mt.jsx)("p",{className:"mt-3 text-sm text-website-neutral-300",children:s.description}),(0,mt.jsx)("p",{className:"mt-2 text-sm text-website-neutral-400",children:"This section is now routable and can be expanded with data-backed content next."}),(0,mt.jsxs)("div",{className:"mt-6 flex flex-wrap gap-3",children:[(0,mt.jsxs)("a",{href:"https://github.com/Yisong-Lin-Coding/DnM",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 rounded-md border border-website-default-600 px-3 py-2 text-sm hover:bg-website-default-700",children:[(0,mt.jsx)(js,{className:"size-4"}),"Project GitHub"]}),(0,mt.jsxs)("a",{href:"https://www.linkedin.com/in/yisong-lin-8605a3357/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 rounded-md border border-website-default-600 px-3 py-2 text-sm hover:bg-website-default-700",children:[(0,mt.jsx)(Ns,{className:"size-4"}),"Creator LinkedIn"]})]})]})]}),(0,mt.jsx)(Zs.Right,{className:"col-start-3"}),(0,mt.jsx)(Zs.Footer,{className:"col-span-3"})]})}const ra={floor:0,obstacle:2,wall:3},sa={floor:{fillAlpha:1,strokeColor:"#7DD3FC",lineWidth:1.5,lineDash:[6,6],labelColor:"#7DD3FC"},wall:{fillAlpha:1,strokeColor:"#FCA5A5",lineWidth:3,lineDash:[],labelColor:"#FCA5A5"},obstacle:{fillAlpha:.42,strokeColor:"#E5E7EB",lineWidth:2,lineDash:[3,4],labelColor:"#E5E7EB"}},aa={fillAlpha:.34,strokeColor:"#FCD34D",lineWidth:2,lineDash:[4,4],labelColor:"#FCD34D"},ia=(e,t,n)=>Math.max(t,Math.min(n,e)),la=e=>{const t=String(e||"").trim().toLowerCase();return"floor"===t||"wall"===t||"obstacle"===t?t:"obstacle"},oa=function(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const s=n&&"object"===typeof n&&!Array.isArray(n)?n:{},a=(e=>"point"===String(e||"").trim().toLowerCase()?"point":"directional")(s.type),i={id:String(s.id||`light_${r+1}`).trim()||`light_${r+1}`,name:String(s.name||("point"===a?`Lamp ${r+1}`:`Light ${r+1}`)).trim()||("point"===a?`Lamp ${r+1}`:`Light ${r+1}`),type:a,enabled:!1!==s.enabled,intensity:ia(null!==(e=Number(s.intensity))&&void 0!==e?e:.8,0,2),blend:ia(null!==(t=Number(s.blend))&&void 0!==t?t:.7,0,1),color:String(s.color||"#ffffff").trim()||"#ffffff"};if("point"===a){var l,o,c,d;i.worldX=Number(null!==(l=s.worldX)&&void 0!==l?l:null===(o=s.position)||void 0===o?void 0:o.x)||0,i.worldY=Number(null!==(c=s.worldY)&&void 0!==c?c:null===(d=s.position)||void 0===d?void 0:d.y)||0,i.range=Math.max(10,Number(s.range)||420)}else{const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=ia(Number(null===e||void 0===e?void 0:e.x)||0,-1,1),n=ia(Number(null===e||void 0===e?void 0:e.y)||0,-1,1),r=Math.hypot(t,n);return r<=1||0===r?{x:t,y:n}:{x:t/r,y:n/r}}({x:s.x,y:s.y});i.x=e.x,i.y=e.y}return i},ca=e=>Math.round(Number(null===e||void 0===e?void 0:e.zLevel)||0),da=e=>Math.max(0,Number(null===e||void 0===e?void 0:e.elevationHeight)||0),ua=e=>e?"rect"===String(e.type||"circle").toLowerCase()?Math.max(20,Math.max(Number(e.width)||0,Number(e.height)||0)/2):Math.max(20,Number(e.size)||0):20,ha=(e,t,n)=>({x:t*e.zoom-e.x,y:n*e.zoom-e.y}),pa=e=>!Number.isFinite(e)||e<=0?1:Math.max(.1,.26-.05*(e-1)),ma=(e,t)=>{if("floor"!==la(null===e||void 0===e?void 0:e.terrainType))return"base";const n=String((null===e||void 0===e?void 0:e.floorTypeId)||"").trim(),r=t.get(n);return(e=>"effect"===String(e||"").trim().toLowerCase()?"effect":"base")((null===r||void 0===r?void 0:r.floorVisualType)||(null===r||void 0===r?void 0:r.visualType))},fa=(e,t)=>{const n=la(null===e||void 0===e?void 0:e.terrainType);var r;if("floor"!==n)return null!==(r=ra[n])&&void 0!==r?r:2;return"effect"===ma(e,t)?1:0},ba=new Map,ga=e=>String(e||"").trim().toLowerCase(),va=e=>{const t=ga(e);if(!t)return null;const n=ba.get(t);if(n)return"ready"===n.status?n.image:null;const r=function(e){const t=gt(e);return vt[t]||null}(t);if(!r)return ba.set(t,{status:"missing",image:null}),null;if("undefined"===typeof Image)return ba.set(t,{status:"error",image:null}),null;const s=new Image,a={status:"loading",image:s};return ba.set(t,a),s.onload=()=>{a.status="ready"},s.onerror=()=>{a.status="error"},s.src=r,null},xa=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=(Number(null===t||void 0===t?void 0:t.x)||0)*n.zoom-n.x,a=(Number(null===t||void 0===t?void 0:t.y)||0)*n.zoom-n.y,i=String((null===t||void 0===t?void 0:t.type)||"circle").toLowerCase(),l=!1!==r.fill,o=!1!==r.stroke;if("circle"===i){const r=(Number(null===t||void 0===t?void 0:t.size)||0)*n.zoom;return e.beginPath(),e.arc(s,a,Math.max(1,r),0,2*Math.PI),l&&e.fill(),o&&e.stroke(),{screenX:s,screenY:a}}if("rect"===i){const r=Math.max(1,(Number(null===t||void 0===t?void 0:t.width)||0)*n.zoom),i=Math.max(1,(Number(null===t||void 0===t?void 0:t.height)||0)*n.zoom);return l&&e.fillRect(s-r/2,a-i/2,r,i),o&&e.strokeRect(s-r/2,a-i/2,r,i),{screenX:s,screenY:a}}const c=Math.max(1,(Number(null===t||void 0===t?void 0:t.size)||0)*n.zoom);return e.beginPath(),e.moveTo(s,a-c),e.lineTo(s-c,a+c),e.lineTo(s+c,a+c),e.closePath(),l&&e.fill(),o&&e.stroke(),{screenX:s,screenY:a}},ya=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;const n=String((null===e||void 0===e?void 0:e.type)||"circle").toLowerCase(),r=Number(null===e||void 0===e?void 0:e.x)||0,s=Number(null===e||void 0===e?void 0:e.y)||0,a=[],i=e=>{for(let t=0;t<e.length;t++)a.push([e[t],e[(t+1)%e.length]])};if("rect"===n){const t=Math.max(1,Number(null===e||void 0===e?void 0:e.width)||0)/2,n=Math.max(1,Number(null===e||void 0===e?void 0:e.height)||0)/2;return i([{x:r-t,y:s-n},{x:r+t,y:s-n},{x:r+t,y:s+n},{x:r-t,y:s+n}]),a}if("circle"===n){const n=Math.max(1,Number(null===e||void 0===e?void 0:e.size)||0),l=[];for(let e=0;e<t;e++){const a=e/t*Math.PI*2;l.push({x:r+Math.cos(a)*n,y:s+Math.sin(a)*n})}return i(l),a}const l=Math.max(1,Number(null===e||void 0===e?void 0:e.size)||0);return i([{x:r,y:s-l},{x:r-l,y:s+l},{x:r+l,y:s+l}]),a},wa=(e,t,n,r)=>e*r-t*n,ja=(e,t,n,r,s,a,i,l)=>{const o=i-s,c=l-a,d=wa(n,r,o,c);if(Math.abs(d)<1e-10)return 1/0;const u=s-e,h=a-t,p=wa(u,h,o,c)/d,m=wa(u,h,n,r)/d;return p<-1e-8||m<-1e-8||m>1+1e-8?1/0:Math.max(0,p)},Na=function(e,t,n,r,s,a){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,l=a;for(const[o,c]of s){const s=ja(e,t,n,r,o.x,o.y,c.x,c.y);s>i&&s<l&&(l=s)}return l},ka=(e,t,n,r,s)=>{const a=1e-4,i=e-r-2,l=t-r-2,o=e+r+2,c=t+r+2,d=[{x:i,y:l},{x:o,y:l},{x:o,y:c},{x:i,y:c}],u=[...n,...d.map((e,t)=>[e,d[(t+1)%4]])],h=[];for(const[b,g]of u)for(const n of[b,g]){if((n.x-e)**2+(n.y-t)**2>(1.6*r)**2)continue;const s=Math.atan2(n.y-t,n.x-e);h.push(s-a),h.push(s),h.push(s+a)}h.sort((e,t)=>e-t);const p=s.zoom,m=s.x,f=s.y;return h.map(n=>{const s=Math.cos(n),a=Math.sin(n),i=((e,t,n,r,s,a)=>{let i=a;for(const[l,o]of s){const s=ja(e,t,n,r,l.x,l.y,o.x,o.y);s<i&&(i=s)}return{x:e+n*i,y:t+r*i}})(e,t,s,a,u,r+2);return{angle:n,x:i.x*p-m,y:i.y*p-f}})},Sa=(e,t,n,r,s,a,i)=>{var l,o;if(!r.enabled)return;const c=10*da(t);if(c<=0)return;const d=n.zoom,u=Number(r.x)||0,h=Number(r.y)||0,p=ia(Math.hypot(u,h),0,1);var m;if(p<.04)return e.save(),e.fillStyle="#000000",e.globalAlpha=ia(c/420*.15*a*s.shadowStrength*ia(null!==(m=Number(r.blend))&&void 0!==m?m:.7,0,1),.01,.18),e.shadowColor="rgba(0,0,0,0.4)",e.shadowBlur=Math.round(4*s.shadowSoftness*d),xa(e,t,n,{fill:!0,stroke:!1}),void e.restore();const f=ia(null!==(l=Number(r.intensity))&&void 0!==l?l:.8,0,2),b=ia(null!==(o=Number(r.blend))&&void 0!==o?o:.7,0,1),g=-u/p,v=-h/p,x=c*Math.pow(p,1.2)*(.5+.6*f)*s.shadowLength,y=ia(c/200*a*s.shadowStrength*b*p*.5,.02,.45),w=Math.round(2+.03*x*s.shadowSoftness),j=ya(t);e.save(),e.fillStyle="#000000",e.globalAlpha=y,w>0&&(e.shadowColor="#000000",e.shadowBlur=w);for(const[N,k]of j){if((k.y-N.y)*u+-(k.x-N.x)*h<=0)continue;const t=i&&i.length>0?Na(N.x,N.y,g,v,i,x):x,r=i&&i.length>0?Na(k.x,k.y,g,v,i,x):x,s=N.x*d-n.x,a=N.y*d-n.y,l=k.x*d-n.x,o=k.y*d-n.y,c=(N.x+g*t)*d-n.x,p=(N.y+v*t)*d-n.y,m=(k.x+g*r)*d-n.x,f=(k.y+v*r)*d-n.y;e.beginPath(),e.moveTo(s,a),e.lineTo(l,o),e.lineTo(m,f),e.lineTo(c,p),e.closePath(),e.fill()}e.restore()},Aa=function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(null===r||void 0===r||!r.enabled||null===r||void 0===r||!r.shadowEnabled)return;if(!Array.isArray(null===r||void 0===r?void 0:r.sources)||0===r.sources.length)return;if(!t||0===t.length)return;const a=t.map(e=>ya(e)),i=a.flat();r.sources.forEach(l=>{null!==l&&void 0!==l&&l.enabled&&("point"!==l.type?"directional"===l.type&&t.forEach((t,i)=>{const o=[];for(let e=0;e<a.length;e++)if(e!==i)for(const t of a[e])o.push(t);Sa(e,t,n,l,r,s,o)}):((e,t,n,r,s,a)=>{var i,l;if(!t.enabled)return;const o=r.zoom,c=Number(t.worldX)||0,d=Number(t.worldY)||0,u=Math.max(10,Number(t.range)||420),h=ia(null!==(i=Number(t.intensity))&&void 0!==i?i:.8,0,2),p=ia(null!==(l=Number(t.blend))&&void 0!==l?l:.7,0,1),m=ka(c,d,n,u,r);if(m.length<3)return;const f=ia(s.shadowStrength*p*h*a*.78,0,.9),b=c*o-r.x,g=d*o-r.y,v=u*o,x=Math.round(6*s.shadowSoftness);e.save(),e.fillStyle=`rgba(0,0,0,${f})`,x>0&&(e.shadowColor=`rgba(0,0,0,${f})`,e.shadowBlur=x),e.beginPath(),e.arc(b,g,v,0,2*Math.PI,!1);const y=m[m.length-1];e.moveTo(y.x,y.y);for(let w=m.length-2;w>=0;w--)e.lineTo(m[w].x,m[w].y);e.closePath(),e.fill("evenodd"),e.restore()})(e,l,i,n,r,s))})},Ca=function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;null!==r&&void 0!==r&&r.enabled&&null!==r&&void 0!==r&&r.shadowEnabled&&Array.isArray(null===r||void 0===r?void 0:r.sources)&&0!==r.sources.length&&r.sources.forEach(a=>{a&&a.enabled&&("directional"!==a.type?"point"===a.type&&function(e,t,n,r,s){var a,i;let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;if(!r.enabled)return;if(10*da(t)<=0)return;Number(null===n||void 0===n?void 0:n.zoom);const o=Number(null===t||void 0===t?void 0:t.x)||0,c=Number(null===t||void 0===t?void 0:t.y)||0,d=Number(null===r||void 0===r?void 0:r.worldX)||0,u=Number(null===r||void 0===r?void 0:r.worldY)||0,h=Math.max(10,Number(null===r||void 0===r?void 0:r.range)||420),p=o-d,m=c-u,f=Math.hypot(p,m);if(f>h)return;const b=Math.max(0,1-f/h);if(b<.05)return;const g=ia(null!==(a=Number(null===r||void 0===r?void 0:r.intensity))&&void 0!==a?a:.8,0,2),v=ia(null!==(i=Number(null===r||void 0===r?void 0:r.blend))&&void 0!==i?i:.7,0,1);Sa(e,t,n,{enabled:!0,x:-(f>0?p/f:0),y:-(f>0?m/f:0),intensity:g*b,blend:v},s,l)}(e,t,n,a,r,s):function(e,t,n,r,s){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;if(!r.enabled)return;10*da(t)<=0||Sa(e,t,n,r,s,a,null)}(e,t,n,a,r,s))})},Ea=(e,t,n)=>{const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=String((null===e||void 0===e?void 0:e.type)||"circle").toLowerCase(),n=Number(null===e||void 0===e?void 0:e.x)||0,r=Number(null===e||void 0===e?void 0:e.y)||0;if("rect"===t){const t=Math.max(1,Number(null===e||void 0===e?void 0:e.width)||0)/2,s=Math.max(1,Number(null===e||void 0===e?void 0:e.height)||0)/2;return{minX:n-t,maxX:n+t,minY:r-s,maxY:r+s}}const s=Math.max(1,Number(null===e||void 0===e?void 0:e.size)||0);return{minX:n-s,maxX:n+s,minY:r-s,maxY:r+s}}(t),s=ha(n,r.minX,r.minY),a=ha(n,r.maxX,r.minY),i=ha(n,r.minX,r.maxY),l=ha(n,r.maxX,r.maxY),o=ha(n,(r.minX+r.maxX)/2,r.minY),c={x:o.x,y:o.y-32};e.save(),e.setLineDash([6,4]),e.strokeStyle="#93c5fd",e.lineWidth=1.5,e.strokeRect(s.x,s.y,Math.max(1,a.x-s.x),Math.max(1,i.y-s.y)),e.setLineDash([]);[s,a,l,i].forEach(t=>{e.beginPath(),e.fillStyle="#ffffff",e.strokeStyle="#2563eb",e.lineWidth=2,e.arc(t.x,t.y,8,0,2*Math.PI),e.fill(),e.stroke()}),e.beginPath(),e.moveTo(o.x,o.y),e.lineTo(c.x,c.y),e.strokeStyle="#f59e0b",e.lineWidth=1.5,e.stroke(),e.fillStyle="#fbbf24",e.strokeStyle="#92400e",e.lineWidth=1.5,e.fillRect(c.x-7,c.y-7,14,14),e.strokeRect(c.x-7,c.y-7,14,14),e.restore()},Ma=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{isGhost:s=!1,showLabel:a=!0,baseOpacity:i=1,isSelected:l=!1,floorVisualType:o="base",lighting:c=null,drawShadows:d=!0}=r,u=Math.max(.05,Math.min(1,i)),h=la(null===t||void 0===t?void 0:t.terrainType),p=function(e){const t=sa[e]||sa.obstacle;return"floor"===e&&"effect"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base")?{...t,...aa}:t}(h,o),m="floor"===h&&"effect"===o?"FLOOR FX":h.toUpperCase(),f=ga(null===t||void 0===t?void 0:t.mapAssetKey),b="rect"===String((null===t||void 0===t?void 0:t.type)||"circle").toLowerCase()?va(f):null,g=Boolean(b),v=Math.round(da(t));e.save(),d&&!s&&c&&Ca(e,t,n,c,u),e.strokeStyle=p.strokeColor,e.lineWidth=p.lineWidth,e.setLineDash(p.lineDash),e.fillStyle=(null===t||void 0===t?void 0:t.color)||"#3B82F6",e.globalAlpha=u*p.fillAlpha;const x=g?((e,t,n,r)=>{if(!r)return null;const s=(Number(null===t||void 0===t?void 0:t.x)||0)*n.zoom-n.x,a=(Number(null===t||void 0===t?void 0:t.y)||0)*n.zoom-n.y,i=Math.max(1,(Number(null===t||void 0===t?void 0:t.width)||0)*n.zoom),l=Math.max(1,(Number(null===t||void 0===t?void 0:t.height)||0)*n.zoom);return e.imageSmoothingEnabled=!0,e.drawImage(r,s-i/2,a-l/2,i,l),{screenX:s,screenY:a}})(e,t,n,b):xa(e,t,n,{fill:!0,stroke:!1});if(e.globalAlpha=u,xa(e,t,n,{fill:!1,stroke:!0}),l&&(e.setLineDash([]),e.lineWidth=Math.max(4,p.lineWidth+2),e.strokeStyle="#FDE047",xa(e,t,n,{fill:!1,stroke:!0})),a&&x){e.setLineDash([]),e.fillStyle=p.labelColor,e.font="12px Arial",e.textAlign="center",e.globalAlpha=u;const r=`${f?`MAP:${f}`:m} | Z:${Math.round(Number(null===t||void 0===t?void 0:t.z)||0)} | L:${Math.round(Number(null===t||void 0===t?void 0:t.zLevel)||0)} | H:${v}`;e.fillText(r,x.screenX,x.screenY+ua(t)*n.zoom+14)}!s&&x&&((e,t,n,r,s)=>{const a=Number(null===t||void 0===t?void 0:t.maxHP),i=Number(null===t||void 0===t?void 0:t.hp);if(!Number.isFinite(a)||a<=0||!Number.isFinite(i))return;const l=Math.max(0,Math.min(1,i/a)),o=Math.max(18,Math.min(72,ua(t)*n.zoom*1.4)),c=s-ua(t)*n.zoom-14,d=r-o/2;e.save(),e.fillStyle="rgba(0,0,0,0.65)",e.fillRect(d,c,o,6),e.fillStyle=l>.4?"#22c55e":l>.15?"#f59e0b":"#ef4444",e.fillRect(d,c,o*l,6),e.strokeStyle="rgba(255,255,255,0.7)",e.lineWidth=1,e.strokeRect(d,c,o,6),e.restore()})(e,t,n,x.screenX,x.screenY),e.restore()},Ia=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=Array.isArray(null===t||void 0===t?void 0:t.mapObjects)?t.mapObjects:[],r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=new Map;return(Array.isArray(e)?e:[]).forEach(e=>{const n=String((null===e||void 0===e?void 0:e.id)||"").trim();n&&!t.has(n)&&t.set(n,e)}),t}(Array.isArray(null===t||void 0===t?void 0:t.floorTypes)?t.floorTypes:[]),s=Math.round(Number(null===t||void 0===t?void 0:t.currentZLevel)||0),a=s>=0?0:s,i=String(null!==(e=null===t||void 0===t?void 0:t.selectedMapObjectID)&&void 0!==e?e:""),l=[...n].sort((e,t)=>{const n=ca(e)-ca(t);if(0!==n)return n;const s=(Number(null===e||void 0===e?void 0:e.z)||0)-(Number(null===t||void 0===t?void 0:t.z)||0);return 0!==s?s:fa(e,r)-fa(t,r)}),o=l.filter(e=>{const t=ca(e);return t<s&&t>=a}),c=l.filter(e=>ca(e)===s),d=o.filter(e=>"floor"===la(null===e||void 0===e?void 0:e.terrainType)),u=o.filter(e=>"floor"!==la(null===e||void 0===e?void 0:e.terrainType)),h=c.filter(e=>"floor"===la(null===e||void 0===e?void 0:e.terrainType)),p=c.filter(e=>"floor"!==la(null===e||void 0===e?void 0:e.terrainType)),m=c.find(e=>{var t;return String(null!==(t=null===e||void 0===e?void 0:e.id)&&void 0!==t?t:"")===i})||null;return{camera:(null===t||void 0===t?void 0:t.camera)||null,floorTypesByID:r,currentZLevel:s,selectedMapObjectID:i,blockedMovePreview:(null===t||void 0===t?void 0:t.blockedMovePreview)||null,showResizeHandles:Boolean(null===t||void 0===t?void 0:t.showResizeHandles),lowerLevelFloors:d,lowerLevelSolids:u,activeFloors:h,activeSolids:p,activeObjects:c,selectedActiveObject:m}},_a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t||"object"!==typeof t)return Ia(e);if(t.cache&&"object"===typeof t.cache||(t.cache={}),t.cache.mapRenderData)return t.cache.mapRenderData;const n=Ia(e);return t.cache.mapRenderData=n,n},La=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{includeLighting:r=!1,includeSelection:s=!1,includeOverlay:a=!1}=n,i=null===e||void 0===e?void 0:e.camera,l=null===t||void 0===t?void 0:t.camera;if(!i||!l)return!0;if(i.x!==l.x||i.y!==l.y||i.zoom!==l.zoom)return!0;if(e.mapObjects!==t.mapObjects)return!0;if(e.floorTypes!==t.floorTypes)return!0;if(e.currentZLevel!==t.currentZLevel)return!0;if(s&&e.selectedMapObjectID!==t.selectedMapObjectID)return!0;if(a){if(e.blockedMovePreview!==t.blockedMovePreview)return!0;if(e.showResizeHandles!==t.showResizeHandles)return!0}return!(!r||e.lighting===t.lighting)},Ta={id:"mapFloors",shouldRedraw:(e,t)=>La(e,t,{includeSelection:!0}),draw(e,t,n,r){const s=_a(n,r),{camera:a,floorTypesByID:i,currentZLevel:l,selectedMapObjectID:o,lowerLevelFloors:c,activeFloors:d}=s;a&&t&&0!==t.width&&0!==t.height&&(e.clearRect(0,0,t.width,t.height),c.forEach(t=>{const n=l-ca(t);Ma(e,t,a,{isGhost:!0,showLabel:!1,baseOpacity:pa(n),floorVisualType:ma(t,i),drawShadows:!1})}),d.forEach(t=>{var n;Ma(e,t,a,{isGhost:!1,showLabel:!0,baseOpacity:1,isSelected:String(null!==(n=null===t||void 0===t?void 0:t.id)&&void 0!==n?n:"")===String(null!==o&&void 0!==o?o:""),floorVisualType:ma(t,i),drawShadows:!1})}))}},Pa={id:"mapSolids",shouldRedraw:(e,t)=>La(e,t,{includeSelection:!0}),draw(e,t,n,r){const s=_a(n,r),{camera:a,floorTypesByID:i,currentZLevel:l,selectedMapObjectID:o,lowerLevelSolids:c,activeSolids:d}=s;a&&t&&0!==t.width&&0!==t.height&&(e.clearRect(0,0,t.width,t.height),c.forEach(t=>{const n=l-ca(t);Ma(e,t,a,{isGhost:!0,showLabel:!1,baseOpacity:pa(n),floorVisualType:ma(t,i),drawShadows:!1})}),d.forEach(t=>{var n;Ma(e,t,a,{isGhost:!1,showLabel:!0,baseOpacity:1,isSelected:String(null!==(n=null===t||void 0===t?void 0:t.id)&&void 0!==n?n:"")===String(null!==o&&void 0!==o?o:""),floorVisualType:ma(t,i),drawShadows:!1})}))}},Da={enabled:!0,ambient:.24,sources:[{id:"sun",type:"directional",enabled:!0,x:.5,y:-.5,intensity:.8,blend:.7,color:"#ffffff"}]},za=(e,t,n)=>Math.max(t,Math.min(n,e)),Oa=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=za(Number(null===e||void 0===e?void 0:e.x)||0,-1,1),n=za(Number(null===e||void 0===e?void 0:e.y)||0,-1,1),r=Math.hypot(t,n);return 0===r||r<=1?{x:t,y:n}:{x:t/r,y:n/r}},Ra=function(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const s=n&&"object"===typeof n&&!Array.isArray(n)?n:{},a="point"===String(s.type||"").trim().toLowerCase()?"point":"directional",i={id:String(s.id||`light_${r+1}`).trim()||`light_${r+1}`,name:String(s.name||`Light ${r+1}`).trim()||`Light ${r+1}`,type:a,enabled:!1!==s.enabled,intensity:za(null!==(e=Number(s.intensity))&&void 0!==e?e:.8,0,2),blend:za(null!==(t=Number(s.blend))&&void 0!==t?t:.7,0,1),color:String(s.color||"#ffffff").trim()||"#ffffff"};var l,o,c,d;if("point"===a)return i.worldX=Number(null!==(l=s.worldX)&&void 0!==l?l:null===(o=s.position)||void 0===o?void 0:o.x)||0,i.worldY=Number(null!==(c=s.worldY)&&void 0!==c?c:null===(d=s.position)||void 0===d?void 0:d.y)||0,i.range=za(Number(s.range)||420,10,5e3),i;const u=Oa(s);return i.x=u.x,i.y=u.y,i},Fa=e=>{const t=String(e||"#ffffff").trim().match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:255,g:255,b:255}},$a=[{name:"background",component:Pr,zIndex:0},{name:"grid",component:zr,zIndex:1},{name:"mapFloors",component:Ta,zIndex:2},{name:"mapShadows",component:{id:"mapShadows",shouldRedraw:(e,t)=>La(e,t,{includeLighting:!0}),draw(e,t,n,r){if(!e||!t||0===t.width||0===t.height)return;e.clearRect(0,0,t.width,t.height);const s=_a(n,r),{camera:a,currentZLevel:i,lowerLevelSolids:l,activeSolids:o}=s;if(!a)return;const c=function(){var e,t,n,r,s;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(Array.isArray(null===a||void 0===a?void 0:a.sources)?a.sources:[]).map((e,t)=>oa(e,t));return 0===i.length&&(i=null!==a&&void 0!==a&&a.source&&"object"===typeof a.source&&!Array.isArray(a.source)?[oa(a.source,0)]:[oa({type:"directional",x:.5,y:-.5},0)]),{enabled:!1!==(null===a||void 0===a?void 0:a.enabled),ambient:ia(null!==(e=Number(null===a||void 0===a?void 0:a.ambient))&&void 0!==e?e:.24,0,.95),shadowEnabled:!1!==(null===a||void 0===a?void 0:a.shadowEnabled),shadowStrength:ia(null!==(t=Number(null===a||void 0===a?void 0:a.shadowStrength))&&void 0!==t?t:.62,0,1),shadowSoftness:ia(null!==(n=Number(null===a||void 0===a?void 0:a.shadowSoftness))&&void 0!==n?n:.55,0,1),shadowLength:ia(null!==(r=Number(null===a||void 0===a?void 0:a.shadowLength))&&void 0!==r?r:.9,0,2),shadowBlend:ia(null!==(s=Number(null===a||void 0===a?void 0:a.shadowBlend))&&void 0!==s?s:.68,0,1),sources:i}}((null===n||void 0===n?void 0:n.lighting)||{});if(null!==c&&void 0!==c&&c.enabled&&null!==c&&void 0!==c&&c.shadowEnabled){if(e.save(),l.length>0){const t=new Map;l.forEach(e=>{const n=ca(e);t.has(n)||t.set(n,[]),t.get(n).push(e)}),t.forEach((t,n)=>{const r=.82*pa(i-n);Aa(e,t,a,c,r)})}o.length>0&&Aa(e,o,a,c,1),e.restore()}}},zIndex:3},{name:"mapSolids",component:Pa,zIndex:4},{name:"lighting",component:{id:"lighting",shouldRedraw:()=>!0,draw(e,t,n){if(!e||!t||0===t.width||0===t.height)return;const r=t.width,s=t.height;e.clearRect(0,0,r,s);const a=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t&&"object"===typeof t?t:{};let r=(Array.isArray(n.sources)?n.sources:[]).map((e,t)=>Ra(e,t));return 0===r.length&&(r=n.source&&"object"===typeof n.source&&!Array.isArray(n.source)?[Ra(n.source,0)]:[Ra({...Da.sources[0]},0)]),{enabled:!1!==n.enabled,ambient:za(null!==(e=Number(n.ambient))&&void 0!==e?e:Da.ambient,0,.9),sources:r}}((null===n||void 0===n?void 0:n.lighting)||Da);if(!a.enabled)return;const i=(null===n||void 0===n?void 0:n.camera)||{x:0,y:0,zoom:1},l=za(a.ambient,0,.9);e.save(),e.fillStyle=`rgba(0,0,0,${l})`,e.fillRect(0,0,r,s),e.globalCompositeOperation="destination-out",a.sources.forEach(t=>{null!==t&&void 0!==t&&t.enabled&&("point"!==String(t.type)?((e,t,n,r,s)=>{const a=Oa(r),i=za(Math.hypot(a.x,a.y),0,1),l=za(r.intensity*r.blend,0,2),o=Fa(r.color);if(i<.02){const r=za(l*(.08+.22*s),.01,.18);return e.fillStyle=`rgba(${o.r},${o.g},${o.b},${r})`,void e.fillRect(0,0,t,n)}const c=t/2,d=n/2,u=Math.max(t,n)*(.22+.82*i),h=c+a.x*u,p=d+a.y*u,m=c-a.x*u,f=d-a.y*u,b=e.createLinearGradient(h,p,m,f),g=za((.1+.85*i)*l,.02,.9);b.addColorStop(0,`rgba(${o.r},${o.g},${o.b},${za(.95*g,.01,.9)})`),b.addColorStop(.58,`rgba(${o.r},${o.g},${o.b},${za(.45*g,.01,.7)})`),b.addColorStop(1,`rgba(${o.r},${o.g},${o.b},0)`),e.fillStyle=b,e.fillRect(0,0,t,n)})(e,r,s,t,l):((e,t,n,r,s)=>{const a=Number(null===r||void 0===r?void 0:r.zoom)||1,i=Number(null===r||void 0===r?void 0:r.x)||0,l=Number(null===r||void 0===r?void 0:r.y)||0,o=s.worldX*a-i,c=s.worldY*a-l,d=Math.max(8,s.range*a),u=za(s.intensity*s.blend,0,2),h=e.createRadialGradient(o,c,0,o,c,d),p=Fa(s.color);h.addColorStop(0,`rgba(${p.r},${p.g},${p.b},${za(.95*u,.02,.95)})`),h.addColorStop(.62,`rgba(${p.r},${p.g},${p.b},${za(.28*u,.01,.5)})`),h.addColorStop(1,`rgba(${p.r},${p.g},${p.b},0)`);const m=Math.max(0,o-d),f=Math.max(0,c-d),b=Math.min(t-m,2*d),g=Math.min(n-f,2*d);b<=0||g<=0||(e.fillStyle=h,e.fillRect(m,f,b,g))})(e,r,s,i,t))}),e.globalCompositeOperation="lighten",a.sources.forEach(t=>{if(null===t||void 0===t||!t.enabled)return;const n=Fa(t.color);if(255!==n.r||255!==n.g||255!==n.b)if("point"===String(t.type)){const a=Number(null===i||void 0===i?void 0:i.zoom)||1,l=Number(null===i||void 0===i?void 0:i.x)||0,o=Number(null===i||void 0===i?void 0:i.y)||0,c=t.worldX*a-l,d=t.worldY*a-o,u=Math.max(8,t.range*a),h=za(t.intensity*t.blend*.3,0,1),p=e.createRadialGradient(c,d,0,c,d,u);p.addColorStop(0,`rgba(${n.r},${n.g},${n.b},${h})`),p.addColorStop(.6,`rgba(${n.r},${n.g},${n.b},${.3*h})`),p.addColorStop(1,`rgba(${n.r},${n.g},${n.b},0)`);const m=Math.max(0,c-u),f=Math.max(0,d-u),b=Math.min(r-m,2*u),g=Math.min(s-f,2*u);b>0&&g>0&&(e.fillStyle=p,e.fillRect(m,f,b,g))}else{const a=Oa(t),i=za(Math.hypot(a.x,a.y),0,1);if(i<.02)return;const l=za(t.intensity*t.blend*.2,0,.4),o=r/2,c=s/2,d=Math.max(r,s)*(.22+.82*i),u=o+a.x*d,h=c+a.y*d,p=o-a.x*d,m=c-a.y*d,f=e.createLinearGradient(u,h,p,m);f.addColorStop(0,`rgba(${n.r},${n.g},${n.b},${l})`),f.addColorStop(.6,`rgba(${n.r},${n.g},${n.b},${.3*l})`),f.addColorStop(1,`rgba(${n.r},${n.g},${n.b},0)`),e.fillStyle=f,e.fillRect(0,0,r,s)}}),e.globalCompositeOperation="source-over";const o=e.createRadialGradient(r/2,s/2,Math.max(10,.22*Math.min(r,s)),r/2,s/2,.95*Math.max(r,s));o.addColorStop(0,"rgba(0,0,0,0)"),o.addColorStop(1,`rgba(0,0,0,${za(.22*l,.02,.2)})`),e.fillStyle=o,e.fillRect(0,0,r,s),e.restore()}},zIndex:5},{name:"mapEffects",component:{id:"mapEffects",shouldRedraw:(e,t)=>La(e,t,{includeSelection:!0,includeOverlay:!0}),draw(e,t,n,r){const s=_a(n,r),{camera:a,currentZLevel:i,blockedMovePreview:l,showResizeHandles:o,selectedMapObjectID:c,selectedActiveObject:d}=s;a&&t&&0!==t.width&&0!==t.height&&(e.clearRect(0,0,t.width,t.height),l&&ca(l)===i&&((e,t,n)=>{if(!t||!n)return;const r={screenX:(Number(null===t||void 0===t?void 0:t.x)||0)*n.zoom-n.x,screenY:(Number(null===t||void 0===t?void 0:t.y)||0)*n.zoom-n.y};e.save(),e.strokeStyle="#ef4444",e.fillStyle="rgba(239,68,68,0.16)",e.lineWidth=3,e.setLineDash([8,6]),e.globalAlpha=.95,xa(e,t,n,{fill:!0,stroke:!0}),e.setLineDash([]),e.fillStyle="#fecaca",e.font="11px Arial",e.textAlign="center",e.fillText("Collision",r.screenX,r.screenY-ua(t)*n.zoom-10),e.restore()})(e,l,a),o&&c&&d&&Ea(e,d,a))}},zIndex:6}],Ba=1.1,Ha=.25,Ua={floor:500,wall:1200,obstacle:700};function qa(e,t){const n=e=>{const t=String(e||"").toLowerCase();return"obstacle"===t?3:"wall"===t?2:"floor"===t?1:0};return[...arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]].sort((e,t)=>{const r=(Number(null===t||void 0===t?void 0:t.z)||0)-(Number(null===e||void 0===e?void 0:e.z)||0);return 0!==r?r:n(null===t||void 0===t?void 0:t.terrainType)-n(null===e||void 0===e?void 0:e.terrainType)}).find(n=>function(e,t,n){var r,s,a,i;if(!n)return!1;const l=String((null===n||void 0===n||null===(r=n.hitbox)||void 0===r?void 0:r.type)||n.type||"circle").toLowerCase(),o=Math.max(.1,Number(null===n||void 0===n||null===(s=n.hitbox)||void 0===s?void 0:s.scale)||1),c=(Number(n.x)||0)+(Number(null===n||void 0===n||null===(a=n.hitbox)||void 0===a?void 0:a.offsetX)||0),d=(Number(n.y)||0)+(Number(null===n||void 0===n||null===(i=n.hitbox)||void 0===i?void 0:i.offsetY)||0);if("rect"===l){const r=Math.max(1,(Number(n.width)||0)*o),s=Math.max(1,(Number(n.height)||0)*o);return Math.abs(e-c)<=r/2&&Math.abs(t-d)<=s/2}if("triangle"===l)return function(e,t,n,r,s){const a={x:n,y:r-s},i={x:n-s,y:r+s},l={x:n+s,y:r+s},o=(e,t,n)=>(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),c={x:e,y:t},d=o(c,a,i),u=o(c,i,l),h=o(c,l,a);return!((d<0||u<0||h<0)&&(d>0||u>0||h>0))}(e,t,c,d,Math.max(1,(Number(n.size)||0)*o));const u=Math.max(1,(Number(n.size)||0)*o),h=e-c,p=t-d;return h*h+p*p<=u*u}(e,t,n))||null}function Wa(e){return String(null!==e&&void 0!==e?e:"").trim()}function Ka(e,t){return!(!e||!t)&&(String(e.type||"")===String(t.type||"")&&Wa(e.id)===Wa(t.id))}function Ya(e){return Math.round(Number(null===e||void 0===e?void 0:e.zLevel)||0)}function Xa(e){const t=String((null===e||void 0===e?void 0:e.type)||"circle").toLowerCase(),n=Number(null===e||void 0===e?void 0:e.x)||0,r=Number(null===e||void 0===e?void 0:e.y)||0;if("rect"===t){const t=Math.max(1,Number(null===e||void 0===e?void 0:e.width)||0)/2,s=Math.max(1,Number(null===e||void 0===e?void 0:e.height)||0)/2;return{minX:n-t,maxX:n+t,minY:r-s,maxY:r+s}}const s=Math.max(1,Number(null===e||void 0===e?void 0:e.size)||0);return{minX:n-s,maxX:n+s,minY:r-s,maxY:r+s}}function Va(e){return"wall"===String((null===e||void 0===e?void 0:e.terrainType)||"").trim().toLowerCase()}function Qa(e,t,n){return{x:t*e.zoom-e.x,y:n*e.zoom-e.y}}function Ga(e){if(!e||"object"!==typeof e)return!1;const t=String(e.tagName||"").toUpperCase();return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t||Boolean(e.isContentEditable)}function Ja(e,t,n){const r=String((null===e||void 0===e?void 0:e.type)||"circle").toLowerCase(),s=(t.x+n.x)/2,a=(t.y+n.y)/2,i=Math.abs(n.x-t.x),l=Math.abs(n.y-t.y);if("rect"===r)return{x:Math.round(s),y:Math.round(a),overrides:{width:Math.max(8,Math.round(i)),height:Math.max(8,Math.round(l))}};const o=Math.max(4,Math.round(Math.max(i,l)/2));return{x:Math.round(s),y:Math.round(a),overrides:{size:o}}}const Za=function(){var e,n;const r=(0,t.useContext)(Sr),s=ne(),{gameID:a,sessionID:i}=se(),l=localStorage.getItem("player_ID"),o=i||sessionStorage.getItem("session_ID")||"default",{selectedChar:c,selectCharacter:d,fogEnabled:u,characters:h,lastMouse:p,setLastMouse:m,camera:f,handleCharacterAction:b,mapObjects:g,addMapObject:v,updateMapObject:x,deleteMapObject:y,updateCharacter:w,moveCharacter:j,isDM:N,setIsDM:k,backgroundKey:S,floorTypes:A,replaceFloorTypes:C,lighting:E,currentZLevel:M,stepZLevelUp:I,stepZLevelDown:_,mapObjectPlacement:L,clearMapObjectPlacement:T,placePendingMapObjectAt:P,lightPlacement:D,placeLightAt:z,clearLightPlacement:O,loadGameSnapshot:R}=Zt(),[F,$]=(0,t.useState)(320),[B,H]=(0,t.useState)(!1),[U,q]=(0,t.useState)(null),[W,K]=(0,t.useState)(null),[Y,X]=(0,t.useState)(null),[V,Q]=(0,t.useState)(""),[G,J]=(0,t.useState)(!0),[Z,ee]=(0,t.useState)(null),[te,re]=(0,t.useState)(""),[ae,ie]=(0,t.useState)(1),[le,oe]=(0,t.useState)(null),[ce,de]=(0,t.useState)(null),[ue,he]=(0,t.useState)(null),[pe,me]=(0,t.useState)(null),fe=(0,t.useRef)(!1),be=(0,t.useRef)({}),ge=(0,t.useRef)([]),ve=(0,t.useRef)(null),xe=(0,t.useRef)(!1),ye=(0,t.useRef)(!1),we=(0,t.useRef)(!1),je=(0,t.useRef)(!1),Ne=(0,t.useRef)(null),ke=(0,t.useRef)(!1),Se=(0,t.useRef)({mapObjects:[],backgroundKey:"",characters:[],floorTypes:[],currentZLevel:0,lighting:null}),Ae=(0,t.useRef)({KeyW:!1,KeyA:!1,KeyS:!1,KeyD:!1,KeyQ:!1,KeyE:!1}),Ce=(0,t.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"map_change";if(!r||!l||!a||!N||G)return;if(je.current)return;je.current=!0;const t=new Date,n=Se.current||{},s="turn_done"===e?"turn end":"map change",i=await ns(r,"campaign_saveGame",{playerID:l,campaignID:a,name:`Auto Save ${t.toLocaleString()}`,description:"Automatic save from active game session",snapshot:{mapObjects:Array.isArray(n.mapObjects)?n.mapObjects:[],backgroundKey:String(n.backgroundKey||""),characters:Array.isArray(n.characters)?n.characters:[],currentZLevel:Number(n.currentZLevel)||0,floorTypes:Array.isArray(n.floorTypes)?n.floorTypes:[],lighting:n.lighting&&"object"===typeof n.lighting?n.lighting:void 0},metadata:{source:"autosave",trigger:e},makeActive:!0,isAutoSave:!0});je.current=!1,null!==i&&void 0!==i&&i.success?re(`Autosaved (${s}) ${t.toLocaleTimeString()}`):re(`Autosave failed: ${(null===i||void 0===i?void 0:i.message)||"Unknown error"}`)},[r,l,a,N,G]),Ee=(0,t.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"map_change",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Boolean(null===t||void 0===t?void 0:t.immediate);Ne.current&&(clearTimeout(Ne.current),Ne.current=null),n?Ce(e):(re("Autosave queued..."),Ne.current=setTimeout(()=>{Ne.current=null,Ce(e)},900))},[Ce]),Me=(0,t.useCallback)(()=>{N&&(ie(e=>e+1),Ee("turn_done",{immediate:!0}))},[N,Ee]);(0,t.useEffect)(()=>()=>{Ne.current&&(clearTimeout(Ne.current),Ne.current=null)},[]),(0,t.useEffect)(()=>{const e=Er(String(S||"gray").toLowerCase());if(!e)return void(f.current.bgImage=null);const t=new Image;t.src=e,t.onload=()=>{f.current.bgImage=t}},[S,f]),(0,t.useEffect)(()=>{let e=!1;return async function(){var t;if(!r||!l||!a)return void(e||(J(!1),Q("Missing game context. Rejoin from lobby.")));const n=await ns(r,"campaign_getGameContext",{playerID:l,campaignID:a});if(e)return;if(null===n||void 0===n||!n.success)return J(!1),k(!1),void Q((null===n||void 0===n?void 0:n.message)||"Failed to load campaign permissions");const s=function(e,t){var n,r;const s=null===e||void 0===e||null===(n=e.permissions)||void 0===n?void 0:n.isDM;if("boolean"===typeof s)return s;if("string"===typeof s){const e=s.trim().toLowerCase();if("true"===e)return!0;if("false"===e)return!1}const a=String((null===e||void 0===e||null===(r=e.campaign)||void 0===r?void 0:r.dmId)||"").trim(),i=String(t||"").trim();return Boolean(a&&i&&a===i)}(n,l);k(s),Q(""),J(!1),Array.isArray(null===n||void 0===n?void 0:n.floorTypes)&&C(n.floorTypes);const i=null!==n&&void 0!==n&&null!==(t=n.engineState)&&void 0!==t&&t.snapshot&&"object"===typeof n.engineState.snapshot?n.engineState.snapshot:(null===n||void 0===n?void 0:n.snapshot)||{};xe.current=!0,ye.current=!0,R(i)}(),()=>{e=!0}},[r,l,a,k,R,C]),(0,t.useEffect)(()=>{if(!r||!a)return;const e=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(String((null===t||void 0===t?void 0:t.campaignID)||"")!==String(a))return;const n=null!==t&&void 0!==t&&null!==(e=t.engineState)&&void 0!==e&&e.snapshot&&"object"===typeof t.engineState.snapshot?t.engineState.snapshot:null;n&&(Array.isArray(null===t||void 0===t?void 0:t.floorTypes)&&C(t.floorTypes),xe.current=!0,ye.current=!0,R(n))};return r.on("campaign_gameStateUpdated",e),()=>{r.off("campaign_gameStateUpdated",e)}},[r,a,R,C]),(0,t.useEffect)(()=>{if(!r||!l||!a||!N||G)return;if(xe.current)return void(xe.current=!1);const e=setTimeout(async()=>{var e;if(we.current)return;we.current=!0;const t=await ns(r,"campaign_gameSyncWorld",{playerID:l,campaignID:a,statePatch:{mapObjects:g,backgroundKey:S,characters:h,floorTypes:A,lighting:E}});if(we.current=!1,null===t||void 0===t||!t.success)return void(null!==t&&void 0!==t&&t.message&&Q(e=>e||t.message));const n=null!==t&&void 0!==t&&null!==(e=t.engineState)&&void 0!==e&&e.snapshot&&"object"===typeof t.engineState.snapshot?t.engineState.snapshot:null;n&&(Q(""),Array.isArray(null===t||void 0===t?void 0:t.floorTypes)&&C(t.floorTypes),xe.current=!0,ye.current=!0,R(n))},160);return()=>clearTimeout(e)},[r,l,a,N,G,g,S,h,A,E,R,C]),(0,t.useEffect)(()=>{if(r&&l&&a&&N&&!G)return ye.current?(ye.current=!1,void(ke.current=!0)):void(ke.current?Ee("map_change"):ke.current=!0)},[r,l,a,N,G,g,S,h,A,E,M,Ee]),(0,t.useEffect)(()=>{const e=()=>{Object.values(be.current).forEach(e=>{e&&(e=>{const t=window.devicePixelRatio||1,n=e.getBoundingClientRect();e.width=Math.round(n.width*t),e.height=Math.round(n.height*t);const r=e.getContext("2d");r.setTransform(t,0,0,t,0,0)})(e)})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const Ie=e=>{const t=be.current.background;if(!t)return null;const n=t.getBoundingClientRect();return((e,t)=>({x:(e+f.current.x)/f.current.zoom,y:(t+f.current.y)/f.current.zoom}))(e.clientX-n.left,e.clientY-n.top)},_e=function(e,t){const n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?h:h.filter(e=>((e,t)=>{if(!u)return!0;const n=h.filter(e=>"player"===e.team);for(const r of n){const n=e-r.position.x,s=t-r.position.y;if(n*n+s*s<=r.visionDistance*r.visionDistance){let e=180*Math.atan2(s,n)/Math.PI-r.rotation;for(;e>180;)e-=360;for(;e<-180;)e+=360;if(Math.abs(e)<=r.visionArc/2)return!0}}return!1})(e.position.x,e.position.y));for(let r=n.length-1;r>=0;r-=1){const s=n[r],a=e-s.position.x,i=t-s.position.y,l=Math.max(1,Number(s.size)||0)/2;if(a*a+i*i<=l*l)return s}return null},Le=(0,t.useMemo)(()=>g.filter(e=>Ya(e)===M),[g,M]),Te=(0,t.useMemo)(()=>{const e=new Map;return(Array.isArray(A)?A:[]).forEach(t=>{const n=String((null===t||void 0===t?void 0:t.id)||"").trim();n&&!e.has(n)&&e.set(n,t)}),e},[A]),Pe=function(e,t){const n=_e(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2]);if(n)return{type:"character",id:n.id};const r=qa(e,t,Le);return r?{type:"mapObject",id:r.id}:null},De=(0,t.useMemo)(()=>{if(null===W||void 0===W||!W.type)return null;if("character"===W.type){const e=h.find(e=>Wa(null===e||void 0===e?void 0:e.id)===Wa(W.id));return e?{type:"character",id:e.id,entity:e}:null}if("mapObject"===W.type){const e=g.find(e=>Wa(null===e||void 0===e?void 0:e.id)===Wa(W.id));if(!e)return null;const t=Te.get(String((null===e||void 0===e?void 0:e.floorTypeId)||"").trim())||null;return{type:"mapObject",id:e.id,entity:e,floorType:t}}return null},[W,h,g,Te]);(0,t.useEffect)(()=>{Se.current={mapObjects:g,backgroundKey:S,characters:h,floorTypes:A,currentZLevel:M,lighting:E}},[g,S,h,A,M,E]),(0,t.useEffect)(()=>{W&&(De||K(null))},[W,De]);const ze=(0,t.useCallback)((e,t)=>{const n=Math.max(12,window.innerWidth-F-320-12),r=Math.max(12,window.innerHeight-120);return{x:Math.max(12,Math.min(Math.round(e),Math.round(n))),y:Math.max(12,Math.min(Math.round(t),Math.round(r)))}},[F]);(0,t.useEffect)(()=>{null!==De&&void 0!==De&&De.type?oe(e=>e&&Number.isFinite(e.x)&&Number.isFinite(e.y)?ze(e.x,e.y):ze(window.innerWidth-F-320-12,12)):de(null)},[De,F,ze]),(0,t.useEffect)(()=>{const e=()=>{oe(e=>e?ze(e.x,e.y):e)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[ze]),(0,t.useEffect)(()=>{if(!ce)return;const e=e=>{const t=ze(e.clientX-ce.offsetX,e.clientY-ce.offsetY);oe(t)},t=()=>de(null);return window.addEventListener("mousemove",e),window.addEventListener("mouseup",t),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[ce,ze]),(0,t.useEffect)(()=>{c&&K(e=>{const t={type:"character",id:c};return Ka(e,t)?e:t})},[c]),(0,t.useEffect)(()=>{let e;const t=()=>{if($a.some(e=>!be.current[e.name]))return void(e=requestAnimationFrame(t));if(null===f||void 0===f||!f.current)return void(e=requestAnimationFrame(t));(ge.current.length!==$a.length||$a.some((e,t)=>{const n=ge.current[t],r=be.current[e.name];return!n||n.canvas!==r||!n.ctx}))&&(ge.current=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(Array.isArray(e)?e:[]).map(e=>{const n=(null===t||void 0===t?void 0:t[e.name])||null;return{...e.component,ctx:null===n||void 0===n?void 0:n.getContext("2d"),canvas:n}})}($a,be.current));const n=ge.current,r={x:Number(f.current.x)||0,y:Number(f.current.y)||0,zoom:Number(f.current.zoom)||1,bgImage:f.current.bgImage||null},s="mapObject"===(null===W||void 0===W?void 0:W.type)?Wa(W.id):"",a={bgImage:r.bgImage,backgroundKey:S,camera:r,mapObjects:g,floorTypes:A,currentZLevel:M,selectedMapObjectID:s,blockedMovePreview:ue,lighting:E,showResizeHandles:N};Tr({layers:n,frame:{state:a,prevState:ve.current,cache:{}}}),ve.current=a,e=requestAnimationFrame(t)};return t(),()=>cancelAnimationFrame(e)},[f,g,A,M,W,ue,E,S,N]),(0,t.useEffect)(()=>{const e=e=>{if(B){const t=window.innerWidth-e.clientX;$(Math.max(200,Math.min(t,800)))}},t=()=>{H(!1)};return B&&(window.addEventListener("mousemove",e),window.addEventListener("mouseup",t)),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[B]),(0,t.useEffect)(()=>{const e=e=>{Ga(e.target)||Ae.current.hasOwnProperty(e.code)&&(Ae.current[e.code]=!0,e.preventDefault())},t=e=>{Ga(e.target)||Ae.current.hasOwnProperty(e.code)&&(Ae.current[e.code]=!1,e.preventDefault())};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),(0,t.useEffect)(()=>{const e=e=>{if(Ga(e.target))return;if("Space"===e.code)return e.preventDefault(),void I();if("ShiftLeft"===e.code||"ShiftRight"===e.code)return e.preventDefault(),void _();Ae.current.KeyW&&(f.current.y-=13),Ae.current.KeyS&&(f.current.y+=13),Ae.current.KeyA&&(f.current.x-=13),Ae.current.KeyD&&(f.current.x+=13),Ae.current.KeyQ&&(f.current.zoom*=.9090909090909091,f.current.zoom=Math.max(Ha,Math.min(f.current.zoom,4))),Ae.current.KeyE&&(f.current.zoom*=Ba,f.current.zoom=Math.max(Ha,Math.min(f.current.zoom,4)))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[f,_,I]),(0,t.useEffect)(()=>{const e=e=>{"Escape"===e.key&&(q(null),X(null),me(null),ee(null),he(null),K(null),d(null),T(),O())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[T,d]),(0,t.useEffect)(()=>{L||ee(null)},[L]);const Oe=(0,t.useCallback)(e=>{if(null===e||void 0===e||!e.type)return K(null),void d(null);const t={type:e.type,id:e.id};K(t),d("character"===t.type?t.id:null)},[d]),Re=e=>{if(Z&&N&&L){const t=Z.currentWorld||Z.startWorld,n=Ie(e)||t,r="number"===typeof(null===e||void 0===e?void 0:e.clientX)?e.clientX:Z.startClient.x,s="number"===typeof(null===e||void 0===e?void 0:e.clientY)?e.clientY:Z.startClient.y;if(Math.hypot(r-Z.startClient.x,s-Z.startClient.y)<=6)P(Z.startWorld.x,Z.startWorld.y,{zLevel:M});else{const e=Ja(L,Z.startWorld,n);P(e.x,e.y,{...e.overrides,zLevel:M})}ee(null)}fe.current=!1,X(null),me(null),he(null)},Fe=async(e,t)=>{var n;if(!r||!l||!a)return;const s=await ns(r,"campaign_gameDamageObject",{playerID:l,campaignID:a,objectID:e,amount:t});if(null===s||void 0===s||!s.success)return void(null!==s&&void 0!==s&&s.message&&Q(e=>e||s.message));const i=null!==s&&void 0!==s&&null!==(n=s.engineState)&&void 0!==n&&n.snapshot&&"object"===typeof s.engineState.snapshot?s.engineState.snapshot:null;i&&(xe.current=!0,ye.current=!0,R(i),Q(""))},$e=async e=>{const t=null===U||void 0===U?void 0:U.target,n=null!==U&&void 0!==U&&U.world&&Number.isFinite(Number(U.world.x))&&Number.isFinite(Number(U.world.y))?{x:Number(U.world.x),y:Number(U.world.y)}:null;if(null!==t&&void 0!==t&&t.type){if(q(null),"character"===t.type){const i=h.find(e=>Wa(null===e||void 0===e?void 0:e.id)===Wa(t.id));if(!i)return;if("info"===e)return void Oe(t);if("center"===e){var r,s,a;const e=Number(null===(r=f.current)||void 0===r?void 0:r.zoom)||1;return f.current.x=(Number(null===i||void 0===i||null===(s=i.position)||void 0===s?void 0:s.x)||0)*e-window.innerWidth/2,void(f.current.y=(Number(null===i||void 0===i||null===(a=i.position)||void 0===a?void 0:a.y)||0)*e-window.innerHeight/2)}if("placeHere"===e&&N&&n)return j(i.id,Math.round(n.x),Math.round(n.y)),void Oe({type:"character",id:i.id});if("toggleTeam"===e&&N){const e="enemy"===String((null===i||void 0===i?void 0:i.team)||"player").toLowerCase()?"player":"enemy";return w(i.id,{team:e}),void Oe({type:"character",id:i.id})}return"endTurn"===e&&N?void Me():void b(i.id,e)}if("mapObject"===t.type){const n=g.find(e=>Wa(null===e||void 0===e?void 0:e.id)===Wa(t.id));if(!n)return;if("inspect"===e)return void Oe(t);if("center"===e){var i;const e=Number(null===(i=f.current)||void 0===i?void 0:i.zoom)||1;return f.current.x=(Number(null===n||void 0===n?void 0:n.x)||0)*e-window.innerWidth/2,void(f.current.y=(Number(null===n||void 0===n?void 0:n.y)||0)*e-window.innerHeight/2)}if("damage10"===e)return void await Fe(n.id,10);if("heal10"===e)return void await Fe(n.id,-10);if("delete"===e&&N)return y(n.id),void K(e=>Ka(e,t)?null:e);if("duplicate"===e&&N){const e={...n};return delete e.id,void v({...e,x:Math.round(Number(null===n||void 0===n?void 0:n.x)||0)+24,y:Math.round(Number(null===n||void 0===n?void 0:n.y)||0)+24})}if("bringForward"===e&&N)return void x(n.id,{z:Math.round(Number(null===n||void 0===n?void 0:n.z)||0)+1});if("sendBackward"===e&&N)return void x(n.id,{z:Math.round(Number(null===n||void 0===n?void 0:n.z)||0)-1});if("toggleIndestructible"===e&&N)if(null==(null===n||void 0===n?void 0:n.maxHP)){const e=String((null===n||void 0===n?void 0:n.terrainType)||"obstacle").toLowerCase(),t=Ua[e]||Ua.obstacle;x(n.id,{maxHP:t,hp:t})}else x(n.id,{maxHP:null,hp:null})}}},Be=(0,t.useCallback)(e=>{0===e.button&&le&&(e.preventDefault(),e.stopPropagation(),de({offsetX:e.clientX-le.x,offsetY:e.clientY-le.y}))},[le]),He=(()=>{if(!N||!L||!Z)return null;const e=Z.currentWorld||Z.startWorld,t=Ja(L,Z.startWorld,e),n=(r=t.x,s=t.y,{x:r*f.current.zoom-f.current.x,y:s*f.current.zoom-f.current.y});var r,s;const a=Number(f.current.zoom)||1,i=String(L.type||"circle").toLowerCase(),l=String(L.color||"#3B82F6");if("rect"===i){const e=(Number(t.overrides.width)||8)*a,r=(Number(t.overrides.height)||8)*a;return{type:i,color:l,x:n.x,y:n.y,width:e,height:r}}const o=(Number(t.overrides.size)||4)*a;return"triangle"===i?{type:i,color:l,points:`${n.x},${n.y-o} ${n.x-o},${n.y+o} ${n.x+o},${n.y+o}`}:{type:"circle",color:l,x:n.x,y:n.y,radius:o}})();return(0,mt.jsxs)("div",{className:"h-screen overflow-hidden",children:[(0,mt.jsxs)("div",{className:"w-full h-full relative overflow-hidden",onMouseDown:e=>{const t=Ie(e);if(!t)return;if(he(null),2===e.button){e.preventDefault();const n=Pe(t.x,t.y,N)||(null!==W&&void 0!==W&&W.type?W:null);return void q(n?{x:e.clientX,y:e.clientY,world:{x:t.x,y:t.y},target:{type:n.type,id:n.id}}:null)}if(1===e.button)return e.preventDefault(),void(fe.current=!0);if(0!==e.button)return;if(q(null),N&&L)return void ee({startWorld:{x:t.x,y:t.y},currentWorld:{x:t.x,y:t.y},startClient:{x:e.clientX,y:e.clientY}});if(N&&D)return void z(t.x,t.y);if(N&&"mapObject"===(null===De||void 0===De?void 0:De.type)){const t=De.entity;if(t&&Ya(t)===M){var n,r,s;const a=(e=>{const t=be.current.background;if(!t)return null;const n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}})(e),i=function(e,t){if(!e||!t)return[];const n=Xa(e),r=Qa(t,n.minX,n.minY),s=Qa(t,n.maxX,n.minY),a=Qa(t,n.maxX,n.maxY),i=Qa(t,n.minX,n.maxY),l=Qa(t,(n.minX+n.maxX)/2,n.minY);return[{id:"nw",x:r.x,y:r.y},{id:"ne",x:s.x,y:s.y},{id:"se",x:a.x,y:a.y},{id:"sw",x:i.x,y:i.y},{id:"height",x:l.x,y:l.y-32}]}(t,{x:Number(null===(n=f.current)||void 0===n?void 0:n.x)||0,y:Number(null===(r=f.current)||void 0===r?void 0:r.y)||0,zoom:Number(null===(s=f.current)||void 0===s?void 0:s.zoom)||1}),l=a?function(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).find(n=>{const r=e-n.x,s=t-n.y;return r*r+s*s<=225})||null}(a.x,a.y,i):null;if(l){if(X(null),he(null),"height"===l.id)return void me({type:"height",id:t.id,startClientY:e.clientY,startHeight:Math.round(Number(null===t||void 0===t?void 0:t.elevationHeight)||0)});const n=Xa(t),r=function(e,t){return t?"nw"===e?{x:t.maxX,y:t.maxY}:"ne"===e?{x:t.minX,y:t.maxY}:"se"===e?{x:t.minX,y:t.minY}:"sw"===e?{x:t.maxX,y:t.minY}:null:null}(l.id,n);if(r)return void me({type:"shape",id:t.id,handle:l.id,anchorX:r.x,anchorY:r.y})}}}const a=Pe(t.x,t.y,N);if(a){if(Oe(a),N){if("mapObject"===a.type){const e=Le.find(e=>Wa(null===e||void 0===e?void 0:e.id)===Wa(a.id));if(!e)return;return void X({type:"mapObject",id:e.id,offsetX:t.x-(Number(e.x)||0),offsetY:t.y-(Number(e.y)||0)})}if("character"===a.type){var i,l;const e=h.find(e=>Wa(null===e||void 0===e?void 0:e.id)===Wa(a.id));if(!e)return;X({type:"character",id:e.id,offsetX:t.x-(Number(null===e||void 0===e||null===(i=e.position)||void 0===i?void 0:i.x)||0),offsetY:t.y-(Number(null===e||void 0===e||null===(l=e.position)||void 0===l?void 0:l.y)||0)})}}}else Oe(null)},onMouseMove:e=>{if(m({x:e.clientX,y:e.clientY}),pe&&N){const n=g.find(e=>Wa(null===e||void 0===e?void 0:e.id)===Wa(pe.id));if(!n)return;if(he(null),"height"===pe.type){var t;const n=Number(null===(t=f.current)||void 0===t?void 0:t.zoom)||1,r=(pe.startClientY-e.clientY)/Math.max(.1,n),s=Math.max(0,Math.round((Number(pe.startHeight)||0)+r));return void x(pe.id,{elevationHeight:s})}const r=Ie(e);if(!r)return;const s=Number(pe.anchorX),a=Number(pe.anchorY),i=Math.min(s,r.x),l=Math.max(s,r.x),o=Math.min(a,r.y),c=Math.max(a,r.y),d=(i+l)/2,u=(o+c)/2;return"rect"===String((null===n||void 0===n?void 0:n.type)||"circle").toLowerCase()?void x(pe.id,{x:Math.round(d),y:Math.round(u),width:Math.max(8,Math.round(l-i)),height:Math.max(8,Math.round(c-o))}):void x(pe.id,{x:Math.round(d),y:Math.round(u),size:Math.max(4,Math.round(Math.max(l-i,c-o)/2))})}if(Z&&N&&L){const t=Ie(e);if(!t)return;return void ee(e=>e?{...e,currentWorld:{x:t.x,y:t.y}}:e)}if(Y&&N){const t=Ie(e);if(!t)return;const n=t.x-Y.offsetX,r=t.y-Y.offsetY;if("mapObject"===Y.type){const e=g.find(e=>Wa(null===e||void 0===e?void 0:e.id)===Wa(Y.id));if(!e)return void he(null);const t={...e,x:Math.round(n),y:Math.round(r)};return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Va(e))return!1;const r=Xa(e),s=Ya(e),a=null==n?"":Wa(n);return(Array.isArray(t)?t:[]).some(e=>{return!!Va(e)&&Ya(e)===s&&(!a||Wa(null===e||void 0===e?void 0:e.id)!==a)&&(t=r,n=Xa(e),t.minX<n.maxX&&t.maxX>n.minX&&t.minY<n.maxY&&t.maxY>n.minY);var t,n})}(t,g,e.id)?void he(t):(he(null),void x(Y.id,{x:t.x,y:t.y}))}if("character"===Y.type)return he(null),void j(Y.id,Math.round(n),Math.round(r))}if(fe.current){const t=e.clientX-p.x,n=e.clientY-p.y;f.current.x-=t,f.current.y-=n}},onMouseUp:Re,onMouseLeave:Re,onWheel:e=>{e.preventDefault(),q(null);const t=(e.clientX+f.current.x)/f.current.zoom,n=(e.clientY+f.current.y)/f.current.zoom;f.current.zoom*=e.deltaY<0?Ba:.9090909090909091,f.current.zoom=Math.max(Ha,Math.min(f.current.zoom,4)),f.current.x=t*f.current.zoom-e.clientX,f.current.y=n*f.current.zoom-e.clientY},onContextMenu:e=>e.preventDefault(),children:[(0,mt.jsxs)("div",{className:"absolute top-3 left-3 z-[130] flex items-center gap-2",children:[(0,mt.jsx)("button",{type:"button",onClick:()=>s(`/ISK/${o}/lobby`),className:"bg-gray-900/85 border border-gray-600 text-white text-xs px-3 py-2 rounded hover:bg-gray-800",children:"Exit to Lobby"}),(0,mt.jsx)("button",{type:"button",onClick:()=>s(`/ISK/${o}/home`),className:"bg-gray-900/85 border border-gray-600 text-white text-xs px-3 py-2 rounded hover:bg-gray-800",children:"Home"}),(0,mt.jsx)("span",{className:"text-xs px-3 py-2 rounded border "+(N?"bg-emerald-900/70 border-emerald-500 text-emerald-200":"bg-slate-900/70 border-slate-500 text-slate-200"),children:N?"DM Mode":"Player Mode"}),(0,mt.jsxs)("span",{className:"text-xs px-3 py-2 rounded border bg-slate-900/70 border-slate-500 text-slate-200",children:["Level ",M," (Space up, Shift down)"]}),N&&(0,mt.jsx)("button",{type:"button",onClick:Me,className:"text-xs px-3 py-2 rounded border bg-amber-900/70 border-amber-500 text-amber-200 hover:bg-amber-800/80",children:"End Turn (Auto Save)"}),N&&(0,mt.jsxs)("span",{className:"text-xs px-3 py-2 rounded border bg-slate-900/70 border-slate-500 text-slate-200",children:["Turn ",ae]}),L&&(0,mt.jsxs)("span",{className:"text-xs px-3 py-2 rounded border bg-blue-900/70 border-blue-500 text-blue-200",children:["Placement: ",L.type," (click or drag on map)"]}),G&&(0,mt.jsx)("span",{className:"text-xs px-3 py-2 rounded border bg-slate-900/70 border-slate-500 text-slate-200",children:"Loading game context..."}),V&&(0,mt.jsx)("span",{className:"text-xs px-3 py-2 rounded border bg-red-900/70 border-red-500 text-red-200",children:V}),N&&te&&(0,mt.jsx)("span",{className:"text-xs px-3 py-2 rounded border bg-indigo-900/70 border-indigo-500 text-indigo-200",children:te})]}),$a.map(e=>(0,mt.jsx)("canvas",{ref:t=>be.current[e.name]=t,className:"absolute inset-0 w-full h-full",style:{zIndex:e.zIndex,backgroundColor:"background"===e.name?"#1f2937":"transparent"}},e.name)),He&&(0,mt.jsxs)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none z-[25]",children:["rect"===He.type&&(0,mt.jsx)("rect",{x:He.x-He.width/2,y:He.y-He.height/2,width:He.width,height:He.height,fill:He.color,fillOpacity:"0.28",stroke:He.color,strokeWidth:"2",strokeDasharray:"7 5"}),"circle"===He.type&&(0,mt.jsx)("circle",{cx:He.x,cy:He.y,r:He.radius,fill:He.color,fillOpacity:"0.28",stroke:He.color,strokeWidth:"2",strokeDasharray:"7 5"}),"triangle"===He.type&&(0,mt.jsx)("polygon",{points:He.points,fill:He.color,fillOpacity:"0.28",stroke:He.color,strokeWidth:"2",strokeDasharray:"7 5"})]}),(0,mt.jsxs)("div",{className:"absolute bottom-4 z-[132] flex items-center gap-2",style:{right:Math.max(12,F+12)},children:[(0,mt.jsx)("button",{type:"button",onClick:_,className:"h-9 min-w-9 px-2 rounded bg-gray-900/90 border border-slate-500 text-white text-sm hover:bg-gray-800",title:"Go down one z-level (Shift)",children:"Z-"}),(0,mt.jsxs)("span",{className:"h-9 px-3 flex items-center rounded bg-slate-900/90 border border-slate-500 text-slate-100 text-xs",children:["Level ",M]}),(0,mt.jsx)("button",{type:"button",onClick:I,className:"h-9 min-w-9 px-2 rounded bg-gray-900/90 border border-slate-500 text-white text-sm hover:bg-gray-800",title:"Go up one z-level (Space)",children:"Z+"})]}),U&&(0,mt.jsx)("div",{className:"absolute bg-gray-800 border border-gray-600 rounded shadow-lg z-50",style:{left:U.x,top:U.y},onMouseLeave:()=>q(null),onContextMenu:e=>e.preventDefault(),children:(0,mt.jsxs)("div",{className:"py-1",children:["character"===(null===U||void 0===U||null===(e=U.target)||void 0===e?void 0:e.type)&&(0,mt.jsxs)(mt.Fragment,{children:[["move","attack","defend","skills"].map(e=>(0,mt.jsx)("button",{onClick:()=>$e(e),className:"w-full px-4 py-2 text-left text-white hover:bg-gray-700 text-sm",children:e.charAt(0).toUpperCase()+e.slice(1)},e)),(0,mt.jsx)("div",{className:"border-t border-gray-600 my-1"}),(0,mt.jsx)("button",{onClick:()=>$e("center"),className:"w-full px-4 py-2 text-left text-white hover:bg-gray-700 text-sm",children:"Center Camera"}),(0,mt.jsx)("button",{onClick:()=>$e("info"),className:"w-full px-4 py-2 text-left text-white hover:bg-gray-700 text-sm",children:"Inspect"}),N&&(0,mt.jsxs)(mt.Fragment,{children:[(0,mt.jsx)("div",{className:"border-t border-gray-600 my-1"}),(0,mt.jsx)("button",{onClick:()=>$e("placeHere"),className:"w-full px-4 py-2 text-left text-emerald-200 hover:bg-gray-700 text-sm",children:"Place Character Here"}),(0,mt.jsx)("button",{onClick:()=>$e("toggleTeam"),className:"w-full px-4 py-2 text-left text-white hover:bg-gray-700 text-sm",children:"Toggle Team"}),(0,mt.jsx)("button",{onClick:()=>$e("endTurn"),className:"w-full px-4 py-2 text-left text-amber-200 hover:bg-gray-700 text-sm",children:"End Turn + Autosave"})]})]}),"mapObject"===(null===U||void 0===U||null===(n=U.target)||void 0===n?void 0:n.type)&&(0,mt.jsxs)(mt.Fragment,{children:[(0,mt.jsx)("button",{onClick:()=>$e("inspect"),className:"w-full px-4 py-2 text-left text-white hover:bg-gray-700 text-sm",children:"Inspect"}),(0,mt.jsx)("button",{onClick:()=>$e("center"),className:"w-full px-4 py-2 text-left text-white hover:bg-gray-700 text-sm",children:"Center Camera"}),N&&(0,mt.jsxs)(mt.Fragment,{children:[(0,mt.jsx)("div",{className:"border-t border-gray-600 my-1"}),(0,mt.jsx)("button",{onClick:()=>$e("damage10"),className:"w-full px-4 py-2 text-left text-white hover:bg-gray-700 text-sm",children:"Damage 10"}),(0,mt.jsx)("button",{onClick:()=>$e("heal10"),className:"w-full px-4 py-2 text-left text-white hover:bg-gray-700 text-sm",children:"Heal 10"}),(0,mt.jsx)("button",{onClick:()=>$e("delete"),className:"w-full px-4 py-2 text-left text-red-300 hover:bg-gray-700 text-sm",children:"Delete Object"}),(0,mt.jsx)("button",{onClick:()=>$e("duplicate"),className:"w-full px-4 py-2 text-left text-white hover:bg-gray-700 text-sm",children:"Duplicate"}),(0,mt.jsx)("button",{onClick:()=>$e("bringForward"),className:"w-full px-4 py-2 text-left text-white hover:bg-gray-700 text-sm",children:"Bring Forward (Z+)"}),(0,mt.jsx)("button",{onClick:()=>$e("sendBackward"),className:"w-full px-4 py-2 text-left text-white hover:bg-gray-700 text-sm",children:"Send Backward (Z-)"}),(0,mt.jsx)("button",{onClick:()=>$e("toggleIndestructible"),className:"w-full px-4 py-2 text-left text-white hover:bg-gray-700 text-sm",children:"Toggle Indestructible"})]})]})]})}),(()=>{if(null===De||void 0===De||!De.type)return null;const e=le||ze(window.innerWidth-F-320-12,12);if("character"===De.type){var t,n;const r=De.entity;return(0,mt.jsxs)("div",{className:"absolute rounded border border-slate-600 bg-slate-900/95 text-white shadow-lg z-[132] w-[320px]",style:{left:e.x,top:e.y},onMouseDown:e=>e.stopPropagation(),children:[(0,mt.jsxs)("div",{className:"px-3 py-2 border-b border-slate-700 flex items-center justify-between cursor-move select-none",onMouseDown:Be,children:[(0,mt.jsx)("p",{className:"text-sm font-semibold",children:"Selected Character"}),(0,mt.jsx)("button",{type:"button",onMouseDown:e=>e.stopPropagation(),onClick:()=>Oe(null),className:"text-xs text-slate-300 hover:text-white",children:"Close"})]}),(0,mt.jsxs)("div",{className:"px-3 py-2 text-xs space-y-1",children:[(0,mt.jsx)("p",{className:"text-sm font-semibold",children:r.name||"Unnamed Character"}),(0,mt.jsxs)("p",{children:["ID: ",r.id]}),(0,mt.jsxs)("p",{children:["Team: ",r.team||"unknown"]}),(0,mt.jsxs)("p",{children:["Position: (",Math.round(Number(null===r||void 0===r||null===(t=r.position)||void 0===t?void 0:t.x)||0),","," ",Math.round(Number(null===r||void 0===r||null===(n=r.position)||void 0===n?void 0:n.y)||0),")"]}),(0,mt.jsxs)("p",{children:["Size: ",Math.round(Number(null===r||void 0===r?void 0:r.size)||0)]}),(0,mt.jsxs)("p",{children:["Vision: ",Math.round(Number(null===r||void 0===r?void 0:r.visionDistance)||0)]}),(0,mt.jsxs)("p",{children:["Arc: ",Math.round(Number(null===r||void 0===r?void 0:r.visionArc)||0)," deg"]})]})]})}if("mapObject"===De.type){const t=De.entity,n=De.floorType;return(0,mt.jsxs)("div",{className:"absolute rounded border border-slate-600 bg-slate-900/95 text-white shadow-lg z-[132] w-[320px]",style:{left:e.x,top:e.y},onMouseDown:e=>e.stopPropagation(),children:[(0,mt.jsxs)("div",{className:"px-3 py-2 border-b border-slate-700 flex items-center justify-between cursor-move select-none",onMouseDown:Be,children:[(0,mt.jsx)("p",{className:"text-sm font-semibold",children:"Selected Object"}),(0,mt.jsx)("button",{type:"button",onMouseDown:e=>e.stopPropagation(),onClick:()=>Oe(null),className:"text-xs text-slate-300 hover:text-white",children:"Close"})]}),(0,mt.jsxs)("div",{className:"px-3 py-2 text-xs space-y-1",children:[(0,mt.jsxs)("p",{className:"text-sm font-semibold",children:[String((null===t||void 0===t?void 0:t.type)||"object")," #",null===t||void 0===t?void 0:t.id]}),(0,mt.jsxs)("p",{children:["Position: (",Math.round(Number(null===t||void 0===t?void 0:t.x)||0),","," ",Math.round(Number(null===t||void 0===t?void 0:t.y)||0),")"]}),(0,mt.jsxs)("p",{children:["Terrain: ",String((null===t||void 0===t?void 0:t.terrainType)||"obstacle")]}),(0,mt.jsxs)("p",{children:["Z Level: ",Math.round(Number(null===t||void 0===t?void 0:t.zLevel)||0)]}),(0,mt.jsxs)("p",{children:["Z Index: ",Math.round(Number(null===t||void 0===t?void 0:t.z)||0)]}),(0,mt.jsxs)("p",{children:["Elevation Height: ",Math.round(Number(null===t||void 0===t?void 0:t.elevationHeight)||0)]}),"rect"===String((null===t||void 0===t?void 0:t.type)||"").toLowerCase()?(0,mt.jsxs)("p",{children:["Footprint: ",Math.round(Number(null===t||void 0===t?void 0:t.width)||0)," x"," ",Math.round(Number(null===t||void 0===t?void 0:t.height)||0)]}):(0,mt.jsxs)("p",{children:["Footprint Size: ",Math.round(Number(null===t||void 0===t?void 0:t.size)||0)]}),(0,mt.jsxs)("p",{children:["Floor Type: ",(null===n||void 0===n?void 0:n.name)||String((null===t||void 0===t?void 0:t.floorTypeId)||"none")]}),(0,mt.jsxs)("p",{children:["HP:"," ",null==(null===t||void 0===t?void 0:t.maxHP)?"Indestructible":`${Math.round(Number(null===t||void 0===t?void 0:t.hp)||0)} / ${Math.round(Number(null===t||void 0===t?void 0:t.maxHP)||0)}`]}),N&&(0,mt.jsxs)("div",{className:"mt-2 pt-2 border-t border-slate-700 space-y-2",children:[(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-center",children:[(0,mt.jsx)("label",{className:"text-[11px] text-slate-300",children:"Object Height"}),(0,mt.jsx)("input",{type:"number",min:"0",value:Math.round(Number(null===t||void 0===t?void 0:t.elevationHeight)||0),onChange:e=>x(t.id,{elevationHeight:Math.max(0,Number(e.target.value)||0)}),className:"w-full rounded bg-slate-800 border border-slate-600 px-2 py-1 text-xs text-slate-100"})]}),"rect"===String((null===t||void 0===t?void 0:t.type)||"").toLowerCase()?(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,mt.jsx)("input",{type:"number",min:8,value:Math.round(Number(null===t||void 0===t?void 0:t.width)||0),onChange:e=>x(t.id,{width:Math.max(8,Number(e.target.value)||0)}),className:"w-full rounded bg-slate-800 border border-slate-600 px-2 py-1 text-xs text-slate-100"}),(0,mt.jsx)("input",{type:"number",min:8,value:Math.round(Number(null===t||void 0===t?void 0:t.height)||0),onChange:e=>x(t.id,{height:Math.max(8,Number(e.target.value)||0)}),className:"w-full rounded bg-slate-800 border border-slate-600 px-2 py-1 text-xs text-slate-100"})]}):(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-center",children:[(0,mt.jsx)("label",{className:"text-[11px] text-slate-300",children:"Footprint Size"}),(0,mt.jsx)("input",{type:"number",min:4,value:Math.round(Number(null===t||void 0===t?void 0:t.size)||0),onChange:e=>x(t.id,{size:Math.max(4,Number(e.target.value)||0)}),className:"w-full rounded bg-slate-800 border border-slate-600 px-2 py-1 text-xs text-slate-100"})]}),(0,mt.jsx)("p",{className:"text-[11px] text-slate-400",children:"Tip: drag corner handles to resize footprint, and drag the top square handle to edit object height."})]}),(null===n||void 0===n?void 0:n.description)&&(0,mt.jsxs)("p",{className:"text-slate-300",children:["Info: ",n.description]})]})]})}return null})()]}),(0,mt.jsxs)("div",{className:"grid h-full min-h-0 overflow-hidden bg-gray-800 absolute top-0 right-0",style:{gridTemplateColumns:`1fr 6px ${F}px`,zIndex:120},children:[(0,mt.jsx)("div",{className:"bg-gray-700 cursor-col-resize hover:bg-gray-500 col-start-2",onMouseDown:e=>{e.stopPropagation(),H(!0)}}),(0,mt.jsx)(gs,{})]})]})};const ei=function(){return(0,mt.jsx)(je,{})},ti=Ur("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ni=Ur("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),ri=Ur("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),si=Ur("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),ai=Ur("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),ii=Ur("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),li=Ur("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function oi(e){let{children:t,className:n=""}=e;return(0,mt.jsx)("div",{className:`\n            grid grid-cols-1  lg:grid-cols-3\n            2xl:grid-cols-[repeat(auto-fill,minmax(280px,1fr))]\n            gap-6 p-6\n            ${n}`,children:t})}function ci(e){const t=new Date(e||"");return Number.isNaN(t.getTime())?"Unknown time":t.toLocaleString()}function di(e){return String(e||"")}function ui(e){const t=di(null===e||void 0===e?void 0:e.dmId),n=new Map;t&&n.set(t,{_id:t,username:(null===e||void 0===e?void 0:e.dmName)||"DM"});return(Array.isArray(null===e||void 0===e?void 0:e.players)?e.players:[]).forEach(e=>{const t=di((null===e||void 0===e?void 0:e._id)||e);if(!t)return;const r=n.get(t);n.set(t,{_id:t,username:(null===e||void 0===e?void 0:e.username)||(null===r||void 0===r?void 0:r.username)||"Player"})}),Array.from(n.values()).sort((e,n)=>e._id===t?-1:n._id===t?1:(e.username||"").localeCompare(n.username||""))}function hi(e){const t=di(e);return t?`Player ${t.slice(-4).toUpperCase()}`:"Player"}oi.File=function(e){let{children:t,className:n="",to:r,href:s,onClick:a}=e;const i=ne(),l=r||s||a;return(0,mt.jsxs)("div",{className:`\n                group relative\n                aspect-[3/4]\n                grid grid-rows-[20%-1fr-1fr]\n                p-5 rounded-2xl\n                bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900\n                border-2 border-slate-700/50\n                shadow-xl shadow-black/20\n                overflow-hidden\n                transition-all duration-300 ease-out\n                ${l?"cursor-pointer hover:scale-[1.02] hover:shadow-2xl hover:shadow-purple-500/20 hover:border-purple-500/50 hover:-translate-y-1":""} \n                ${n}\n            `,onClick:l?e=>{const t=e.target instanceof Element?e.target:null;null!==t&&void 0!==t&&t.closest("button, a, [data-card-ignore-click='true']")||(a?a():r?i(r):s&&(window.location.href=s))}:void 0,children:[(0,mt.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/5 via-transparent to-blue-500/5 pointer-events-none"}),l&&(0,mt.jsx)("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-purple-500/0 via-purple-500/30 to-blue-500/0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 blur-xl -z-10"}),(0,mt.jsx)("div",{className:"relative z-10",children:t})]})},oi.File.Top=function(e){let{children:t,className:n=""}=e;return(0,mt.jsx)("div",{className:`row-start-1 mb-3 ${n}`,children:t})},oi.File.Middle=function(e){let{children:t,className:n=""}=e;return(0,mt.jsxs)("div",{className:`row-start-2 ${n}`,children:[t,(0,mt.jsxs)("div",{className:"relative mt-4 mb-3",children:[(0,mt.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,mt.jsx)("div",{className:"w-full border-t border-slate-700/50"})}),(0,mt.jsx)("div",{className:"relative flex justify-center",children:(0,mt.jsx)("div",{className:"bg-gradient-to-r from-transparent via-purple-500/20 to-transparent h-px w-1/2"})})]})]})},oi.File.Bottom=function(e){let{children:t,className:n=""}=e;return(0,mt.jsx)("div",{className:`\n            row-start-3 \n            flex flex-col items-center justify-start\n            overflow-y-auto\n            scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent\n            ${n}\n        `,children:t})},oi.File.Image=function(e){let{children:t,className:n="",src:r,alt:s=""}=e;return(0,mt.jsx)("div",{className:`\n            relative overflow-hidden rounded-xl\n            ring-2 ring-slate-700/50\n            ${n}\n        `,children:r?(0,mt.jsx)("img",{src:r,alt:s,className:"w-full h-full object-cover"}):t})},oi.File.Title=function(e){let{children:t,className:n=""}=e;return(0,mt.jsx)("div",{className:`\n            text-lg font-bold text-white\n            mb-1\n            ${n}\n        `,children:t})},oi.File.Description=function(e){let{children:t,className:n=""}=e;return(0,mt.jsx)("div",{className:`\n            text-slate-400 text-sm leading-relaxed\n            ${n}\n        `,children:t})},oi.File.Actions=function(e){let{children:t,className:n=""}=e;return(0,mt.jsx)("div",{className:`\n            flex gap-2 flex-wrap\n            mt-3\n            ${n}\n        `,children:t})},oi.File.Detail=function(e){let{children:t,className:n=""}=e;return(0,mt.jsx)("div",{className:`\n            bg-slate-800/40 backdrop-blur-sm\n            rounded-lg p-3\n            border border-slate-700/30\n            ${n}\n        `,children:t})};const pi=function(){var e,n,r,s,a;const i=(0,t.useContext)(Sr),l=ne(),{sessionID:o}=se(),c=localStorage.getItem("player_ID"),d=(0,t.useMemo)(()=>o||sessionStorage.getItem("session_ID")||"default",[o]),[u,h]=(0,t.useState)([]),[p,m]=(0,t.useState)({}),[f,b]=(0,t.useState)({}),[g,v]=(0,t.useState)({}),[x,y]=(0,t.useState)(!0),[w,j]=(0,t.useState)(""),[N,k]=(0,t.useState)(""),[S,A]=(0,t.useState)(""),[C,E]=(0,t.useState)(""),[M,I]=(0,t.useState)(""),[_,L]=(0,t.useState)({}),[T,P]=(0,t.useState)({}),[D,z]=(0,t.useState)({isOpen:!1,campaignID:"",lobbyCode:"",selectedCharacterID:"",submitting:!1}),[O,R]=(0,t.useState)({isOpen:!1,campaignID:"",assignment:null,ownerName:"",campaignName:""}),[F,$]=(0,t.useState)({show:!1,x:0,y:0,campaignID:"",campaignName:""}),B=(0,t.useCallback)(async()=>{if(!i||!c)return y(!1),h([]),j("Missing player session. Please log in again."),!1;y(!0);const e=await ns(i,"campaign_list",{playerID:c});return null!==e&&void 0!==e&&e.success?(h(Array.isArray(e.campaigns)?e.campaigns:[]),y(!1),j(""),!0):(h([]),y(!1),j((null===e||void 0===e?void 0:e.message)||"Failed to load campaigns"),!1)},[i,c]),H=(0,t.useCallback)(async function(e){let{silent:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i||!c||!e)return!1;t||j(""),b(t=>({...t,[e]:!0}));const n=await ns(i,"campaign_listGameSaves",{playerID:c,campaignID:e});return b(t=>({...t,[e]:!1})),null!==n&&void 0!==n&&n.success?(m(t=>({...t,[e]:Array.isArray(n.gameSaves)?n.gameSaves:[]})),v(t=>({...t,[e]:n.activeGameSave||""})),!0):(t||j((null===n||void 0===n?void 0:n.message)||"Failed to load game saves"),!1)},[i,c]);(0,t.useEffect)(()=>{B()},[B]),(0,t.useEffect)(()=>{E(e=>u.some(t=>(null===t||void 0===t?void 0:t._id)===e)?e:""),I(e=>u.some(t=>(null===t||void 0===t?void 0:t._id)===e)?e:"")},[u]),(0,t.useEffect)(()=>{if(!F.show)return;const e=()=>{$(e=>({...e,show:!1}))};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[F.show]);const U=(0,t.useCallback)(e=>di(null===e||void 0===e?void 0:e.dmId)===di(c),[c]),q=(0,t.useCallback)(async e=>{const t=null===e||void 0===e?void 0:e._id;if(!i||!c||!t)return null;const n=ui(e),r=new Map(n.map(e=>[di(null===e||void 0===e?void 0:e._id),(null===e||void 0===e?void 0:e.username)||"Player"])),s=Array.isArray(e.characterAssignments)?e.characterAssignments:[],a=di(null===e||void 0===e?void 0:e.dmId),l=s.filter(e=>Boolean(di(null===e||void 0===e?void 0:e.playerId)&&di(null===e||void 0===e?void 0:e.characterId))).map(t=>{const n=di(null===t||void 0===t?void 0:t.playerId),s=di(null===t||void 0===t?void 0:t.characterId);return{playerId:n,playerName:(null===t||void 0===t?void 0:t.playerName)||r.get(n)||(n===a?(null===e||void 0===e?void 0:e.dmName)||"DM":hi(n)),assignedCharacterId:s,characters:[{_id:s,name:(null===t||void 0===t?void 0:t.characterName)||`Character ${s.slice(-4).toUpperCase()}`,level:Number(null===t||void 0===t?void 0:t.characterLevel)||1,playerId:n,isSelected:!0}]}}),o=await ns(i,"playerData_getCharacter",{playerID:c});return{assignments:s,availableCharacters:null!==o&&void 0!==o&&o.success&&Array.isArray(o.characters)?o.characters.map(e=>({_id:di((null===e||void 0===e?void 0:e._id)||(null===e||void 0===e?void 0:e.id)),name:(null===e||void 0===e?void 0:e.name)||"Unnamed Character",level:Number(null===e||void 0===e?void 0:e.level)||1,playerId:di(c)})):[],allCharactersByPlayer:l,canManageAllCharacters:U(e),loadedFromFallback:!0}},[i,c,U]),W=(0,t.useCallback)(async function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!i||!c||!e)return{success:!1,state:null};const r=await ns(i,"campaign_getCharacterChoices",{playerID:c,campaignID:e}),s=null!==r&&void 0!==r&&r.success?{assignments:Array.isArray(r.assignments)?r.assignments:Array.isArray(null===(t=r.campaign)||void 0===t?void 0:t.characterAssignments)?r.campaign.characterAssignments:[],availableCharacters:Array.isArray(r.availableCharacters)?r.availableCharacters:[],allCharactersByPlayer:Array.isArray(r.allCharactersByPlayer)?r.allCharactersByPlayer:[],canManageAllCharacters:Boolean(r.canManageAllCharacters)}:null,a=n||u.find(t=>(null===t||void 0===t?void 0:t._id)===e)||(null===r||void 0===r?void 0:r.campaign)||null;if((!(null!==r&&void 0!==r&&r.success)||U(a)&&(!s||!Array.isArray(s.allCharactersByPlayer)||0===s.allCharactersByPlayer.length))&&a){const t=await q(a);if(t)return P(n=>({...n,[e]:t})),{success:!0,state:t,fallbackUsed:!0}}return s?(P(t=>({...t,[e]:s})),{success:!0,state:s}):{success:!1,state:null,message:(null===r||void 0===r?void 0:r.message)||"Failed to load campaign character state"}},[i,c,u,U,q]),K=(0,t.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=T[e];return n&&Array.isArray(n.assignments)?n.assignments:t&&Array.isArray(t.characterAssignments)?t.characterAssignments:[]},[T]),Y=(0,t.useCallback)(e=>{const t=T[e];return Array.isArray(null===t||void 0===t?void 0:t.availableCharacters)?t.availableCharacters:[]},[T]);(0,t.useEffect)(()=>{if(!Array.isArray(u)||0===u.length)return void P({});const e=new Set(u.map(e=>null===e||void 0===e?void 0:e._id).filter(Boolean));P(t=>{const n={};return Object.entries(t||{}).forEach(t=>{let[r,s]=t;e.has(r)&&(n[r]=s)}),n}),u.forEach(e=>{null!==e&&void 0!==e&&e._id&&W(e._id,e)})},[u,W]);const X=(0,t.useCallback)(e=>{if(null===e||void 0===e||!e._id)return!1;let t=!1;return h(n=>n.map(n=>n._id!==e._id?n:(t=!0,e))),t},[]),V=(0,t.useCallback)(e=>{l(`/ISK/${d}/game/${e}`)},[l,d]),Q=(0,t.useCallback)(async e=>{if(!e||!c)return;A(`start:${e}`),j("");const t=await ns(i,"campaign_startLobby",{playerID:c,campaignID:e});A(""),null!==t&&void 0!==t&&t.success?(k("Lobby started successfully."),await B(),V(t.gameID||e)):j((null===t||void 0===t?void 0:t.message)||"Failed to start lobby")},[i,c,V,B]),G=(0,t.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e||!c)return;A(`join:${e}`),j("");const n=await ns(i,"campaign_joinLobby",{playerID:c,campaignID:e,lobbyCode:t});A(""),null!==n&&void 0!==n&&n.success?(k("Joined lobby."),V(n.gameID||e)):j((null===n||void 0===n?void 0:n.message)||"Failed to join lobby")},[i,c,V]),J=(0,t.useCallback)(async e=>{var t,n,r;const s=null===e||void 0===e?void 0:e._id;if(!s||!c)return;let a=Y(s);if(!a.length){const t=await W(s,e);var l;if(null!==t&&void 0!==t&&t.success)a=Array.isArray(null===(l=t.state)||void 0===l?void 0:l.availableCharacters)?t.state.availableCharacters:[]}if(!a.length){const t=await ns(i,"playerData_getCharacter",{playerID:c});null!==t&&void 0!==t&&t.success&&Array.isArray(t.characters)&&(a=t.characters.map(e=>{const t=di((null===e||void 0===e?void 0:e._id)||(null===e||void 0===e?void 0:e.id));return t?{_id:t,name:(null===e||void 0===e?void 0:e.name)||"Unnamed Character",level:Number(null===e||void 0===e?void 0:e.level)||1,playerId:di(c)}:null}).filter(Boolean),a.length&&P(t=>{var n,r,i;return{...t,[s]:{assignments:Array.isArray(null===t||void 0===t||null===(n=t[s])||void 0===n?void 0:n.assignments)?t[s].assignments:Array.isArray(null===e||void 0===e?void 0:e.characterAssignments)?e.characterAssignments:[],availableCharacters:a,allCharactersByPlayer:Array.isArray(null===t||void 0===t||null===(r=t[s])||void 0===r?void 0:r.allCharactersByPlayer)?t[s].allCharactersByPlayer:[],canManageAllCharacters:Boolean(null===t||void 0===t||null===(i=t[s])||void 0===i?void 0:i.canManageAllCharacters)}}}))}if(!a.length)return void j("No characters found for your account. Create or re-save one, then try again.");const o=di((null===(t=a[0])||void 0===t?void 0:t._id)||(null===(n=a[0])||void 0===n?void 0:n.id));o?(j(""),z({isOpen:!0,campaignID:s,lobbyCode:(null===e||void 0===e||null===(r=e.activeLobby)||void 0===r?void 0:r.lobbyCode)||"",selectedCharacterID:o,submitting:!1})):j("No valid character is available for this campaign.")},[c,Y,W,i]),Z=(0,t.useCallback)(async e=>{var t,n,r;const s=null===e||void 0===e?void 0:e._id;if(!s||!c)return;if(null===(t=e.activeLobby)||void 0===t||!t.isActive||null===(n=e.activeLobby)||void 0===n||!n.lobbyCode)return void j("This campaign does not have an active lobby yet.");const a=K(s,e).some(e=>di(null===e||void 0===e?void 0:e.playerId)===di(c)&&Boolean(di(null===e||void 0===e?void 0:e.characterId)));U(e)||a?G(s,(null===(r=e.activeLobby)||void 0===r?void 0:r.lobbyCode)||""):await J(e)},[c,K,U,J,G]),ee=(0,t.useCallback)(async()=>{const{campaignID:e,lobbyCode:t,selectedCharacterID:n}=D;if(!e||!n||!c)return;z(e=>({...e,submitting:!0})),j("");const r=await ns(i,"campaign_setCharacterAssignment",{playerID:c,campaignID:e,characterID:n});if(null===r||void 0===r||!r.success)return z(e=>({...e,submitting:!1})),void j((null===r||void 0===r?void 0:r.message)||"Failed to select character");k("Character selected for this campaign."),r.campaign&&X(r.campaign),await W(e,r.campaign||null),z({isOpen:!1,campaignID:"",lobbyCode:"",selectedCharacterID:"",submitting:!1}),await G(e,t||"")},[D,c,i,X,W,G]),te=(0,t.useCallback)(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=null===e||void 0===e?void 0:e._id;r&&t&&R({isOpen:!0,campaignID:r,assignment:t,ownerName:n||(null===t||void 0===t?void 0:t.playerName)||hi(null===t||void 0===t?void 0:t.playerId),campaignName:(null===e||void 0===e?void 0:e.name)||"Campaign"})},[]),re=(0,t.useCallback)(()=>{var e;const t=di(null===O||void 0===O||null===(e=O.assignment)||void 0===e?void 0:e.characterId);t&&(R({isOpen:!1,campaignID:"",assignment:null,ownerName:"",campaignName:""}),l(`/ISK/${d}/character/view/${t}`))},[O,l,d]),ae=(0,t.useCallback)(async(e,t)=>{const n=null===e||void 0===e?void 0:e._id,r=di(null===t||void 0===t?void 0:t.playerId),s=di(null===t||void 0===t?void 0:t.characterId);if(!i||!c||!n||!r||!s)return;const a=(null===t||void 0===t?void 0:t.characterName)||"this character",l=(null===t||void 0===t?void 0:t.playerName)||hi(r);if(!window.confirm(`Force remove ${a} from ${l}? They will be messaged to choose another character.`))return;A(`force-remove:${n}:${r}`),j("");const o=await ns(i,"campaign_forceRemoveCharacterAssignment",{playerID:c,campaignID:n,targetPlayerID:r,characterID:s});A(""),null!==o&&void 0!==o&&o.success?(o.campaign&&X(o.campaign),await W(n,o.campaign||e),k(`${l} must choose a new character.`)):j((null===o||void 0===o?void 0:o.message)||"Failed to remove assigned character")},[i,c,X,W]),ie=(0,t.useCallback)((e,t,n)=>{null!==t&&void 0!==t&&t._id&&!n&&(e.preventDefault(),e.stopPropagation(),$({show:!0,x:e.clientX,y:e.clientY,campaignID:t._id,campaignName:t.name||"Campaign"}))},[]),le=(0,t.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Campaign";if(!i||!c||!e)return;if(!window.confirm(`Leave "${t}"?`))return;A(`leave:${e}`),j("");const n=await ns(i,"campaign_leave",{playerID:c,campaignID:e});A(""),$(e=>({...e,show:!1})),null!==n&&void 0!==n&&n.success?(k(`You left ${t}.`),h(t=>t.filter(t=>(null===t||void 0===t?void 0:t._id)!==e)),P(t=>{const n={...t};return delete n[e],n})):j((null===n||void 0===n?void 0:n.message)||"Failed to leave campaign")},[i,c]),oe=(0,t.useCallback)(async e=>{if(null===e||void 0===e||!e._id||!c)return;A(`save:${e._id}`),j("");const t=await ns(i,"campaign_saveGame",{playerID:c,campaignID:e._id,name:`${e.name} Snapshot`,description:"Saved from campaign lobby menu",snapshot:{source:"campaign_menu",campaignID:e._id,savedAt:(new Date).toISOString()},metadata:{source:"lobby_menu"},makeActive:!0,isAutoSave:!1});A(""),null!==t&&void 0!==t&&t.success?(k("Game save created."),await Promise.all([B(),H(e._id,{silent:!0})])):j((null===t||void 0===t?void 0:t.message)||"Failed to save game")},[i,c,B,H]),ce=(0,t.useCallback)(async(e,t)=>{var n;if(!e||!t||!c)return;A(`load:${e}:${t}`),j("");const r=await ns(i,"campaign_loadGame",{playerID:c,campaignID:e,gameSaveID:t});A(""),null!==r&&void 0!==r&&r.success?(k(`Loaded save ${(null===r||void 0===r||null===(n=r.gameSave)||void 0===n?void 0:n.name)||""}`.trim()),v(n=>({...n,[e]:r.activeGameSave||t})),await B()):j((null===r||void 0===r?void 0:r.message)||"Failed to load save")},[i,c,B]),de=(0,t.useCallback)(async(e,t,n)=>{var r,s;const a=null===e||void 0===e?void 0:e._id;if(!i||!a||!c||!t)return;if(null===(r=e.activeLobby)||void 0===r||!r.isActive)return void j("Start the lobby before changing lobby players.");const l=new Set((Array.isArray(null===(s=e.activeLobby)||void 0===s?void 0:s.members)?e.activeLobby.members:[]).map(e=>di(e)));n?l.add(di(t)):l.delete(di(t));const o=di(e.dmId);o&&l.add(o);A(`settings:${a}:${t}`),j("");const d=await ns(i,"campaign_setLobbyMembers",{playerID:c,campaignID:a,memberIDs:Array.from(l)});A(""),null!==d&&void 0!==d&&d.success?(k("Lobby players updated."),X(d.campaign)?await W(a,d.campaign||e):await B()):j((null===d||void 0===d?void 0:d.message)||"Failed to update lobby players")},[i,c,B,X,W]),ue=(0,t.useCallback)(async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";const s=null===e||void 0===e?void 0:e._id;if(!i||!c||!s||!t||!n)return;const a=(Array.isArray(e.players)?e.players:[]).find(e=>di((null===e||void 0===e?void 0:e._id)||e)===di(t)),l=r||(null===a||void 0===a?void 0:a.username)||`Player ${di(t).slice(-4).toUpperCase()}`,o="ban"===n?"ban":"unban"===n?"unban":"kick";if(!window.confirm(`Are you sure you want to ${o} ${l}?`))return;A(`manage:${s}:${t}:${n}`),j("");const d=await ns(i,"campaign_managePlayer",{playerID:c,campaignID:s,targetPlayerID:t,action:n});A(""),null!==d&&void 0!==d&&d.success?(k("ban"===n?`${l} has been banned.`:"unban"===n?`${l} has been unbanned.`:`${l} has been removed.`),X(d.campaign)?await W(s,d.campaign||e):await B()):j((null===d||void 0===d?void 0:d.message)||`Failed to ${o} player`)},[i,c,B,X,W]),he=(0,t.useCallback)(async e=>{var t;const n=null===e||void 0===e?void 0:e._id,r=(_[n]||"").trim();if(!i||!c||!n)return;if(!r)return void j("Enter a username to invite.");A(`invite:${n}`),j("");const s=await ns(i,"campaign_invitePlayer",{playerID:c,campaignID:n,username:r});if(A(""),null===s||void 0===s||!s.success)return void j((null===s||void 0===s?void 0:s.message)||"Failed to invite player");L(e=>({...e,[n]:""}));const a=(null===s||void 0===s||null===(t=s.invitedPlayer)||void 0===t?void 0:t.username)||r;null!==s&&void 0!==s&&s.alreadyMember?k(`${a} is already in this campaign.`):null!==s&&void 0!==s&&s.alreadyInvited?k(`${a} already has a pending invite.`):k(`Invite sent to ${a}.`),X(s.campaign)||await B()},[i,c,_,B,X]),pe=(0,t.useMemo)(()=>u.find(e=>(null===e||void 0===e?void 0:e._id)===M)||null,[u,M]),me=(0,t.useMemo)(()=>{var e;const t=u.find(e=>(null===e||void 0===e?void 0:e._id)===C);if(!t||!U(t))return null;const n=t._id,r=ui(t),s=new Map(r.map(e=>[di(null===e||void 0===e?void 0:e._id),(null===e||void 0===e?void 0:e.username)||"Player"])),a=r.filter(e=>di(e._id)!==di(t.dmId)),i=Array.isArray(t.bannedPlayers)?t.bannedPlayers:[],l=K(n,t).filter(e=>di(null===e||void 0===e?void 0:e.characterId)).map(e=>{const t=di(null===e||void 0===e?void 0:e.playerId),n=di(null===e||void 0===e?void 0:e.characterId);return{...e,playerId:t,playerName:(null===e||void 0===e?void 0:e.playerName)||s.get(t)||hi(t),characterId:n,characterName:(null===e||void 0===e?void 0:e.characterName)||`Character ${n.slice(-4).toUpperCase()}`,characterLevel:Number(null===e||void 0===e?void 0:e.characterLevel)||1}}).sort((e,t)=>String((null===e||void 0===e?void 0:e.playerName)||"").localeCompare(String((null===t||void 0===t?void 0:t.playerName)||""))),o=new Set((Array.isArray(null===(e=t.activeLobby)||void 0===e?void 0:e.members)?t.activeLobby.members:[]).map(e=>di(e)));return{campaign:t,campaignID:n,roster:r,nonDmPlayers:a,bannedPlayers:i,selectedAssignmentsForDM:l,lobbyMembers:o,isSettingsBusy:S.startsWith(`settings:${n}:`),isManageBusy:S.startsWith(`manage:${n}:`),isInviteBusy:S===`invite:${n}`,isForceRemoveBusy:S.startsWith(`force-remove:${n}:`)}},[u,C,U,K,S]),fe=(0,t.useMemo)(()=>u.find(e=>(null===e||void 0===e?void 0:e._id)===D.campaignID)||null,[u,D.campaignID]),be=(0,t.useMemo)(()=>Y(D.campaignID),[D.campaignID,Y]);return(0,mt.jsxs)(Zs,{className:"bg-website-default-900 text-website-default-100",children:[(0,mt.jsx)(Qs,{className:"col-span-3",title:"Campaign Lobby"}),(0,mt.jsx)(Zs.Left,{className:"row-span-1 col-start-1"}),(0,mt.jsxs)(Zs.Center,{className:"row-span-1 col-start-2 min-h-screen pb-8",children:[(0,mt.jsxs)("div",{className:"px-6 pt-6 pb-2 space-y-3 text-left",children:[(0,mt.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,mt.jsx)(lt,{to:`/ISK/${d}/lobby/create`,className:"px-4 py-2 rounded-lg border border-website-specials-500 bg-website-default-800 hover:bg-website-default-700 transition-colors text-sm font-semibold",children:"Create Campaign"}),(0,mt.jsx)(lt,{to:`/ISK/${d}/lobby/join`,className:"px-4 py-2 rounded-lg border border-website-highlights-500 bg-website-default-800 hover:bg-website-default-700 transition-colors text-sm font-semibold",children:"Join Campaign"}),(0,mt.jsxs)("button",{type:"button",onClick:B,className:"px-4 py-2 rounded-lg border border-website-default-600 bg-website-default-800 hover:bg-website-default-700 transition-colors text-sm font-semibold inline-flex items-center gap-2",children:[(0,mt.jsx)(Ds,{className:"size-4"}),"Refresh"]})]}),w&&(0,mt.jsx)("div",{className:"rounded border border-red-500/40 bg-red-500/10 px-3 py-2 text-sm text-red-300",children:w}),N&&(0,mt.jsx)("div",{className:"rounded border border-website-highlights-500/50 bg-website-highlights-500/10 px-3 py-2 text-sm text-website-neutral-100",children:N})]}),(0,mt.jsxs)(oi,{className:"items-start lg:!grid-cols-2 2xl:!grid-cols-3",children:[!x&&u.map(e=>{var t,n,r,s,a;const i=e._id,l=U(e),o=ui(e),d=new Map(o.map(e=>[di(null===e||void 0===e?void 0:e._id),(null===e||void 0===e?void 0:e.username)||"Player"])),u=K(i,e).filter(e=>di(null===e||void 0===e?void 0:e.characterId)),h=p[i]||[],m=Boolean(f[i]),b=g[i]||e.activeGameSave||"",v=new Set((Array.isArray(null===(t=e.activeLobby)||void 0===t?void 0:t.members)?e.activeLobby.members:[]).map(e=>di(e))),x=l||0===v.size||v.has(di(c));return(0,mt.jsx)("div",{onContextMenu:t=>ie(t,e,l),children:(0,mt.jsxs)(oi.File,{onClick:l?void 0:()=>I(i),className:"!aspect-auto min-h-[620px] h-[72vh] max-h-[860px] !grid-rows-[auto_1fr_auto] hover:!scale-100 hover:!translate-y-0",children:[(0,mt.jsxs)(oi.File.Top,{children:[(0,mt.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,mt.jsx)(oi.File.Title,{className:"mb-0",children:e.name}),l?(0,mt.jsx)("span",{className:"inline-flex items-center rounded-md border border-website-specials-500/60 bg-website-specials-500/10 px-2 py-1 text-[10px] font-bold tracking-wider text-website-specials-400",children:e.joinCode||"NO CODE"}):(0,mt.jsx)("span",{className:"inline-flex items-center rounded-md border border-website-default-600/70 bg-website-default-700/40 px-2 py-1 text-[10px] font-semibold tracking-wider text-website-default-300",children:e.dmName?`DM: ${e.dmName}`:"PLAYER"})]}),(0,mt.jsx)(oi.File.Description,{className:"mt-2 text-xs "+(l?"line-clamp-3":""),children:l?e.description||"No description set.":"Click this card to view lobby description."})]}),(0,mt.jsxs)(oi.File.Middle,{className:"text-left min-h-0 overflow-y-auto pr-1",children:[(0,mt.jsxs)("div",{className:"space-y-2 text-xs text-slate-300",children:[(0,mt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mt.jsx)(Zr,{className:"size-3.5 text-website-highlights-400"}),(0,mt.jsxs)("span",{children:[e.memberCount,"/",e.maxPlayers," members"]})]}),(0,mt.jsxs)("div",{className:"flex items-center gap-2",children:[e.isPrivate?(0,mt.jsx)(ti,{className:"size-3.5 text-website-specials-400"}):(0,mt.jsx)(ni,{className:"size-3.5 text-website-highlights-400"}),(0,mt.jsx)("span",{children:e.isPrivate?"Private":"Public"})]}),(0,mt.jsxs)("div",{className:"text-slate-400",children:["Setting: ",e.setting||"Unspecified"]}),(0,mt.jsx)("div",{className:"text-xs font-semibold "+(null!==(n=e.activeLobby)&&void 0!==n&&n.isActive?"text-emerald-400":"text-slate-400"),children:null!==(r=e.activeLobby)&&void 0!==r&&r.isActive?l?`Lobby active: ${(null===(s=e.activeLobby)||void 0===s?void 0:s.lobbyCode)||"N/A"}`:"Lobby active":"Lobby inactive"}),l&&(0,mt.jsxs)("div",{className:"text-[11px] text-slate-500 truncate",children:["Active Save:"," ",b?b.slice(-8).toUpperCase():"None"]})]}),(0,mt.jsxs)("div",{className:"mt-4 rounded-md border border-slate-700/70 bg-slate-900/50 p-3",children:[(0,mt.jsx)("div",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-semibold",children:"Selected Characters"}),0===u.length?(0,mt.jsx)("div",{className:"mt-2 text-xs text-slate-500",children:"No one has selected a character yet."}):(0,mt.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:u.map(t=>{const n=di(null===t||void 0===t?void 0:t.playerId),r=(null===t||void 0===t?void 0:t.playerName)||d.get(n)||hi(n),s=di(null===t||void 0===t?void 0:t.characterId),a=(null===t||void 0===t?void 0:t.characterName)||`Character ${s.slice(-4).toUpperCase()}`,i=n===di(c);return(0,mt.jsxs)("button",{type:"button",onClick:n=>{n.stopPropagation(),te(e,t,r)},className:"rounded border px-2 py-1 text-left transition-colors "+(i?"border-website-highlights-500/50 bg-website-highlights-500/10 text-website-neutral-100":"border-slate-700 bg-slate-800/60 text-slate-200 hover:bg-slate-700/60"),children:[(0,mt.jsx)("div",{className:"text-[11px] font-semibold truncate",children:a}),(0,mt.jsxs)("div",{className:"text-[10px] text-slate-400 truncate",children:[r,i?" (You)":""]})]},`${n}:${s}`)})})]}),(0,mt.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[null!==(a=e.activeLobby)&&void 0!==a&&a.isActive?(0,mt.jsxs)(mt.Fragment,{children:[x?(0,mt.jsxs)("button",{type:"button",onClick:()=>Z(e),disabled:S===`join:${i}`,className:"inline-flex items-center gap-2 rounded-md border border-emerald-500/50 bg-emerald-500/10 px-3 py-2 text-xs font-semibold text-emerald-300 hover:bg-emerald-500/20 disabled:opacity-50",children:[(0,mt.jsx)(ri,{className:"size-3.5"}),"Enter Lobby"]}):(0,mt.jsx)("button",{type:"button",disabled:!0,className:"inline-flex items-center gap-2 rounded-md border border-amber-500/40 bg-amber-500/10 px-3 py-2 text-xs font-semibold text-amber-300 disabled:opacity-100",children:"Lobby locked by DM"}),!l&&x&&(0,mt.jsx)("button",{type:"button",onClick:()=>J(e),className:"inline-flex items-center gap-2 rounded-md border border-website-highlights-500/50 bg-website-highlights-500/10 px-3 py-2 text-xs font-semibold text-website-neutral-100 hover:bg-website-highlights-500/20",children:"Choose Character"})]}):(0,mt.jsx)(mt.Fragment,{children:l?(0,mt.jsxs)("button",{type:"button",onClick:()=>Q(i),disabled:S===`start:${i}`,className:"inline-flex items-center gap-2 rounded-md border border-website-highlights-500/50 bg-website-highlights-500/10 px-3 py-2 text-xs font-semibold text-website-neutral-100 hover:bg-website-highlights-500/20 disabled:opacity-50",children:[(0,mt.jsx)(ri,{className:"size-3.5"}),"Start Lobby"]}):(0,mt.jsx)("button",{type:"button",disabled:!0,className:"inline-flex items-center gap-2 rounded-md border border-slate-700 bg-slate-800/40 px-3 py-2 text-xs font-semibold text-slate-400 disabled:opacity-100",children:"Waiting for DM"})}),l&&(0,mt.jsxs)(mt.Fragment,{children:[(0,mt.jsxs)("button",{type:"button",onClick:()=>oe(e),disabled:S===`save:${i}`,className:"inline-flex items-center gap-2 rounded-md border border-website-specials-500/50 bg-website-specials-500/10 px-3 py-2 text-xs font-semibold text-website-specials-300 hover:bg-website-specials-500/20 disabled:opacity-50",children:[(0,mt.jsx)(si,{className:"size-3.5"}),"Quick Save"]}),(0,mt.jsxs)("button",{type:"button",onClick:()=>H(i),className:"inline-flex items-center gap-2 rounded-md border border-slate-600 bg-slate-800/40 px-3 py-2 text-xs font-semibold text-slate-200 hover:bg-slate-700/40",children:[(0,mt.jsx)(Ds,{className:"size-3.5"}),"Refresh Saves"]}),(0,mt.jsxs)("button",{type:"button",onClick:()=>E(e=>e===i?"":i),className:"inline-flex items-center gap-2 rounded-md border border-slate-500/60 bg-slate-700/30 px-3 py-2 text-xs font-semibold text-slate-100 hover:bg-slate-700/50",children:[(0,mt.jsx)(qs,{className:"size-3.5"}),"Lobby Settings"]})]})]})]}),(0,mt.jsx)(oi.File.Bottom,{className:"items-stretch gap-2 !overflow-visible",children:l?(0,mt.jsxs)(mt.Fragment,{children:[(0,mt.jsx)("div",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-semibold",children:"Recent Saves"}),m&&(0,mt.jsx)("div",{className:"text-xs text-slate-500",children:"Loading saves..."}),!m&&0===h.length&&(0,mt.jsx)("div",{className:"text-xs text-slate-500",children:"No saves yet."}),!m&&h.slice(0,3).map(e=>{const t=b===e._id,n=`load:${i}:${e._id}`;return(0,mt.jsxs)("button",{type:"button",onClick:()=>ce(i,e._id),disabled:S===n,className:"rounded-md border px-3 py-2 text-left text-xs transition-colors "+(t?"border-website-highlights-500/70 bg-website-highlights-500/15":"border-slate-700 bg-slate-800/40 hover:bg-slate-700/40"),children:[(0,mt.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,mt.jsx)("span",{className:"font-semibold text-website-neutral-100 truncate",children:e.name}),t&&(0,mt.jsx)("span",{className:"text-[10px] uppercase tracking-wider text-website-highlights-300",children:"Active"})]}),(0,mt.jsxs)("div",{className:"mt-1 text-[10px] text-slate-400 flex items-center gap-1",children:[(0,mt.jsx)(ai,{className:"size-3"}),ci(e.updatedAt||e.createdAt)]})]},e._id)})]}):(0,mt.jsxs)(mt.Fragment,{children:[(0,mt.jsx)("div",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-semibold",children:"Lobby Description"}),(0,mt.jsx)("div",{className:"text-xs text-slate-500",children:"Click this card to open the lobby description popup."})]})})]})},i)}),(0,mt.jsx)(oi.File,{to:`/ISK/${d}/lobby/create`,className:"!aspect-auto min-h-[620px] h-[72vh] max-h-[860px] !grid-rows-[auto_1fr_auto] hover:!scale-100 hover:!translate-y-0",children:(0,mt.jsxs)(oi.File.Bottom,{className:"justify-center",children:[(0,mt.jsx)("div",{className:"text-3xl text-website-specials-400",children:"+"}),(0,mt.jsx)(oi.File.Detail,{className:"mt-3 text-center text-sm",children:"Create New Campaign"})]})})]}),x&&(0,mt.jsx)("div",{className:"px-6 text-left text-sm text-slate-400 pb-6",children:"Loading campaigns..."}),F.show&&(0,mt.jsxs)("div",{className:"fixed z-[110] w-56 rounded-lg border border-slate-700 bg-slate-900/95 px-2 py-2 shadow-2xl",style:{top:F.y,left:F.x},onClick:e=>e.stopPropagation(),children:[(0,mt.jsx)("div",{className:"px-2 pb-2 text-[10px] uppercase tracking-widest text-slate-400 font-semibold",children:"Campaign Actions"}),(0,mt.jsxs)("button",{type:"button",onClick:()=>le(F.campaignID,F.campaignName),disabled:S===`leave:${F.campaignID}`,className:"flex w-full items-center gap-2 rounded border border-red-500/40 bg-red-500/10 px-2 py-2 text-left text-xs font-semibold text-red-300 hover:bg-red-500/20 disabled:opacity-60",children:[(0,mt.jsx)(ks,{className:"size-3.5"}),"Leave Campaign"]})]}),me&&(0,mt.jsx)("div",{className:"fixed inset-0 z-[100] bg-black/70 backdrop-blur-sm p-4 flex items-center justify-center",onClick:()=>E(""),children:(0,mt.jsxs)("div",{className:"w-full max-w-3xl rounded-xl border border-slate-700 bg-slate-900 text-slate-100 p-5 shadow-2xl max-h-[88vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,mt.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsx)("h2",{className:"text-lg font-bold",children:"Lobby Settings"}),(0,mt.jsx)("div",{className:"mt-1 text-xs text-slate-400",children:(null===(e=me.campaign)||void 0===e?void 0:e.name)||"Campaign"})]}),(0,mt.jsx)("button",{type:"button",onClick:()=>E(""),className:"rounded border border-slate-600 bg-slate-800 px-2 py-1 text-xs font-semibold text-slate-200 hover:bg-slate-700",children:"Close"})]}),(0,mt.jsxs)("div",{className:"mt-4 space-y-4 overflow-y-auto pr-2",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsx)("div",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-semibold",children:"Lobby Access"}),!(null!==(n=me.campaign.activeLobby)&&void 0!==n&&n.isActive)&&(0,mt.jsx)("div",{className:"mt-1 text-xs text-amber-300",children:"Start the lobby first, then choose who can enter."}),(null===(r=me.campaign.activeLobby)||void 0===r?void 0:r.isActive)&&me.roster.map(e=>{const t=di(e._id),n=t===di(me.campaign.dmId),r=n||me.lobbyMembers.has(t),s=e.username||`Player ${t.slice(-4).toUpperCase()}`;return(0,mt.jsxs)("label",{className:"mt-2 flex items-center justify-between gap-3 text-xs text-slate-200",children:[(0,mt.jsxs)("span",{className:"truncate",children:[s,n?" (DM)":""]}),(0,mt.jsx)("input",{type:"checkbox",checked:r,disabled:n||me.isSettingsBusy,onChange:e=>de(me.campaign,t,e.target.checked),className:"size-4 rounded border-slate-600 bg-slate-800"})]},t)})]}),(0,mt.jsxs)("div",{className:"border-t border-slate-700/80 pt-3",children:[(0,mt.jsx)("div",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-semibold",children:"Campaign Players"}),0===me.nonDmPlayers.length&&(0,mt.jsx)("div",{className:"mt-2 text-xs text-slate-400",children:"No players to manage yet."}),me.nonDmPlayers.map(e=>{const t=di(e._id),n=e.username||`Player ${t.slice(-4).toUpperCase()}`;return(0,mt.jsxs)("div",{className:"mt-2 flex items-center justify-between gap-2 rounded border border-slate-700/80 bg-slate-800/40 px-2 py-2",children:[(0,mt.jsx)("span",{className:"truncate text-xs text-slate-200",children:n}),(0,mt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mt.jsx)("button",{type:"button",onClick:()=>ue(me.campaign,t,"kick",n),disabled:me.isManageBusy,className:"rounded border border-amber-500/40 bg-amber-500/10 px-2 py-1 text-[11px] font-semibold text-amber-300 hover:bg-amber-500/20 disabled:opacity-60",children:"Kick"}),(0,mt.jsx)("button",{type:"button",onClick:()=>ue(me.campaign,t,"ban",n),disabled:me.isManageBusy,className:"rounded border border-red-500/40 bg-red-500/10 px-2 py-1 text-[11px] font-semibold text-red-300 hover:bg-red-500/20 disabled:opacity-60",children:"Ban"})]})]},t)})]}),(0,mt.jsxs)("div",{className:"border-t border-slate-700/80 pt-3",children:[(0,mt.jsx)("div",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-semibold",children:"Selected Characters"}),0===me.selectedAssignmentsForDM.length&&(0,mt.jsx)("div",{className:"mt-2 text-xs text-slate-400",children:"No players have selected a character yet."}),me.selectedAssignmentsForDM.map(e=>{const t=di(null===e||void 0===e?void 0:e.playerId),n=null===e||void 0===e?void 0:e.playerName,r=di(null===e||void 0===e?void 0:e.characterId),s=(null===e||void 0===e?void 0:e.characterName)||`Character ${r.slice(-4).toUpperCase()}`,a=Boolean(t)&&t!==di(me.campaign.dmId),i=S===`force-remove:${me.campaignID}:${t}`,l={playerId:t,playerName:n,characterId:r,characterName:s,characterLevel:Number(null===e||void 0===e?void 0:e.characterLevel)||1};return(0,mt.jsxs)("div",{className:"mt-2 rounded border border-slate-700/80 bg-slate-800/40 px-2 py-2",children:[(0,mt.jsxs)("div",{className:"text-xs font-semibold text-slate-200",children:[n,t===di(me.campaign.dmId)?" (DM)":""]}),(0,mt.jsxs)("div",{className:"mt-2 flex items-center justify-between gap-2 rounded border border-slate-700/70 bg-slate-900/40 px-2 py-1",children:[(0,mt.jsxs)("button",{type:"button",onClick:()=>te(me.campaign,l,n),className:"truncate text-left text-[11px] text-slate-200 hover:text-website-neutral-100",children:[s," (Lv"," ",Number(null===e||void 0===e?void 0:e.characterLevel)||1,") - Selected"]}),a&&(0,mt.jsxs)("button",{type:"button",onClick:()=>ae(me.campaign,l),disabled:i||me.isForceRemoveBusy,className:"inline-flex items-center gap-1 rounded border border-red-500/40 bg-red-500/10 px-2 py-1 text-[10px] font-semibold text-red-300 hover:bg-red-500/20 disabled:opacity-60",children:[(0,mt.jsx)(ii,{className:"size-3"}),"Force Remove"]})]})]},`${t||"player"}:${r}`)})]}),(0,mt.jsxs)("div",{className:"border-t border-slate-700/80 pt-3",children:[(0,mt.jsx)("div",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-semibold",children:"Banned Players"}),0===me.bannedPlayers.length&&(0,mt.jsx)("div",{className:"mt-2 text-xs text-slate-400",children:"No banned players."}),me.bannedPlayers.map(e=>{const t=di((null===e||void 0===e?void 0:e._id)||e),n=(null===e||void 0===e?void 0:e.username)||`Player ${t.slice(-4).toUpperCase()}`;return(0,mt.jsxs)("div",{className:"mt-2 flex items-center justify-between gap-2 rounded border border-slate-700/80 bg-slate-800/40 px-2 py-2",children:[(0,mt.jsx)("span",{className:"truncate text-xs text-slate-200",children:n}),(0,mt.jsx)("button",{type:"button",onClick:()=>ue(me.campaign,t,"unban",n),disabled:me.isManageBusy,className:"rounded border border-emerald-500/40 bg-emerald-500/10 px-2 py-1 text-[11px] font-semibold text-emerald-300 hover:bg-emerald-500/20 disabled:opacity-60",children:"Unban"})]},t)})]}),(0,mt.jsxs)("div",{className:"border-t border-slate-700/80 pt-3",children:[(0,mt.jsx)("div",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-semibold",children:"Send Invite"}),(0,mt.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,mt.jsx)("input",{type:"text",value:_[me.campaignID]||"",onChange:e=>L(t=>({...t,[me.campaignID]:e.target.value})),placeholder:"Exact username",className:"w-full rounded border border-slate-700 bg-slate-800/60 px-2 py-1 text-xs text-slate-100 focus:outline-none focus:ring-1 focus:ring-website-highlights-500"}),(0,mt.jsx)("button",{type:"button",onClick:()=>he(me.campaign),disabled:me.isInviteBusy,className:"rounded border border-website-highlights-500/50 bg-website-highlights-500/10 px-2 py-1 text-[11px] font-semibold text-website-neutral-100 hover:bg-website-highlights-500/20 disabled:opacity-60",children:"Invite"})]})]})]})]})}),D.isOpen&&(0,mt.jsx)("div",{className:"fixed inset-0 z-[100] bg-black/70 backdrop-blur-sm p-4 flex items-center justify-center",onClick:()=>z({isOpen:!1,campaignID:"",lobbyCode:"",selectedCharacterID:"",submitting:!1}),children:(0,mt.jsxs)("div",{className:"w-full max-w-xl rounded-xl border border-slate-700 bg-slate-900 text-slate-100 p-5 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,mt.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsx)("h2",{className:"text-lg font-bold",children:"Choose Lobby Character"}),(0,mt.jsx)("div",{className:"mt-1 text-xs text-slate-400",children:(null===fe||void 0===fe?void 0:fe.name)||"Campaign"})]}),(0,mt.jsx)("button",{type:"button",onClick:()=>z({isOpen:!1,campaignID:"",lobbyCode:"",selectedCharacterID:"",submitting:!1}),className:"rounded border border-slate-600 bg-slate-800 px-2 py-1 text-xs font-semibold text-slate-200 hover:bg-slate-700",children:"Close"})]}),(0,mt.jsxs)("div",{className:"mt-4 space-y-2",children:[0===be.length&&(0,mt.jsx)("div",{className:"rounded border border-amber-500/40 bg-amber-500/10 px-3 py-2 text-xs text-amber-300",children:"No characters available. Create one before joining this lobby."}),be.map(e=>{const t=di((null===e||void 0===e?void 0:e._id)||(null===e||void 0===e?void 0:e.id)),n=t===di(D.selectedCharacterID);return(0,mt.jsxs)("label",{className:"flex cursor-pointer items-center justify-between gap-3 rounded border px-3 py-2 text-xs "+(n?"border-website-highlights-500/60 bg-website-highlights-500/10 text-website-neutral-100":"border-slate-700 bg-slate-800/50 text-slate-200"),children:[(0,mt.jsxs)("span",{className:"truncate",children:[(null===e||void 0===e?void 0:e.name)||"Unnamed Character"," (Lv"," ",Number(null===e||void 0===e?void 0:e.level)||1,")"]}),(0,mt.jsx)("input",{type:"radio",name:`campaign-character-${D.campaignID}`,checked:n,onChange:()=>z(e=>({...e,selectedCharacterID:t})),className:"size-4"})]},t)})]}),(0,mt.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,mt.jsx)("button",{type:"button",onClick:()=>z({isOpen:!1,campaignID:"",lobbyCode:"",selectedCharacterID:"",submitting:!1}),className:"rounded border border-slate-600 bg-slate-800 px-3 py-2 text-xs font-semibold text-slate-200 hover:bg-slate-700",children:"Cancel"}),(0,mt.jsx)("button",{type:"button",onClick:ee,disabled:!D.selectedCharacterID||D.submitting,className:"rounded border border-website-highlights-500/60 bg-website-highlights-500/10 px-3 py-2 text-xs font-semibold text-website-neutral-100 hover:bg-website-highlights-500/20 disabled:opacity-60",children:D.submitting?"Saving...":"Save and Enter"})]})]})}),O.isOpen&&(0,mt.jsx)("div",{className:"fixed inset-0 z-[100] bg-black/70 backdrop-blur-sm p-4 flex items-center justify-center",onClick:()=>R({isOpen:!1,campaignID:"",assignment:null,ownerName:"",campaignName:""}),children:(0,mt.jsxs)("div",{className:"w-full max-w-lg rounded-xl border border-slate-700 bg-slate-900 text-slate-100 p-5 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,mt.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsx)("h2",{className:"text-lg font-bold",children:(null===(s=O.assignment)||void 0===s?void 0:s.characterName)||"Selected Character"}),(0,mt.jsxs)("div",{className:"mt-1 text-xs text-slate-400",children:["Owner: ",O.ownerName||"Unknown player"]}),(0,mt.jsxs)("div",{className:"mt-1 text-xs text-slate-500",children:["Campaign: ",O.campaignName||"Campaign"]})]}),(0,mt.jsx)("button",{type:"button",onClick:()=>R({isOpen:!1,campaignID:"",assignment:null,ownerName:"",campaignName:""}),className:"rounded border border-slate-600 bg-slate-800 px-2 py-1 text-xs font-semibold text-slate-200 hover:bg-slate-700",children:"Close"})]}),(0,mt.jsxs)("div",{className:"mt-4 rounded border border-slate-700 bg-slate-800/60 px-3 py-3 text-sm text-slate-200",children:["Level: ",Number(null===(a=O.assignment)||void 0===a?void 0:a.characterLevel)||1]}),(0,mt.jsx)("div",{className:"mt-4 flex justify-end",children:(0,mt.jsxs)("button",{type:"button",onClick:re,className:"inline-flex items-center gap-2 rounded border border-website-highlights-500/60 bg-website-highlights-500/10 px-3 py-2 text-xs font-semibold text-website-neutral-100 hover:bg-website-highlights-500/20",children:[(0,mt.jsx)(li,{className:"size-3.5"}),"View Full Character"]})})]})}),pe&&(0,mt.jsx)("div",{className:"fixed inset-0 z-50 bg-black/70 backdrop-blur-sm p-4 flex items-center justify-center",onClick:()=>I(""),children:(0,mt.jsxs)("div",{className:"w-full max-w-2xl rounded-xl border border-slate-700 bg-slate-900 text-slate-100 p-5 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,mt.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsx)("h2",{className:"text-lg font-bold",children:pe.name||"Campaign"}),(0,mt.jsx)("div",{className:"mt-1 text-xs text-slate-400",children:pe.dmName?`DM: ${pe.dmName}`:"DM not set"})]}),(0,mt.jsx)("button",{type:"button",onClick:()=>I(""),className:"rounded border border-slate-600 bg-slate-800 px-2 py-1 text-xs font-semibold text-slate-200 hover:bg-slate-700",children:"Close"})]}),(0,mt.jsx)("div",{className:"mt-4 rounded border border-slate-700 bg-slate-800/60 px-3 py-3 text-sm text-slate-200 whitespace-pre-wrap",children:pe.description||"No description set."}),(0,mt.jsxs)("div",{className:"mt-3 text-xs text-slate-400",children:["Setting: ",pe.setting||"Unspecified"]})]})})]}),(0,mt.jsx)(Zs.Right,{className:"col-start-3"}),(0,mt.jsx)(Zs.Footer,{className:"col-span-3"})]})};const mi=function(){const e=(0,t.useContext)(Sr),n=ne(),{sessionID:r}=se(),s=localStorage.getItem("player_ID"),a=(0,t.useMemo)(()=>r||sessionStorage.getItem("session_ID")||"default",[r]),[i,l]=(0,t.useState)(""),[o,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(""),[h,p]=(0,t.useState)("");return(0,mt.jsxs)(Zs,{className:"bg-website-default-900 text-website-default-100",children:[(0,mt.jsx)(Qs,{className:"col-span-3",title:"Join Campaign"}),(0,mt.jsx)(Zs.Left,{className:"row-span-1 col-start-1"}),(0,mt.jsx)(Zs.Center,{className:"row-span-1 col-start-2 min-h-screen p-6",children:(0,mt.jsx)("div",{className:"max-w-xl mx-auto text-left",children:(0,mt.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!s)return void u("Missing player session. Please log in again.");const r=i.trim().toUpperCase();if(!r)return void u("Campaign code is required.");c(!0),u(""),p("");const l=await ns(e,"campaign_join",{playerID:s,joinCode:r});c(!1),null!==l&&void 0!==l&&l.success?(p(null!==l&&void 0!==l&&l.alreadyJoined?"Already in campaign.":"Joined campaign."),n(`/ISK/${a}/lobby`)):u((null===l||void 0===l?void 0:l.message)||"Failed to join campaign")},className:"rounded-2xl border border-website-default-700 bg-website-default-800/70 p-6 space-y-5 shadow-2xl",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"block text-xs tracking-wider uppercase text-website-default-300 mb-2",children:"Campaign Code"}),(0,mt.jsx)("input",{type:"text",value:i,onChange:e=>l(e.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,12)),className:"w-full rounded-lg border border-website-default-600 bg-website-default-900 px-3 py-2 text-sm tracking-widest uppercase focus:outline-none focus:ring-2 focus:ring-website-highlights-500",placeholder:"AB12CD",required:!0})]}),d&&(0,mt.jsx)("div",{className:"rounded border border-red-500/40 bg-red-500/10 px-3 py-2 text-sm text-red-300",children:d}),h&&(0,mt.jsx)("div",{className:"rounded border border-website-highlights-500/40 bg-website-highlights-500/10 px-3 py-2 text-sm text-website-neutral-100",children:h}),(0,mt.jsxs)("div",{className:"flex flex-wrap gap-3 pt-2",children:[(0,mt.jsx)("button",{type:"submit",disabled:o,className:"rounded-lg border border-website-highlights-500/60 bg-website-highlights-500/15 px-4 py-2 text-sm font-semibold text-website-neutral-100 hover:bg-website-highlights-500/25 disabled:opacity-50",children:o?"Joining...":"Join Campaign"}),(0,mt.jsx)(lt,{to:`/ISK/${a}/lobby`,className:"rounded-lg border border-website-default-600 bg-website-default-800 px-4 py-2 text-sm font-semibold text-website-default-200 hover:bg-website-default-700",children:"Cancel"})]})]})})}),(0,mt.jsx)(Zs.Right,{className:"col-start-3"}),(0,mt.jsx)(Zs.Footer,{className:"col-span-3"})]})};const fi=function(){const e=(0,t.useContext)(Sr),n=ne(),{sessionID:r}=se(),s=localStorage.getItem("player_ID"),a=(0,t.useMemo)(()=>r||sessionStorage.getItem("session_ID")||"default",[r]),[i,l]=(0,t.useState)({name:"",description:"",setting:"",maxPlayers:6,isPrivate:!1}),[o,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)("");return(0,mt.jsxs)(Zs,{className:"bg-website-default-900 text-website-default-100",children:[(0,mt.jsx)(Qs,{className:"col-span-3",title:"Create Campaign"}),(0,mt.jsx)(Zs.Left,{className:"row-span-1 col-start-1"}),(0,mt.jsx)(Zs.Center,{className:"row-span-1 col-start-2 min-h-screen p-6",children:(0,mt.jsx)("div",{className:"max-w-2xl mx-auto text-left",children:(0,mt.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!s)return void u("Missing player session. Please log in again.");const r=i.name.trim();if(!r)return void u("Campaign name is required.");c(!0),u("");const l=await ns(e,"campaign_create",{playerID:s,name:r,description:i.description,setting:i.setting,maxPlayers:Number(i.maxPlayers),isPrivate:Boolean(i.isPrivate)});c(!1),null!==l&&void 0!==l&&l.success?n(`/ISK/${a}/lobby`):u((null===l||void 0===l?void 0:l.message)||"Failed to create campaign")},className:"rounded-2xl border border-website-default-700 bg-website-default-800/70 p-6 space-y-5 shadow-2xl",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"block text-xs tracking-wider uppercase text-website-default-300 mb-2",children:"Campaign Name"}),(0,mt.jsx)("input",{type:"text",value:i.name,onChange:e=>l(t=>({...t,name:e.target.value})),className:"w-full rounded-lg border border-website-default-600 bg-website-default-900 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-website-highlights-500",placeholder:"Ashfall Chronicles",maxLength:80,required:!0})]}),(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"block text-xs tracking-wider uppercase text-website-default-300 mb-2",children:"Description"}),(0,mt.jsx)("textarea",{value:i.description,onChange:e=>l(t=>({...t,description:e.target.value})),className:"w-full min-h-28 rounded-lg border border-website-default-600 bg-website-default-900 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-website-highlights-500",placeholder:"Give your players a quick overview of this world.",maxLength:1e3})]}),(0,mt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"block text-xs tracking-wider uppercase text-website-default-300 mb-2",children:"Setting"}),(0,mt.jsx)("input",{type:"text",value:i.setting,onChange:e=>l(t=>({...t,setting:e.target.value})),className:"w-full rounded-lg border border-website-default-600 bg-website-default-900 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-website-highlights-500",placeholder:"Dark Fantasy",maxLength:120})]}),(0,mt.jsxs)("div",{children:[(0,mt.jsx)("label",{className:"block text-xs tracking-wider uppercase text-website-default-300 mb-2",children:"Max Players"}),(0,mt.jsx)("select",{value:i.maxPlayers,onChange:e=>l(t=>({...t,maxPlayers:Number(e.target.value)})),className:"w-full rounded-lg border border-website-default-600 bg-website-default-900 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-website-highlights-500",children:[2,3,4,5,6,7,8,9,10,11,12].map(e=>(0,mt.jsxs)("option",{value:e,children:[e," Players"]},e))})]})]}),(0,mt.jsxs)("label",{className:"flex items-center gap-3 text-sm text-website-default-200",children:[(0,mt.jsx)("input",{type:"checkbox",checked:i.isPrivate,onChange:e=>l(t=>({...t,isPrivate:e.target.checked})),className:"size-4 rounded border-website-default-600 bg-website-default-900"}),"Private Campaign"]}),d&&(0,mt.jsx)("div",{className:"rounded border border-red-500/40 bg-red-500/10 px-3 py-2 text-sm text-red-300",children:d}),(0,mt.jsxs)("div",{className:"flex flex-wrap gap-3 pt-2",children:[(0,mt.jsx)("button",{type:"submit",disabled:o,className:"rounded-lg border border-website-specials-500/60 bg-website-specials-500/15 px-4 py-2 text-sm font-semibold text-website-neutral-100 hover:bg-website-specials-500/25 disabled:opacity-50",children:o?"Creating...":"Create Campaign"}),(0,mt.jsx)(lt,{to:`/ISK/${a}/lobby`,className:"rounded-lg border border-website-default-600 bg-website-default-800 px-4 py-2 text-sm font-semibold text-website-default-200 hover:bg-website-default-700",children:"Cancel"})]})]})})}),(0,mt.jsx)(Zs.Right,{className:"col-start-3"}),(0,mt.jsx)(Zs.Footer,{className:"col-span-3"})]})},bi=Ur("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),gi=Ur("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),vi=Ur("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),xi=Ur("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]),yi=Ur("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),wi=Ur("droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);function ji(e){var t,n,r,s,a,i,l,o,c,d;let{character:u,to:h,onClick:p}=e;const m=(null===u||void 0===u||null===(t=u.classType)||void 0===t?void 0:t.name)||(null===u||void 0===u?void 0:u.classType)||(null===u||void 0===u||null===(n=u.class)||void 0===n?void 0:n.name)||(null===u||void 0===u?void 0:u.className)||"No Class",f=(null===u||void 0===u||null===(r=u.race)||void 0===r?void 0:r.name)||(null===u||void 0===u?void 0:u.race)||(null===u||void 0===u?void 0:u.raceName)||"No Race";return(0,mt.jsx)(oi.File,{to:h,onClick:p,className:"!grid-rows-1 !p-0 overflow-hidden",children:(0,mt.jsxs)("div",{className:"overflow-y-auto overflow-x-hidden h-full px-5 py-5",style:{scrollbarWidth:"none",scrollbarColor:"#475569 transparent"},children:[(0,mt.jsxs)("div",{className:"relative bg-gradient-to-r rounded-xl from-purple-600 via-purple-500 to-indigo-600 -mx-5 -mt-5 p-4 pb-12 mb-2 overflow-hidden",children:[(0,mt.jsx)("div",{className:"absolute inset-0 bg-black/20"}),(0,mt.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_120%,rgba(120,119,198,0.3),transparent)]"}),(0,mt.jsxs)("div",{className:"relative z-10",children:[(0,mt.jsx)("div",{className:"flex justify-end mb-2",children:(0,mt.jsx)("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-3 py-1.5 border border-white/30 shadow-lg",children:(0,mt.jsxs)("div",{className:"text-sm font-bold text-white",children:["Lv ",(null===u||void 0===u?void 0:u.level)||1]})})}),(0,mt.jsx)("div",{className:"text-center mb-3",children:(0,mt.jsx)("h2",{className:"text-xl font-bold text-white drop-shadow-lg px-4",children:(null===u||void 0===u?void 0:u.name)||"Unnamed Character"})}),(0,mt.jsxs)("div",{className:"flex items-center justify-center gap-2 text-purple-100 text-xs px-4",children:[(0,mt.jsx)("span",{className:"font-medium truncate max-w-[45%]",children:m}),(0,mt.jsx)("span",{className:"text-purple-300 flex-shrink-0",children:"|"}),(0,mt.jsx)("span",{className:"truncate max-w-[45%]",children:f})]})]})]}),(0,mt.jsx)("div",{className:"flex justify-center -mt-12 mb-4 relative z-20",children:(0,mt.jsxs)("div",{className:"relative",children:[(0,mt.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-purple-500 to-indigo-600 blur-md opacity-75 animate-pulse"}),(0,mt.jsx)("div",{className:"relative w-20 h-20 rounded-full bg-gradient-to-br from-purple-500 to-indigo-600 p-1 shadow-xl shadow-purple-500/50 ring-4 ring-slate-900",children:(0,mt.jsx)("div",{className:"w-full h-full rounded-full bg-slate-800 flex items-center justify-center",children:(0,mt.jsx)(Es,{className:"w-10 h-10 text-purple-400"})})})]})}),(0,mt.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,mt.jsx)(Ni,{icon:(0,mt.jsx)(xi,{className:"w-3.5 h-3.5"}),label:"HP",current:(null===u||void 0===u||null===(s=u.hp)||void 0===s?void 0:s.current)||0,max:(null===u||void 0===u||null===(a=u.hp)||void 0===a?void 0:a.max)||1,temp:(null===u||void 0===u||null===(i=u.hp)||void 0===i?void 0:i.temp)||0,color:"red"}),(0,mt.jsx)(Ni,{icon:(0,mt.jsx)(yi,{className:"w-3.5 h-3.5"}),label:"STA",current:(null===u||void 0===u||null===(l=u.sta)||void 0===l?void 0:l.current)||0,max:(null===u||void 0===u||null===(o=u.sta)||void 0===o?void 0:o.max)||1,color:"yellow"}),(0,mt.jsx)(Ni,{icon:(0,mt.jsx)(wi,{className:"w-3.5 h-3.5"}),label:"MP",current:(null===u||void 0===u||null===(c=u.mp)||void 0===c?void 0:c.current)||0,max:(null===u||void 0===u||null===(d=u.mp)||void 0===d?void 0:d.max)||1,color:"blue"})]}),(0,mt.jsxs)("div",{className:"relative my-4",children:[(0,mt.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,mt.jsx)("div",{className:"w-full border-t border-slate-700/50"})}),(0,mt.jsx)("div",{className:"relative flex justify-center",children:(0,mt.jsx)("div",{className:"bg-gradient-to-r from-transparent via-purple-500/20 to-transparent h-px w-1/2"})})]}),Object.keys((null===u||void 0===u?void 0:u.stats)||{}).length>0&&(0,mt.jsx)("div",{className:"grid grid-cols-3 gap-2 w-full mb-4",children:Object.entries(u.stats).map(e=>{var t,n;let[r,s]=e;const a="object"===typeof s?null!==(t=null!==(n=s.total)&&void 0!==n?n:s.score)&&void 0!==t?t:0:s||0;return(0,mt.jsxs)("div",{className:"group/stat relative bg-slate-800/60 rounded-lg p-2 border border-slate-700/50 text-center hover:border-purple-500/50 hover:bg-slate-800/80 transition-all duration-200",children:[(0,mt.jsx)("div",{className:"absolute inset-0 rounded-lg bg-gradient-to-br from-purple-500/0 to-blue-500/0 group-hover/stat:from-purple-500/10 group-hover/stat:to-blue-500/10 transition-all duration-200"}),(0,mt.jsxs)("div",{className:"relative",children:[(0,mt.jsx)("div",{className:"text-xs text-slate-400 font-medium uppercase tracking-wider",children:r}),(0,mt.jsx)("div",{className:"text-lg font-bold text-white my-0.5 group-hover/stat:text-purple-300 transition-colors",children:a}),(0,mt.jsx)("div",{className:"text-xs text-purple-400 font-semibold",children:ki(a)})]})]},r)})}),(0,mt.jsx)("div",{className:"h-4"})]})})}function Ni(e){let{icon:t,label:n,current:r,max:s,temp:a=0,color:i}=e;const l=s>0?r/s*100:0,o=l<30,c=l<15;return(0,mt.jsxs)("div",{className:`\n      bg-slate-800/60 rounded-lg p-2 border border-slate-700/50 \n      hover:border-slate-600/50 transition-all duration-200\n      ${c?"animate-pulse border-red-500/50":""}\n    `,children:[(0,mt.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,mt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mt.jsx)("div",{className:`${{red:"text-red-400",yellow:"text-yellow-400",blue:"text-blue-400"}[i]} ${c?"animate-pulse":""}`,children:t}),(0,mt.jsx)("span",{className:"text-sm font-medium text-slate-300",children:n})]}),(0,mt.jsxs)("div",{className:"text-sm font-bold text-white",children:[(0,mt.jsx)("span",{className:c?"text-red-400":"",children:r}),a>0&&(0,mt.jsxs)("span",{className:"text-cyan-400",children:["+",a]}),(0,mt.jsxs)("span",{className:"text-slate-500",children:["/",s]})]})]}),(0,mt.jsxs)("div",{className:"relative h-2 bg-slate-900/50 rounded-full overflow-hidden ring-1 ring-slate-700/50",children:[(0,mt.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent"}),(0,mt.jsx)("div",{className:`\n            h-full bg-gradient-to-r ${{red:"from-red-600 via-red-500 to-red-600",yellow:"from-yellow-600 via-yellow-500 to-yellow-600",blue:"from-blue-600 via-blue-500 to-blue-600"}[i]} \n            transition-all duration-500 ease-out \n            shadow-lg ${{red:"shadow-red-500/50",yellow:"shadow-yellow-500/50",blue:"shadow-blue-500/50"}[i]}\n            ${o?"animate-pulse":""}\n          `,style:{width:`${Math.min(l,100)}%`}})]})]})}function ki(e){const t=Math.floor((e-10)/2);return t>=0?`+${t}`:`${t}`}function Si(e){const t=e||{},n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})||{},r=t.hp||t.HP||t._baseHP||{max:0,current:0,temp:0},s=t.mp||t.MP||t._baseMP||{max:0,current:0,temp:0},a=t.sta||t.STA||t._baseSTA||{max:0,current:0,temp:0},i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&"object"===typeof e&&Object.keys(e).length>0)return e;if(t&&"object"===typeof t){const e={};return Object.entries(t).forEach(t=>{let[n,r]=t;const s=Number(r)||0;e[n.toUpperCase()]={score:s,modifier:Math.floor((s-10)/2)}}),e}return{}}(t.stats,t._baseStats||n.stats);return{...n,...t,id:String(t.id||t._id||n.id||n._id||""),name:t.name||n.name||"Unnamed Character",level:t.level||n.level||1,hp:r,mp:s,sta:a,stats:i}}function Ai(){var e;const n=(0,t.useContext)(Sr),r=ne(),[s,a]=(0,t.useState)([]),[i,l]=(0,t.useState)(!0),[o,c]=(0,t.useState)(null),d=localStorage.getItem("player_ID"),[u,h]=(0,t.useState)({}),p="[CharacterMenu]",m=(0,t.useRef)(!1),f=(0,t.useRef)(""),[b,g]=(0,t.useState)({show:!1,x:0,y:0,character:null}),v=()=>{g(e=>({...e,show:!1,character:null}))};return(0,t.useEffect)(()=>{if(!n||!d)return void l(!1);const e=`${n.id||"no-socket"}:${d}`;if(m.current)return void console.log(`${p} skip load (already in progress)`,{loadKey:e});if(f.current===e)return void console.log(`${p} skip load (same key already loaded)`,{loadKey:e});m.current=!0,f.current=e;(async()=>{const e=performance.now();l(!0);try{var t;const e=performance.now();console.log(`${p} list fetch start`,{playerID:d});const r=await new Promise(e=>{n.emit("playerData_getCharacter",{playerID:d},e)});if(console.log(`${p} list fetch done`,{playerID:d,durationMs:Math.round(performance.now()-e),success:!(null===r||void 0===r||!r.success),count:(null===r||void 0===r||null===(t=r.characters)||void 0===t?void 0:t.length)||0}),!r||!r.success)throw new Error((null===r||void 0===r?void 0:r.message)||"Failed to fetch characters");const s=r.characters||[];a(s);const i={},l=performance.now();await Promise.all(s.map(async e=>{const t=await(async e=>{if(!n||!d)return null;const t=performance.now();return console.log(`${p} build start`,{characterID:e}),new Promise(r=>{n.emit("character_builder",{characterID:e},n=>{const s=Math.round(performance.now()-t);if(n&&n.success)console.log(`${p} build success`,{characterID:e,durationMs:s}),r(n.character);else{const t=(null===n||void 0===n?void 0:n.message)||"Failed to build character";console.error(`${p} build failed`,{characterID:e,durationMs:s,errorMsg:t}),r(null)}})})})(e.id);i[e.id]=Si(t,e)})),console.log(`${p} build all done`,{count:s.length,durationMs:Math.round(performance.now()-l)}),h(i),c(null)}catch(bo){console.error(`${p} load failed`,{message:bo.message}),c(bo.message),f.current=""}finally{console.log(`${p} load complete`,{playerID:d,totalDurationMs:Math.round(performance.now()-e)}),l(!1),m.current=!1}})()},[n,d]),(0,mt.jsxs)(mt.Fragment,{children:[b.show&&(0,mt.jsxs)("div",{className:"absolute z-[100] w-56 bg-website-default-800/95 backdrop-blur-md border border-website-default-700 rounded-lg shadow-2xl py-2 text-left",style:{top:b.y,left:b.x},children:[(0,mt.jsx)("div",{className:"px-4 py-1.5 text-[10px] tracking-widest text-website-default-400 uppercase font-black",children:"Character Actions"}),(0,mt.jsx)("div",{className:"px-4 pb-2 text-xs font-semibold text-website-default-300 truncate",children:null===(e=b.character)||void 0===e?void 0:e.name}),(0,mt.jsx)("div",{className:"h-px bg-website-default-700/50 my-1 mx-2"}),(0,mt.jsxs)("button",{onClick:()=>{var e;return(e=>{if(!e)return;v();const t=sessionStorage.getItem("session_ID")||"default";r(`/ISK/${t}/character/view/${e}`)})(null===(e=b.character)||void 0===e?void 0:e.id)},className:"w-full flex items-center px-4 py-2.5 text-website-default-100 hover:bg-website-default-700 transition-all duration-150 group",children:[(0,mt.jsx)(li,{className:"size-4 mr-3 text-website-default-400 group-hover:text-website-default-100"}),(0,mt.jsx)("span",{className:"text-sm font-medium",children:"View Character"})]}),(0,mt.jsxs)("button",{onClick:()=>{var e;return(e=>{if(!e)return;v();const t=sessionStorage.getItem("session_ID")||"default";r(`/ISK/${t}/character/edit/${e}`)})(null===(e=b.character)||void 0===e?void 0:e.id)},className:"w-full flex items-center px-4 py-2.5 text-website-default-100 hover:bg-website-default-700 transition-all duration-150 group",children:[(0,mt.jsx)(bi,{className:"size-4 mr-3 text-website-default-400 group-hover:text-website-default-100"}),(0,mt.jsx)("span",{className:"text-sm font-medium",children:"Edit Profile"})]}),(0,mt.jsx)("div",{className:"h-px bg-website-default-700/50 my-1 mx-2"}),(0,mt.jsxs)("button",{onClick:()=>{return e=b.character.id,void(n&&window.confirm("Are you sure you want to delete this character? This action cannot be undone.")&&n.emit("character_delete",{characterID:e},t=>{t&&t.success?(a(t=>t.filter(t=>String(t.id)!==String(e))),v()):alert((null===t||void 0===t?void 0:t.message)||"Failed to delete")}));var e},className:"w-full flex items-center px-4 py-2.5 text-red-400 hover:bg-red-500/10 hover:text-red-300 transition-all duration-150 group",children:[(0,mt.jsx)(gi,{className:"size-4 mr-3 text-red-400/60 group-hover:text-red-300"}),(0,mt.jsx)("span",{className:"text-sm font-medium",children:"Delete Character"})]})]}),(0,mt.jsxs)(Zs,{className:"bg-website-default-900 text-center p-4 shadow-lg text-website-default-100 justify-center space-x-8",children:[(0,mt.jsx)(Qs,{className:"col-span-3"}),(0,mt.jsx)(Zs.Left,{className:"row-span-1 col-start-1"}),(0,mt.jsx)(Zs.Center,{className:"row-span-1 col-start-2 min-h-screen",children:(0,mt.jsxs)(oi,{children:[i&&(0,mt.jsx)("div",{children:"Loading characters..."}),o&&(0,mt.jsxs)("div",{className:"text-red-400",children:["Error: ",o]}),!i&&!o&&s.map(e=>{const t=Si(u[e.id],e);return(0,mt.jsx)("div",{onContextMenu:e=>((e,t)=>{e.preventDefault(),g({show:!0,x:e.pageX,y:e.pageY,character:t})})(e,t),className:"relative",children:(0,mt.jsx)(ji,{character:t,to:`/ISK/${sessionStorage.getItem("session_ID")||"default"}/character/view/${t.id}`})},e.id)}),(0,mt.jsx)(oi.File,{to:`/ISK/${sessionStorage.getItem("session_ID")||"default"}/character/creation`,children:(0,mt.jsxs)(oi.File.Bottom,{children:[(0,mt.jsx)(vi,{className:"size-8 aspect-[1/1]"}),(0,mt.jsx)(oi.File.Detail,{children:(0,mt.jsx)("p",{children:"Add New Character..."})})]})})]})}),(0,mt.jsx)(Zs.Right,{className:"col-start-3"}),(0,mt.jsx)(Zs.Footer,{className:"col-span-3"})]})]})}function Ci(e){let{children:t}=e;return(0,mt.jsxs)("div",{class:"grid justify-center md:grid-rows-[auto_1fr_auto] h-screen w-screen grid-cols-1 overflow-x-hidden",children:[(0,mt.jsx)(Qs,{}),(0,mt.jsx)("main",{children:t}),(0,mt.jsx)(Js,{})]})}const Ei={name:"",age:{years:"",month:"",day:""},gender:"",model:{size:"",height:"",weight:""},alignment:"",customization:{skinColor:"",skinColorCustom:"",eyeColor:"",eyeColorCustom:"",hairColor:"",hairColorCustom:"",additionalTraits:[]},stories:{longStory:"",personality:[],ideals:[],flaws:[],relationships:{}},race:"",class:"",subclass:"",subrace:"",background:"",stats:{str:"",dex:"",con:"",int:"",wis:"",cha:"",luck:""},abilityScoreMethod:"random",abilityScoreChoices:{race:{},subrace:{}},inv:{gp:0,items:{},equipment:{head:[],body:[],legs:[],feet:[],arms:[],hands:[],weapon:[],fingers:[],neck:[],trinkets:[]}},skills:{active:{},passive:{},proficiencies:{},languages:{}},effects:{},actions:[],level:1,editing:"true",classBaseItemIds:[],classBaseProficiencies:[],classEquipmentChoices:{},classAnyItemSelections:{},backgroundBaseGp:0,backgroundBaseItemIds:[],backgroundBaseProficiencies:[],backgroundEquipmentChoices:{},backgroundAnyItemSelections:{},proficiencyChoices:{}};function Mi(){return"function"===typeof structuredClone?structuredClone(Ei):JSON.parse(JSON.stringify(Ei))}const Ii=(0,t.createContext)(null);function _i(e){let{children:n,gameData:r={classes:[],subclasses:[],races:[],subraces:[],backgrounds:[],items:[]}}=e;const s=(0,t.useMemo)(()=>{const e={},t={},n={},s={},a={},i={},l={};return(r.classes||[]).forEach(t=>{t&&t._id&&(e[t._id]=t)}),(r.subclasses||[]).forEach(e=>{e&&e._id&&(t[e._id]=e)}),(r.races||[]).forEach(e=>{e&&e._id&&(n[e._id]=e)}),(r.subraces||[]).forEach(e=>{e&&e._id&&(s[e._id]=e)}),(r.backgrounds||[]).forEach(e=>{e&&e._id&&(a[e._id]=e)}),(r.items||[]).forEach(e=>{e&&e._id&&(l[e._id]=e,e.itemId&&(i[e.itemId]=e))}),{classesById:e,subclassesById:t,racesById:n,subracesById:s,backgroundsById:a,itemsByItemId:i,itemsByMongoId:l}},[r]),a=(0,t.useMemo)(()=>({classes:r.classes||[],subclasses:r.subclasses||[],races:r.races||[],subraces:r.subraces||[],backgrounds:r.backgrounds||[],items:r.items||[]}),[r]),i=(0,t.useMemo)(()=>({getClassById:e=>s.classesById[e]||null,getSubclassById:e=>s.subclassesById[e]||null,getRaceById:e=>s.racesById[e]||null,getSubraceById:e=>s.subracesById[e]||null,getBackgroundById:e=>s.backgroundsById[e]||null,getItemByMongoId:e=>s.itemsByMongoId[e]||null,getItemByItemId:e=>s.itemsByItemId[e]||null,getSubclassesForClass:e=>a.subclasses.filter(t=>t.parentClass===e),getRacesBySize:e=>a.races.filter(t=>t.size===e)}),[s,a]),l=(0,t.useMemo)(()=>({maps:s,arrays:a,selectors:i}),[s,a,i]);return(0,mt.jsx)(Ii.Provider,{value:l,children:n})}function Li(){const e=(0,t.useContext)(Ii);if(!e)throw new Error("useGameData must be used within a GameDataProvider");return e}const Ti=Ur("arrow-big-left-dash",[["path",{d:"M13 9a1 1 0 0 1-1-1V5.061a1 1 0 0 0-1.811-.75l-6.835 6.836a1.207 1.207 0 0 0 0 1.707l6.835 6.835a1 1 0 0 0 1.811-.75V16a1 1 0 0 1 1-1h2a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1z",key:"p8w4w5"}],["path",{d:"M20 9v6",key:"14roy0"}]]),Pi=Ur("arrow-big-right-dash",[["path",{d:"M11 9a1 1 0 0 0 1-1V5.061a1 1 0 0 1 1.811-.75l6.836 6.836a1.207 1.207 0 0 1 0 1.707l-6.836 6.835a1 1 0 0 1-1.811-.75V16a1 1 0 0 0-1-1H9a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1z",key:"67vhrh"}],["path",{d:"M4 9v6",key:"bns7oa"}]]),Di=["Male","Female","Non-binary","Agender","Genderfluid","Femboy","Filipino","Stickman","Fruit tart","Fucked up Rubik cube","Prefer not to say"],zi=Ur("circle-user",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),Oi=Ur("shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]),Ri=Ur("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Fi=Ur("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),$i=(0,t.createContext)();function Bi(e){let{children:n,className:r="",defaultOpen:s=!1}=e;const[a,i]=(0,t.useState)(s);return(0,mt.jsx)($i.Provider,{value:{isOpen:a,setIsOpen:i},children:(0,mt.jsx)("div",{className:`rounded-lg shadow-md border overflow-hidden transition-all duration-200 hover:shadow-lg ${r}`,children:n})})}Bi.Header=function(e){let{children:n,className:r=""}=e;const{isOpen:s,setIsOpen:a}=(0,t.useContext)($i);return(0,mt.jsxs)("div",{className:`p-4 cursor-pointer flex justify-between items-center transition-colors duration-200 ${r}`,onClick:()=>a(!s),children:[(0,mt.jsx)("div",{className:"flex-1",children:n}),(0,mt.jsx)("div",{className:"transition-transform duration-200 ml-4",children:s?(0,mt.jsx)(Ri,{className:"w-5 h-5 text-gray-600"}):(0,mt.jsx)(Fi,{className:"w-5 h-5 text-gray-600"})})]})},Bi.Content=function(e){let{children:n,className:r=""}=e;const{isOpen:s}=(0,t.useContext)($i);return(0,mt.jsx)("div",{className:"transition-all duration-300 ease-in-out overflow-hidden \n      "+(s?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"),children:(0,mt.jsx)("div",{className:`p-4 ${r}`,children:n})})},Bi.Title=function(e){let{children:t,className:n=""}=e;return(0,mt.jsx)("h3",{className:`font-semibold text-website-default-100 text-lg ${n}`,children:t})},Bi.Description=function(e){let{children:t,className:n=""}=e;return(0,mt.jsx)("h3",{className:`text-website-default-300 text-xs ${n}`,children:t})},Bi.Actions=function(e){let{children:t,className:n=""}=e;return(0,mt.jsx)("div",{className:`flex gap-2 ml-4 ${n}`,onClick:e=>e.stopPropagation(),children:t})};const Hi={additionalTraits:["scarred","tattooed","pierced","freckled","mysterious aura"],personality:["brave","curious","loyal","sarcastic","patient","stubborn"],ideals:["justice","freedom","knowledge","honor","balance","compassion"],flaws:["greedy","impulsive","arrogant","secretive","vengeful","reckless"]},Ui={hair:["black","brown","blonde","red","gray","white"],skin:["light","tan","brown","dark","olive"],eye:["brown","blue","green","gray","hazel"]},qi=e=>Array.isArray(e)?[...new Set(e.map(e=>String(e).trim()).filter(Boolean))]:"string"===typeof e?[...new Set(e.split(/[\n,]/g).map(e=>e.trim()).filter(Boolean))]:[];function Wi(e){var n,r,s,a,i,l,o,c,d,u,h,p,m,f,b,g,v,x,y,w,j,N,k,S,A,C,E,M;let{values:I,onChange:_}=e;const L=(0,t.useRef)(null),T=(0,t.useRef)(""),[P,D]=(0,t.useState)(!1),[z,O]=(0,t.useState)(!1),[R,F]=(0,t.useState)(!1),[$,B]=(0,t.useState)(1),[H,U]=(0,t.useState)(1),q=["Lawful","Neutral","Chaotic"],W=["Good","Neutral","Evil"],K=(0,t.useRef)(null),Y=Di,[X,V]=(0,t.useState)(()=>Mi()),Q=I||X,[G,J]=(0,t.useState)({"":{name:"",relationship:"",description:""}}),[Z,ee]=(0,t.useState)({additionalTraits:"",personality:"",ideals:"",flaws:""}),te=(0,t.useMemo)(()=>{var e;return qi(null===(e=Q.customization)||void 0===e?void 0:e.additionalTraits)},[null===(n=Q.customization)||void 0===n?void 0:n.additionalTraits]),ne=(0,t.useMemo)(()=>{var e;return qi(null===(e=Q.stories)||void 0===e?void 0:e.personality)},[null===(r=Q.stories)||void 0===r?void 0:r.personality]),re=(0,t.useMemo)(()=>{var e;return qi(null===(e=Q.stories)||void 0===e?void 0:e.ideals)},[null===(s=Q.stories)||void 0===s?void 0:s.ideals]),se=(0,t.useMemo)(()=>{var e;return qi(null===(e=Q.stories)||void 0===e?void 0:e.flaws)},[null===(a=Q.stories)||void 0===a?void 0:a.flaws]),ae=(e,t,n)=>{J(r=>{const s={...r,[e]:{...r[e],[t]:n}};return oe(s),s})},ie=(e,t)=>{if("object"!==typeof t||null===t)return e;const n=Array.isArray(e)?[...e]:{...e};for(const[r,s]of Object.entries(t))s&&"object"===typeof s&&!Array.isArray(s)?n[r]=ie(n[r]||{},s):n[r]=s;return n},le=e=>{"function"===typeof _?_(e):V(t=>ie(t,e))},oe=e=>{const t=Object.entries(e).reduce((e,t)=>{let[n,r]=t;const{name:s,...a}=r;return s&&s.length&&(e[s]=a),e},{});le({stories:{...Q.stories||{},relationships:t}})},ce=(e,t)=>{if("function"===typeof e){const t=e(Q);return void le(t)}const n=Array.isArray(e)?e:String(e).split("."),r={};let s=r;for(let a=0;a<n.length-1;a++){const e=n[a];s[e]={},s=s[e]}s[n[n.length-1]]=t,le(r)},de=(e,t)=>{ee(n=>({...n,[e]:t}))},ue=e=>{le({customization:{...Q.customization||{},...e}})},he=(e,t,n)=>{const r=String(Z[e]||"").trim();if(!r)return;t.some(e=>String(e).toLowerCase()===r.toLowerCase())||n([...t,r]),de(e,"")},pe=(e,t)=>{var n;const r=String((null===(n=Q.customization)||void 0===n?void 0:n[e])||"");return r?t.includes(r)?r:"other":""},me=(e,t)=>{var n,r;const s=String((null===(n=Q.customization)||void 0===n?void 0:n[t])||"").trim();if(/^#[0-9a-fA-F]{6}$/.test(s))return s;const a=String((null===(r=Q.customization)||void 0===r?void 0:r[e])||"").trim();return/^#[0-9a-fA-F]{6}$/.test(a)?a:"#808080"},fe=(e,t,n)=>{if("other"===n){const n=me(e,t);return void ue({[e]:"other",[t]:n})}ue({[e]:n,[t]:""})},be=e=>{let{inputKey:t,tags:n,suggestions:r,setTags:s,placeholder:a}=e;return(0,mt.jsxs)("div",{className:"space-y-3",children:[(0,mt.jsx)("div",{className:"flex flex-wrap gap-2",children:(r||[]).map(e=>{const t=n.some(t=>String(t).toLowerCase()===e.toLowerCase());return(0,mt.jsx)("button",{type:"button",onClick:()=>((e,t,n)=>{if(!e)return;t.some(t=>String(t).toLowerCase()===String(e).toLowerCase())||n([...t,String(e)])})(e,n,s),className:"px-2 py-1 rounded text-xs border transition-colors "+(t?"bg-website-specials-900/40 border-website-specials-500 text-white":"bg-website-default-900 border-website-default-700 text-website-default-300 hover:border-website-default-500"),children:e},e)})}),(0,mt.jsxs)("div",{className:"flex flex-wrap gap-2 min-h-10 rounded border border-website-default-700 bg-website-default-900 px-2 py-2",children:[0===n.length&&(0,mt.jsx)("span",{className:"text-xs text-website-default-400",children:"No tags added yet."}),n.map(e=>(0,mt.jsxs)("span",{className:"inline-flex items-center gap-2 rounded border border-website-specials-500 bg-website-specials-900/30 px-2 py-1 text-xs text-white",children:[e,(0,mt.jsx)("button",{type:"button",onClick:()=>((e,t,n)=>{n(t.filter(t=>t!==e))})(e,n,s),className:"text-website-default-300 hover:text-website-default-100","aria-label":`Remove ${e}`,children:"x"})]},e))]}),(0,mt.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,mt.jsx)("input",{type:"text",value:Z[t]||"",onChange:e=>de(t,e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),he(t,n,s))},placeholder:a,className:"flex-1 rounded border border-website-specials-500 bg-website-default-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-website-highlights-400"}),(0,mt.jsx)("button",{type:"button",onClick:()=>he(t,n,s),className:"rounded border border-website-specials-500 bg-website-specials-900/40 px-3 py-2 text-sm text-white hover:bg-website-specials-900/60",children:"Add Tag"})]})]})},ge=(0,t.useMemo)(()=>{var e,t,n;const r=parseInt(null===(e=Q.age)||void 0===e?void 0:e.years,10),s=parseInt(null===(t=Q.age)||void 0===t?void 0:t.month,10),a=parseInt(null===(n=Q.age)||void 0===n?void 0:n.day,10);if(Number.isNaN(r)||Number.isNaN(s)||Number.isNaN(a))return null;const i=new Date;let l=i.getFullYear()-r;return i.getMonth()+1>s||i.getMonth()+1===s&&i.getDate()>=a||(l-=1),l},[null===(i=Q.age)||void 0===i?void 0:i.years,null===(l=Q.age)||void 0===l?void 0:l.month,null===(o=Q.age)||void 0===o?void 0:o.day]),ve=(0,t.useMemo)(()=>{var e;const t=parseInt(null===(e=Q.age)||void 0===e?void 0:e.month,10);if(Number.isNaN(t)||t<1||t>12)return 31;const n=null!==ge&&void 0!==ge?ge:(new Date).getFullYear();return new Date(n,t,0).getDate()},[null===(c=Q.age)||void 0===c?void 0:c.month,ge]),xe=()=>{var e,t;const n=parseInt(null===(e=Q.model)||void 0===e?void 0:e.height,10),r=parseInt(null===(t=Q.model)||void 0===t?void 0:t.weight,10);return Number.isNaN(n)||Number.isNaN(r)||n<=0?0:r/(n*n)*703};(0,t.useEffect)(()=>{var e;const t=ve,n=parseInt(null===(e=Q.age)||void 0===e?void 0:e.day,10);!Number.isNaN(n)&&n>t&&ce("age.day",String(t))},[ve,null===(d=Q.age)||void 0===d?void 0:d.day]),(0,t.useEffect)(()=>{const e=L.current;if(!e)return;const t=e=>{e.preventDefault(),e.stopPropagation(),"function"===typeof e.stopImmediatePropagation&&e.stopImmediatePropagation();const t=e.deltaY<0?1:-1;ce(e=>{var n;const r=null===e||void 0===e||null===(n=e.age)||void 0===n?void 0:n.years,s=void 0===r||""===r?0:"string"===typeof r?parseInt(r,10):r,a=Number.isNaN(s)?0:s,i=Math.min(120,Math.max(0,a+t));return{age:{...(null===e||void 0===e?void 0:e.age)||{},years:i}}})};return e.addEventListener("wheel",t,{passive:!1,capture:!0}),()=>{e.removeEventListener("wheel",t,{capture:!0})}},[]),(0,t.useEffect)(()=>{P&&K.current&&K.current.focus()},[P]);const ye=(0,t.useMemo)(()=>{var e,t;const n=ge,r=parseInt(null===(e=Q.age)||void 0===e?void 0:e.month,10),s=parseInt(null===(t=Q.age)||void 0===t?void 0:t.day,10);return!n||Number.isNaN(r)||Number.isNaN(s)||s>new Date(n,r,0).getDate()?null:new Date(n,r-1,s)},[ge,null===(u=Q.age)||void 0===u?void 0:u.month,null===(h=Q.age)||void 0===h?void 0:h.day]),we=(0,t.useMemo)(()=>ye?ye.toLocaleDateString(void 0,{weekday:"long"}):"",[ye]),je=(0,t.useMemo)(()=>Q.gender?Y.includes(Q.gender)?Q.gender:"Custom":"",[Q.gender,Y]),Ne=e=>{const t=parseInt(e,10);if(Number.isNaN(t)||t<=0)return"Set height";const n=Math.floor(t/12),r=t%12;return`${n} ${1===n?"foot":"feet"}${r>0?` ${r} ${1===r?"inch":"inches"}`:""} (${Math.round(2.54*t)}cm)`},[ke,Se]=(0,t.useMemo)(()=>{var e;return(e=>{switch(e){case"tiny":return[12,24];case"small":return[24,48];case"medium":return[48,96];case"large":return[96,192];case"huge":return[192,384];case"gargantuan":return[384,768];default:return[0,768]}})(null===(e=Q.model)||void 0===e?void 0:e.size)},[null===(p=Q.model)||void 0===p?void 0:p.size]);return(0,mt.jsxs)("div",{className:"bg-website-default-900 min-h-screen grid grid-cols-1 md:grid-cols-[1fr_2fr_1fr]",children:[(0,mt.jsx)("div",{}),(0,mt.jsxs)("div",{className:"p-4 border-b border-website-specials-500 space-y-4",children:[(0,mt.jsxs)("div",{className:"flex flex-row p-4 space-x-4 border-b border-website-specials-500",children:[(0,mt.jsx)(zi,{size:48}),(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("div",{className:"text-left text-l font-semibold",children:"Character Name"}),(0,mt.jsx)("input",{type:"text",placeholder:"Name...",className:"border-b border-website-highlights-400 bg-website-default-900 focus:outline-none focus:bg-gradient-to-t from-website-highlights-500 to-website-default-900",value:Q.name||"",onChange:e=>ce("name",e.target.value)})]})]}),(0,mt.jsxs)("div",{className:"space-y-8 flex flex-col text-left",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Basic Information "}),(0,mt.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{className:"",children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Age"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"How old is your character?"})]}),(0,mt.jsx)(Bi.Content,{children:(0,mt.jsxs)("div",{className:"space-y-4",children:[(0,mt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("label",{className:"text-sm text-website-default-300 mb-1",children:"Month"}),(0,mt.jsxs)("select",{value:(null===(m=Q.age)||void 0===m?void 0:m.month)||"",onChange:e=>ce("age.month",e.target.value),className:"rounded border border-website-specials-500 bg-website-default-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-website-highlights-400",children:[(0,mt.jsx)("option",{value:"",disabled:!0,children:"Select month"}),(0,mt.jsx)("option",{value:"1",children:"January"}),(0,mt.jsx)("option",{value:"2",children:"February"}),(0,mt.jsx)("option",{value:"3",children:"March"}),(0,mt.jsx)("option",{value:"4",children:"April"}),(0,mt.jsx)("option",{value:"5",children:"May"}),(0,mt.jsx)("option",{value:"6",children:"June"}),(0,mt.jsx)("option",{value:"7",children:"July"}),(0,mt.jsx)("option",{value:"8",children:"August"}),(0,mt.jsx)("option",{value:"9",children:"September"}),(0,mt.jsx)("option",{value:"10",children:"October"}),(0,mt.jsx)("option",{value:"11",children:"November"}),(0,mt.jsx)("option",{value:"12",children:"December"})]})]}),(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("label",{className:"text-sm text-website-default-300 mb-1",children:"Day"}),(0,mt.jsxs)("select",{value:(null===(f=Q.age)||void 0===f?void 0:f.day)||"",onChange:e=>ce("age.day",e.target.value),className:"rounded border border-website-specials-500 bg-website-default-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-website-highlights-400",disabled:!(null!==(b=Q.age)&&void 0!==b&&b.month),children:[(0,mt.jsx)("option",{value:"",disabled:!0,children:null!==(g=Q.age)&&void 0!==g&&g.month?"Select day":"Select month first"}),Array.from({length:ve},(e,t)=>t+1).map(e=>(0,mt.jsx)("option",{value:e,children:e},e))]})]}),(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("label",{className:"text-sm text-website-default-300 mb-1",children:"Age"}),(0,mt.jsx)("input",{ref:L,type:"number",min:"0",max:"120",step:"1",value:null!==(v=null===(x=Q.age)||void 0===x?void 0:x.years)&&void 0!==v?v:"",onChange:e=>{const t=parseInt(e.target.value,10);isNaN(t)?ce("age.years",""):ce("age.years",t)},onMouseEnter:()=>{T.current=document.body.style.overflow,document.body.style.overflow="hidden"},onMouseLeave:()=>{document.body.style.overflow=T.current||""},className:"rounded border border-website-specials-500 bg-website-default-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-website-highlights-400 overscroll-contain",placeholder:"Years"})]})]}),ye&&(0,mt.jsx)("div",{className:"text-sm text-website-default-300",children:(0,mt.jsxs)("div",{className:"mt-2",children:[(0,mt.jsx)("span",{className:"text-website-default-100",children:"Born on: "}),(0,mt.jsx)("span",{children:we})]})})]})})]}),(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{className:"",children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Gender"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"What does your character identify as?"})]}),(0,mt.jsx)(Bi.Content,{children:(0,mt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("label",{className:"text-sm text-website-default-300 mb-1",children:"Gender"}),(0,mt.jsxs)("select",{value:je,onChange:e=>{const t=e.target.value;"Custom"===t?(F(!0),ce("gender","")):(ce("gender",t),F(!1))},className:"rounded border border-website-specials-500 bg-website-default-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-website-highlights-400",children:[(0,mt.jsx)("option",{value:"",disabled:!0,children:"Select gender"}),Y.map(e=>(0,mt.jsx)("option",{value:e,children:e},e)),(0,mt.jsx)("option",{value:"Custom",children:"Custom"})]})]}),!0===R&&(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("label",{className:"text-sm text-website-default-300 mb-1",children:"Custom"}),(0,mt.jsx)("input",{type:"text",value:Q.gender||"",onChange:e=>ce("gender",e.target.value),className:"rounded border border-website-specials-500 bg-website-default-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-website-highlights-400",placeholder:"Enter custom gender"})]}),(0,mt.jsx)("div",{className:"flex flex-col",children:(0,mt.jsxs)("button",{type:"button",onClick:()=>{if(!Y.length)return;const e=Math.floor(Math.random()*Y.length);ce("gender",Y[e])},className:"inline-flex items-center justify-center rounded border border-website-specials-500 bg-website-default-800 px-3 py-2 hover:bg-website-highlights-500/10 focus:outline-none focus:ring-2 focus:ring-website-highlights-400",title:"Randomize gender",children:[(0,mt.jsx)(Oi,{className:"w-4 h-4 mr-2"}),"Randomize"]})})]})})]}),(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Size"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"How big/small is your character?"})]}),(0,mt.jsx)(Bi.Content,{children:(0,mt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("label",{className:"text-website-default-300 text-sm",children:"Size Scale"}),(0,mt.jsxs)("select",{name:"Size",id:"size",value:(null===(y=Q.model)||void 0===y?void 0:y.size)||"",onChange:e=>ce("model.size",e.target.value),className:"rounded border border-website-specials-500 bg-website-default-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-website-highlights-400",children:[(0,mt.jsx)("option",{value:"",disabled:!0,children:"Select size"}),(0,mt.jsx)("option",{value:"tiny",children:"Tiny (1ft-2ft)"}),(0,mt.jsx)("option",{value:"small",children:"Small (2ft-4ft)"}),(0,mt.jsx)("option",{value:"medium",children:"Medium (4ft-8ft)"}),(0,mt.jsx)("option",{value:"large",children:"Large (8ft-16ft)"}),(0,mt.jsx)("option",{value:"huge",children:"Huge (16ft-32ft)"}),(0,mt.jsx)("option",{value:"gargantuan",children:"Gargantuan (32ft-64ft)"})]})]}),(0,mt.jsx)("div",{className:"flex flex-row",children:(null===(w=Q.model)||void 0===w?void 0:w.size)&&(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("label",{className:"text-website-default-300 text-sm",children:"Height"}),(0,mt.jsx)("div",{children:P?(0,mt.jsxs)("div",{className:"flex flex-row space-x-2 items-center",children:[(0,mt.jsx)("input",{className:"rounded border border-website-specials-500 bg-website-default-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-website-highlights-400",type:"number",ref:K,value:P?null===(j=Q.model)||void 0===j?void 0:j.height:Ne(null===(N=Q.model)||void 0===N?void 0:N.height),placeholder:Ne(null===(k=Q.model)||void 0===k?void 0:k.height),min:ke,max:Se,onClick:()=>{D(!0)},onChange:e=>{ce("model.height",e.target.value)},onBlur:e=>{let t=Number(e.target.value);t<ke?t=ke:t>Se&&(t=Se),D(!1),ce("model.height",t)}}),(0,mt.jsx)("label",{className:"text-website-default-300 text-s",children:"In Inches"})]}):(0,mt.jsx)("div",{className:"rounded border border-website-specials-500 w-full bg-website-default-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-website-highlights-400",onClick:()=>D(!0),children:Ne(null===(S=Q.model)||void 0===S?void 0:S.height)})})]})}),(0,mt.jsx)("div",{children:z?(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("label",{className:"text-website-default-300 text-sm",children:"Weight"}),(0,mt.jsx)("input",{className:"rounded border border-website-specials-500 bg-website-default-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-website-highlights-400",type:"number",value:(null===(A=Q.model)||void 0===A?void 0:A.weight)||"",placeholder:"Weight in lbs",onChange:e=>ce("model.weight",e.target.value),onBlur:()=>O(!1)})]}):(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("label",{className:"text-website-default-300 text-sm",children:"Weight"}),(0,mt.jsx)("div",{className:"rounded border border-website-specials-500 w-full bg-website-default-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-website-highlights-400",onClick:()=>O(!0),children:null!==(C=Q.model)&&void 0!==C&&C.weight?`${null===(E=Q.model)||void 0===E?void 0:E.weight} lbs`:"Set weight"})]})}),["tiny","gargantuan","huge"].includes(null===(M=Q.model)||void 0===M?void 0:M.size)&&(0,mt.jsxs)("div",{className:"text-website-default-300 col-span-2",children:[(0,mt.jsx)("span",{className:"font-bold text-website-specials-400",children:"WARNING!"})," You have selected a size that may make playing very difficult. Are you sure?"]}),(xe()<10||xe()>50)&&(0,mt.jsxs)("div",{className:"text-website-default-300 col-span-2",children:[(0,mt.jsx)("span",{className:"font-bold text-website-specials-400",children:"WARNING!"})," Your character has an unusual BMI of ",xe().toFixed(1),". This may impact gameplay."]})]})})]}),(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Alignment"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"What is your character's moral and ethical perspective?"})]}),(0,mt.jsx)(Bi.Content,{children:(0,mt.jsxs)("div",{className:"flex flex-col items-center justify-center relative w-full gap-8",children:[(0,mt.jsxs)("div",{className:"flex flex-col items-center w-full",children:[(0,mt.jsxs)("label",{className:"text-website-default-300 text-sm mb-1",children:["Lawful ","<---\x3e"," Chaotic"]}),(0,mt.jsx)("input",{type:"range",min:0,max:2,className:"w-full",value:$,title:q[$],onChange:e=>{B(Number(e.target.value)),ce("alignment",`${q[Number(e.target.value)]} ${W[H]}`)}})]}),(0,mt.jsxs)("div",{className:"flex flex-col items-center w-full",children:[(0,mt.jsxs)("label",{className:"text-website-default-300 text-sm mb-1",children:["Good ","<---\x3e"," Evil"]}),(0,mt.jsx)("input",{type:"range",min:0,max:2,className:"w-full",value:H,title:W[H],onChange:e=>{U(Number(e.target.value)),ce("alignment",`${q[$]} ${W[Number(e.target.value)]}`)}})]}),(0,mt.jsxs)("div",{className:"relative aspect-square w-full grid grid-cols-3 grid-rows-3 border border-website-default-500",children:[W.map(e=>q.map(t=>(0,mt.jsxs)("div",{className:"flex items-center justify-center text-xs text-website-default-300 border border-website-default-700",children:[t," ",e]},`${t}-${e}`))),(0,mt.jsx)("div",{className:"absolute w-4 h-4 bg-website-specials-200 rounded-full shadow-lg transition-all duration-200",style:{left:`calc((${$} * 2 + 1) / 6 * 100%)`,top:`calc((${H} * 2 + 1) / 6 * 100%)`,transform:"translate(-50%, -50%)"}})]})]})})]})]})]}),(0,mt.jsxs)("div",{children:[(0,mt.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Additional Customization"}),(0,mt.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{className:"",children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Character Appearance"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"What does your character look like?"})]}),(0,mt.jsx)(Bi.Content,{children:(0,mt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("label",{className:"text-sm text-website-default-300 mb-1",children:"Hair Color"}),(0,mt.jsxs)("select",{className:"rounded border border-website-specials-500 bg-website-default-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-website-highlights-400",value:pe("hairColor",Ui.hair),onChange:e=>fe("hairColor","hairColorCustom",e.target.value),children:[(0,mt.jsx)("option",{value:"",disabled:!0,children:"Select hair color"}),Ui.hair.map(e=>(0,mt.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)),(0,mt.jsx)("option",{value:"other",children:"Other (pick color)"})]}),"other"===pe("hairColor",Ui.hair)&&(0,mt.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,mt.jsx)("input",{type:"color",value:me("hairColor","hairColorCustom"),onChange:e=>ue({hairColor:"other",hairColorCustom:e.target.value}),className:"h-9 w-14 rounded border border-website-specials-500 bg-transparent p-1"}),(0,mt.jsx)("span",{className:"text-xs text-website-default-300",children:me("hairColor","hairColorCustom")})]})]}),(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("label",{className:"text-sm text-website-default-300 mb-1",children:"Skin Color"}),(0,mt.jsxs)("select",{className:"rounded border border-website-specials-500 bg-website-default-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-website-highlights-400",value:pe("skinColor",Ui.skin),onChange:e=>fe("skinColor","skinColorCustom",e.target.value),children:[(0,mt.jsx)("option",{value:"",disabled:!0,children:"Select skin color"}),Ui.skin.map(e=>(0,mt.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)),(0,mt.jsx)("option",{value:"other",children:"Other (pick color)"})]}),"other"===pe("skinColor",Ui.skin)&&(0,mt.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,mt.jsx)("input",{type:"color",value:me("skinColor","skinColorCustom"),onChange:e=>ue({skinColor:"other",skinColorCustom:e.target.value}),className:"h-9 w-14 rounded border border-website-specials-500 bg-transparent p-1"}),(0,mt.jsx)("span",{className:"text-xs text-website-default-300",children:me("skinColor","skinColorCustom")})]})]}),(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("label",{className:"text-sm text-website-default-300 mb-1",children:"Eye Color"}),(0,mt.jsxs)("select",{className:"rounded border border-website-specials-500 bg-website-default-900 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-website-highlights-400",value:pe("eyeColor",Ui.eye),onChange:e=>fe("eyeColor","eyeColorCustom",e.target.value),children:[(0,mt.jsx)("option",{value:"",disabled:!0,children:"Select eye color"}),Ui.eye.map(e=>(0,mt.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)),(0,mt.jsx)("option",{value:"other",children:"Other (pick color)"})]}),"other"===pe("eyeColor",Ui.eye)&&(0,mt.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,mt.jsx)("input",{type:"color",value:me("eyeColor","eyeColorCustom"),onChange:e=>ue({eyeColor:"other",eyeColorCustom:e.target.value}),className:"h-9 w-14 rounded border border-website-specials-500 bg-transparent p-1"}),(0,mt.jsx)("span",{className:"text-xs text-website-default-300",children:me("eyeColor","eyeColorCustom")})]})]})]})})]}),(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{className:"",children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Additional Traits"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Add selectable or custom trait tags."})]}),(0,mt.jsx)(Bi.Content,{children:be({inputKey:"additionalTraits",tags:te,suggestions:Hi.additionalTraits,setTags:e=>ce("customization.additionalTraits",e),placeholder:"Add a custom trait tag..."})})]})]})]}),(0,mt.jsxs)("div",{children:[(0,mt.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Long Story Short"}),(0,mt.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{className:"",children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Personality Traits"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Default and custom personality tags in one editable bar."})]}),(0,mt.jsx)(Bi.Content,{children:be({inputKey:"personality",tags:ne,suggestions:Hi.personality,setTags:e=>ce("stories.personality",e),placeholder:"Add a custom personality tag..."})})]}),(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{className:"",children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Ideals"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Add ideals as tags so they work like personality traits."})]}),(0,mt.jsx)(Bi.Content,{children:be({inputKey:"ideals",tags:re,suggestions:Hi.ideals,setTags:e=>ce("stories.ideals",e),placeholder:"Add a custom ideal tag..."})})]}),(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{className:"",children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Flaws"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Add flaws as tags so they work like personality traits."})]}),(0,mt.jsx)(Bi.Content,{children:be({inputKey:"flaws",tags:se,suggestions:Hi.flaws,setTags:e=>ce("stories.flaws",e),placeholder:"Add a custom flaw tag..."})})]}),(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{className:"",children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Relationships"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Describe your character's relationships."})]}),(0,mt.jsx)(Bi.Content,{children:(0,mt.jsxs)("div",{className:"space-y-2 w-full flex flex-col justify-center",children:[Object.entries(G).map((e,t)=>{let[n,r]=e;return(0,mt.jsxs)("div",{className:"grid grid-cols-[1fr_auto] gap-4 pb-4",children:[(0,mt.jsxs)("div",{className:"grid grid-rows-[auto_1fr] grid-cols-1 md:grid-cols-2 items-center gap-x-4",children:[(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("label",{className:"text-sm text-website-default-300 mb-1",children:"Relationship Name"}),(0,mt.jsx)("input",{className:"flex-1 px-3 py-2 border border-website-specials-500 rounded bg-website-default-900 focus:outline-none focus:ring-2 focus:ring-website-highlights-400",value:r.name||"",onChange:e=>{ae(n,"name",e.target.value)},placeholder:"Bob..."})]}),(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("label",{className:"text-sm text-website-default-300 mb-1",children:"Relationship Type"}),(0,mt.jsx)("input",{className:"w-full flex-1 px-3 py-2 border border-website-specials-500 rounded bg-website-default-900 focus:outline-none focus:ring-2 focus:ring-website-highlights-400",value:r.relationship||"",placeholder:"Friend, Sibling, Rival...",onChange:e=>{ae(n,"relationship",e.target.value)}})]}),(0,mt.jsxs)("div",{className:"flex flex-col col-span-1 md:col-span-2 h-full",children:[(0,mt.jsx)("label",{className:"text-sm text-website-default-300 mb-1",children:"Description"}),(0,mt.jsx)("textarea",{className:"flex-1 px-3 py-2 h-full border border-website-specials-500 rounded bg-website-default-900 focus:outline-none focus:ring-2 focus:ring-website-highlights-400",value:r.description||"",placeholder:"He works at the local tavern as a bartender...",onChange:e=>{ae(n,"description",e.target.value)}})]})]},t),Object.keys(G).length>1&&(0,mt.jsx)("button",{onClick:()=>{(e=>{J(t=>{const n={...t};return delete n[e],oe(n),n})})(n)},className:"mt-8 px-2 py-1 text-white bg-website-default-500 rounded hover:bg-website-specials-500 transition",children:"X"})]},n)}),(0,mt.jsx)("button",{className:"mt-8 px-2 py-1 text-white bg-website-specials-500 rounded hover:bg-website-specials-700 transition",onClick:()=>{(()=>{const e=Date.now().toString();J(t=>({...t,[e]:{}}))})()},children:"Add Relationship"})]})})]})]})]})]})]}),(0,mt.jsx)("div",{})]})}const Ki=["str","dex","con","int","wis","cha"],Yi={str:"str",strength:"str",dex:"dex",dexterity:"dex",con:"con",constitution:"con",int:"int",intelligence:"int",wis:"wis",wisdom:"wis",cha:"cha",charisma:"cha",luck:"luck"};function Xi(e){if(!e)return"";const t=String(e).trim().toLowerCase();return Yi[t]||""}function Vi(e,t){const n=Xi(t);if(!n||!e||"object"!==typeof e)return 0;for(const[r,s]of Object.entries(e)){if(Xi(r)!==n)continue;const e=Number(s);return Number.isFinite(e)?e:0}return 0}function Qi(e){if(!e||"object"!==typeof e)return{};const t={};return Object.entries(e).forEach(e=>{let[n,r]=e;const s=Xi(n);if(!s)return;const a=Number(r);Number.isFinite(a)&&0!==a&&(t[s]=a)}),t}function Gi(e,t){const n=Xi(t);if(!n)return 0;const r=Qi(e);return Number(r[n]||0)}function Ji(e,t){const n=Qi(e);if(!t||"object"!==typeof t)return{};const r=Number(t.amount),s=Number(t.chooseCount),a=Number.isFinite(r)&&r>0?r:1,i=Number.isFinite(s)&&s>0?s:0;if(i<=0)return{};const l=new Set((t.options||[]).map(Xi).filter(Boolean));if(0===l.size)return{};const o={};let c=0;for(const[d]of Object.entries(n))if(l.has(d)&&(o[d]=a,c+=1,c>=i))break;return o}function Zi(e){if(!e||"object"!==typeof e)return null;const t=e.choices||{},n=t.abilityScores||t.abilityScore||t.abilityScoreModifiers||null;let r=0,s=1,a=[...Ki];if("string"===typeof n){const e=n.match(/choose\s+(\d+)/i),t=n.match(/choose\s+\d+\s+(\d+)/i);r=e?Number(e[1]):0,s=t?Number(t[1]):1}else if(n&&"object"===typeof n){var i,l,o,c,d,u;r=Number(null!==(i=null!==(l=null!==(o=n.choose)&&void 0!==o?o:n.count)&&void 0!==l?l:n.amount)&&void 0!==i?i:0),s=Number(null!==(c=null!==(d=null!==(u=n.value)&&void 0!==u?u:n.modifier)&&void 0!==d?d:n.points)&&void 0!==c?c:1),Array.isArray(n.options)&&n.options.length>0&&(a=n.options.map(Xi).filter(Boolean))}if(r<=0){var h;const t=Number((null===(h=e.abilityScoreModifiers)||void 0===h?void 0:h.choose)||0);r=Number.isFinite(t)?t:0}if(r<=0)return null;const p=Object.keys(e.abilityScoreModifiers||{}).map(Xi).filter(e=>e&&"choose"!==e),m=[...new Set(a)],f=m.filter(e=>!p.includes(e)),b=f.length>0?f:m,g=Math.min(r,b.length),v=Number.isFinite(s)&&s>0?s:1;return g<=0||0===b.length?null:{chooseCount:g,amount:v,options:b}}const el={str:"Strength",dex:"Dexterity",con:"Constitution",int:"Intelligence",wis:"Wisdom",cha:"Charisma"},tl=e=>e?String(e).replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim():"",nl={tiny:"T",small:"S",medium:"M",large:"L",huge:"H",gargantuan:"G"};function rl(e){var n;let{values:r,onChange:s}=e;const{maps:a}=Li(),{racesById:i,subracesById:l}=a,o=(null===r||void 0===r?void 0:r.race)||"",c=(null===r||void 0===r?void 0:r.subrace)||"",d=(null===r||void 0===r||null===(n=r.model)||void 0===n?void 0:n.size)||"",u=(null===r||void 0===r?void 0:r.abilityScoreChoices)||{},h=e=>{"function"===typeof s&&s(e)},p=(0,t.useMemo)(()=>i[o]||null,[i,o]),m=(0,t.useMemo)(()=>{if(!d)return[];const e=nl[String(d).toLowerCase()]||String(d).toUpperCase();return Object.values(i).filter(t=>t&&t.size===e)},[i,d]),f=(0,t.useMemo)(()=>{if(!p)return[];const e=p.subraces||[];return Object.values(l).filter(t=>t&&e.some(e=>e.subraceID===t.subraceID))},[p,l]),b=(0,t.useMemo)(()=>l[c]||null,[l,c]),g=(0,t.useMemo)(()=>Zi(p),[p]),v=(0,t.useMemo)(()=>Zi(b),[b]),x=(0,t.useMemo)(()=>Ji(null===u||void 0===u?void 0:u.race,g),[null===u||void 0===u?void 0:u.race,g]),y=(0,t.useMemo)(()=>Ji(null===u||void 0===u?void 0:u.subrace,v),[null===u||void 0===u?void 0:u.subrace,v]),w=(0,t.useMemo)(()=>Object.entries((null===p||void 0===p?void 0:p.abilityScoreModifiers)||{}).filter(e=>{let[t]=e;return Boolean(Xi(t))}),[p]),j=(0,t.useMemo)(()=>Object.entries((null===b||void 0===b?void 0:b.abilityScoreModifiers)||{}).filter(e=>{let[t]=e;return Boolean(Xi(t))}),[b]),N=(e,t,n,r)=>{if(!t)return null;const s=Object.keys(n).length,a=s>=t.chooseCount;return(0,mt.jsxs)(Bi,{className:`bg-website-default-800 ${r}`,children:[(0,mt.jsxs)(Bi.Header,{className:"border-b border-website-default-700 pb-4",children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Ability Score Choices"}),(0,mt.jsxs)(Bi.Description,{className:"text-website-default-300",children:["Choose ",t.chooseCount," ability score",t.chooseCount>1?"s":""," to gain +",t.amount,"."]})]}),(0,mt.jsxs)(Bi.Content,{className:"pt-6 space-y-3",children:[(0,mt.jsxs)("div",{className:"text-sm text-website-default-300",children:["Selected ",s," / ",t.chooseCount]}),(0,mt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:t.options.map(r=>{const s=Boolean(n[r]),i=!s&&a;return(0,mt.jsxs)("button",{type:"button",disabled:i,onClick:()=>((e,t,n)=>{if(!n||!e||!t)return;const r=Xi(t);if(!r)return;const s={...Ji(null===u||void 0===u?void 0:u[e],n)};if(s[r])delete s[r];else{if(!(Object.keys(s).length<n.chooseCount))return;s[r]=n.amount}h({abilityScoreChoices:{...u,[e]:s}})})(e,r,t),className:`p-3 rounded border text-sm transition-colors ${s?"bg-website-specials-900/40 border-website-specials-500 text-white":"bg-website-default-900 border-website-default-700 text-website-default-200 hover:border-website-default-500"} ${i?"opacity-50 cursor-not-allowed":""}`,children:[el[r]||tl(r)," (+",t.amount,")"]},r)})})]})]})};return(0,mt.jsx)("div",{className:"bg-website-default-900 min-h-screen grid grid-cols-1 md:grid-cols-[1fr_2fr_1fr]",children:(0,mt.jsxs)("div",{className:"p-4 space-y-4 md:col-start-2",children:[(0,mt.jsxs)("div",{className:"flex flex-row p-4 space-x-4 border-b border-website-specials-500",children:[(0,mt.jsx)(zi,{size:48}),(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("div",{className:"text-left text-l font-semibold",children:"Character Name"}),(0,mt.jsx)("input",{type:"text",placeholder:"Name...",className:"border-b border-website-highlights-400 bg-website-default-900 focus:outline-none focus:bg-gradient-to-t from-website-highlights-500 to-website-default-900",value:r.name||"",onChange:e=>h({name:e.target.value})})]})]}),(0,mt.jsxs)("div",{className:"space-y-8 flex flex-col text-left",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsx)("h1",{className:"text-2xl font-semibold mb-4 text-white",children:"Race"}),(0,mt.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,mt.jsx)(Bi,{className:d?"bg-website-highlights-900/20 border-website-highlights-500":"bg-website-specials-900/20 border-website-specials-500",children:(0,mt.jsx)(Bi.Content,{className:"pt-6 pb-6",children:(0,mt.jsx)("div",{className:"flex items-center gap-3 "+(d?"text-website-highlights-300":"text-website-specials-300"),children:d?(0,mt.jsxs)("span",{className:"text-sm",children:["Showing races matching your selected size: ",(0,mt.jsx)("span",{className:"font-semibold text-website-highlights-400",children:d.charAt(0).toUpperCase()+d.slice(1)})]}):(0,mt.jsxs)("span",{className:"text-sm",children:[(0,mt.jsx)("span",{className:"font-semibold",children:"Tip:"})," Select a size in Customization to filter available races by size."]})})})}),(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Race"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Choose your character's race."})]}),(0,mt.jsx)(Bi.Content,{children:(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsxs)("select",{className:"rounded border border-website-specials-500 bg-website-default-900 px-3 py-2 text-white focus:outline-none",value:o,onChange:e=>{return t=e.target.value,void h({race:t,subrace:"",abilityScoreChoices:{...u,race:{},subrace:{}}});var t},children:[(0,mt.jsx)("option",{value:"",disabled:!0,children:"Select race"}),m.length>0?m.map(e=>(0,mt.jsx)("option",{value:e._id,children:e.name},e._id)):(0,mt.jsx)("option",{disabled:!0,children:"No races match this size"})]}),p&&(0,mt.jsx)("div",{className:"mt-4 p-4 border border-website-specials-500 rounded bg-website-default-900/50",children:(0,mt.jsx)("div",{className:"text-website-default-300 text-sm",children:p.description})})]})})]}),w.length>0&&(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsx)(Bi.Header,{className:"border-b border-website-default-700 pb-4",children:(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Ability Score Modifiers"})}),(0,mt.jsx)(Bi.Content,{className:"pt-6",children:(0,mt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:w.map(e=>{let[t,n]=e;return(0,mt.jsxs)("div",{className:"bg-website-default-900/50 p-4 rounded-lg border border-website-default-700 text-center",children:[(0,mt.jsx)("h4",{className:"text-website-specials-400 text-xs tracking-widest mb-2 uppercase",children:el[Xi(t)]||tl(t)}),(0,mt.jsxs)("p",{className:"text-website-specials-500 font-bold text-lg",children:["+",n]})]},t)})})})]}),N("race",g,x,"border-website-specials-500"),(null===p||void 0===p?void 0:p.traits)&&p.traits.length>0&&(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsx)(Bi.Header,{className:"border-b border-website-default-700/50",children:(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Racial Traits"})}),(0,mt.jsx)(Bi.Content,{className:"pt-6 space-y-2",children:p.traits.map((e,t)=>(0,mt.jsx)("div",{className:"p-3 bg-website-default-900/50 border border-website-default-700 rounded-lg",children:(0,mt.jsxs)("div",{className:"flex items-start gap-2",children:[(0,mt.jsx)("span",{className:"text-website-specials-400 font-bold",children:"*"}),(0,mt.jsx)("span",{className:"text-website-default-100",children:tl(e)})]})},`${e}_${t}`))})]}),(null===p||void 0===p?void 0:p.languages)&&p.languages.length>0&&(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsx)(Bi.Header,{className:"border-b border-website-default-700/50",children:(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Languages"})}),(0,mt.jsx)(Bi.Content,{className:"pt-6",children:(0,mt.jsx)("div",{className:"flex flex-wrap gap-2",children:p.languages.map((e,t)=>(0,mt.jsx)("span",{className:"px-3 py-2 bg-website-default-900 border border-website-default-700 rounded-lg text-sm text-website-default-100",children:tl(e)},`${e}_${t}`))})})]}),p&&(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsx)(Bi.Header,{className:"border-b border-website-default-700/50",children:(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Physical Traits"})}),(0,mt.jsxs)(Bi.Content,{className:"pt-6 grid grid-cols-2 gap-4",children:[(0,mt.jsxs)("div",{className:"bg-website-default-900/50 p-4 rounded-lg border border-website-default-700",children:[(0,mt.jsx)("h4",{className:"text-website-highlights-400 text-xs tracking-widest mb-2 uppercase",children:"Size"}),(0,mt.jsx)("p",{className:"text-website-default-100 font-semibold",children:"M"===p.size?"Medium":tl(p.size)})]}),(0,mt.jsxs)("div",{className:"bg-website-default-900/50 p-4 rounded-lg border border-website-default-700",children:[(0,mt.jsx)("h4",{className:"text-website-highlights-400 text-xs tracking-widest mb-2 uppercase",children:"Speed"}),(0,mt.jsxs)("p",{className:"text-website-default-100 font-semibold",children:[p.speed," ft."]})]})]})]})]})]}),p&&f.length>0&&(0,mt.jsxs)("div",{children:[(0,mt.jsx)("h1",{className:"text-2xl font-semibold mb-4 text-white",children:"Subrace"}),(0,mt.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-highlights-500",children:[(0,mt.jsxs)(Bi.Header,{children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Subrace"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Choose your subrace specialization (optional)."})]}),(0,mt.jsx)(Bi.Content,{children:(0,mt.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,mt.jsxs)("select",{className:"rounded border border-website-highlights-500 bg-website-default-900 px-3 py-2 text-white focus:outline-none",value:c,onChange:e=>{return t=e.target.value,void h({subrace:t,abilityScoreChoices:{...u,subrace:{}}});var t},children:[(0,mt.jsx)("option",{value:"",children:"None (Optional)"}),f.map(e=>(0,mt.jsx)("option",{value:e._id,children:e.name},e._id))]}),b&&(0,mt.jsx)("div",{className:"p-4 border border-website-highlights-500 rounded bg-website-default-900/50",children:(0,mt.jsx)("div",{className:"text-website-default-300 text-sm",children:b.description})})]})})]}),j.length>0&&(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-highlights-500",children:[(0,mt.jsx)(Bi.Header,{className:"border-b border-website-default-700 pb-4",children:(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Ability Score Modifiers"})}),(0,mt.jsx)(Bi.Content,{className:"pt-6",children:(0,mt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:j.map(e=>{let[t,n]=e;return(0,mt.jsxs)("div",{className:"bg-website-default-900/50 p-4 rounded-lg border border-website-default-700 text-center",children:[(0,mt.jsx)("h4",{className:"text-website-highlights-400 text-xs tracking-widest mb-2 uppercase",children:el[Xi(t)]||tl(t)}),(0,mt.jsxs)("p",{className:"text-website-highlights-500 font-bold text-lg",children:["+",n]})]},t)})})})]}),N("subrace",v,y,"border-website-highlights-500"),(null===b||void 0===b?void 0:b.traits)&&b.traits.length>0&&(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-highlights-500",children:[(0,mt.jsx)(Bi.Header,{className:"border-b border-website-default-700/50",children:(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Subrace Traits"})}),(0,mt.jsx)(Bi.Content,{className:"pt-6 space-y-2",children:b.traits.map((e,t)=>(0,mt.jsx)("div",{className:"p-3 bg-website-default-900/50 border border-website-default-700 rounded-lg",children:(0,mt.jsxs)("div",{className:"flex items-start gap-2",children:[(0,mt.jsx)("span",{className:"text-website-highlights-400 font-bold",children:"*"}),(0,mt.jsx)("span",{className:"text-website-default-100",children:tl(e)})]})},`${e}_${t}`))})]}),(null===b||void 0===b?void 0:b.languages)&&b.languages.length>0&&(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-highlights-500",children:[(0,mt.jsx)(Bi.Header,{className:"border-b border-website-default-700/50",children:(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Languages"})}),(0,mt.jsx)(Bi.Content,{className:"pt-6",children:(0,mt.jsx)("div",{className:"flex flex-wrap gap-2",children:b.languages.map((e,t)=>(0,mt.jsx)("span",{className:"px-3 py-2 bg-website-default-900 border border-website-default-700 rounded-lg text-sm text-website-default-100",children:tl(e)},`${e}_${t}`))})})]})]})]})]})]})})}const sl={rage001:{id:"rage001",name:"Rage",level:1,class:"Barbarian",description:"In battle, you fight with primal ferocity. On your turn, you can enter a rage as a bonus action. While raging, you gain advantage on Strength checks and Strength saving throws. When you make a melee weapon attack using Strength, you gain a bonus to the damage roll."},INTDisable001:{id:"INTDisable001",name:"Intelligence Limitation",level:1,class:"Barbarian",description:"While raging, you have disadvantage on Intelligence checks."},BarbEmotion001:{id:"BarbEmotion001",name:"Reckless Abandon",level:1,class:"Barbarian",description:"While raging, you can't cast spells. Your rage lasts for 1 minute and ends early if you are knocked prone, your turn ends without attacking, or you choose to end it."},madDash001:{id:"madDash001",name:"Reckless Attack",level:2,class:"Barbarian",description:"You can throw aside all concern for defense to attack with fierce desperation. When you make your first attack roll on your turn, you can decide to attack recklessly. This gives you advantage on melee weapon attack rolls using Strength, but attack rolls against you have advantage until your next turn."},unarmoredDefense001:{id:"unarmoredDefense001",name:"Unarmored Defense",level:2,class:"Barbarian",description:"While you are not wearing any armor, your armor class equals 10 + your Dexterity modifier + your Constitution modifier. You can use a shield and still gain this benefit."},muscleMemory001:{id:"muscleMemory001",name:"Ability Score Improvement",level:4,class:"Barbarian",description:"You can increase one ability score of your choice by 2, or you can increase two ability scores of your choice by 1. You can't increase an ability score above 20 using this feature."},fastMovement001:{id:"fastMovement001",name:"Extra Attack",level:5,class:"Barbarian",description:"You can attack twice, instead of once, whenever you take the Attack action on your turn."},BarbAttack001:{id:"BarbAttack001",name:"Mindless Rage",level:6,class:"Barbarian",description:"You can't be charmed or frightened while raging. If you are charmed or frightened when you enter your rage, the effect is suspended for the duration of the rage."},dangerSense001:{id:"dangerSense001",name:"Danger Sense",level:7,class:"Barbarian",description:"You gain an uncanny sense of when things nearby aren't as they should be. You have advantage on Dexterity saving throws against effects that you can see, such as traps and spells."},BarbMantel001:{id:"BarbMantel001",name:"Ancestral Protectors",level:7,class:"Barbarian",description:"You can call on your ancestral spirits to protect you. When a creature within 5 feet of you hits you with an attack, you can use your reaction to impose disadvantage on that attack roll."},battleInstinct001:{id:"battleInstinct001",name:"Ability Score Improvement",level:8,class:"Barbarian",description:"You can increase one ability score of your choice by 2, or you can increase two ability scores of your choice by 1."},extraAttack001:{id:"extraAttack001",name:"Relentless Rage",level:8,class:"Barbarian",description:"Your rage can keep you fighting even when you should be overwhelmed. If you drop to 0 hit points while raging and don't die outright, you can make a DC 10 Constitution saving throw. If you succeed, you drop to 1 hit point instead."},tribalKnowledge001:{id:"tribalKnowledge001",name:"Brutal Critical",level:8,class:"Barbarian",description:"When you hit with a weapon attack, you can roll one additional weapon damage die and add it to the damage. You gain more additional dice as you level up."},feralInstinct001:{id:"feralInstinct001",name:"Feral Instinct",level:9,class:"Barbarian",description:"Your instincts are so honed that you have advantage on initiative rolls. If you are surprised at the start of combat and aren't incapacitated, you can act on your first turn if you enter your rage before doing anything else."},BarbEmotion002:{id:"BarbEmotion002",name:"Relentless Rage",level:10,class:"Barbarian",description:"Your rage keeps you fighting even when wounded. If you drop to 0 hit points while raging and don't die outright, you can make a DC 10 Constitution saving throw. If you succeed, you drop to 1 hit point instead."},fastMovement002:{id:"fastMovement002",name:"Primal Champion",level:10,class:"Barbarian",description:"Your speed increases by 10 feet while you aren't wearing heavy armor."},undyingFury001:{id:"undyingFury001",name:"Undying Fury",level:10,class:"Barbarian",description:"When you would normally drop to 0 hit points, you can use your reaction to stay conscious with 1 hit point instead. You can't use this feature again until you finish a long rest."},BarbScream001:{id:"BarbScream001",name:"Relentless Assault",level:11,class:"Barbarian",description:"When you take the Attack action on your turn, you can make one additional melee weapon attack as part of that action."},BarbAttack002:{id:"BarbAttack002",name:"Ability Score Improvement",level:12,class:"Barbarian",description:"You can increase one ability score of your choice by 2, or you can increase two ability scores of your choice by 1."},destructiveGlance001:{id:"destructiveGlance001",name:"Destructive Glance",level:12,class:"Barbarian",description:"When you hit a creature with a weapon attack while raging, you can use a bonus action to force that creature to make a Strength saving throw or be knocked prone."},BarbMantel002:{id:"BarbMantel002",name:"Ancestral Shield",level:12,class:"Barbarian",description:"When you use your Ancestral Protectors feature to impose disadvantage on an attack, the attacker takes psychic damage equal to your Wisdom modifier when the attack hits."},rage002:{id:"rage002",name:"Improved Rage",level:12,class:"Barbarian",description:"Your damage reduction from raging increases. The bonus to melee weapon damage rolls increases as you level up."},proteinShake:{id:"proteinShake",name:"Recovery Vitality",level:12,class:"Barbarian",description:"You can add protein shakes to your rations to regain hit points during short rests."},rageAura001:{id:"rageAura001",name:"Rage Aura",level:13,class:"Barbarian",description:"While you are raging, allies within 10 feet of you have advantage on melee weapon attack rolls."}},al=e=>e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim(),il=()=>`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,ll={burglarsPack:{name:"Burglar's Pack",items:["backpack:1","ballBearings:1000","string:10","bell:1","candle:5","crowbar:1","hammer:1","piton:10","hoodedLantern:1","oilFlask:2","rations:5","tinderbox:1","waterskin:1","hempenRope:1"]},diplomatsPack:{name:"Diplomat's Pack",items:["chest:1","mapCase:2","fineClothes:1","inkBottle:1","inkPen:1","lamp:1","oilFlask:2","paper:5","perfume:1","sealingWax:1","soap:1"]},dungeoneersPack:{name:"Dungeoneer's Pack",items:["backpack:1","crowbar:1","hammer:1","piton:10","torch:10","tinderbox:1","rations:10","waterskin:1","hempenRope:1"]},entertainersPack:{name:"Entertainer's Pack",items:["backpack:1","bedroll:1","costume:2","candle:5","rations:5","waterskin:1","disguiseKit:1"]},explorersPack:{name:"Explorer's Pack",items:["backpack:1","bedroll:1","messKit:1","tinderbox:1","torch:10","rations:10","waterskin:1","hempenRope:1"]},priestsPack:{name:"Priest's Pack",items:["backpack:1","blanket:1","candle:10","tinderbox:1","almsBox:1","incense:2","censer:1","vestments:1","rations:2","waterskin:1"]},scholarsPack:{name:"Scholar's Pack",items:["backpack:1","bookLore:1","inkBottle:1","inkPen:1","parchment:10","littleBagSand:1","smallKnife:1"]}},ol=e=>ll.hasOwnProperty(e),cl=e=>{const t=e.toLowerCase();return!!t.startsWith("any")||!!(t.includes("simpleweapon")||t.includes("martialweapon")||t.includes("simplemelee")||t.includes("musicalinstrument")||t.includes("artisanstool")||t.includes("gamingset"))},dl=(e,t)=>{let{itemsByItemId:n={}}=t;if(!e||0===e.length)return console.log("No items to add to inventory"),{};const r={};return e.forEach(e=>{let{itemId:t,quantity:s}=e;const a=n[t],i=null===a||void 0===a?void 0:a._id;if(i){for(let e=0;e<s;e++){const e=il();r[e]={equipped:!1,ItemID:i}}console.log(`Added ${s}x ${t} to inventory`)}else console.warn(`Item not found in items map: ${t}`)}),console.log(`Inventory map created with ${Object.keys(r).length} item instances`),r},ul=["club","dagger","greatclub","handaxe","javelin","lightHammer","mace","quarterstaff","sickle","spear","lightCrossbow","dart","shortbow","sling"],hl=["battleaxe","flail","glaive","greataxe","greatsword","halberd","lance","longsword","maul","morningstar","pike","rapier","scimitar","shortsword","trident","warPick","warhammer","whip","blowgun","handCrossbow","heavyCrossbow","longbow","net"],pl=["club","dagger","greatclub","handaxe","javelin","lightHammer","mace","quarterstaff","sickle","spear"],ml={musicalInstruments:["bagpipes","drum","dulcimer","flute","lute","lyre","horn","panFlute","shawm","viol"],artisansTools:["alchemistsSupplies","brewersSupplies","calligraphersSupplies","carpentersTools","cartographersTools","cobblersTools","cooksUtensils","glassblowersTools","jewelersTools","leatherworkersTools","masonsTools","paintersSupplies","pottersTools","smithsTools","tinkersTools","weaversTools","woodcarversTools"],gamingSets:["diceSet","dragonchessSet","playingCardSet","threedragonAnteSet"]},fl=["common","dwarvish","elvish","giant","gnomish","goblin","halfling","orc","abyssal","celestial","draconic","deepSpeech","infernal","primordial","sylvan","undercommon"],bl=e=>{const t=e.toLowerCase();return t.includes("simpleweapon")?ul:t.includes("martialweapon")?hl:t.includes("simplemelee")?pl:t.includes("musicalinstrument")?ml.musicalInstruments:t.includes("artisanstool")?ml.artisansTools:t.includes("gamingset")?ml.gamingSets:[]};function gl(e){var n,r,s,a;let{values:i,onChange:l,classes:o=[],subclasses:c=[]}=e;const{maps:d}=Li(),u=(null===i||void 0===i?void 0:i.class)||"",h=(null===i||void 0===i?void 0:i.subclass)||"",p=e=>{"function"===typeof l&&l(e)},m=(0,t.useMemo)(()=>o.find(e=>e._id===u),[o,u]),f=(0,t.useMemo)(()=>m?c.filter(e=>e.parentClass===m.name):[],[m,c]),b=(0,t.useMemo)(()=>c.find(e=>e._id===h),[c,h]);return(0,mt.jsx)("div",{className:"bg-website-default-900 min-h-screen grid grid-cols-1 md:grid-cols-[1fr_2fr_1fr]",children:(0,mt.jsxs)("div",{className:"p-4 space-y-4 md:col-start-2",children:[(0,mt.jsxs)("div",{className:"flex flex-row p-4 space-x-4 border-b border-website-specials-500",children:[(0,mt.jsx)(zi,{size:48}),(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("div",{className:"text-left text-l font-semibold",children:"Character Name"}),(0,mt.jsx)("input",{type:"text",placeholder:"Name...",className:"border-b border-website-highlights-400 bg-website-default-900 focus:outline-none focus:bg-gradient-to-t from-website-highlights-500 to-website-default-900",value:i.name||"",onChange:e=>p({name:e.target.value})})]})]}),(0,mt.jsxs)("div",{className:"space-y-8 flex flex-col text-left",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsx)("h1",{className:"text-2xl font-semibold mb-4 text-white",children:"Base Class"}),(0,mt.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Class"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Choose your base class."})]}),(0,mt.jsx)(Bi.Content,{children:(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsxs)("select",{className:"rounded border border-website-specials-500 bg-website-default-900 px-3 py-2 text-white focus:outline-none",value:u,onChange:e=>(e=>{const t=o.find(t=>t._id===e);if(!t)return;const n=o.find(e=>e._id===(null===i||void 0===i?void 0:i.class)),r=t.baseProficiencies||{},s=t.resourcePoolModifier||{HP:1,STA:1,MP:1},a=(t.baseEquipment||[]).map(e=>{const t=e.split(":");return{itemId:3===t.length?t[1]:t[0],quantity:(3===t.length?parseInt(t[2]):parseInt(t[1]))||1}}),l=t=>{var a,l,o,c,d,u,h;const m=i.classBaseProficiencies||[],f=(null===n||void 0===n||null===(a=n.choices)||void 0===a||null===(l=a.proficiencies)||void 0===l||null===(o=l.skills)||void 0===o?void 0:o.options)||[],b=[...r.armor||[],...r.weapons||[],...r.tools||[],...r.abilityScore||[]],g={...(null===(c=i.skills)||void 0===c?void 0:c.proficiencies)||{}};[...m,...f].forEach(e=>{delete g[e]}),b.forEach(e=>{g[e]="proficient"});const v={...(null===(d=i.inv)||void 0===d?void 0:d.items)||{}};[...i.classBaseItemIds||[],...Object.values(i.classEquipmentChoices||{}).flatMap(e=>(null===e||void 0===e?void 0:e.addedIds)||[]),...Object.values(i.classAnyItemSelections||{}).map(e=>null===e||void 0===e?void 0:e.uniqueId).filter(Boolean)].forEach(e=>{v[e]&&delete v[e]});const x={...v,...t},y={class:e,subclass:"",HP:{...i.HP,max:Math.floor(10*(s.HP||1)),current:Math.floor(10*(s.HP||1))},STA:{...i.STA,max:Math.floor(10*(s.STA||1)),current:Math.floor(10*(s.STA||1))},MP:{...i.MP,max:Math.floor(10*(s.MP||1)),current:Math.floor(10*(s.MP||1))},skills:{...i.skills,proficiencies:g},inv:{gp:(null===(u=i.inv)||void 0===u?void 0:u.gp)||0,items:x,equipment:(null===(h=i.inv)||void 0===h?void 0:h.equipment)||{}},classBaseItemIds:Object.keys(t),classBaseProficiencies:b,classEquipmentChoices:{},classAnyItemSelections:{}};p(y)};a.length>0?l(dl(a,{itemsByItemId:d.itemsByItemId})):l({})})(e.target.value),children:[(0,mt.jsx)("option",{value:"",disabled:!0,children:"Select class"}),o.map(e=>(0,mt.jsx)("option",{value:e._id,children:e.name},e._id))]}),m&&(0,mt.jsx)("div",{className:"mt-4 p-4 border border-website-specials-500 rounded bg-website-default-900/50",children:(0,mt.jsx)("div",{className:"text-website-default-300 text-sm",children:m.description})})]})})]}),m&&(0,mt.jsxs)(mt.Fragment,{children:[(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsx)(Bi.Header,{className:"border-b border-website-default-700 pb-4",children:(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"\u25c8 Class Modifiers"})}),(0,mt.jsxs)(Bi.Content,{className:"pt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,mt.jsxs)("div",{className:"bg-website-default-900/50 p-4 rounded-lg border border-website-default-700",children:[(0,mt.jsx)("h4",{className:"text-website-specials-400 text-xs tracking-widest mb-3 uppercase",children:"Stat Increases"}),(0,mt.jsx)("ul",{className:"space-y-2",children:Object.entries(m.baseStatModifier||{}).map(e=>{let[t,n]=e;return(0,mt.jsxs)("li",{className:"flex justify-between text-sm",children:[(0,mt.jsx)("span",{className:"text-website-default-100 font-bold",children:t}),(0,mt.jsxs)("span",{className:"text-website-specials-500",children:["+",n]})]},t)})})]}),(0,mt.jsxs)("div",{className:"bg-website-default-900/50 p-4 rounded-lg border border-website-default-700",children:[(0,mt.jsx)("h4",{className:"text-website-highlights-400 text-xs tracking-widest mb-3 uppercase",children:"Resource Multipliers"}),(0,mt.jsx)("ul",{className:"space-y-2",children:Object.entries(m.resourcePoolModifier||{}).map(e=>{let[t,n]=e;return(0,mt.jsxs)("li",{className:"flex justify-between text-sm",children:[(0,mt.jsx)("span",{className:"text-website-default-100 font-bold",children:t}),(0,mt.jsxs)("span",{className:"text-website-highlights-500",children:["x",n.toFixed(1)]})]},t)})})]})]})]}),(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsx)(Bi.Header,{className:"border-b border-website-default-700/50",children:(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"\ud83d\udee1\ufe0f Proficiencies"})}),(0,mt.jsxs)(Bi.Content,{className:"space-y-4",children:[(0,mt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(m.baseProficiencies||{}).map(e=>{let[t,n]=e;return Array.isArray(n)&&n.length>0&&(0,mt.jsxs)("div",{className:"bg-website-default-900/60 p-3 rounded-lg border border-website-default-700",children:[(0,mt.jsx)("h4",{className:"text-website-highlights-400 text-[10px] uppercase mb-2",children:t}),(0,mt.jsx)("div",{className:"flex flex-wrap gap-1",children:n.map(e=>(0,mt.jsx)("span",{className:"px-2 py-0.5 bg-website-default-700 text-white text-[10px] rounded border border-website-default-600",children:al(e)},e))})]},t)})}),(null===(n=m.choices)||void 0===n||null===(r=n.proficiencies)||void 0===r?void 0:r.skills)&&(0,mt.jsxs)("div",{className:"bg-website-specials-900/20 border border-website-specials-700/30 p-3 rounded-lg",children:[(0,mt.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,mt.jsx)("h4",{className:"text-website-specials-400 text-[10px] uppercase",children:"Skill Choices"}),(0,mt.jsxs)("span",{className:"text-[10px] text-white bg-website-specials-600 px-2 py-0.5 rounded-full",children:["Picked ",(e=>{const t=(null===(e=i.skills)||void 0===e?void 0:e.proficiencies)||{},n=m.choices.proficiencies.skills.options||[];return Object.keys(t).filter(e=>n.includes(e)).length})()," / ",m.choices.proficiencies.skills.amount]})]}),(0,mt.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:null===(s=m.choices.proficiencies.skills.options)||void 0===s?void 0:s.map(e=>{var t;const n=((null===(t=i.skills)||void 0===t?void 0:t.proficiencies)||{}).hasOwnProperty(e);return(0,mt.jsxs)("button",{onClick:()=>(e=>{var t,n,r,s,a,o;if(null===m||void 0===m||null===(t=m.choices)||void 0===t||null===(n=t.proficiencies)||void 0===n||!n.skills)return;const c=(null===(r=i.skills)||void 0===r?void 0:r.proficiencies)||{},d=m.choices.proficiencies.skills.amount,u=m.choices.proficiencies.skills.options||[],h=Object.keys(c).filter(e=>u.includes(e)).length;console.log("=== BEFORE TOGGLE ==="),console.log("Skill:",e),console.log("values.skills.proficiencies:",null===(s=i.skills)||void 0===s?void 0:s.proficiencies),console.log("Is selected?",c[e]);const p={...c};if(p[e])delete p[e],console.log("DELETED:",e);else{if(!(h<d))return void console.log("LIMIT REACHED");p[e]="proficient",console.log("ADDED:",e)}console.log("=== EMITTING ==="),console.log("New proficiencies:",p);const f={skills:{active:(null===(a=i.skills)||void 0===a?void 0:a.active)||{},passive:(null===(o=i.skills)||void 0===o?void 0:o.passive)||{},proficiencies:p}};console.log("Full payload:",f),l(f),setTimeout(()=>{var e;console.log("=== AFTER UPDATE (next tick) ==="),console.log("values.skills.proficiencies:",null===(e=i.skills)||void 0===e?void 0:e.proficiencies)},0)})(e),className:"text-[11px] flex items-center gap-1.5 capitalize p-1.5 rounded border transition-all "+(n?"border-website-specials-500 bg-website-specials-900/40 text-white":"border-website-default-700 text-website-default-400 hover:border-website-default-500"),children:[(0,mt.jsx)("div",{className:"w-1 h-1 rotate-45 "+(n?"bg-website-specials-400":"bg-website-default-600")}),al(e)]},e)})})]})]})]}),(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{className:"border-b border-website-default-700/50",children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"\ud83c\udf92 Equipment"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Your starting gear and equipment choices."})]}),(0,mt.jsxs)(Bi.Content,{className:"pt-6 space-y-6",children:[m.baseEquipment&&m.baseEquipment.length>0&&(0,mt.jsxs)("div",{children:[(0,mt.jsx)("h4",{className:"text-website-highlights-400 text-xs tracking-widest mb-3 uppercase",children:"Base Equipment"}),(0,mt.jsx)("div",{className:"flex flex-wrap gap-2",children:m.baseEquipment.map((e,t)=>{const n=e.split(":"),r=3===n.length?n[1]:n[0],s=3===n.length?n[2]:n[1]||"1";return(0,mt.jsxs)("div",{className:"bg-website-default-900 border border-website-default-700 px-3 py-2 rounded-lg text-sm",children:[(0,mt.jsxs)("span",{className:"text-website-specials-400 font-bold mr-1",children:[s,"x"]}),(0,mt.jsx)("span",{className:"text-website-default-100",children:al(r)})]},t)})})]}),(null===(a=m.choices)||void 0===a?void 0:a.equipment)&&Object.entries(m.choices.equipment).map(e=>{let[t,n]=e;return(0,mt.jsxs)("div",{className:"space-y-3",children:[(0,mt.jsx)("h4",{className:"text-website-specials-400 text-xs tracking-widest uppercase",children:al(t).replace(/choice/i,"Choice")}),(0,mt.jsx)("div",{className:"flex flex-col gap-3",children:Object.entries(n).map(e=>{var n,r;let[s,a]=e;const l=(null===(n=i.classEquipmentChoices)||void 0===n||null===(r=n[t])||void 0===r?void 0:r.optionKey)===s,o=Object.keys(a).some(e=>cl(e));return(0,mt.jsxs)("div",{className:"space-y-2",children:[(0,mt.jsx)("button",{onClick:()=>((e,t,n)=>{var r,s,a,l;if(null===m||void 0===m||null===(r=m.choices)||void 0===r||null===(s=r.equipment)||void 0===s||null===(a=s[e])||void 0===a||!a[t])return;const o={...(null===(l=i.inv)||void 0===l?void 0:l.items)||{}},c=i.classEquipmentChoices||{},u=c[e],h=null===u||void 0===u?void 0:u.optionKey;if(h===t)return;const f={...i.classAnyItemSelections||{}};u&&((u.addedIds||[]).forEach(e=>{o[e]&&delete o[e]}),Object.keys(f).forEach(t=>{var n;if(!t.startsWith(`${e}_${h}_`))return;const r=null===(n=f[t])||void 0===n?void 0:n.uniqueId;r&&o[r]&&delete o[r],delete f[t]}));const b=[];Object.entries(n).forEach(e=>{let[t,n]=e;if(!cl(t)){if(ol(t))return b.push({itemId:t,quantity:n}),void ll[t].items.forEach(e=>{const t=e.split(":"),r=t[0],s=parseInt(t[1],10)||1;b.push({itemId:r,quantity:s*n})});b.push({itemId:t,quantity:n})}});const g=dl(b,{itemsByItemId:d.itemsByItemId}),v=Object.keys(g),x={...o,...g};p({classEquipmentChoices:{...c,[e]:{optionKey:t,items:n,addedIds:v}},classAnyItemSelections:f,inv:{...i.inv,items:x}})})(t,s,a),className:"w-full p-4 text-left rounded-lg border transition-all "+(l?"bg-website-specials-900/40 border-website-specials-500":"bg-website-default-900 border-website-default-700 hover:border-website-default-500"),children:(0,mt.jsxs)("div",{className:"flex justify-between items-start",children:[(0,mt.jsx)("div",{className:"text-sm flex-1",children:Object.entries(a).map((e,t)=>{let[n,r]=e;const s=ol(n);return(0,mt.jsxs)("div",{className:t>0?"mt-2":"",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsxs)("span",{className:"text-website-specials-400 font-bold",children:[r,"x"]})," ",(0,mt.jsx)("span",{className:"text-website-default-100",children:al(n)})]}),s&&(0,mt.jsxs)("div",{className:"ml-4 mt-1 text-xs text-website-default-400",children:[(0,mt.jsx)("div",{className:"italic mb-1",children:"Contains:"}),(0,mt.jsx)("div",{className:"flex flex-wrap gap-1",children:ll[n].items.map((e,t)=>{const[n,r]=e.split(":");return(0,mt.jsxs)("span",{className:"bg-website-default-800/50 px-1.5 py-0.5 rounded",children:[r,"x ",al(n)]},t)})})]})]},n)})}),l&&(0,mt.jsx)("span",{className:"text-website-specials-400 font-bold text-lg ml-2",children:"\u2713"})]})}),l&&o&&(0,mt.jsx)("div",{className:"ml-4 space-y-2 p-3 bg-website-default-900/50 rounded border border-website-default-700",children:Object.entries(a).map(e=>{var n;let[r,a]=e;if(!cl(r))return null;const l=bl(r),o=`${t}_${s}_${r}`,c=null===(n=i.classAnyItemSelections)||void 0===n?void 0:n[o],u=(null===c||void 0===c?void 0:c.itemId)||"";return(0,mt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mt.jsxs)("span",{className:"text-xs text-website-default-300",children:[(0,mt.jsxs)("span",{className:"text-website-specials-400 font-bold",children:[a,"x"]})," ",al(r),":"]}),(0,mt.jsxs)("select",{className:"flex-1 rounded border border-website-specials-500 bg-website-default-900 px-2 py-1 text-xs text-white focus:outline-none",value:u,onChange:e=>((e,t,n,r)=>{var s,a,l,o;if(!r)return;const c=null===m||void 0===m||null===(s=m.choices)||void 0===s||null===(a=s.equipment)||void 0===a||null===(l=a[e])||void 0===l?void 0:l[t];if(!c)return;const u={...(null===(o=i.inv)||void 0===o?void 0:o.items)||{}},h={...i.classAnyItemSelections||{}},f={...i.classEquipmentChoices||{}},b=f[e],g=null===b||void 0===b?void 0:b.optionKey,v=Boolean(b)&&g!==t;if(v&&((b.addedIds||[]).forEach(e=>{u[e]&&delete u[e]}),Object.keys(h).forEach(t=>{var n;if(!t.startsWith(`${e}_${g}_`))return;const r=null===(n=h[t])||void 0===n?void 0:n.uniqueId;r&&u[r]&&delete u[r],delete h[t]})),!b||v){const n=[];Object.entries(c).forEach(e=>{let[t,r]=e;if(!cl(t)){if(ol(t))return n.push({itemId:t,quantity:r}),void ll[t].items.forEach(e=>{const t=e.split(":"),s=t[0],a=parseInt(t[1],10)||1;n.push({itemId:s,quantity:a*r})});n.push({itemId:t,quantity:r})}});const r=dl(n,{itemsByItemId:d.itemsByItemId}),s=Object.keys(r);Object.assign(u,r),f[e]={optionKey:t,items:c,addedIds:s}}const x=`${e}_${t}_${n}`,y=h[x];null!==y&&void 0!==y&&y.uniqueId&&u[y.uniqueId]&&delete u[y.uniqueId];const w=Number(c[n]||1),j=dl([{itemId:r,quantity:w}],{itemsByItemId:d.itemsByItemId}),N=Object.keys(j);Object.assign(u,j),h[x]={itemId:r,uniqueId:N[0]},p({classEquipmentChoices:f,classAnyItemSelections:h,inv:{...i.inv,items:u}})})(t,s,r,e.target.value),children:[(0,mt.jsxs)("option",{value:"",disabled:!0,children:["Select ",al(r.replace(/any/i,"").trim())]}),l.map(e=>(0,mt.jsx)("option",{value:e,children:al(e)},e))]})]},r)})})]},s)})})]},t)})]})]}),m.featuresByLevel&&Object.keys(m.featuresByLevel).length>0&&(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{className:"border-b border-website-default-700/50",children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"\u26a1 Class Features"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"All features and abilities by level."})]}),(0,mt.jsx)(Bi.Content,{className:"pt-6",children:(0,mt.jsx)("div",{className:"space-y-4",children:Object.entries(m.featuresByLevel).filter(e=>{let[t,n]=e;return n&&n.length>0}).sort((e,t)=>parseInt(e[0].replace("level",""))-parseInt(t[0].replace("level",""))).map(e=>{let[t,n]=e;return(0,mt.jsxs)("div",{className:"space-y-2",children:[(0,mt.jsxs)("h4",{className:"text-website-specials-400 text-xs tracking-widest uppercase font-bold",children:["Level ",t.replace("level","")]}),(0,mt.jsx)("div",{className:"space-y-2 ml-2",children:n.map((e,t)=>{const n=sl[e];return n?(0,mt.jsx)("div",{className:"p-3 bg-website-default-900/50 border border-website-default-700 rounded-lg hover:border-website-specials-500/50 transition-colors",children:(0,mt.jsxs)("div",{className:"flex items-start gap-2",children:[(0,mt.jsx)("span",{className:"text-website-specials-400 font-bold mt-1",children:"\u2726"}),(0,mt.jsxs)("div",{className:"flex-1",children:[(0,mt.jsx)("h5",{className:"text-website-default-100 font-semibold text-sm",children:n.name}),(0,mt.jsx)("p",{className:"text-website-default-300 text-xs mt-1 leading-relaxed",children:n.description})]})]})},t):(0,mt.jsxs)("div",{className:"text-website-default-400 text-sm",children:[(0,mt.jsx)("span",{className:"text-website-specials-400 font-bold",children:"\u2022"})," ",al(e)," (No data)"]},t)})})]},t)})})})]})]})]})]}),m&&f.length>0&&(0,mt.jsxs)("div",{children:[(0,mt.jsx)("h1",{className:"text-2xl font-semibold mb-4 text-white",children:"Subclass"}),(0,mt.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-highlights-500",children:[(0,mt.jsxs)(Bi.Header,{children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Subclass"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Choose your specialization."})]}),(0,mt.jsx)(Bi.Content,{children:(0,mt.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,mt.jsxs)("select",{className:"rounded border border-website-highlights-500 bg-website-default-900 px-3 py-2 text-white focus:outline-none",value:h,onChange:e=>p({subclass:e.target.value}),children:[(0,mt.jsx)("option",{value:"",disabled:!0,children:"Select subclass (optional)"}),f.map(e=>(0,mt.jsx)("option",{value:e._id,children:e.name},e._id))]}),b&&(0,mt.jsx)("div",{className:"p-4 border border-website-highlights-500 rounded bg-website-default-900/50",children:(0,mt.jsx)("div",{className:"text-website-default-300 text-sm",children:b.description})})]})})]}),b&&b.featuresByLevel&&Object.keys(b.featuresByLevel).length>0&&(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-highlights-500",children:[(0,mt.jsxs)(Bi.Header,{className:"border-b border-website-default-700/50",children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"\u2728 Subclass Features"}),(0,mt.jsxs)(Bi.Description,{className:"text-website-default-300",children:["Features from ",b.name]})]}),(0,mt.jsx)(Bi.Content,{className:"pt-6",children:(0,mt.jsx)("div",{className:"space-y-4",children:Object.entries(b.featuresByLevel).filter(e=>{let[t,n]=e;return n&&n.length>0}).sort((e,t)=>parseInt(e[0].replace("level",""))-parseInt(t[0].replace("level",""))).map(e=>{let[t,n]=e;return(0,mt.jsxs)("div",{className:"space-y-2",children:[(0,mt.jsxs)("h4",{className:"text-website-highlights-400 text-xs tracking-widest uppercase font-bold",children:["Level ",t.replace("level","")]}),(0,mt.jsx)("div",{className:"space-y-2 ml-2",children:n.map((e,t)=>{const n=sl[e];return n?(0,mt.jsx)("div",{className:"p-3 bg-website-default-900/50 border border-website-default-700 rounded-lg hover:border-website-highlights-500/50 transition-colors",children:(0,mt.jsxs)("div",{className:"flex items-start gap-2",children:[(0,mt.jsx)("span",{className:"text-website-highlights-400 font-bold mt-1",children:"\u2726"}),(0,mt.jsxs)("div",{className:"flex-1",children:[(0,mt.jsx)("h5",{className:"text-website-default-100 font-semibold text-sm",children:n.name}),(0,mt.jsx)("p",{className:"text-website-default-300 text-xs mt-1 leading-relaxed",children:n.description})]})]})},t):(0,mt.jsxs)("div",{className:"text-website-default-400 text-sm",children:[(0,mt.jsx)("span",{className:"text-website-highlights-400 font-bold",children:"\u2022"})," ",al(e)," (No data)"]},t)})})]},t)})})})]})]})]})]})]})})}function vl(e){var n,r,s,a;let{values:i,onChange:l,backgrounds:o=[],items:c=[],classes:d=[]}=e;const{maps:u}=Li(),h=(null===i||void 0===i?void 0:i.background)||"",p=e=>{"function"===typeof l&&l(e)},m=(0,t.useMemo)(()=>o.find(e=>e._id===h),[o,h]),{musicalInstruments:f,artisansTools:b,gamingSets:g}=((0,t.useMemo)(()=>null===d||void 0===d?void 0:d.find(e=>e._id===(null===i||void 0===i?void 0:i.class)),[d,null===i||void 0===i?void 0:i.class]),ml),v=e=>e&&e.toLowerCase().includes("any"),x=e=>{const t=e.toLowerCase(),n=bl(e);return n&&n.length>0?n:"any"===t?fl:[]},y=(e,t)=>{var n,r,s;const a=null===m||void 0===m||null===(n=m.choices)||void 0===n||null===(r=n.proficiencies)||void 0===r?void 0:r[e];if(!a)return;const l=(null===(s=i.skills)||void 0===s?void 0:s.proficiencies)||{},o=`${e}_${t}`,c=i.proficiencyChoices||{},d=a.amount,u=Object.keys(c).filter(t=>t.startsWith(`${e}_`)).length,h={...l},f={...c};if(f[o])delete f[o],delete h[t];else{if(!(u<d))return;f[o]=t,h[t]="proficient"}p({skills:{...i.skills,proficiencies:h},proficiencyChoices:f})},w=(e,t,n,r)=>{var s;if(!r)return;const a=(null===(s=i.skills)||void 0===s?void 0:s.proficiencies)||{},l=`${e}_${t}_${n}`,o=i.proficiencyChoices||{};if(o[l]){delete a[o[l]]}const c={...a,[r]:"proficient"},d={...o,[l]:r};p({skills:{...i.skills,proficiencies:c},proficiencyChoices:d})};return(0,mt.jsx)("div",{className:"bg-website-default-900 min-h-screen grid grid-cols-1 md:grid-cols-[1fr_2fr_1fr]",children:(0,mt.jsxs)("div",{className:"p-4 space-y-4 md:col-start-2",children:[(0,mt.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center p-4 gap-3 sm:gap-4 border-b border-website-specials-500",children:[(0,mt.jsx)(zi,{size:48}),(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("div",{className:"text-left text-l font-semibold",children:"Character Name"}),(0,mt.jsx)("input",{type:"text",placeholder:"Name...",className:"border-b border-website-highlights-400 bg-website-default-900 focus:outline-none focus:bg-gradient-to-t from-website-highlights-500 to-website-default-900",value:i.name||"",onChange:e=>p({name:e.target.value})})]})]}),(0,mt.jsx)("div",{className:"space-y-8 flex flex-col text-left",children:(0,mt.jsxs)("div",{children:[(0,mt.jsx)("h1",{className:"text-2xl font-semibold mb-4 text-white",children:"Choose Background"}),(0,mt.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Background"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Select your character's background."})]}),(0,mt.jsx)(Bi.Content,{children:(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsxs)("select",{className:"rounded border border-website-specials-500 bg-website-default-900 px-3 py-2 text-white focus:outline-none",value:h,onChange:e=>(e=>{const t=o.find(t=>t._id===e);if(!t)return;const n=(t.baseEquipment||[]).map(e=>{const t=e.split(":");return{itemId:t[0],quantity:t[1]?parseInt(t[1]):1}}),r=n=>{var r,s,a,l;const o={...(null===(r=i.inv)||void 0===r?void 0:r.items)||{}};[...i.backgroundBaseItemIds||[],...Object.values(i.backgroundEquipmentChoices||{}).flatMap(e=>(null===e||void 0===e?void 0:e.addedIds)||[]),...Object.values(i.backgroundAnyItemSelections||{}).map(e=>null===e||void 0===e?void 0:e.uniqueId).filter(Boolean)].forEach(e=>{o[e]&&delete o[e]});const c={...o,...n},d={...(null===(s=i.skills)||void 0===s?void 0:s.proficiencies)||{}};[...i.backgroundBaseProficiencies||[],...Object.values(i.proficiencyChoices||{})].forEach(e=>{delete d[e]});const u=t.baseProficiencies||[];u.forEach(e=>{d[e]="proficient"});const h=Number(i.backgroundBaseGp||0),m=Number((null===(a=i.inv)||void 0===a?void 0:a.gp)||0),f=Number(t.gp||0),b=Math.max(0,m-h+f),g={background:e,inv:{gp:b,items:c,equipment:(null===(l=i.inv)||void 0===l?void 0:l.equipment)||{}},skills:{...i.skills,proficiencies:d},backgroundBaseGp:f,backgroundBaseItemIds:Object.keys(n),backgroundBaseProficiencies:u,proficiencyChoices:{},backgroundEquipmentChoices:{},backgroundAnyItemSelections:{}};p(g)};n.length>0?r(dl(n,{itemsByItemId:u.itemsByItemId})):r({})})(e.target.value),children:[(0,mt.jsx)("option",{value:"",disabled:!0,children:"Select background"}),o.map(e=>(0,mt.jsx)("option",{value:e._id,children:e.name},e._id))]}),m&&(0,mt.jsxs)("div",{className:"mt-4 p-4 border border-website-specials-500 rounded bg-website-default-900/50",children:[(0,mt.jsx)("div",{className:"text-website-default-300 text-sm",children:m.description}),(0,mt.jsxs)("div",{className:"mt-3 pt-3 border-t border-website-default-700",children:[(0,mt.jsx)("span",{className:"text-website-highlights-400 font-semibold",children:"Starting Gold: "}),(0,mt.jsxs)("span",{className:"text-white",children:[m.gp," gp"]})]})]})]})})]}),m&&(0,mt.jsxs)(mt.Fragment,{children:[m.features&&Object.keys(m.features).length>0&&(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsx)(Bi.Header,{className:"border-b border-website-default-700 pb-4",children:(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"\u2728 Background Features"})}),(0,mt.jsx)(Bi.Content,{className:"pt-6 space-y-4",children:Object.entries(m.features).map(e=>{let[t,n]=e;return(0,mt.jsxs)("div",{className:"bg-website-default-900/50 p-4 rounded-lg border border-website-default-700",children:[(0,mt.jsx)("h4",{className:"text-website-highlights-400 text-sm font-semibold mb-2 capitalize",children:al(t)}),(0,mt.jsx)("ul",{className:"space-y-2",children:n.map((e,t)=>(0,mt.jsxs)("li",{className:"text-website-default-200 text-sm flex gap-2",children:[(0,mt.jsx)("span",{className:"text-website-specials-400",children:"\u2022"}),(0,mt.jsx)("span",{children:e})]},t))})]},t)})})]}),(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsx)(Bi.Header,{className:"border-b border-website-default-700/50",children:(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"\ud83c\udfaf Proficiencies"})}),(0,mt.jsxs)(Bi.Content,{className:"pt-6 space-y-4",children:[m.baseProficiencies&&m.baseProficiencies.length>0&&(0,mt.jsxs)("div",{className:"bg-website-default-900/60 p-3 rounded-lg border border-website-default-700",children:[(0,mt.jsx)("h4",{className:"text-website-highlights-400 text-[10px] uppercase mb-2",children:"Base Proficiencies"}),(0,mt.jsx)("div",{className:"flex flex-wrap gap-1",children:m.baseProficiencies.map(e=>(0,mt.jsx)("span",{className:"px-2 py-0.5 bg-website-default-700 text-white text-[10px] rounded border border-website-default-600",children:al(e)},e))})]}),(null===(n=m.choices)||void 0===n?void 0:n.proficiencies)&&Object.entries(m.choices.proficiencies).filter(e=>{let[t]=e;return"tools"!==t}).map(e=>{let[t,n]=e;return(0,mt.jsxs)("div",{className:"bg-website-specials-900/20 border border-website-specials-700/30 p-3 rounded-lg",children:[(0,mt.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,mt.jsxs)("h4",{className:"text-website-specials-400 text-[10px] uppercase capitalize",children:[t," Choices"]}),(0,mt.jsxs)("span",{className:"text-[10px] text-white bg-website-specials-600 px-2 py-0.5 rounded-full",children:["Picked ",Object.keys(i.proficiencyChoices||{}).filter(e=>e.startsWith(`${t}_`)).length," / ",n.amount]})]}),(0,mt.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:n.options.map(e=>{const n=`${t}_${e}`,r=(i.proficiencyChoices||{})[n];return v(e)?null:(0,mt.jsxs)("button",{onClick:()=>y(t,e),className:"text-[11px] flex items-center gap-1.5 capitalize p-1.5 rounded border transition-all "+(r?"border-website-specials-500 bg-website-specials-900/40 text-white":"border-website-default-700 text-website-default-400 hover:border-website-default-500"),children:[(0,mt.jsx)("div",{className:"w-1 h-1 rotate-45 "+(r?"bg-website-specials-400":"bg-website-default-600")}),al(e)]},e)})}),n.options.some(v)&&(0,mt.jsx)("div",{className:"mt-3 space-y-2 p-3 bg-website-default-900/50 rounded border border-website-default-700",children:(()=>{const e=Array.from({length:n.amount},(e,t)=>t),r=n.options.find(v);if(!r)return null;const s=x(r),a=new Set(Object.entries(i.proficiencyChoices||{}).filter(e=>{let[n,s]=e;return n.startsWith(`${t}_${r}_`)}).map(e=>{let[t,n]=e;return n}));return e.map(e=>{const l=`${t}_${r}_${e}`,o=(i.proficiencyChoices||{})[l]||"",c=s.filter(e=>!a.has(e)||e===o);return(0,mt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mt.jsxs)("span",{className:"text-xs text-website-default-300",children:[(()=>{if(n.amount>1)return`Choice ${e+1}`;return al(r.replace(/any/i,"").trim())||"Language"})()," :"]}),(0,mt.jsxs)("select",{className:"flex-1 rounded border border-website-specials-500 bg-website-default-900 px-2 py-1 text-xs text-white focus:outline-none",value:o,onChange:n=>w(t,r,e,n.target.value),children:[(0,mt.jsxs)("option",{value:"",disabled:!0,children:["Select ",al(r.replace(/any/i,"").trim())]}),c.map(e=>(0,mt.jsx)("option",{value:e,children:al(e)},e))]})]},l)})})()})]},t)}),(null===(r=m.choices)||void 0===r||null===(s=r.proficiencies)||void 0===s?void 0:s.tools)&&(0,mt.jsxs)("div",{className:"bg-website-specials-900/20 border border-website-specials-700/30 p-3 rounded-lg",children:[(0,mt.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,mt.jsx)("h4",{className:"text-website-specials-400 text-[10px] uppercase",children:"Tool Proficiency Choices"}),(0,mt.jsxs)("span",{className:"text-[10px] text-white bg-website-specials-600 px-2 py-0.5 rounded-full",children:["Picked ",Object.keys(i.proficiencyChoices||{}).filter(e=>e.startsWith("tools_")).length," / ",m.choices.proficiencies.tools.amount]})]}),(0,mt.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:m.choices.proficiencies.tools.options.map(e=>{const t=`tools_${e}`,n=(i.proficiencyChoices||{})[t];return v(e)?null:(0,mt.jsxs)("button",{onClick:()=>y("tools",e),className:"text-[11px] flex items-center gap-1.5 capitalize p-1.5 rounded border transition-all "+(n?"border-website-specials-500 bg-website-specials-900/40 text-white":"border-website-default-700 text-website-default-400 hover:border-website-default-500"),children:[(0,mt.jsx)("div",{className:"w-1 h-1 rotate-45 "+(n?"bg-website-specials-400":"bg-website-default-600")}),al(e)]},e)})}),m.choices.proficiencies.tools.options.some(v)&&(0,mt.jsx)("div",{className:"mt-3 space-y-2 p-3 bg-website-default-900/50 rounded border border-website-default-700",children:(()=>{const e=Array.from({length:m.choices.proficiencies.tools.amount},(e,t)=>t),t=m.choices.proficiencies.tools.options.find(v);if(!t)return null;const n=x(t),r=new Set(Object.entries(i.proficiencyChoices||{}).filter(e=>{let[n,r]=e;return n.startsWith(`tools_${t}_`)}).map(e=>{let[t,n]=e;return n}));return e.map(e=>{const s=`tools_${t}_${e}`,a=(i.proficiencyChoices||{})[s]||"",l=n.filter(e=>!r.has(e)||e===a);return(0,mt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mt.jsxs)("span",{className:"text-xs text-website-default-300",children:[(()=>{if(m.choices.proficiencies.tools.amount>1)return`Choice ${e+1}`;return al(t.replace(/[Aa]ny/,"").trim())||"Tool"})()," :"]}),(0,mt.jsxs)("select",{className:"flex-1 rounded border border-website-specials-500 bg-website-default-900 px-2 py-1 text-xs text-white focus:outline-none",value:a,onChange:n=>w("tools",t,e,n.target.value),children:[(0,mt.jsxs)("option",{value:"",disabled:!0,children:["Select ",al(t.replace(/any/i,"").trim())]}),l.map(e=>(0,mt.jsx)("option",{value:e,children:al(e)},e))]})]},s)})})()})]})]})]}),m.baseEquipment&&m.baseEquipment.length>0&&(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{className:"border-b border-website-default-700/50",children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"\ud83c\udf92 Equipment"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Your starting gear."})]}),(0,mt.jsxs)(Bi.Content,{className:"pt-6 space-y-6",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsx)("h4",{className:"text-website-highlights-400 text-xs tracking-widest mb-3 uppercase",children:"Base Equipment"}),(0,mt.jsx)("div",{className:"flex flex-wrap gap-2",children:m.baseEquipment.map((e,t)=>{const n=e.split(":"),r=n[0],s=n[1]||"1";return(0,mt.jsxs)("div",{className:"bg-website-default-900 border border-website-default-700 px-3 py-2 rounded-lg text-sm",children:[(0,mt.jsxs)("span",{className:"text-website-specials-400 font-bold mr-1",children:[s,"x"]}),(0,mt.jsx)("span",{className:"text-website-default-100",children:al(r)})]},t)})})]}),(null===(a=m.choices)||void 0===a?void 0:a.equipment)&&Object.entries(m.choices.equipment).map(e=>{let[t,n]=e;return(0,mt.jsxs)("div",{className:"space-y-3",children:[(0,mt.jsx)("h4",{className:"text-website-specials-400 text-xs tracking-widest uppercase",children:al(t).replace(/choice/i,"Choice")}),(0,mt.jsx)("div",{className:"flex flex-col gap-3",children:Object.entries(n).map(e=>{var n,r;let[s,a]=e;const l=(null===(n=i.backgroundEquipmentChoices)||void 0===n||null===(r=n[t])||void 0===r?void 0:r.optionKey)===s,o=Object.keys(a).some(e=>cl(e));return(0,mt.jsxs)("div",{className:"space-y-2",children:[(0,mt.jsx)("button",{onClick:()=>((e,t,n)=>{var r,s,a,l;if(null===m||void 0===m||null===(r=m.choices)||void 0===r||null===(s=r.equipment)||void 0===s||null===(a=s[e])||void 0===a||!a[t])return;const o={...(null===(l=i.inv)||void 0===l?void 0:l.items)||{}},c=i.backgroundEquipmentChoices||{},d=c[e],h=null===d||void 0===d?void 0:d.optionKey;if(h===t)return;const f={...i.backgroundAnyItemSelections||{}};d&&((d.addedIds||[]).forEach(e=>{o[e]&&delete o[e]}),Object.keys(f).forEach(t=>{var n;if(!t.startsWith(`${e}_${h}_`))return;const r=null===(n=f[t])||void 0===n?void 0:n.uniqueId;r&&o[r]&&delete o[r],delete f[t]}));const b=[];Object.entries(n).forEach(e=>{let[t,n]=e;if(!cl(t)){if(ol(t))return b.push({itemId:t,quantity:n}),void ll[t].items.forEach(e=>{const t=e.split(":"),r=t[0],s=parseInt(t[1],10)||1;b.push({itemId:r,quantity:s*n})});b.push({itemId:t,quantity:n})}});const g=dl(b,{itemsByItemId:u.itemsByItemId}),v=Object.keys(g),x={...o,...g};p({backgroundEquipmentChoices:{...c,[e]:{optionKey:t,items:n,addedIds:v}},backgroundAnyItemSelections:f,inv:{...i.inv,items:x}})})(t,s,a),className:"w-full p-4 text-left rounded-lg border transition-all "+(l?"bg-website-specials-900/40 border-website-specials-500":"bg-website-default-900 border-website-default-700 hover:border-website-default-500"),children:(0,mt.jsxs)("div",{className:"flex justify-between items-start",children:[(0,mt.jsx)("div",{className:"text-sm flex-1",children:Object.entries(a).map((e,t)=>{let[n,r]=e;return(0,mt.jsxs)("div",{className:t>0?"mt-2":"",children:[(0,mt.jsxs)("span",{className:"text-website-specials-400 font-bold",children:[r,"x"]})," ",(0,mt.jsx)("span",{className:"text-website-default-100",children:al(n)})]},n)})}),l&&(0,mt.jsx)("span",{className:"text-website-specials-400 font-bold text-lg ml-2",children:"\u2713"})]})}),l&&o&&(0,mt.jsx)("div",{className:"ml-4 space-y-2 p-3 bg-website-default-900/50 rounded border border-website-default-700",children:Object.entries(a).map(e=>{var n;let[r,a]=e;if(!cl(r))return null;const l=x(r),o=`${t}_${s}_${r}`,c=null===(n=i.backgroundAnyItemSelections)||void 0===n?void 0:n[o],d=(null===c||void 0===c?void 0:c.itemId)||"";return(0,mt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mt.jsxs)("span",{className:"text-xs text-website-default-300",children:[(0,mt.jsxs)("span",{className:"text-website-specials-400 font-bold",children:[a,"x"]})," ",al(r),":"]}),(0,mt.jsxs)("select",{className:"flex-1 rounded border border-website-specials-500 bg-website-default-900 px-2 py-1 text-xs text-white focus:outline-none",value:d,onChange:e=>((e,t,n,r)=>{var s,a,l,o;if(!r)return;const c=null===m||void 0===m||null===(s=m.choices)||void 0===s||null===(a=s.equipment)||void 0===a||null===(l=a[e])||void 0===l?void 0:l[t];if(!c)return;const d={...(null===(o=i.inv)||void 0===o?void 0:o.items)||{}},h={...i.backgroundAnyItemSelections||{}},f={...i.backgroundEquipmentChoices||{}},b=f[e],g=null===b||void 0===b?void 0:b.optionKey,v=Boolean(b)&&g!==t;if(v&&((b.addedIds||[]).forEach(e=>{d[e]&&delete d[e]}),Object.keys(h).forEach(t=>{var n;if(!t.startsWith(`${e}_${g}_`))return;const r=null===(n=h[t])||void 0===n?void 0:n.uniqueId;r&&d[r]&&delete d[r],delete h[t]})),!b||v){const n=[];Object.entries(c).forEach(e=>{let[t,r]=e;if(!cl(t)){if(ol(t))return n.push({itemId:t,quantity:r}),void ll[t].items.forEach(e=>{const t=e.split(":"),s=t[0],a=parseInt(t[1],10)||1;n.push({itemId:s,quantity:a*r})});n.push({itemId:t,quantity:r})}});const r=dl(n,{itemsByItemId:u.itemsByItemId}),s=Object.keys(r);Object.assign(d,r),f[e]={optionKey:t,items:c,addedIds:s}}const x=`${e}_${t}_${n}`,y=h[x];null!==y&&void 0!==y&&y.uniqueId&&d[y.uniqueId]&&delete d[y.uniqueId];const w=Number(c[n]||1),j=dl([{itemId:r,quantity:w}],{itemsByItemId:u.itemsByItemId}),N=Object.keys(j);Object.assign(d,j),h[x]={itemId:r,uniqueId:N[0]},p({backgroundEquipmentChoices:f,backgroundAnyItemSelections:h,inv:{...i.inv,items:d}})})(t,s,r,e.target.value),children:[(0,mt.jsxs)("option",{value:"",disabled:!0,children:["Select ",al(r.replace(/any/i,"").trim())]}),l.map(e=>(0,mt.jsx)("option",{value:e,children:al(e)},e))]})]},r)})})]},s)})})]},t)})]})]})]})]})]})})]})})}const xl=["str","dex","con","int","wis","cha"],yl={str:"Strength",dex:"Dexterity",con:"Constitution",int:"Intelligence",wis:"Wisdom",cha:"Charisma",luck:"Luck"},wl={8:0,9:1,10:2,11:3,12:4,13:5,14:7,15:9},jl=15;function Nl(e){var t;return e<8||e>jl?1/0:null!==(t=wl[e])&&void 0!==t?t:1/0}function kl(e){var n,r;let{values:s,onChange:a}=e;const{maps:i}=Li(),{classesById:l,racesById:o,subracesById:c}=i,d=(null===s||void 0===s?void 0:s.stats)||{str:"",dex:"",con:"",int:"",wis:"",cha:"",luck:""},u=(null===s||void 0===s?void 0:s.abilityScoreMethod)||"random",h=(null===s||void 0===s?void 0:s.race)||"",p=(null===s||void 0===s?void 0:s.subrace)||"",m=(null===s||void 0===s?void 0:s.class)||"",f=e=>{"function"===typeof a&&a(e)},b=(0,t.useMemo)(()=>o[h]||null,[o,h]),g=(0,t.useMemo)(()=>c[p]||null,[c,p]),v=(0,t.useMemo)(()=>l[m]||null,[l,m]),x=(0,t.useMemo)(()=>Zi(b),[b]),y=(0,t.useMemo)(()=>Zi(g),[g]),w=(0,t.useMemo)(()=>{var e;return Ji(null===s||void 0===s||null===(e=s.abilityScoreChoices)||void 0===e?void 0:e.race,x)},[null===s||void 0===s||null===(n=s.abilityScoreChoices)||void 0===n?void 0:n.race,x]),j=(0,t.useMemo)(()=>{var e;return Ji(null===s||void 0===s||null===(e=s.abilityScoreChoices)||void 0===e?void 0:e.subrace,y)},[null===s||void 0===s||null===(r=s.abilityScoreChoices)||void 0===r?void 0:r.subrace,y]),N=(0,t.useMemo)(()=>{const e={...d},t=(null===b||void 0===b?void 0:b.abilityScoreModifiers)||{},n=(null===g||void 0===g?void 0:g.abilityScoreModifiers)||{},r=(null===v||void 0===v?void 0:v.baseStatModifier)||{};return Object.keys(e).forEach(s=>{const a=parseInt(e[s],10)||0,i=Vi(t,s)+Vi(n,s)+Vi(r,s)+Gi(w,s)+Gi(j,s);e[s]=a+i}),e},[d,b,g,v,w,j]),k=e=>{if("pointbuy"===e){const t={...d};return xl.forEach(e=>{const n=parseInt(t[e],10);(!n||n<8||n>jl)&&(t[e]=8)}),void f({abilityScoreMethod:e,stats:t})}f({abilityScoreMethod:e})},S=(0,t.useMemo)(()=>{if("pointbuy"!==u)return 27;let e=0;for(const t of xl){const n=parseInt(d[t],10)||8;e+=Nl(Math.min(Math.max(n,8),jl))}return 27-e},[u,d]),A=e=>{let{code:t}=e;const n=parseInt(d[t],10)||8,r=Math.min(Math.max(n,8),jl);return(0,mt.jsxs)("div",{className:"flex items-center justify-between p-2 bg-website-default-900 border border-website-default-700 rounded",children:[(0,mt.jsx)("div",{className:"text-website-default-100 text-sm",children:yl[t]}),(0,mt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,mt.jsx)("button",{onClick:()=>(e=>{const t=parseInt(d[e],10)||8,n=Math.max(t-1,8);n!==t&&f({stats:{...d,[e]:n}})})(t),className:"px-2 py-1 text-xs rounded border border-website-default-600 text-website-default-300 hover:border-website-default-400",children:"-"}),(0,mt.jsx)("div",{className:"w-8 text-center text-white",children:r}),(0,mt.jsx)("button",{onClick:()=>(e=>{const t=parseInt(d[e],10)||8,n=Math.min(t+1,jl);if(n===t)return;const r=Nl(Math.min(Math.max(t,8),jl)),s=Nl(n);S-(s-r)<0||f({stats:{...d,[e]:n}})})(t),className:"px-2 py-1 text-xs rounded border border-website-specials-600 text-white hover:border-website-specials-400",children:"+"})]})]})},C=()=>(0,mt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:xl.map(e=>{const t=parseInt(d[e],10)||0,n=parseInt(N[e],10)||0,r=n-t,s=r>0;return(0,mt.jsx)("div",{className:"p-3 bg-website-default-900/50 border border-website-default-700 rounded",children:(0,mt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mt.jsx)("div",{className:"text-website-default-100 text-sm font-semibold",children:yl[e]}),(0,mt.jsxs)("div",{className:"text-sm",children:[(0,mt.jsx)("span",{className:"text-website-default-300",children:"Base:"})," ",(0,mt.jsx)("span",{className:"text-white font-semibold",children:t}),(0,mt.jsx)("span",{className:"mx-2 text-website-default-500",children:"\u2192"}),(0,mt.jsx)("span",{className:"text-website-default-300",children:"Modified:"})," ",(0,mt.jsx)("span",{className:"text-white font-semibold",children:n}),0!==r&&(0,mt.jsx)("span",{className:"ml-2 text-xs "+(s?"text-website-highlights-400":"text-website-specials-400"),children:s?`+${r}`:`${r}`})]})]})},e)})});return(0,mt.jsxs)("div",{className:"bg-website-default-900 min-h-screen grid grid-cols-1 md:grid-cols-[1fr_2fr_1fr]",children:[(0,mt.jsxs)("div",{className:"p-4 space-y-4  md:col-start-2",children:[(0,mt.jsxs)("div",{className:"flex flex-row p-4 space-x-4 border-b border-website-specials-500",children:[(0,mt.jsx)(zi,{size:48}),(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("div",{className:"text-left text-l font-semibold",children:"Character Name"}),(0,mt.jsx)("input",{type:"text",placeholder:"Name...",className:"border-b border-website-highlights-400 bg-website-default-900 focus:outline-none focus:bg-gradient-to-t from-website-highlights-500 to-website-default-900",value:s.name||"",onChange:e=>f({name:e.target.value})})]})]}),(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Ability Scores"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Choose how to generate your base scores and see final modified totals."})]}),(0,mt.jsxs)(Bi.Content,{className:"space-y-6",children:[(0,mt.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 p-3 bg-website-default-900/50 border border-website-default-700 rounded",children:[(0,mt.jsx)("div",{className:"text-website-default-300 text-sm",children:"Generation Method"}),(0,mt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,mt.jsxs)("label",{className:"flex items-center gap-1 text-sm text-white",children:[(0,mt.jsx)("input",{type:"radio",name:"method",value:"random",checked:"random"===u,onChange:()=>k("random")})," Randomized"]}),(0,mt.jsxs)("label",{className:"flex items-center gap-1 text-sm text-white",children:[(0,mt.jsx)("input",{type:"radio",name:"method",value:"pointbuy",checked:"pointbuy"===u,onChange:()=>k("pointbuy")})," Point Buy"]})]})]}),"random"===u&&(0,mt.jsxs)("div",{className:"space-y-4",children:[(0,mt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mt.jsx)("div",{className:"text-website-default-300 text-sm",children:"Weighted random (average 8), assign to core abilities"}),(0,mt.jsxs)("button",{onClick:()=>{const e={...d};xl.forEach(t=>{e[t]=(()=>{const e=[{value:4,weight:1},{value:5,weight:2},{value:6,weight:4},{value:7,weight:8},{value:8,weight:16},{value:9,weight:8},{value:10,weight:4},{value:11,weight:2},{value:12,weight:1},{value:13,weight:.5},{value:14,weight:.25},{value:15,weight:.125},{value:16,weight:.0625},{value:17,weight:.03125},{value:18,weight:.015625},{value:19,weight:.0078125},{value:20,weight:.00390625}],t=e.reduce((e,t)=>e+t.weight,0);let n=Math.random()*t;for(const r of e)if(n-=r.weight,n<=0)return r.value;return 4})()}),f({stats:e})},className:"flex items-center gap-2 px-3 py-2 rounded border border-website-highlights-600 text-white hover:border-website-highlights-400",children:[(0,mt.jsx)(Oi,{size:16})," Roll"]})]}),(0,mt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:xl.map(e=>{var t;return(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("label",{className:"text-sm text-website-default-300 mb-1",children:yl[e]}),(0,mt.jsx)("input",{type:"number",min:"1",max:"30",className:"rounded border border-website-specials-500 bg-website-default-900 px-3 py-2 focus:outline-none",value:null!==(t=d[e])&&void 0!==t?t:"",onChange:t=>((e,t)=>{const n=""===t?"":Math.max(1,Math.min(30,parseInt(t,10)||0));f({stats:{...d,[e]:n}})})(e,t.target.value)})]},e)})})]}),"pointbuy"===u&&(0,mt.jsxs)("div",{className:"space-y-4",children:[(0,mt.jsxs)("div",{className:"flex items-center justify-between p-3 bg-website-default-900/50 border border-website-default-700 rounded",children:[(0,mt.jsx)("div",{className:"text-website-default-300 text-sm",children:"Point Pool"}),(0,mt.jsxs)("div",{className:"text-sm font-semibold "+(S<0?"text-website-specials-400":"text-white"),children:[S," / ",27]})]}),(0,mt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:xl.map(e=>(0,mt.jsx)(A,{code:e},e))}),(0,mt.jsx)("div",{className:"text-xs text-website-default-400",children:"Costs: 8=0, 9=1, 10=2, 11=3, 12=4, 13=5, 14=7, 15=9. Min 8, Max 15."})]}),(0,mt.jsxs)("div",{className:"mt-6",children:[(0,mt.jsx)("h4",{className:"text-website-default-100 font-semibold mb-2",children:"Base vs Modified"}),(0,mt.jsx)(C,{})]})]})]})]}),(0,mt.jsx)("div",{})]})}const Sl={str:"Strength",dex:"Dexterity",con:"Constitution",int:"Intelligence",wis:"Wisdom",cha:"Charisma"},Al=e=>Array.isArray(e)?[...new Set(e.map(e=>String(e).trim()).filter(Boolean))]:"string"===typeof e?[...new Set(e.split(/[\n,]/g).map(e=>e.trim()).filter(Boolean))]:[],Cl=e=>e?String(e).replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim():"";function El(e){var n,r,s,a,i,l,o,c,d,u,h,p,m,f,b,g,v,x,y,w,j,N,k;let{values:S,onSave:A,classes:C=[],subclasses:E=[],races:M=[],subraces:I=[],backgrounds:_=[]}=e;const L=S||{},[T,P]=(0,t.useState)(!1),[D,z]=(0,t.useState)(""),O=ne(),R=(0,t.useMemo)(()=>C.find(e=>e._id===L.class),[C,L.class]),F=(0,t.useMemo)(()=>E.find(e=>e._id===L.subclass),[E,L.subclass]),$=(0,t.useMemo)(()=>M.find(e=>e._id===L.race),[M,L.race]),B=(0,t.useMemo)(()=>I.find(e=>e._id===L.subrace),[I,L.subrace]),H=(0,t.useMemo)(()=>_.find(e=>e._id===L.background),[_,L.background]),U=(0,t.useMemo)(()=>Zi($),[$]),q=(0,t.useMemo)(()=>Zi(B),[B]),W=(0,t.useMemo)(()=>{var e;return Ji(null===L||void 0===L||null===(e=L.abilityScoreChoices)||void 0===e?void 0:e.race,U)},[null===L||void 0===L||null===(n=L.abilityScoreChoices)||void 0===n?void 0:n.race,U]),K=(0,t.useMemo)(()=>{var e;return Ji(null===L||void 0===L||null===(e=L.abilityScoreChoices)||void 0===e?void 0:e.subrace,q)},[null===L||void 0===L||null===(r=L.abilityScoreChoices)||void 0===r?void 0:r.subrace,q]),Y=L.stats||{},X=(0,t.useMemo)(()=>{const e=(null===$||void 0===$?void 0:$.abilityScoreModifiers)||{},t=(null===B||void 0===B?void 0:B.abilityScoreModifiers)||{},n=(null===R||void 0===R?void 0:R.baseStatModifier)||{},r={};return Object.keys(Sl).forEach(s=>{const a=parseInt(Y[s],10)||0,i=Vi(e,s)+Vi(t,s)+Vi(n,s)+Gi(W,s)+Gi(K,s);r[s]=a+i}),r},[Y,$,B,R,W,K]),V=(null===L||void 0===L||null===(s=L.skills)||void 0===s?void 0:s.proficiencies)||{},Q=Object.keys((null===L||void 0===L||null===(a=L.skills)||void 0===a?void 0:a.languages)||{}),G=Q.length>0?Q:null!==B&&void 0!==B&&null!==(i=B.languages)&&void 0!==i&&i.length?B.languages:(null===$||void 0===$?void 0:$.languages)||[],J=null!==(l=null===L||void 0===L||null===(o=L.inv)||void 0===o?void 0:o.gp)&&void 0!==l?l:0,Z=null!==L&&void 0!==L&&null!==(c=L.inv)&&void 0!==c&&c.items?Object.keys(L.inv.items).length:0,ee=(null===L||void 0===L?void 0:L.customization)||{},te=(null===L||void 0===L?void 0:L.stories)||{},re=Al(ee.additionalTraits),se=Al(te.personality),ae=Al(te.ideals),ie=Al(te.flaws),le=null!==L&&void 0!==L&&L._id?"Save Changes":"Save Character",oe=Object.values((null===L||void 0===L?void 0:L.classEquipmentChoices)||{}).map(e=>null===e||void 0===e?void 0:e.optionKey).filter(Boolean),ce=Object.values((null===L||void 0===L?void 0:L.backgroundEquipmentChoices)||{}).map(e=>null===e||void 0===e?void 0:e.optionKey).filter(Boolean),de=[{label:"Name",complete:Boolean(L.name)},{label:"Class",complete:Boolean(L.class)},{label:"Race",complete:Boolean(L.race)},{label:"Background",complete:Boolean(L.background)},{label:"Ability Scores",complete:Object.keys(Sl).every(e=>Number.isFinite(parseInt(Y[e],10)))}],ue=de.filter(e=>e.complete).length,he=Math.round(ue/de.length*100),pe=(e,t)=>{const n=String((null===ee||void 0===ee?void 0:ee[e])||"").trim(),r=String((null===ee||void 0===ee?void 0:ee[t])||"").trim();return n?"other"===n&&r?r:n:""},me={skin:pe("skinColor","skinColorCustom"),eyes:pe("eyeColor","eyeColorCustom"),hair:pe("hairColor","hairColorCustom")},fe=(e,t)=>(0,mt.jsxs)("div",{className:"space-y-2",children:[(0,mt.jsx)("div",{className:"text-website-default-300 text-xs uppercase tracking-wider",children:e}),(0,mt.jsxs)("div",{className:"flex flex-wrap gap-2",children:[0===t.length&&(0,mt.jsx)("span",{className:"text-website-default-400 text-xs",children:"None"}),t.map(t=>(0,mt.jsx)("span",{className:"px-2 py-1 bg-website-default-900 border border-website-default-700 rounded text-xs text-white",children:t},`${e}_${t}`))]})]}),be=e=>{let{code:t}=e;const n=parseInt(Y[t],10)||0,r=parseInt(X[t],10)||0,s=r-n;return(0,mt.jsxs)("div",{className:"flex items-center justify-between p-2 bg-website-default-900/50 border border-website-default-700 rounded",children:[(0,mt.jsx)("div",{className:"text-website-default-100 text-sm",children:Sl[t]}),(0,mt.jsxs)("div",{className:"text-sm",children:[(0,mt.jsx)("span",{className:"text-website-default-300",children:"Base:"})," ",(0,mt.jsx)("span",{className:"text-white font-semibold",children:n}),(0,mt.jsx)("span",{className:"mx-2 text-website-default-500",children:"->"}),(0,mt.jsx)("span",{className:"text-website-default-300",children:"Final:"})," ",(0,mt.jsx)("span",{className:"text-white font-semibold",children:r}),0!==s&&(0,mt.jsx)("span",{className:"ml-2 text-xs "+(s>0?"text-website-highlights-400":"text-website-specials-400"),children:s>0?`+${s}`:`${s}`})]})]})};return(0,mt.jsxs)("div",{className:"bg-website-default-900 min-h-screen grid grid-cols-1 md:grid-cols-[1fr_2fr_1fr]",children:[(0,mt.jsxs)("div",{className:"p-4 space-y-4 md:col-start-2",children:[(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Character Summary"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Review your character before saving."})]}),(0,mt.jsxs)(Bi.Content,{className:"space-y-6",children:[(0,mt.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,mt.jsxs)("div",{children:[(0,mt.jsx)("div",{className:"text-website-default-300 text-sm",children:"Name"}),(0,mt.jsx)("div",{className:"text-white font-semibold text-lg",children:L.name||"-"})]}),(0,mt.jsxs)("div",{className:"text-right",children:[(0,mt.jsx)("div",{className:"text-website-default-300 text-sm",children:"Level"}),(0,mt.jsx)("div",{className:"text-white font-semibold text-lg",children:null!==(d=L.level)&&void 0!==d?d:1})]})]}),(0,mt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,mt.jsxs)("div",{className:"p-3 bg-website-default-900/50 border border-website-default-700 rounded",children:[(0,mt.jsx)("div",{className:"text-website-default-300 text-xs",children:"Race"}),(0,mt.jsx)("div",{className:"text-white font-semibold",children:(null===$||void 0===$?void 0:$.name)||"-"}),(null===$||void 0===$?void 0:$.description)&&(0,mt.jsx)("div",{className:"text-website-default-400 text-xs mt-1",children:$.description})]}),(0,mt.jsxs)("div",{className:"p-3 bg-website-default-900/50 border border-website-default-700 rounded",children:[(0,mt.jsx)("div",{className:"text-website-default-300 text-xs",children:"Subrace"}),(0,mt.jsx)("div",{className:"text-white font-semibold",children:(null===B||void 0===B?void 0:B.name)||"-"}),(null===B||void 0===B?void 0:B.description)&&(0,mt.jsx)("div",{className:"text-website-default-400 text-xs mt-1",children:B.description})]}),(0,mt.jsxs)("div",{className:"p-3 bg-website-default-900/50 border border-website-default-700 rounded",children:[(0,mt.jsx)("div",{className:"text-website-default-300 text-xs",children:"Class"}),(0,mt.jsx)("div",{className:"text-white font-semibold",children:(null===R||void 0===R?void 0:R.name)||"-"}),(null===R||void 0===R?void 0:R.description)&&(0,mt.jsx)("div",{className:"text-website-default-400 text-xs mt-1",children:R.description})]}),(0,mt.jsxs)("div",{className:"p-3 bg-website-default-900/50 border border-website-default-700 rounded",children:[(0,mt.jsx)("div",{className:"text-website-default-300 text-xs",children:"Subclass"}),(0,mt.jsx)("div",{className:"text-white font-semibold",children:(null===F||void 0===F?void 0:F.name)||"-"}),(null===F||void 0===F?void 0:F.description)&&(0,mt.jsx)("div",{className:"text-website-default-400 text-xs mt-1",children:F.description})]}),(0,mt.jsxs)("div",{className:"p-3 bg-website-default-900/50 border border-website-default-700 rounded md:col-span-2",children:[(0,mt.jsx)("div",{className:"text-website-default-300 text-xs",children:"Background"}),(0,mt.jsx)("div",{className:"text-white font-semibold",children:(null===H||void 0===H?void 0:H.name)||"-"}),(null===H||void 0===H?void 0:H.description)&&(0,mt.jsx)("div",{className:"text-website-default-400 text-xs mt-1",children:H.description})]})]})]})]}),(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Creation Readiness"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Quick completion check before save."})]}),(0,mt.jsxs)(Bi.Content,{className:"space-y-4",children:[(0,mt.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,mt.jsx)("span",{className:"text-website-default-300",children:"Completion"}),(0,mt.jsxs)("span",{className:"text-white font-semibold",children:[he,"%"]})]}),(0,mt.jsx)("div",{className:"h-2 rounded bg-website-default-900 overflow-hidden",children:(0,mt.jsx)("div",{className:"h-full bg-website-highlights-500 transition-all duration-300",style:{width:`${he}%`}})}),(0,mt.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:de.map(e=>(0,mt.jsxs)("div",{className:"flex items-center justify-between rounded border border-website-default-700 bg-website-default-900/50 px-3 py-2 text-xs",children:[(0,mt.jsx)("span",{className:"text-website-default-200",children:e.label}),(0,mt.jsx)("span",{className:e.complete?"text-website-highlights-400":"text-website-specials-400",children:e.complete?"Ready":"Missing"})]},e.label))}),(0,mt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs text-website-default-300",children:[(0,mt.jsxs)("div",{className:"rounded border border-website-default-700 bg-website-default-900/50 px-3 py-2",children:["Class Equipment Choices: ",oe.length>0?oe.join(", "):"None"]}),(0,mt.jsxs)("div",{className:"rounded border border-website-default-700 bg-website-default-900/50 px-3 py-2",children:["Background Equipment Choices: ",ce.length>0?ce.join(", "):"None"]})]})]})]}),(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Appearance & Persona"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Color choices and story tags."})]}),(0,mt.jsxs)(Bi.Content,{className:"space-y-4",children:[(0,mt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,mt.jsxs)("div",{className:"p-3 bg-website-default-900/50 border border-website-default-700 rounded",children:[(0,mt.jsx)("div",{className:"text-website-default-300 text-xs",children:"Gender"}),(0,mt.jsx)("div",{className:"text-white text-sm font-semibold",children:(null===L||void 0===L?void 0:L.gender)||"-"})]}),(0,mt.jsxs)("div",{className:"p-3 bg-website-default-900/50 border border-website-default-700 rounded",children:[(0,mt.jsx)("div",{className:"text-website-default-300 text-xs",children:"Alignment"}),(0,mt.jsx)("div",{className:"text-white text-sm font-semibold",children:(null===L||void 0===L?void 0:L.alignment)||"-"})]}),(0,mt.jsxs)("div",{className:"p-3 bg-website-default-900/50 border border-website-default-700 rounded",children:[(0,mt.jsx)("div",{className:"text-website-default-300 text-xs",children:"Age"}),(0,mt.jsx)("div",{className:"text-white text-sm font-semibold",children:(null===L||void 0===L||null===(u=L.age)||void 0===u?void 0:u.years)||"-"})]}),(0,mt.jsxs)("div",{className:"p-3 bg-website-default-900/50 border border-website-default-700 rounded",children:[(0,mt.jsx)("div",{className:"text-website-default-300 text-xs",children:"Size"}),(0,mt.jsx)("div",{className:"text-white text-sm font-semibold",children:Cl(null===L||void 0===L||null===(h=L.model)||void 0===h?void 0:h.size)||"-"})]})]}),(0,mt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:Object.entries(me).map(e=>{let[t,n]=e;const r=/^#[0-9a-fA-F]{6}$/.test(n||""),s=t.charAt(0).toUpperCase()+t.slice(1);return(0,mt.jsxs)("div",{className:"p-3 bg-website-default-900/50 border border-website-default-700 rounded",children:[(0,mt.jsxs)("div",{className:"text-website-default-300 text-xs",children:[s," Color"]}),(0,mt.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[n&&(0,mt.jsx)("span",{className:"inline-block h-3 w-3 rounded-full border border-website-default-500",style:r?{backgroundColor:n}:void 0}),(0,mt.jsx)("span",{className:"text-white text-sm font-semibold",children:n?r?n:Cl(n):"-"})]})]},t)})}),(0,mt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[fe("Additional Traits",re),fe("Personality",se),fe("Ideals",ae),fe("Flaws",ie)]})]})]}),(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Ability Scores"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Base vs final (after class, race, and subrace bonuses)."})]}),(0,mt.jsx)(Bi.Content,{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.keys(Sl).map(e=>(0,mt.jsx)(be,{code:e},e))})]}),(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Skills & Proficiencies"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Selected and granted proficiencies."})]}),(0,mt.jsx)(Bi.Content,{children:(0,mt.jsxs)("div",{className:"flex flex-wrap gap-2",children:[0===Object.keys(V).length&&(0,mt.jsx)("span",{className:"text-website-default-400 text-sm",children:"None"}),Object.entries(V).map(e=>{let[t,n]=e;return(0,mt.jsxs)("span",{className:"px-2 py-1 bg-website-default-900 border border-website-default-700 rounded text-sm text-white",children:[Cl(t),"string"===typeof n?` (${n})`:""]},t)})]})})]}),(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Languages"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Languages from race/subrace."})]}),(0,mt.jsx)(Bi.Content,{children:(0,mt.jsxs)("div",{className:"flex flex-wrap gap-2",children:[0===(G||[]).length&&(0,mt.jsx)("span",{className:"text-website-default-400 text-sm",children:"None"}),(G||[]).map(e=>(0,mt.jsx)("span",{className:"px-2 py-1 bg-website-default-900 border border-website-default-700 rounded text-sm text-white",children:Cl(e)},e))]})})]}),(0,mt.jsxs)(Bi,{className:"bg-website-default-800 border-website-specials-500",children:[(0,mt.jsxs)(Bi.Header,{children:[(0,mt.jsx)(Bi.Title,{className:"text-website-default-100",children:"Inventory & Resources"}),(0,mt.jsx)(Bi.Description,{className:"text-website-default-300",children:"Currency and quick inventory count."})]}),(0,mt.jsx)(Bi.Content,{children:(0,mt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,mt.jsxs)("div",{className:"p-3 bg-website-default-900/50 border border-website-default-700 rounded",children:[(0,mt.jsx)("div",{className:"text-website-default-300 text-xs",children:"Gold"}),(0,mt.jsx)("div",{className:"text-white font-semibold",children:J})]}),(0,mt.jsxs)("div",{className:"p-3 bg-website-default-900/50 border border-website-default-700 rounded",children:[(0,mt.jsx)("div",{className:"text-website-default-300 text-xs",children:"Item Count"}),(0,mt.jsx)("div",{className:"text-white font-semibold",children:Z})]}),(0,mt.jsxs)("div",{className:"p-3 bg-website-default-900/50 border border-website-default-700 rounded",children:[(0,mt.jsx)("div",{className:"text-website-default-300 text-xs",children:"Resources"}),(0,mt.jsxs)("div",{className:"text-white text-sm",children:["HP ",null!==(p=null===(m=L.HP)||void 0===m?void 0:m.current)&&void 0!==p?p:0,"/",null!==(f=null===(b=L.HP)||void 0===b?void 0:b.max)&&void 0!==f?f:0," |"," ","STA ",null!==(g=null===(v=L.STA)||void 0===v?void 0:v.current)&&void 0!==g?g:0,"/",null!==(x=null===(y=L.STA)||void 0===y?void 0:y.max)&&void 0!==x?x:0," |"," ","MP ",null!==(w=null===(j=L.MP)||void 0===j?void 0:j.current)&&void 0!==w?w:0,"/",null!==(N=null===(k=L.MP)||void 0===k?void 0:k.max)&&void 0!==N?N:0]})]})]})})]}),(0,mt.jsxs)("div",{className:"flex justify-end",children:[D&&(0,mt.jsx)("div",{className:"mr-4 text-sm text-red-400 self-center",children:D}),(0,mt.jsx)("button",{className:"px-4 py-2 bg-website-specials-500 text-white rounded hover:bg-website-specials-600 disabled:opacity-60 disabled:cursor-not-allowed",onClick:async()=>{if(!T){P(!0),z("");try{const e="function"===typeof A?await A():{success:!1,message:"Save handler unavailable"};if(null===e||void 0===e||!e.success)return void z((null===e||void 0===e?void 0:e.message)||"Failed to save character");O(`/ISK/${sessionStorage.getItem("session_ID")}/character`)}catch(e){z((null===e||void 0===e?void 0:e.message)||"Failed to save character")}finally{P(!1)}}},disabled:T,children:T?"Saving...":le})]})]}),(0,mt.jsx)("div",{})]})}const Ml=["str","dex","con","int","wis","cha","luck"],Il=e=>{if(!e)return"";if("string"===typeof e)return e;if("number"===typeof e)return String(e);if("object"===typeof e){var t;if(e.$oid)return String(e.$oid);if(null!==(t=e._id)&&void 0!==t&&t.$oid)return String(e._id.$oid);if(e._id)return String(e._id);if(e.id)return String(e.id)}return String(e)},_l=e=>!e||"object"!==typeof e||Array.isArray(e)?{}:e instanceof Map?Object.fromEntries(e.entries()):e,Ll=e=>{const t=_l(e),n={},r=["armor","weapons","tools","abilityScore","skills"];return r.some(e=>Array.isArray(t[e]))?(r.forEach(e=>{(t[e]||[]).forEach(e=>{const t=String(e||"").trim();t&&(n[t]="proficient")})}),n):(Object.entries(t).forEach(e=>{let[t,r]=e;const s=String(t||"").trim();s&&!1!==r&&null!==r&&void 0!==r&&""!==r&&(n[s]="proficient")}),n)},Tl=e=>{if(Array.isArray(e))return e.reduce((e,t)=>{const n=String(t||"").trim();return n?(e[n]="proficient",e):e},{});const t=_l(e);return Object.entries(t).reduce((e,t)=>{let[n,r]=t;const s=String(n||"").trim();return s?(e[s]=String(r||"proficient"),e):e},{})},Pl=e=>{const t=_l(e);return Object.entries(t).reduce((e,t)=>{let[n,r]=t;const s=String(n||"").trim(),a=Number(r);return!s||!Number.isFinite(a)||a<=0||(e[s]=a),e},{})},Dl=e=>{const t=_l(e),n={};return Object.entries(t).forEach(e=>{let[t,r]=e;const s=_l(r),a=Il(s.ItemID||s.itemID||s.itemId);a&&(n[t]={equipped:Boolean(s.equipped),ItemID:a})}),n},zl=e=>{const t=_l(e);return Object.entries(t).reduce((e,t)=>{let[n,r]=t;return Array.isArray(r)?(e[n]=(e=>Array.isArray(e)?e.map(e=>Il(e)).filter(Boolean):[])(r),e):e},{})},Ol=function(){var e,t,n,r,s,a,i,l,o,c,d,u,h,p,m,f,b;const g=_l(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),v=Mi(),x=_l(g.stats),y={};Ml.forEach(e=>{y[e]=((e,t,n)=>{const r=_l(e),s=null===r||void 0===r?void 0:r[t];if(void 0!==s&&null!==s&&""!==s){const e=Number.parseInt(s,10);return Number.isFinite(e)?e:""}const a=null===r||void 0===r?void 0:r[n];if(a&&"object"===typeof a){var i,l,o;const e=Number.parseInt(null!==(i=null!==(l=null===a||void 0===a||null===(o=a.permMods)||void 0===o?void 0:o.base)&&void 0!==l?l:null===a||void 0===a?void 0:a.total)&&void 0!==i?i:null===a||void 0===a?void 0:a.score,10);return Number.isFinite(e)?e:""}const c=Number.parseInt(a,10);return Number.isFinite(c)?c:""})(x,e,e.toUpperCase())});const w=_l(g.inv),j=_l(g.skills),N=_l(g.abilityScoreChoices);return{...v,_id:Il(g._id||g.id),name:String(g.name||""),age:{years:null!==(e=null===g||void 0===g||null===(t=g.age)||void 0===t?void 0:t.years)&&void 0!==e?e:"",month:null!==(n=null===g||void 0===g||null===(r=g.age)||void 0===r?void 0:r.month)&&void 0!==n?n:"",day:null!==(s=null===g||void 0===g||null===(a=g.age)||void 0===a?void 0:a.day)&&void 0!==s?s:""},gender:String(g.gender||""),model:{size:null!==(i=null===g||void 0===g||null===(l=g.model)||void 0===l?void 0:l.size)&&void 0!==i?i:"",height:null!==(o=null===g||void 0===g||null===(c=g.model)||void 0===c?void 0:c.height)&&void 0!==o?o:"",weight:null!==(d=null===g||void 0===g||null===(u=g.model)||void 0===u?void 0:u.weight)&&void 0!==d?d:""},alignment:String(g.alignment||""),customization:{...v.customization,..._l(g.customization),additionalTraits:Array.isArray(null===g||void 0===g||null===(h=g.customization)||void 0===h?void 0:h.additionalTraits)?g.customization.additionalTraits:[]},stories:{...v.stories,..._l(g.stories),personality:Array.isArray(null===g||void 0===g||null===(p=g.stories)||void 0===p?void 0:p.personality)?g.stories.personality:[],ideals:Array.isArray(null===g||void 0===g||null===(m=g.stories)||void 0===m?void 0:m.ideals)?g.stories.ideals:[],flaws:Array.isArray(null===g||void 0===g||null===(f=g.stories)||void 0===f?void 0:f.flaws)?g.stories.flaws:[],relationships:_l(null===g||void 0===g||null===(b=g.stories)||void 0===b?void 0:b.relationships)},race:Il(g.race),class:Il(g.class),subclass:Il(g.subclass),subrace:Il(g.subrace),background:Il(g.background),level:Number.parseInt(g.level,10)||1,stats:y,abilityScoreChoices:{race:Pl(N.race),subrace:Pl(N.subrace)},inv:{...v.inv,gp:Number(w.gp)||0,items:Dl(w.items),equipment:{...v.inv.equipment,...zl(w.equipment)}},HP:_l(g.HP),MP:_l(g.MP),STA:_l(g.STA),skills:{active:_l(j.active),passive:_l(j.passive),proficiencies:Ll(j.proficiencies),languages:Tl(j.languages)},effects:Array.isArray(g.effects)?g.effects:[],actions:Array.isArray(g.actions)?g.actions:[]}};function Rl(){const e=(0,t.useContext)(Sr),{characterID:n}=se(),r=Boolean(n),s=localStorage.getItem("player_ID"),[a,i]=(0,t.useState)(()=>Mi()),[l,o]=(0,t.useState)(()=>r),[c,d]=(0,t.useState)(""),[u,h]=(0,t.useState)({classes:[],subclasses:[],races:[],subraces:[],backgrounds:[],items:[]});(0,t.useEffect)(()=>{if(!e)return;const t=["classes","subclasses","races","subraces","backgrounds","items"],n={};let r=0;console.log("Starting data load..."),t.forEach(s=>{e.emit("database_query",{collection:s,operation:"findAll"},e=>{const a=!(null===e||void 0===e||!e.success);console.log(`Loaded ${s}:`,a?`${e.data.length} items`:null===e||void 0===e?void 0:e.message),a?n[s]=e.data||[]:(n[s]=[],console.error(`Failed to load ${s}:`,null===e||void 0===e?void 0:e.message)),r+=1,console.log(`Progress: ${r}/${t.length}`),r===t.length&&(console.log("All data requests completed, updating state"),h({classes:n.classes||[],subclasses:n.subclasses||[],races:n.races||[],subraces:n.subraces||[],backgrounds:n.backgrounds||[],items:n.items||[]}))})})},[e]);const p=(e,t)=>{if(!t||"object"!==typeof t)return e;const n=Array.isArray(e)?[...e]:{...e};for(const[r,s]of Object.entries(t))"proficiencies"===r?n[r]=s:s&&"object"===typeof s&&!Array.isArray(s)?n[r]=p(n[r]||{},s):n[r]=s;return n},m=(e,t)=>Object.prototype.hasOwnProperty.call(e||{},t),f=[["skills"],["abilityScoreChoices"],["proficiencyChoices"],["classEquipmentChoices"],["classAnyItemSelections"],["backgroundEquipmentChoices"],["backgroundAnyItemSelections"],["inv","items"],["inv","equipment"]],b=t.useCallback(e=>{i(t=>{const n=p(t,e);return f.forEach(t=>{((e,t)=>{let n=e;for(const r of t){if(!m(n,r))return!1;n=n[r]}return!0})(e,t)&&((e,t,n)=>{if(!t.length)return;let r=e;for(let s=0;s<t.length-1;s+=1){const e=t[s];r[e]&&"object"===typeof r[e]||(r[e]={}),r=r[e]}r[t[t.length-1]]=n})(n,t,((e,t)=>t.reduce((e,t)=>null==e?void 0:e[t],e))(e,t))}),n})},[]);(0,t.useEffect)(()=>{if(!r)return o(!1),void d("");if(!e)return;if(!s)return d("Missing player ID"),void o(!1);let t=!1;return o(!0),d(""),e.emit("character_getViewData",{playerID:s,characterID:n,contextKey:"base"},e=>{if(t)return;if(null===e||void 0===e||!e.success)return d((null===e||void 0===e?void 0:e.message)||"Failed to load character for editing"),void o(!1);const n=Ol(e.rawCharacter||{});i(n),d(""),o(!1)}),()=>{t=!0}},[e,s,n,r]);return r&&l?(0,mt.jsx)(Ci,{children:(0,mt.jsx)("div",{className:"bg-website-default-900 text-website-default-100 p-8 text-center",children:"Loading character data..."})}):r&&c?(0,mt.jsx)(Ci,{children:(0,mt.jsxs)("div",{className:"bg-website-default-900 text-red-400 p-8 text-center",children:["Error: ",c]})}):(0,mt.jsx)(Ci,{children:(0,mt.jsx)("div",{className:"bg-website-default-900 text-center p-4 shadow-lg text-website-default-100 flex flex-row items-center justify-center space-x-8",children:(0,mt.jsx)(_i,{gameData:u,children:(0,mt.jsxs)(Kr,{defaultTab:0,children:[(0,mt.jsx)(Kr.Prev,{className:"fixed left-20 top-1/2 -translate-y-1/2 z-50",children:(0,mt.jsx)(Ti,{})}),(0,mt.jsx)(Kr.Next,{max:5,className:"fixed right-20 top-1/2 -translate-y-1/2 z-50",children:(0,mt.jsx)(Pi,{})}),(0,mt.jsxs)(Kr.Nav,{className:"flex flex-row justify-center items-center",children:[(0,mt.jsx)(Kr.Tab,{index:0,children:"Customization"}),(0,mt.jsx)(Kr.Tab,{index:1,children:"Class"}),(0,mt.jsx)(Kr.Tab,{index:2,children:"Background"}),(0,mt.jsx)(Kr.Tab,{index:3,children:"Race"}),(0,mt.jsx)(Kr.Tab,{index:4,children:"Ability Score"}),(0,mt.jsx)(Kr.Tab,{index:5,children:"Summary"})]}),(0,mt.jsxs)(Kr.Panels,{children:[(0,mt.jsx)(Kr.Panel,{index:0,children:(0,mt.jsx)(Wi,{values:a,onChange:b})}),(0,mt.jsx)(Kr.Panel,{index:1,children:(0,mt.jsx)(gl,{values:a,onChange:b,classes:u.classes,subclasses:u.subclasses})}),(0,mt.jsx)(Kr.Panel,{index:2,children:(0,mt.jsx)(vl,{values:a,onChange:b,backgrounds:u.backgrounds,items:u.items,classes:u.classes})}),(0,mt.jsx)(Kr.Panel,{index:3,children:(0,mt.jsx)(rl,{values:a,onChange:b})}),(0,mt.jsx)(Kr.Panel,{index:4,children:(0,mt.jsx)(kl,{values:a,onChange:b})}),(0,mt.jsx)(Kr.Panel,{index:5,children:(0,mt.jsx)(El,{values:a,onChange:b,onSave:()=>{var t,n,r,i,l,o,c,d,h,p,m,f;const b=(e,t)=>(e||[]).find(e=>e&&e._id===t),g=parseInt(a.level,10)||1,v=b(u.classes,a.class),x=b(u.races,a.race),y=b(u.subraces,a.subrace),w=a.stats||{},j=v&&v.baseStatModifier||{},N=x&&x.abilityScoreModifiers||{},k=y&&y.abilityScoreModifiers||{},S=Zi(x),A=Zi(y),C=Ji(null===a||void 0===a||null===(t=a.abilityScoreChoices)||void 0===t?void 0:t.race,S),E=Ji(null===a||void 0===a||null===(n=a.abilityScoreChoices)||void 0===n?void 0:n.subrace,A),M=["str","dex","con","int","wis","cha"],I={},_={};for(const e of M){const t=parseInt(w[e],10)||0,n=Gi(C,e)+Gi(E,e);_[e]=t+n,I[e]=_[e]+Vi(j,e)+Vi(N,e)+Vi(k,e)}Object.keys(w||{}).forEach(e=>{if(!M.includes(e)){const t=parseInt(w[e],10)||0;I[e]=t,_[e]=t}});const L=v&&(v.resourceBase||v.resourcePoolModifier)||{HP:0,MP:0,STA:0},T=v&&v.resourceLevelUp||{HP:0,MP:0,STA:0},P=I.dex||0,D=I.wis||0,z=I.con||0,O=Math.floor(2*P*(1+(L.STA||0)+g/2*(T.STA||0))),R=Math.floor(D*(1+(L.MP||0)+g/2*(T.MP||0))),F=Math.floor(z*(1+(L.HP||0)+g/2*(T.HP||0))),$=[...Array.isArray(null===x||void 0===x?void 0:x.languages)?x.languages:[],...Array.isArray(null===y||void 0===y?void 0:y.languages)?y.languages:[]],B={...(null===(r=a.skills)||void 0===r?void 0:r.languages)||{}};$.forEach(e=>{B[e]||(B[e]="native")});const H={...a,abilityScoreChoices:{...a.abilityScoreChoices||{},race:C,subrace:E},stats:_,abilityScoreChoicesAppliedToBase:!0,HP:{...a.HP||{},max:F,current:Math.max(0,Math.min(null!==(i=null===(l=a.HP)||void 0===l?void 0:l.current)&&void 0!==i?i:F,F))},MP:{...a.MP||{},max:R,current:Math.max(0,Math.min(null!==(o=null===(c=a.MP)||void 0===c?void 0:c.current)&&void 0!==o?o:R,R))},STA:{...a.STA||{},max:O,current:Math.max(0,Math.min(null!==(d=null===(h=a.STA)||void 0===h?void 0:h.current)&&void 0!==d?d:O,O))},skills:{active:(null===(p=a.skills)||void 0===p?void 0:p.active)||{},passive:(null===(m=a.skills)||void 0===m?void 0:m.passive)||{},proficiencies:(null===(f=a.skills)||void 0===f?void 0:f.proficiencies)||{},languages:B}};return e?s?new Promise(t=>{console.log({character:H,playerID:s}),e.emit("playerData_saveCharacter",{character:H,playerID:s},e=>{if(!e){const e={success:!1,message:"No server response"};return console.error(e.message),void t(e)}e.success?console.log("Character save success"):console.error("Character save failed:",e.message),t(e)})}):Promise.resolve({success:!1,message:"Missing player ID"}):Promise.resolve({success:!1,message:"Socket unavailable"})},classes:u.classes,subclasses:u.subclasses,races:u.races,subraces:u.subraces,backgrounds:u.backgrounds})})]})]})})})})}function Fl(e){let{equipment:n,gp:r}=e;const[s,a]=(0,t.useState)("armor"),[i,l]=(0,t.useState)(null),o=e=>{let{slotKey:t,label:r}=e;const s=(null===n||void 0===n?void 0:n[t])||[],a=s.length>0,o=i===t;return(0,mt.jsxs)("div",{className:"flex flex-col items-center relative",children:[(0,mt.jsx)("button",{onClick:()=>l(o?null:t),className:"w-14 h-14 rounded-lg border-2 flex flex-col items-center justify-center transition-all relative\n            "+(a?"bg-red-900/30 border-red-600 shadow-[0_0_10px_rgba(220,38,38,0.3)]":"bg-black/40 border-white/10 hover:border-white/30"),children:a?(0,mt.jsxs)(mt.Fragment,{children:[(0,mt.jsx)("span",{className:"text-[9px] text-white font-black truncate px-1 w-full leading-tight",children:s[0].name}),s.length>1&&(0,mt.jsxs)("div",{className:"absolute -top-1 -right-1 bg-red-600 text-[8px] font-bold px-1 rounded-sm border border-white/20",children:["+",s.length-1]})]}):(0,mt.jsx)("span",{className:"text-[8px] text-gray-700 font-black uppercase tracking-tighter",children:"Empty"})}),(0,mt.jsx)("span",{className:"text-[9px] mt-1 text-gray-500 font-bold uppercase tracking-tighter",children:r}),o&&(0,mt.jsxs)("div",{className:"absolute top-16 z-50 bg-[#1a1a1a] border border-red-900 rounded-md shadow-2xl p-2 min-w-[120px] max-h-[200px] overflow-y-auto ring-4 ring-black/50",children:[(0,mt.jsxs)("div",{className:"text-[8px] text-red-500 font-black uppercase mb-2 border-b border-red-900/30",children:["Equipped ",r]}),a?(0,mt.jsx)("div",{className:"space-y-1",children:s.map((e,t)=>(0,mt.jsx)("div",{className:"text-[10px] text-gray-200 bg-black/40 p-1.5 rounded border border-white/5 hover:bg-red-950/30 transition-colors",children:e.name||"Unknown Item"},t))}):(0,mt.jsxs)("div",{className:"text-[10px] text-gray-600 italic",children:["No ",r," equipped."]}),(0,mt.jsx)("button",{onClick:()=>l(null),className:"w-full mt-2 text-[8px] text-gray-500 hover:text-white uppercase font-bold py-1 border-t border-white/5",children:"Close"})]})]})};return(0,mt.jsxs)("div",{className:"bg-website-default-800/90 p-4 rounded-xl border border-white/10 shadow-2xl backdrop-blur-md",children:[(0,mt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,mt.jsx)("h3",{className:"text-xs font-black text-red-600 uppercase italic tracking-widest underline decoration-red-900/50 underline-offset-4",children:"Equipment"}),(0,mt.jsx)("div",{className:"flex gap-3",children:(0,mt.jsx)("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-black/60 rounded-full border border-amber-900/50",children:(0,mt.jsxs)("span",{className:"text-amber-500 text-xs font-bold tracking-tighter",children:[r||0," GP"]})})})]}),(0,mt.jsx)("div",{className:"grid grid-cols-3 gap-1 mb-8 bg-black/60 p-1 rounded-lg border border-white/5",children:Object.keys({armor:[{key:"head",label:"Head"},{key:"body",label:"Chest"},{key:"back",label:"Back"},{key:"arms",label:"Arms"},{key:"hands",label:"Hands"},{key:"legs",label:"Legs"},{key:"feet",label:"Feet"}],weapons:[{key:"weapon",label:"Main Hand"},{key:"fists",label:"Off-Hand"}],accessories:[{key:"neck",label:"Neck"},{key:"waist",label:"Waist"},{key:"fingers",label:"Rings"},{key:"trinkets",label:"Trinkets"},{key:"face",label:"Face"},{key:"eyes",label:"Eyes"}]}).map(e=>(0,mt.jsx)("button",{onClick:()=>{a(e),l(null)},className:"py-1.5 text-[10px] font-black uppercase tracking-widest transition-all rounded-md\n              "+(s===e?"bg-red-900 text-white shadow-lg":"text-gray-500 hover:text-gray-300"),children:e},e))}),(0,mt.jsxs)("div",{className:"min-h-[380px] flex items-center justify-center",children:["armor"===s&&(0,mt.jsxs)("div",{className:"grid grid-cols-3 gap-y-6 gap-x-12 place-items-center",children:[(0,mt.jsx)("div",{className:"col-start-2",children:(0,mt.jsx)(o,{slotKey:"head",label:"Head"})}),(0,mt.jsx)("div",{className:"col-start-1 row-start-2",children:(0,mt.jsx)(o,{slotKey:"back",label:"Back"})}),(0,mt.jsx)("div",{className:"col-start-2 row-start-2",children:(0,mt.jsx)(o,{slotKey:"body",label:"Chest"})}),(0,mt.jsx)("div",{className:"col-start-3 row-start-2",children:(0,mt.jsx)(o,{slotKey:"arms",label:"Arms"})}),(0,mt.jsx)("div",{className:"col-start-1 row-start-3",children:(0,mt.jsx)(o,{slotKey:"hands",label:"Hands"})}),(0,mt.jsx)("div",{className:"col-start-2 row-start-3",children:(0,mt.jsx)(o,{slotKey:"legs",label:"Legs"})}),(0,mt.jsx)("div",{className:"col-start-3 row-start-3",children:(0,mt.jsx)(o,{slotKey:"feet",label:"Feet"})})]}),"weapons"===s&&(0,mt.jsxs)("div",{className:"flex gap-12",children:[(0,mt.jsx)(o,{slotKey:"weapon",label:"Main Hand"}),(0,mt.jsx)(o,{slotKey:"fists",label:"Off-Hand"})]}),"accessories"===s&&(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-y-8 gap-x-16",children:[(0,mt.jsx)(o,{slotKey:"neck",label:"Necklace"}),(0,mt.jsx)(o,{slotKey:"waist",label:"Belt"}),(0,mt.jsx)(o,{slotKey:"fingers",label:"Rings"}),(0,mt.jsx)(o,{slotKey:"trinkets",label:"Trinkets"}),(0,mt.jsx)(o,{slotKey:"face",label:"Face"}),(0,mt.jsx)(o,{slotKey:"eyes",label:"Eyes"})]})]})]})}function $l(e){var n,r,s;let{inventory:a,characterWeight:i=0}=e;const l=(0,t.useContext)(Sr),[o,c]=(0,t.useState)(""),[d,u]=(0,t.useState)("All"),[h,p]=(0,t.useState)([]),[m,f]=(0,t.useState)(null);(0,t.useEffect)(()=>{l&&l.emit("database_query",{collection:"items",operation:"findAll"},e=>{e.success&&p(e.data)})},[l]);const b=(0,t.useMemo)(()=>{var e;const t=(null===a||void 0===a||null===(e=a.inv)||void 0===e?void 0:e.items)||(null===a||void 0===a?void 0:a.items)||{};return Object.keys(t).map(e=>{var n,r,s,a,i;const l=t[e],o=((null===(n=l.ItemID)||void 0===n?void 0:n.$oid)||l.ItemID||"").toString(),c=h.find(e=>{var t;return((null===(t=e._id)||void 0===t?void 0:t.$oid)||e._id||"").toString()===o||e.itemId===o});return{instanceId:((null===(r=l._id)||void 0===r?void 0:r.$oid)||l._id||e).toString(),equipped:l.equipped,name:(null===c||void 0===c?void 0:c.name)||"Unknown Item",description:(null===c||void 0===c?void 0:c.description)||"No description provided.",type:(null===c||void 0===c||null===(s=c.properties)||void 0===s?void 0:s.type)||(null===c||void 0===c||null===(a=c.attributes)||void 0===a?void 0:a[0])||"Misc",weight:(null===c||void 0===c?void 0:c.weight)||0,rarity:(null===c||void 0===c?void 0:c.rarity)||"common",properties:(null===c||void 0===c?void 0:c.properties)||{},icon:"Weapon"===(null===c||void 0===c||null===(i=c.properties)||void 0===i?void 0:i.type)?"\u2694\ufe0f":"\ud83d\udce6"}})},[a,h]),g=b.filter(e=>{const t=e.name.toLowerCase().includes(o.toLowerCase()),n="All"===d||"Weapons"===d&&"weapon"===e.type.toLowerCase()||"Misc"===d&&"weapon"!==e.type.toLowerCase();return t&&n});return(0,mt.jsxs)("div",{className:"relative bg-website-default-800/90 border border-white/10 rounded-xl overflow-hidden shadow-2xl backdrop-blur-md flex flex-col h-[500px]",children:[(0,mt.jsxs)("div",{className:"p-4 bg-black/40 border-b border-white/5 space-y-3",children:[(0,mt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,mt.jsx)("h3",{className:"text-xs font-black text-red-600 uppercase italic tracking-widest",children:"Carried Items"}),(0,mt.jsxs)("span",{className:"text-[10px] text-gray-500 font-bold",children:["Slots: ",b.length]})]}),(0,mt.jsx)("input",{type:"text",placeholder:"Search...",className:"w-full bg-black/60 border border-white/10 rounded px-3 py-1.5 text-xs text-white outline-none focus:border-red-500/50",onChange:e=>c(e.target.value)})]}),(0,mt.jsx)("div",{className:"flex border-b border-white/5 bg-black/20",children:["All","Weapons","Misc"].map(e=>(0,mt.jsx)("button",{onClick:()=>u(e),className:"px-4 py-2 text-[9px] font-black uppercase transition-colors "+(d===e?"text-red-500 border-b-2 border-red-600":"text-gray-500 hover:text-gray-300"),children:e},e))}),(0,mt.jsx)("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:g.map(e=>(0,mt.jsxs)("div",{onClick:()=>f(e),className:"flex items-center justify-between p-2 bg-black/20 border border-white/5 rounded cursor-pointer hover:bg-white/5 transition-all group",children:[(0,mt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,mt.jsx)("div",{className:"w-8 h-8 bg-black/40 border border-white/10 rounded flex items-center justify-center group-hover:border-red-500/50",children:e.icon}),(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("span",{className:"text-xs font-bold text-gray-200",children:e.name}),(0,mt.jsx)("span",{className:"text-[9px] text-gray-500 uppercase",children:e.type})]})]}),(0,mt.jsxs)("div",{className:"text-[10px] text-gray-600 font-bold",children:[e.weight," lbs"]})]},e.instanceId))}),m&&(0,mt.jsx)("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:(0,mt.jsxs)("div",{className:"w-full max-w-xs bg-website-default-900 border border-red-900/50 rounded-lg shadow-2xl flex flex-col max-h-[90%]",children:[(0,mt.jsxs)("div",{className:"flex justify-between items-center p-3 border-b border-white/10 bg-black/40",children:[(0,mt.jsx)("h4",{className:"text-[10px] font-black text-red-500 uppercase italic",children:"Item Inspection"}),(0,mt.jsx)("button",{onClick:()=>f(null),className:"text-gray-500 hover:text-white",children:(0,mt.jsx)(Ks,{size:14})})]}),(0,mt.jsxs)("div",{className:"p-4 overflow-y-auto space-y-4",children:[(0,mt.jsxs)("div",{className:"text-center",children:[(0,mt.jsx)("div",{className:"text-2xl mb-2",children:m.icon}),(0,mt.jsx)("h2",{className:"text-sm font-bold text-white uppercase tracking-tight",children:m.name}),(0,mt.jsx)("span",{className:"text-[9px] font-bold px-2 py-0.5 rounded uppercase "+("rare"===m.rarity?"bg-blue-900/40 text-blue-400":"bg-gray-800 text-gray-400"),children:m.rarity})]}),(0,mt.jsxs)("p",{className:"text-[11px] text-gray-400 leading-relaxed bg-black/20 p-2 rounded border border-white/5 italic",children:['"',m.description,'"']}),(null===(n=m.properties)||void 0===n?void 0:n.damage)&&(0,mt.jsx)("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(m.properties.damage).map(e=>{let[t,n]=e;return(0,mt.jsxs)("div",{className:"bg-black/40 p-2 rounded border border-white/5 text-center",children:[(0,mt.jsx)("div",{className:"text-[8px] uppercase text-gray-500",children:t}),(0,mt.jsx)("div",{className:"text-xs font-bold text-red-400",children:n})]},t)})}),(0,mt.jsxs)("div",{className:"space-y-2",children:[(0,mt.jsx)("span",{className:"text-[9px] font-black text-gray-500 uppercase",children:"Actions"}),(0,mt.jsx)("div",{className:"grid grid-cols-1 gap-1.5",children:Array.isArray(null===(r=m.properties)||void 0===r?void 0:r.uses)?m.properties.uses.map(e=>(0,mt.jsx)("button",{className:"w-full py-2 bg-red-900/20 border border-red-700/50 rounded text-[10px] font-black text-red-400 uppercase hover:bg-red-700 hover:text-white transition-all",onClick:()=>console.log(`Action: ${e} on ${m.name}`),children:e},e)):null!==(s=m.properties)&&void 0!==s&&s.uses&&"string"===typeof m.properties.uses?(0,mt.jsx)("button",{className:"w-full py-2 bg-red-900/20 border border-red-700/50 rounded text-[10px] font-black text-red-400 uppercase hover:bg-red-700 hover:text-white transition-all",onClick:()=>console.log(`Action: ${m.properties.uses}`),children:m.properties.uses}):(0,mt.jsx)("div",{className:"text-[10px] text-gray-600 italic py-2 text-center border border-dashed border-white/10 rounded",children:"No special actions"})})]})]})]})})]})}function Bl(e){let{effects:t}=e;const n=t&&t.length>0;return(0,mt.jsxs)("div",{className:"bg-website-default-800/90 border border-white/10 rounded-xl overflow-hidden shadow-2xl backdrop-blur-md flex flex-col min-h-[400px]",children:[(0,mt.jsxs)("div",{className:"p-4 bg-black/40 border-b border-white/5 flex justify-between items-center",children:[(0,mt.jsx)("h3",{className:"text-xs font-black text-red-600 uppercase italic tracking-widest",children:"Active Conditions & Effects"}),(0,mt.jsxs)("span",{className:"bg-red-900/20 text-red-500 text-[10px] font-black px-2 py-0.5 rounded border border-red-900/50",children:[(null===t||void 0===t?void 0:t.length)||0," ACTIVE"]})]}),(0,mt.jsx)("div",{className:"p-4 flex-1 overflow-y-auto space-y-3 custom-scrollbar",children:n?t.map((e,t)=>(0,mt.jsxs)("div",{className:"relative overflow-hidden bg-black/40 border border-white/5 rounded-lg p-4 group hover:border-red-900/40 transition-all",children:[(0,mt.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-red-600 shadow-[0_0_10px_rgba(220,38,38,0.5)]"}),(0,mt.jsxs)("div",{className:"flex justify-between items-start",children:[(0,mt.jsxs)("div",{className:"flex flex-col",children:[(0,mt.jsx)("h4",{className:"text-sm font-black text-white uppercase tracking-tight",children:e.name||"Unknown Effect"}),(0,mt.jsxs)("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-tighter mb-2",children:["Source: ",e.source||"Environmental"]})]}),(0,mt.jsx)("div",{className:"text-[9px] font-black bg-white/5 px-2 py-1 rounded text-gray-400 border border-white/5",children:e.duration||"Permanent"})]}),(0,mt.jsx)("p",{className:"text-xs text-gray-400 leading-relaxed italic",children:e.description||"No description provided for this effect."}),e.modifiers&&(0,mt.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:Object.entries(e.modifiers).map(e=>{let[t,n]=e;return(0,mt.jsxs)("span",{className:"text-[9px] font-black px-2 py-0.5 bg-red-900/20 text-red-400 rounded border border-red-900/30 uppercase",children:[t," ",n>=0?`+${n}`:n]},t)})})]},t)):(0,mt.jsxs)("div",{className:"h-full flex flex-col items-center justify-center py-20 opacity-20",children:[(0,mt.jsx)("div",{className:"w-16 h-16 border-4 border-dashed border-gray-500 rounded-full flex items-center justify-center mb-4 text-2xl",children:"\u2728"}),(0,mt.jsxs)("p",{className:"text-[10px] font-black uppercase tracking-widest text-center",children:["No active conditions or ",(0,mt.jsx)("br",{})," magical effects"]})]})}),(0,mt.jsx)("div",{className:"p-3 bg-black/20 border-t border-white/5",children:(0,mt.jsx)("p",{className:"text-[9px] text-gray-600 italic leading-tight",children:"Effects are automatically calculated into your total Ability Scores and Vitals."})})]})}const Hl={action:"Action",bonusAction:"Bonus Action",reaction:"Reaction",movement:"Movement",free:"Free",passive:"Passive",special:"Special"},Ul=e=>e?String(e).replace(/([a-z])([A-Z])/g,"$1 $2").replace(/[_-]+/g," ").replace(/\s+/g," ").trim().replace(/\b\w/g,e=>e.toUpperCase()):"";function ql(e){let{actions:t=[]}=e;const n=Array.isArray(t)?t.filter(e=>!1!==(null===e||void 0===e?void 0:e.enabled)):[];return(0,mt.jsxs)("div",{className:"bg-website-default-800/90 border border-white/10 rounded-xl overflow-hidden shadow-2xl backdrop-blur-md flex flex-col min-h-[320px]",children:[(0,mt.jsxs)("div",{className:"p-4 bg-black/40 border-b border-white/5 flex justify-between items-center",children:[(0,mt.jsx)("h3",{className:"text-xs font-black text-red-600 uppercase italic tracking-widest",children:"Available Actions"}),(0,mt.jsxs)("span",{className:"bg-red-900/20 text-red-500 text-[10px] font-black px-2 py-0.5 rounded border border-red-900/50",children:[n.length," READY"]})]}),(0,mt.jsxs)("div",{className:"p-4 flex-1 overflow-y-auto space-y-2",children:[0===n.length&&(0,mt.jsx)("div",{className:"h-full flex items-center justify-center text-[10px] uppercase tracking-widest text-gray-500",children:"No actions available"}),n.map((e,t)=>{const n=Hl[e.actionType]||Ul(e.actionType||"action"),r=Ul(e.source||"custom");return(0,mt.jsxs)("div",{className:"bg-black/30 border border-white/5 rounded-lg px-3 py-2",children:[(0,mt.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,mt.jsx)("div",{className:"text-xs font-bold text-white uppercase tracking-tight",children:e.name||"Unnamed Action"}),(0,mt.jsx)("div",{className:"text-[9px] text-red-400 font-black uppercase tracking-wider",children:n})]}),(0,mt.jsxs)("div",{className:"mt-1 text-[10px] text-gray-500 uppercase tracking-wider",children:["Source: ",r]}),e.description&&(0,mt.jsx)("p",{className:"mt-1 text-[11px] text-gray-400 leading-snug",children:e.description})]},e.id||`${e.name}_${t}`)})]})]})}function Wl(e){let{character:t,raceName:n,className:r}=e;if(!t)return null;const{experience:s,level:a,alignment:i,age:l,model:o,subclass:c}=t,d=(null===s||void 0===s?void 0:s.current)||0,u=(null===s||void 0===s?void 0:s.nextLevel)||1e3,h=Math.min(d/u*100,100);return(0,mt.jsxs)("div",{className:"bg-website-default-800/90 border border-white/10 rounded-xl overflow-hidden shadow-2xl backdrop-blur-md",children:[(0,mt.jsxs)("div",{className:"p-4 bg-black/40 border-b border-white/5 flex justify-between items-center",children:[(0,mt.jsxs)("div",{className:"flex flex-col text-left",children:[(0,mt.jsx)("span",{className:"text-[10px] font-black text-red-600 uppercase tracking-[0.2em]",children:"Identity"}),(0,mt.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,mt.jsx)("h2",{className:"text-xl font-black text-white italic uppercase tracking-tighter",children:n||"Race"}),(0,mt.jsx)("span",{className:"text-gray-600 text-sm font-bold",children:"/"}),(0,mt.jsx)("h2",{className:"text-xl font-black text-red-500 italic uppercase tracking-tighter",children:r||"Class"})]}),c&&(0,mt.jsx)("span",{className:"text-[10px] text-gray-500 font-bold uppercase italic tracking-widest mt-0.5",children:c})]}),(0,mt.jsxs)("div",{className:"bg-gradient-to-b from-[#1a1a1a] to-[#0a0a0a] border-2 border-red-900 shadow-[0_0_10px_rgba(153,27,27,0.3)] px-3 py-1 rounded-md flex flex-col items-center justify-center min-w-[55px]",children:[(0,mt.jsx)("span",{className:"text-[8px] font-black text-red-500 uppercase leading-none mb-1",children:"Level"}),(0,mt.jsx)("span",{className:"text-2xl font-black text-white leading-none",children:a})]})]}),(0,mt.jsx)("div",{className:"p-4 space-y-5",children:(0,mt.jsxs)("div",{className:"space-y-2",children:[(0,mt.jsxs)("div",{className:"flex justify-between items-end px-1",children:[(0,mt.jsx)("span",{className:"text-[9px] font-black text-gray-400 uppercase tracking-[0.15em]",children:"Progression"}),(0,mt.jsxs)("span",{className:"text-[10px] font-bold text-gray-200",children:[d.toLocaleString()," ",(0,mt.jsxs)("span",{className:"text-gray-500",children:["/ ",u.toLocaleString()," XP"]})]})]}),(0,mt.jsxs)("div",{className:"relative w-full h-3.5 bg-black rounded-full border border-white/10 overflow-hidden shadow-inner",children:[(0,mt.jsx)("div",{className:"absolute h-full bg-gradient-to-r from-red-950 via-red-600 to-red-400 shadow-[0_0_15px_rgba(220,38,38,0.4)] transition-all duration-1000 ease-out",style:{width:`${h}%`}}),(0,mt.jsx)("div",{className:"absolute inset-0 flex justify-around opacity-20 pointer-events-none",children:[...Array(10)].map((e,t)=>(0,mt.jsx)("div",{className:"w-[1px] h-full bg-white/30"},t))})]}),(0,mt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,mt.jsxs)("span",{className:"text-[8px] text-gray-600 font-bold uppercase tracking-tighter",children:[h.toFixed(1),"% to next level"]}),(0,mt.jsxs)("span",{className:"text-[9px] text-red-900 font-black uppercase italic",children:[u-d," XP REMAINING"]})]})]})})]})}function Kl(e){var t;let{character:n}=e;if(!n)return null;const{stories:r}=n,s=String((null===n||void 0===n||null===(t=n._id)||void 0===t?void 0:t.$oid)||(null===n||void 0===n?void 0:n._id)||(null===n||void 0===n?void 0:n.id)||"").substring(0,8),a=e=>{let{title:t,items:n}=e;return(0,mt.jsxs)("div",{className:"flex flex-col text-left",children:[(0,mt.jsx)("span",{className:"text-[10px] font-black text-red-600 uppercase tracking-widest mb-1",children:t}),(0,mt.jsx)("div",{className:"flex flex-wrap gap-1",children:n&&n.length>0?n.map((e,t)=>(0,mt.jsx)("span",{className:"text-[11px] bg-black/40 border border-white/5 px-2 py-0.5 rounded text-gray-300 italic",children:e},t)):(0,mt.jsx)("span",{className:"text-[10px] text-gray-600 italic",children:"None set"})})]})};return(0,mt.jsxs)("div",{className:"bg-website-default-800/90 border border-white/10 rounded-xl overflow-hidden shadow-2xl backdrop-blur-md flex flex-col min-h-[400px]",children:[(0,mt.jsxs)("div",{className:"p-4 bg-black/40 border-b border-white/5 flex justify-between items-center",children:[(0,mt.jsx)("h3",{className:"text-xs font-black text-red-600 uppercase italic tracking-widest",children:"Character Story & Persona"}),(0,mt.jsxs)("div",{className:"flex gap-1",children:[(0,mt.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-900/50"}),(0,mt.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-600/50"})]})]}),(0,mt.jsxs)("div",{className:"p-4 grid grid-cols-1 md:grid-cols-3 gap-4 bg-black/20 border-b border-white/5",children:[(0,mt.jsx)(a,{title:"Personality",items:null===r||void 0===r?void 0:r.personality}),(0,mt.jsx)(a,{title:"Ideals",items:null===r||void 0===r?void 0:r.ideals}),(0,mt.jsx)(a,{title:"Flaws",items:null===r||void 0===r?void 0:r.flaws})]}),(0,mt.jsxs)("div",{className:"relative p-6 flex-1",children:[(0,mt.jsx)("div",{className:"absolute left-0 top-6 bottom-6 w-1 bg-red-600 shadow-[0_0_10px_rgba(220,38,38,0.5)] rounded-r"}),(0,mt.jsxs)("div",{className:"pl-4 text-left",children:[(0,mt.jsx)("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest block mb-3",children:"Biography"}),(0,mt.jsx)("p",{className:"text-sm text-gray-300 leading-relaxed italic font-serif",children:(null===r||void 0===r?void 0:r.longStory)||"This adventurer's past remains shrouded in mystery. No written history has been recorded in the archives yet..."})]})]}),(0,mt.jsxs)("div",{className:"p-3 bg-black/40 border-t border-white/5 flex justify-between items-center px-6",children:[(0,mt.jsxs)("span",{className:"text-[9px] text-gray-600 font-bold uppercase italic",children:["Character ID: ",s||"unknown","..."]}),(0,mt.jsxs)("div",{className:"flex gap-2 opacity-20",children:[(0,mt.jsx)("div",{className:"w-1 h-1 rounded-full bg-white"}),(0,mt.jsx)("div",{className:"w-1 h-1 rounded-full bg-white"}),(0,mt.jsx)("div",{className:"w-1 h-1 rounded-full bg-white"})]})]})]})}const Yl=e=>e?String(e).replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim():"",Xl=(e,t,n)=>{const r=String((null===e||void 0===e?void 0:e[t])||"").trim(),s=String((null===e||void 0===e?void 0:e[n])||"").trim();return r?"other"===r&&s?s:r:""};function Vl(e){let{character:t}=e;if(!t)return null;const{gender:n,alignment:r,customization:s,model:a,age:i}=t,l=(e=>Array.isArray(e)?[...new Set(e.map(e=>String(e).trim()).filter(Boolean))]:"string"===typeof e?[...new Set(e.split(/[\n,]/g).map(e=>e.trim()).filter(Boolean))]:[])(null===s||void 0===s?void 0:s.additionalTraits),o=[{key:"skin",label:"Skin",value:Xl(s,"skinColor","skinColorCustom")},{key:"eyes",label:"Eyes",value:Xl(s,"eyeColor","eyeColorCustom")},{key:"hair",label:"Hair",value:Xl(s,"hairColor","hairColorCustom")}];return(0,mt.jsxs)("div",{className:"bg-website-default-800/90 border border-white/10 rounded-xl overflow-hidden shadow-2xl backdrop-blur-md",children:[(0,mt.jsxs)("div",{className:"p-4 bg-black/40 border-b border-white/5 flex justify-between items-center",children:[(0,mt.jsx)("h3",{className:"text-xs font-black text-red-600 uppercase italic tracking-widest underline decoration-red-900/50 underline-offset-4",children:"Appearance"}),(0,mt.jsxs)("span",{className:"text-[10px] text-gray-600 font-black uppercase tracking-tighter",children:[(null===a||void 0===a?void 0:a.size)||"Medium"," Size"]})]}),(0,mt.jsxs)("div",{className:"p-4 space-y-3",children:[(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,mt.jsxs)("div",{className:"flex flex-col text-left",children:[(0,mt.jsx)("span",{className:"text-[9px] font-black text-gray-500 uppercase tracking-tighter",children:"Gender"}),(0,mt.jsx)("span",{className:"text-sm font-bold text-gray-200",children:n||"-"})]}),(0,mt.jsxs)("div",{className:"flex flex-col text-right",children:[(0,mt.jsx)("span",{className:"text-[9px] font-black text-gray-500 uppercase tracking-tighter",children:"Alignment"}),(0,mt.jsx)("span",{className:"text-sm font-bold text-emerald-500 italic uppercase tracking-tighter",children:r||"-"})]})]}),(0,mt.jsx)("div",{className:"h-px bg-white/5 w-full"}),(0,mt.jsx)("div",{className:"grid grid-cols-3 gap-2 py-1",children:o.map(e=>{let{key:t,label:n,value:r}=e;const s=/^#[0-9a-fA-F]{6}$/.test(r||"");return(0,mt.jsxs)("div",{className:"bg-black/20 p-2 rounded border border-white/5 text-center group hover:border-red-900/30 transition-colors",children:[(0,mt.jsx)("span",{className:"block text-[8px] font-black text-gray-500 uppercase",children:n}),(0,mt.jsxs)("div",{className:"flex items-center justify-center gap-1 mt-1",children:[r&&(0,mt.jsx)("span",{className:"inline-block h-2.5 w-2.5 rounded-full border border-white/20",style:s?{backgroundColor:r}:void 0}),(0,mt.jsx)("span",{className:"text-xs font-bold text-gray-300 capitalize",children:r?s?r:Yl(r):"-"})]})]},t)})}),(0,mt.jsx)("div",{className:"h-px bg-white/5 w-full"}),(0,mt.jsx)("div",{className:"bg-black/40 p-3 rounded-lg border border-red-900/20 shadow-inner",children:(0,mt.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,mt.jsxs)("div",{className:"flex flex-col text-left border-r border-white/5",children:[(0,mt.jsx)("span",{className:"text-[8px] font-black text-gray-600 uppercase",children:"Age"}),(0,mt.jsxs)("span",{className:"text-xs font-bold text-white tracking-tight",children:[(null===i||void 0===i?void 0:i.years)||"-"," Years"]})]}),(0,mt.jsxs)("div",{className:"flex flex-col text-center border-r border-white/5",children:[(0,mt.jsx)("span",{className:"text-[8px] font-black text-gray-600 uppercase",children:"Height"}),(0,mt.jsxs)("span",{className:"text-xs font-bold text-white",children:[(null===a||void 0===a?void 0:a.height)||"-",'"']})]}),(0,mt.jsxs)("div",{className:"flex flex-col text-right",children:[(0,mt.jsx)("span",{className:"text-[8px] font-black text-gray-600 uppercase",children:"Weight"}),(0,mt.jsxs)("span",{className:"text-xs font-bold text-white",children:[(null===a||void 0===a?void 0:a.weight)||"-"," lbs"]})]})]})}),(0,mt.jsx)("div",{className:"h-px bg-white/5 w-full"}),(0,mt.jsxs)("div",{className:"space-y-2",children:[(0,mt.jsx)("span",{className:"text-[9px] font-black text-gray-500 uppercase tracking-tighter",children:"Additional Traits"}),(0,mt.jsxs)("div",{className:"flex flex-wrap gap-1",children:[0===l.length&&(0,mt.jsx)("span",{className:"text-[10px] text-gray-600 italic",children:"None set"}),l.map(e=>(0,mt.jsx)("span",{className:"text-[11px] bg-black/40 border border-white/5 px-2 py-0.5 rounded text-gray-300 italic",children:e},e))]})]})]}),(0,mt.jsx)("div",{className:"h-1 w-full bg-gradient-to-r from-transparent via-red-900/50 to-transparent"})]})}function Ql(e){let{stats:t}=e;if(!t)return null;const n=e=>{const t=Math.floor((e-10)/2);return t>=0?`+${t}`:t},r=Object.entries(t).filter(e=>{let[t,n]=e;return"_id"!==t&&"LUCK"!==t&&"object"===typeof n}),s=t.LUCK,a=e=>{var t;let{name:r,data:s,fullWidth:a=!1}=e;return(0,mt.jsxs)("div",{className:"relative group bg-black/40 p-3 rounded-lg border border-white/5 hover:border-red-900/40 hover:bg-red-900/5 transition-all duration-300 text-center shadow-inner "+(a?"col-span-2":""),children:[(0,mt.jsx)("span",{className:"block text-[10px] text-gray-500 font-black tracking-widest uppercase mb-1 group-hover:text-red-500 transition-colors",children:r}),(0,mt.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,mt.jsx)("span",{className:(a?"text-5xl":"text-4xl")+" font-black text-white leading-none tracking-tighter",children:s.total}),(0,mt.jsx)("div",{className:"mt-1 px-2 py-0.5 bg-white/5 rounded border border-white/10 text-[10px] font-black text-gray-300 group-hover:border-red-900/50 group-hover:text-white transition-all",children:n(s.total)})]}),(0,mt.jsxs)("div",{className:"text-[9px] text-gray-600 font-bold mt-2 uppercase tracking-tighter",children:["Base: ",(0,mt.jsx)("span",{className:"text-gray-400",children:(null===(t=s.permMods)||void 0===t?void 0:t.base)||0})]})]})};return(0,mt.jsxs)("div",{className:"bg-website-default-800/90 border border-white/10 rounded-xl overflow-hidden shadow-2xl backdrop-blur-md",children:[(0,mt.jsxs)("div",{className:"p-4 bg-black/40 border-b border-white/5 flex justify-between items-center",children:[(0,mt.jsx)("h3",{className:"text-xs font-black text-red-600 uppercase italic tracking-widest underline decoration-red-900/50 underline-offset-4",children:"Attributes"}),(0,mt.jsx)("span",{className:"text-[10px] text-gray-600 font-black uppercase tracking-tighter",children:"Core Stats"})]}),(0,mt.jsxs)("div",{className:"p-4 grid grid-cols-2 gap-3",children:[r.map(e=>{let[t,n]=e;return(0,mt.jsx)(a,{name:t,data:n},t)}),s&&(0,mt.jsx)("div",{className:"col-span-2 mt-2 pt-2 border-t border-white/5",children:(0,mt.jsx)(a,{name:"LUCK",data:s,fullWidth:!0})})]}),(0,mt.jsx)("div",{className:"h-1 w-full bg-gradient-to-r from-transparent via-red-950 to-transparent opacity-30"})]})}function Gl(e){let{character:t}=e;if(!t)return null;const{HP:n,MP:r,STA:s,water:a,food:i}=t,l=e=>{let{label:t,current:n,max:r,temp:s=0,color:a,glow:i}=e;const l=Math.min(n/r*100,100),o=s>0?Math.min(s/r*100,100):0;return(0,mt.jsxs)("div",{className:"space-y-1.5 mb-4",children:[(0,mt.jsxs)("div",{className:"flex justify-between items-end px-1",children:[(0,mt.jsx)("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:t}),(0,mt.jsxs)("div",{className:"text-[11px] font-bold text-white",children:[s>0&&(0,mt.jsxs)("span",{className:"text-yellow-500",children:["+",s," "]}),n," ",(0,mt.jsxs)("span",{className:"text-gray-500",children:["/ ",r]})]})]}),(0,mt.jsxs)("div",{className:"relative h-3 bg-black rounded-full border border-white/10 overflow-hidden shadow-inner",children:[(0,mt.jsx)("div",{className:`absolute h-full ${a} ${i} transition-all duration-500 ease-out`,style:{width:`${l}%`}}),s>0&&(0,mt.jsx)("div",{className:"absolute h-full bg-yellow-500/30 border-r border-yellow-400 opacity-50",style:{width:`${o}%`,left:`${l}%`}})]})]})};return(0,mt.jsxs)("div",{className:"bg-website-default-800/90 border border-white/10 rounded-xl overflow-hidden shadow-2xl backdrop-blur-md",children:[(0,mt.jsxs)("div",{className:"p-4 bg-black/40 border-b border-white/5 flex justify-between items-center",children:[(0,mt.jsx)("h3",{className:"text-xs font-black text-red-600 uppercase italic tracking-widest underline decoration-red-900/50 underline-offset-4",children:"Vitals"}),(0,mt.jsxs)("div",{className:"flex gap-1.5",children:[(0,mt.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-red-600 animate-pulse"}),(0,mt.jsx)("span",{className:"text-[9px] text-gray-500 font-black uppercase",children:"Live Status"})]})]}),(0,mt.jsxs)("div",{className:"p-4 pb-2",children:[(0,mt.jsx)(l,{label:"Health",current:n.current,max:n.max,temp:n.temp,color:"bg-red-600",glow:"shadow-[0_0_12px_rgba(220,38,38,0.5)]"}),(0,mt.jsx)(l,{label:"Mana",current:r.current,max:r.max,color:"bg-blue-600",glow:"shadow-[0_0_12px_rgba(37,99,235,0.5)]"}),(0,mt.jsx)(l,{label:"Stamina",current:s.current,max:s.max,color:"bg-emerald-600",glow:"shadow-[0_0_12px_rgba(5,150,105,0.5)]"})]}),(0,mt.jsxs)("div",{className:"grid grid-cols-2 gap-px bg-white/5 border-t border-white/5",children:[(0,mt.jsxs)("div",{className:"bg-black/40 p-3 text-center group hover:bg-blue-900/10 transition-colors",children:[(0,mt.jsx)("p",{className:"text-[9px] text-gray-500 font-black uppercase tracking-widest mb-1",children:"Hydration"}),(0,mt.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,mt.jsx)("span",{className:"text-blue-400 text-sm",children:"\ud83d\udca7"}),(0,mt.jsxs)("p",{className:"text-md font-black text-white italic",children:[a.current," ",(0,mt.jsxs)("span",{className:"text-gray-600 text-[10px]",children:["/ ",a.max]})]})]})]}),(0,mt.jsxs)("div",{className:"bg-black/40 p-3 text-center group hover:bg-orange-900/10 transition-colors",children:[(0,mt.jsx)("p",{className:"text-[9px] text-gray-500 font-black uppercase tracking-widest mb-1",children:"Nutrition"}),(0,mt.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,mt.jsx)("span",{className:"text-orange-400 text-sm",children:"\ud83c\udf56"}),(0,mt.jsxs)("p",{className:"text-md font-black text-white italic",children:[i.current," ",(0,mt.jsxs)("span",{className:"text-gray-600 text-[10px]",children:["/ ",i.max]})]})]})]})]}),(0,mt.jsx)("div",{className:"h-1 w-full bg-gradient-to-r from-red-600/0 via-red-600/20 to-red-600/0"})]})}const Jl=["STR","DEX","CON","INT","WIS","CHA","LUCK"],Zl={current:0,max:0,temp:0},eo={current:0,max:0},to={head:["head","innerhead","outerhead"],body:["body","innerbody","outerbody"],back:["back"],arms:["arms"],hands:["hands"],legs:["legs","innerlegs","outerlegs"],feet:["feet","innerfeet","outerfeet"],weapon:["weapon"],fists:["fists"],neck:["neck"],waist:["waist"],fingers:["fingers"],trinkets:["trinkets"],face:["face"],eyes:["eyes"]},no=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Number(e);return Number.isFinite(n)?n:t},ro=e=>{if(!e)return"";if("string"===typeof e)return e;if("number"===typeof e)return String(e);if("object"===typeof e){var t;if(e.$oid)return String(e.$oid);if(null!==(t=e._id)&&void 0!==t&&t.$oid)return String(e._id.$oid);if(e._id)return String(e._id);if(e.id)return String(e.id);if("function"===typeof e.toString)return e.toString()}return String(e)},so=(e,t,n)=>{const r=t||n||e||Zl;return{current:no(r.current,0),max:no(r.max,0),temp:no(r.temp,0)}},ao=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={};return Jl.forEach(s=>{var a,i,l,o,c,d,u,h,p;const m=null===e||void 0===e?void 0:e[s],f=null===t||void 0===t?void 0:t[s],b="object"===typeof f?null!==(a=null!==(i=null===f||void 0===f?void 0:f.total)&&void 0!==i?i:null===f||void 0===f?void 0:f.score)&&void 0!==a?a:null===f||void 0===f?void 0:f.value:f,g="object"===typeof m?null!==(l=null!==(o=null===m||void 0===m?void 0:m.total)&&void 0!==o?o:null===m||void 0===m?void 0:m.score)&&void 0!==l?l:null===m||void 0===m?void 0:m.value:m,v=no(b,no(g,0)),x=no(null!==(c=null!==(d=null!==(u=null===f||void 0===f||null===(h=f.permMods)||void 0===h?void 0:h.base)&&void 0!==u?u:null===n||void 0===n?void 0:n[s])&&void 0!==d?d:null===m||void 0===m||null===(p=m.permMods)||void 0===p?void 0:p.base)&&void 0!==c?c:v,v);r[s]={..."object"===typeof m?m:{},..."object"===typeof f?f:{},total:v,permMods:{...(null===m||void 0===m?void 0:m.permMods)||{},...(null===f||void 0===f?void 0:f.permMods)||{},base:x}}}),r},io=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=new Map;(t||[]).forEach(e=>{const t=ro((null===e||void 0===e?void 0:e._id)||(null===e||void 0===e?void 0:e.id));t&&n.set(t,e)});const r={};return Object.entries(to).forEach(t=>{let[s,a]=t;const i=a.flatMap(t=>(null===e||void 0===e?void 0:e[t])||[]);r[s]=i.map(e=>{const t=ro(e),r=n.get(t);return r||(t?{id:t,_id:t,name:`Item ${t.slice(0,8)}`}:null)}).filter(Boolean)}),r},lo=e=>{switch(String(e||"").trim().toLowerCase().replace(/\s+/g,"")){case"bonus":case"bonusaction":return"bonusAction";case"reaction":return"reaction";case"move":case"movement":return"movement";case"free":case"freeaction":return"free";case"passive":return"passive";case"special":return"special";default:return"action"}},oo=e=>String(e||"").trim().toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),co=e=>Array.isArray(e)?e:"string"===typeof e?[e]:e&&"object"===typeof e?Object.entries(e).map(e=>{let[t,n]=e;return n&&"object"===typeof n&&!Array.isArray(n)?{...n,name:n.name||t}:"string"===typeof n?{name:t,description:n}:{name:t}}):[],uo=(e,t)=>{const n=[...co(e),...co(t)],r=new Set,s=[];return n.forEach((e,t)=>{const n="string"===typeof e?{name:e,source:"custom"}:e&&"object"===typeof e?e:null;if(!n)return;const a=String(n.name||n.label||n.title||"").trim();if(!a)return;const i={id:String(n.id||oo(a)||`action_${t+1}`),name:a,actionType:lo(n.actionType||n.type),source:String(n.source||n.sourceType||"custom"),sourceId:String(n.sourceId||""),description:String(n.description||""),cost:String(n.cost||""),requirements:Array.isArray(n.requirements)?n.requirements.map(e=>String(e).trim()).filter(Boolean):[],enabled:!1!==n.enabled},l=`${i.id}|${i.actionType}|${i.source}`.toLowerCase();r.has(l)||(r.add(l),s.push(i))}),s};function ho(){var e,n,r,s;const a=(0,t.useContext)(Sr),i=ne(),{characterID:l}=se(),o=localStorage.getItem("player_ID"),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)([]),[p,m]=(0,t.useState)(""),[f,b]=(0,t.useState)(null),[g,v]=(0,t.useState)(!1),[x,y]=(0,t.useState)(!1),[w,j]=(0,t.useState)(!0),[N,k]=(0,t.useState)(null);(0,t.useEffect)(()=>{if(!a||!l||!o)return j(!1),void v(!1);let e=!1;return v(!1),j(!0),k(null),a.emit("character_getViewContexts",{playerID:o,characterID:l},t=>{var n;if(e)return;if(null===t||void 0===t||!t.success)return d(null),h([]),m(""),y(!1),k((null===t||void 0===t?void 0:t.message)||"Failed to load character contexts"),j(!1),void v(!1);const r=Array.isArray(t.contexts)?t.contexts:[],s=(null===(n=r[0])||void 0===n?void 0:n.key)||"",a=t.defaultContextKey||s;h(r),y(Boolean(t.canEditBase)),m(a),k(null),v(!0)}),()=>{e=!0}},[a,l,o]),(0,t.useEffect)(()=>{if(!a||!l||!o||!g||!p)return;let e=!1;j(!0),k(null);const t=p.startsWith("campaign:")?p.slice(9):"";return a.emit("character_getViewData",{playerID:o,characterID:l,contextKey:p,campaignID:t},t=>{if(e)return;if(null===t||void 0===t||!t.success)return d(null),b(null),k((null===t||void 0===t?void 0:t.message)||"Failed to load character"),void j(!1);const n=((e,t)=>{var n;const r=e||{},s=t||{},a=r.inv||{};return{...r,...s,_id:r._id||s._id||s.id,id:String(s.id||r.id||r._id||""),race:s.race||r.race,classType:s.classType||r.classType,subclass:(null===(n=s.subclassType)||void 0===n?void 0:n.name)||r.subclass,stats:ao(r.stats,s.stats,s._baseStats),HP:so(r.HP,s.HP,s._baseHP),MP:so(r.MP,s.MP,s._baseMP),STA:so(r.STA,s.STA,s._baseSTA),water:r.water||eo,food:r.food||eo,effects:r.effects||s.statusEffects||[],actions:uo(r.actions,s.actions),inv:{...a,gp:no(a.gp,0),items:a.items||{},equipment:io(a.equipment||{},s.equippedItems||[])}}})(t.rawCharacter||{},t.builtCharacter||{});d(n),b(t.context||null),y(Boolean(t.canEditBase)),k(null),j(!1)}),()=>{e=!0}},[a,l,o,g,p]);const S=(0,t.useMemo)(()=>u.find(e=>e.key===p)||f||null,[u,p,f]);if(w)return(0,mt.jsx)("div",{className:"text-white p-10",children:"Loading..."});if(N)return(0,mt.jsxs)("div",{className:"text-red-400 p-10",children:["Error: ",N]});if(!c)return(0,mt.jsx)("div",{className:"text-white p-10",children:"Character not found."});const A=(null===c||void 0===c||null===(e=c.race)||void 0===e?void 0:e.name)||(null===c||void 0===c?void 0:c.raceName)||("string"===typeof(null===c||void 0===c?void 0:c.race)?c.race:void 0),C=(null===c||void 0===c||null===(n=c.classType)||void 0===n?void 0:n.name)||(null===c||void 0===c?void 0:c.className)||("string"===typeof(null===c||void 0===c?void 0:c.classType)?c.classType:void 0),E=ro((null===c||void 0===c?void 0:c._id)||(null===c||void 0===c?void 0:c.id)||l),M=sessionStorage.getItem("session_ID")||"default",I="base"===p,_="campaign"===(null===S||void 0===S?void 0:S.type)?(null===S||void 0===S?void 0:S.campaignName)||"Campaign":"Base Character";return(0,mt.jsxs)(Zs,{className:"bg-website-default-900",children:[(0,mt.jsx)(Zs.Header,{title:c.name||"Character"}),(0,mt.jsxs)(Zs.Center,{className:"p-6 text-left",children:[(0,mt.jsxs)("div",{className:"mb-5 flex flex-wrap items-center justify-end gap-3",children:[(0,mt.jsxs)("div",{className:"text-xs uppercase tracking-widest text-website-default-400",children:["Viewing: ",_]}),(0,mt.jsx)("select",{value:p,onChange:e=>m(String(e.target.value||"")),className:"rounded-md border border-website-default-600 bg-website-default-800 px-3 py-2 text-sm text-website-default-100",children:u.map(e=>(0,mt.jsx)("option",{value:e.key,children:"base"===e.type?"Base Character":`Campaign: ${e.campaignName||"Campaign"}`},e.key))}),x&&I&&(0,mt.jsx)("button",{type:"button",onClick:()=>i(`/ISK/${M}/character/edit/${E}`),className:"rounded-md border border-website-highlights-500 bg-website-highlights-600/20 px-3 py-2 text-sm text-website-highlights-200 hover:bg-website-highlights-600/30",children:"Edit Character"})]}),(0,mt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_2fr_1fr] gap-6",children:[(0,mt.jsxs)("div",{className:"space-y-4",children:[(0,mt.jsx)("div",{children:(0,mt.jsx)(Wl,{character:c,raceName:A,className:C})}),(0,mt.jsx)("div",{className:"bg-website-default-800/50 p-4 rounded-xl border border-white/5 shadow-xl",children:(0,mt.jsx)(Gl,{character:c})}),(0,mt.jsx)("div",{children:(0,mt.jsx)(Bl,{effects:null===c||void 0===c?void 0:c.effects})}),(0,mt.jsx)("div",{children:(0,mt.jsx)(ql,{actions:null===c||void 0===c?void 0:c.actions})})]}),(0,mt.jsxs)("div",{className:"space-y-4",children:[(0,mt.jsx)("div",{className:"bg-website-default-800/50 p-4 rounded-xl border border-white/5 shadow-xl",children:(0,mt.jsx)(Ql,{stats:c.stats})}),(0,mt.jsx)("div",{className:"col-span-3",children:(0,mt.jsx)(Fl,{equipment:null===c||void 0===c||null===(r=c.inv)||void 0===r?void 0:r.equipment,gp:null===c||void 0===c||null===(s=c.inv)||void 0===s?void 0:s.gp})})]}),(0,mt.jsxs)("div",{className:"space-y-4",children:[(0,mt.jsx)("div",{className:"bg-website-default-800/50 p-4 rounded-xl border border-white/5 shadow-xl",children:(0,mt.jsx)(Vl,{character:c})}),(0,mt.jsx)("div",{children:(0,mt.jsx)($l,{inventory:null===c||void 0===c?void 0:c.inv,characterWeight:null===c||void 0===c?void 0:c.weight})}),(0,mt.jsx)("div",{className:"bg-website-default-800/50 p-4 rounded-xl border border-white/5 shadow-xl",children:(0,mt.jsx)(Kl,{character:c})})]})]})]}),(0,mt.jsx)(Zs.Footer,{children:(0,mt.jsxs)("div",{className:"text-[10px] text-gray-600 uppercase tracking-widest",children:["Character ID: ",E]})})]})}const po=function(){const[e,n]=(0,t.useState)(!1),[r,s]=(0,t.useState)(null);function a(){return(0,mt.jsx)(Jt,{children:(0,mt.jsx)(Za,{})})}return(0,t.useEffect)(()=>(console.log("Attempting to connect to socket..."),kr.on("connect",()=>{console.log("Connected with ID:",kr.id);const e=sessionStorage.getItem("session_ID"),t=e||kr.id.toString();e||sessionStorage.setItem("session_ID",t);const r=localStorage.getItem("player_ID");r&&(kr.emit("login_tokenSave",{playerID:r,sessionID:t},()=>{}),kr.emit("playerData_logOn",{playerID:r})),n(!0),s(null)}),kr.on("disconnect",e=>{console.log("Disconnected:",e),n(!1)}),kr.on("welcome",e=>{console.log("Server says:",e.message)}),kr.on("connect_error",e=>{console.error("Socket connection error:",e.message),s(e.message),n(!1)}),kr.connected||kr.connect(),()=>{localStorage.getItem("player_ID")&&kr.emit("playerData_logOff",{playerID:localStorage.getItem("player_ID")}),kr.off("connect"),kr.off("disconnect"),kr.off("welcome"),kr.off("connect_error")}),[]),(0,mt.jsxs)(Sr.Provider,{value:kr,children:[r&&(0,mt.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,background:"orange",color:"white",padding:"10px",textAlign:"center",zIndex:9999},children:["Connection Error: ",r,". Retrying..."]}),(0,mt.jsx)(at,{children:(0,mt.jsxs)(Se,{children:[(0,mt.jsx)(Ne,{path:"/",element:(0,mt.jsx)(Ir,{})}),(0,mt.jsx)(Ne,{path:"/login",element:(0,mt.jsx)(Mr,{})}),(0,mt.jsx)(Ne,{path:"/signup",element:(0,mt.jsx)(Lr,{})}),(0,mt.jsx)(Ne,{path:"/settings",element:(0,mt.jsx)(Ss,{})}),(0,mt.jsx)(Ne,{path:"/test",element:(0,mt.jsx)(Or,{})}),(0,mt.jsx)(Ne,{path:"/test2",element:(0,mt.jsx)(xs,{})}),(0,mt.jsxs)(Ne,{path:"/ISK/:sessionID",element:(0,mt.jsx)(ft,{}),children:[(0,mt.jsx)(Ne,{path:"home",element:(0,mt.jsx)(_r,{})}),(0,mt.jsx)(Ne,{path:"settings",element:(0,mt.jsx)(Ss,{})}),(0,mt.jsx)(Ne,{path:"lore",element:(0,mt.jsx)(na,{})}),(0,mt.jsx)(Ne,{path:"lore/:topic",element:(0,mt.jsx)(na,{})}),(0,mt.jsxs)(Ne,{path:"character",children:[(0,mt.jsx)(Ne,{index:!0,element:(0,mt.jsx)(Ai,{})}),(0,mt.jsx)(Ne,{path:"creation",element:(0,mt.jsx)(Rl,{})}),(0,mt.jsx)(Ne,{path:"view/:characterID",element:(0,mt.jsx)(ho,{})}),(0,mt.jsx)(Ne,{path:"edit/:characterID",element:(0,mt.jsx)(Rl,{})})]}),(0,mt.jsxs)(Ne,{path:"lobby",element:(0,mt.jsx)(ei,{}),children:[(0,mt.jsx)(Ne,{index:!0,element:(0,mt.jsx)(pi,{})}),(0,mt.jsx)(Ne,{path:"menu",element:(0,mt.jsx)(pi,{})}),(0,mt.jsx)(Ne,{path:"join",element:(0,mt.jsx)(mi,{})}),(0,mt.jsx)(Ne,{path:"create",element:(0,mt.jsx)(fi,{})})]}),(0,mt.jsx)(Ne,{path:"game/:gameID",element:(0,mt.jsx)(a,{})})]})]})})]})},mo=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:s,getLCP:a,getTTFB:i}=t;n(e),r(e),s(e),a(e),i(e)})};r.createRoot(document.getElementById("root")).render((0,mt.jsx)(t.StrictMode,{children:(0,mt.jsx)(po,{})})),mo()})()})();
//# sourceMappingURL=main.26b2dd6b.js.map